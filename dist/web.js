function t(t){return Object.keys(t).reduce(((e,i)=>{var r=t[i];return e[i]=Object.assign({},r),!s(r.value)||function(t){return"[object Function]"===Object.prototype.toString.call(t)}(r.value)||Array.isArray(r.value)||(e[i].value=Object.assign({},r.value)),Array.isArray(r.value)&&(e[i].value=r.value.slice(0)),e}),{})}function e(t){if(t)try{return JSON.parse(t)}catch(e){return t}}function i(t,e,i){if(null==i||!1===i)return t.removeAttribute(e);let s=JSON.stringify(i);t.__updating[e]=!0,"true"===s&&(s=""),t.setAttribute(e,s),Promise.resolve().then((()=>delete t.__updating[e]))}function s(t){return null!=t&&("object"==typeof t||"function"==typeof t)}let r;function a(s,a){const n=Object.keys(a);return class extends s{static get observedAttributes(){return n.map((t=>a[t].attribute))}constructor(){super(),this.__initialized=!1,this.__released=!1,this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props={}}connectedCallback(){if(!this.__initialized){this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props=function(s,r){const a=t(r);return Object.keys(r).forEach((t=>{const r=a[t],n=s.getAttribute(r.attribute),o=s[t];n&&(r.value=r.parse?e(n):n),null!=o&&(r.value=Array.isArray(o)?o.slice(0):o),r.reflect&&i(s,r.attribute,r.value),Object.defineProperty(s,t,{get:()=>r.value,set(e){var s=r.value;r.value=e,r.reflect&&i(this,r.attribute,r.value);for(let i=0,r=this.__propertyChangedCallbacks.length;i<r;i++)this.__propertyChangedCallbacks[i](t,e,s)},enumerable:!0,configurable:!0})})),a}(this,a);var s=function(t){return Object.keys(t).reduce(((e,i)=>(e[i]=t[i].value,e)),{})}(this.props),n=this.Component,o=r;try{(r=this).__initialized=!0,function(t){return"function"==typeof t&&0===t.toString().indexOf("class")}(n)?new n(s,{element:this}):n(s,{element:this})}finally{r=o}}}async disconnectedCallback(){if(await Promise.resolve(),!this.isConnected){this.__propertyChangedCallbacks.length=0;for(var t=null;t=this.__releaseCallbacks.pop();)t(this);delete this.__initialized,this.__released=!0}}attributeChangedCallback(t,i,s){!this.__initialized||this.__updating[t]||(t=this.lookupProp(t))in a&&(null==s&&!this[t]||(this[t]=a[t].parse?e(s):s))}lookupProp(t){if(a)return n.find((e=>t===e||t===a[e].attribute))}get renderRoot(){return this.shadowRoot||this.attachShadow({mode:"open"})}addReleaseCallback(t){this.__releaseCallbacks.push(t)}addPropertyChangedCallback(t){this.__propertyChangedCallbacks.push(t)}}}function n(t,e={},i={}){const{BaseElement:r=HTMLElement,extension:n}=i;return i=>{if(!t)throw new Error("tag is required to register a Component");let o=customElements.get(t);return o?o.prototype.Component=i:((o=a(r,function(t){return t?Object.keys(t).reduce(((e,i)=>{var r=t[i];return e[i]=s(r)&&"value"in r?r:{value:r},e[i].attribute||(e[i].attribute=function(t){return t.replace(/\.?([A-Z]+)/g,((t,e)=>"-"+e.toLowerCase())).replace("_","-").replace(/^-/,"")}(i)),e[i].parse="parse"in e[i]?e[i].parse:"string"!=typeof e[i].value,e}),{}):{}}(e))).prototype.Component=i,o.prototype.registeredTag=t,customElements.define(t,o,n)),o}}const o=Symbol("solid-proxy"),l=Symbol("solid-track"),h={equals:(t,e)=>t===e};let d=D;const c=1,u=2,p={owned:null,cleanups:null,context:null,owner:null};var g=null;let f=null,m=null,v=null,b=null,y=0;function w(t,e){const i=m,s=g,r=0===t.length,a=r?p:{owned:null,cleanups:null,context:null,owner:void 0===e?s:e},n=r?t:()=>t((()=>E((()=>N(a)))));g=a,m=null;try{return I(n,!0)}finally{m=i,g=s}}function x(t,e){const i={value:t,observers:null,observerSlots:null,comparator:(e=e?Object.assign({},h,e):h).equals||void 0};return[T.bind(i),t=>("function"==typeof t&&(t=t(i.value)),P(i,t))]}function A(t,e,i){M(R(t,e,!1,c))}function _(t,e,i){d=F,(t=R(t,e,!1,c)).user=!0,b?b.push(t):M(t)}function C(t,e,i){return i=i?Object.assign({},h,i):h,(t=R(t,e,!0,0)).observers=null,t.observerSlots=null,t.comparator=i.equals||void 0,M(t),T.bind(t)}function E(t){if(null===m)return t();var e=m;m=null;try{return t()}finally{m=e}}function k(t){_((()=>E(t)))}function S(t){return null!==g&&(null===g.cleanups?g.cleanups=[t]:g.cleanups.push(t)),t}function T(){var t;return this.sources&&this.state&&(this.state===c?M(this):(t=v,v=null,I((()=>O(this)),!1),v=t)),m&&(t=this.observers?this.observers.length:0,m.sources?(m.sources.push(this),m.sourceSlots.push(t)):(m.sources=[this],m.sourceSlots=[t]),this.observers?(this.observers.push(m),this.observerSlots.push(m.sources.length-1)):(this.observers=[m],this.observerSlots=[m.sources.length-1])),this.value}function P(t,e,i){var s=t.value;return t.comparator&&t.comparator(s,e)||(t.value=e,t.observers&&t.observers.length&&I((()=>{for(let s=0;s<t.observers.length;s+=1){var e=t.observers[s],i=f&&f.running;i&&f.disposed.has(e),(i?e.tState:e.state)||((e.pure?v:b).push(e),e.observers&&B(e)),i||(e.state=c)}if(1e6<v.length)throw v=[],new Error}),!1)),e}function M(t){var e,i,s;t.fn&&(N(t),e=g,i=m,s=y,function(t,e,i){let s;try{s=t.fn(e)}catch(e){return t.pure&&(t.state=c,t.owned&&t.owned.forEach(N),t.owned=null),t.updatedAt=i+1,z(e)}(!t.updatedAt||t.updatedAt<=i)&&(null!=t.updatedAt&&"observers"in t?P(t,s):t.value=s,t.updatedAt=i)}(m=g=t,t.value,s),m=i,g=e)}function R(t,e,i,s=c,r){return t={fn:t,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:g,context:null,pure:i},null!==g&&g!==p&&(g.owned?g.owned.push(t):g.owned=[t]),t}function L(t){if(0!==t.state){if(t.state===u)return O(t);if(t.suspense&&E(t.suspense.inFallback))return t.suspense.effects.push(t);const i=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<y);)t.state&&i.push(t);for(let s=i.length-1;0<=s;s--){var e;(t=i[s]).state===c?M(t):t.state===u&&(e=v,v=null,I((()=>O(t,i[0])),!1),v=e)}}}function I(t,e){if(v)return t();let i=!1;e||(v=[]),b?i=!0:b=[],y++;try{var s=t();return function(t){if(v&&(D(v),v=null),!t){const t=b;b=null,t.length&&I((()=>d(t)),!1)}}(i),s}catch(t){i||(b=null),v=null,z(t)}}function D(t){for(let e=0;e<t.length;e++)L(t[e])}function F(t){let e,i=0;for(e=0;e<t.length;e++){var s=t[e];s.user?t[i++]=s:L(s)}for(e=0;e<i;e++)L(t[e])}function O(t,e){for(let r=t.state=0;r<t.sources.length;r+=1){var i,s=t.sources[r];s.sources&&((i=s.state)===c?s!==e&&(!s.updatedAt||s.updatedAt<y)&&L(s):i===u&&O(s,e))}}function B(t){for(let i=0;i<t.observers.length;i+=1){var e=t.observers[i];e.state||(e.state=u,(e.pure?v:b).push(e),e.observers&&B(e))}}function N(t){let e;if(t.sources)for(;t.sources.length;){var i,s,r=t.sources.pop(),a=t.sourceSlots.pop(),n=r.observers;n&&n.length&&(i=n.pop(),s=r.observerSlots.pop(),a<n.length)&&(n[i.sourceSlots[s]=a]=i,r.observerSlots[a]=s)}if(t.owned){for(e=t.owned.length-1;0<=e;e--)N(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;0<=e;e--)t.cleanups[e]();t.cleanups=null}t.state=0,t.context=null}function z(t){throw t}const j=Symbol("fallback");function H(t){for(let e=0;e<t.length;e++)t[e]()}function U(t,e){return E((()=>t(e||{})))}function q(){return!0}const V={get:(t,e,i)=>e===o?i:t.get(e),has:(t,e)=>e===o||t.has(e),set:q,deleteProperty:q,getOwnPropertyDescriptor:(t,e)=>({configurable:!0,enumerable:!0,get:()=>t.get(e),set:q,deleteProperty:q}),ownKeys:t=>t.keys()};function $(t){return(t="function"==typeof t?t():t)||{}}function G(...t){let e=!1;for(let s=0;s<t.length;s++){var i=t[s];e=e||!!i&&o in i,t[s]="function"==typeof i?(e=!0,C(i)):i}if(e)return new Proxy({get(e){for(let s=t.length-1;0<=s;s--){var i=$(t[s])[e];if(void 0!==i)return i}},has(e){for(let i=t.length-1;0<=i;i--)if(e in $(t[i]))return!0;return!1},keys(){var e=[];for(let i=0;i<t.length;i++)e.push(...Object.keys($(t[i])));return[...new Set(e)]}},V);var s={};for(let e=t.length-1;0<=e;e--)if(t[e])for(const i in Object.getOwnPropertyDescriptors(t[e]))i in s||Object.defineProperty(s,i,{enumerable:!0,get(){for(let s=t.length-1;0<=s;s--){var e=(t[s]||{})[i];if(void 0!==e)return e}}});return s}function W(t,...e){const i=new Set(e.flat());var s;if(o in t)return(s=e.map((e=>new Proxy({get:i=>e.includes(i)?t[i]:void 0,has:i=>e.includes(i)&&i in t,keys:()=>e.filter((e=>e in t))},V)))).push(new Proxy({get:e=>i.has(e)?void 0:t[e],has:e=>!i.has(e)&&e in t,keys:()=>Object.keys(t).filter((t=>!i.has(t)))},V)),s;const r=Object.getOwnPropertyDescriptors(t);return e.push(Object.keys(r).filter((t=>!i.has(t)))),e.map((e=>{var i={};for(let s=0;s<e.length;s++){const a=e[s];a in t&&Object.defineProperty(i,a,r[a]||{get:()=>t[a],set:()=>!0,enumerable:!0})}return i}))}function K(t){var e="fallback"in t&&{fallback:()=>t.fallback};return C(function(t,e,i={}){let s=[],r=[],a=[],n=0,o=1<e.length?[]:null;return S((()=>H(a))),()=>{let h,d,c=t()||[];return c[l],E((()=>{let t,e,l,p,g,f,m,v,b,y=c.length;if(0===y)0!==n&&(H(a),a=[],s=[],r=[],n=0,o=o&&[]),i.fallback&&(s=[j],r[0]=w((t=>(a[0]=t,i.fallback()))),n=1);else if(0===n){for(r=new Array(y),d=0;d<y;d++)s[d]=c[d],r[d]=w(u);n=y}else{for(l=new Array(y),p=new Array(y),o&&(g=new Array(y)),f=0,m=Math.min(n,y);f<m&&s[f]===c[f];f++);for(m=n-1,v=y-1;m>=f&&v>=f&&s[m]===c[v];m--,v--)l[v]=r[m],p[v]=a[m],o&&(g[v]=o[m]);for(t=new Map,e=new Array(v+1),d=v;d>=f;d--)b=c[d],h=t.get(b),e[d]=void 0===h?-1:h,t.set(b,d);for(h=f;h<=m;h++)b=s[h],void 0!==(d=t.get(b))&&-1!==d?(l[d]=r[h],p[d]=a[h],o&&(g[d]=o[h]),d=e[d],t.set(b,d)):a[h]();for(d=f;d<y;d++)d in l?(r[d]=l[d],a[d]=p[d],o&&(o[d]=g[d],o[d](d))):r[d]=w(u);r=r.slice(0,n=y),s=c.slice(0)}return r}));function u(t){var i;return a[d]=t,o?([t,i]=x(d),o[d]=i,e(c[d],t)):e(c[d])}}}((()=>t.each),t.children,e||void 0))}function X(t){const e=t.keyed,i=C((()=>t.when),void 0,{equals:(t,i)=>e?t===i:!t==!i});return C((()=>{const s=i();if(s){const r=t.children;return"function"==typeof r&&0<r.length?E((()=>r(e?s:()=>{if(E(i))return t.when;throw(t=>`Stale read from <${t}>.`)("Show")}))):r}return t.fallback}),void 0,void 0)}const Y=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline","allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"]),J=new Set(["innerHTML","textContent","innerText","children"]),Q=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Z=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});const tt=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),et={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};const it="_$DX_DELEGATE";function st(t,e,i){let s;const r=()=>{var e=document.createElement("template");return e.innerHTML=t,(i?e.content.firstChild:e.content).firstChild};return(e=e?()=>(s=s||r()).cloneNode(!0):()=>E((()=>document.importNode(s=s||r(),!0)))).cloneNode=e}function rt(t,e=window.document){var i=e[it]||(e[it]=new Set);for(let r=0,a=t.length;r<a;r++){var s=t[r];i.has(s)||(i.add(s),e.addEventListener(s,ut))}}function at(t,e,i){null==i?t.removeAttribute(e):t.setAttribute(e,i)}function nt(t,e){null==e?t.removeAttribute("class"):t.className=e}function ot(t,e={},i,s){const r={};return s||A((()=>r.children=pt(t,e.children,r.children))),A((()=>e.ref&&e.ref(t))),A((()=>function(t,e,i,s,r={},a=!1){e=e||{};for(const s in r)s in e||"children"!==s&&(r[s]=ct(t,s,null,r[s],i,a));for(const o in e){var n;"children"===o?s||pt(t,e.children):(n=e[o],r[o]=ct(t,o,n,r[o],i,a))}}(t,e,i,!0,r,!0))),r}function lt(t,e,i){return E((()=>t(e,i)))}function ht(t,e,i,s){if(void 0!==i&&(s=s||[]),"function"!=typeof e)return pt(t,e,s,i);A((s=>pt(t,e(),s,i)),s)}function dt(t,e,i){var s=e.trim().split(/\s+/);for(let e=0,r=s.length;e<r;e++)t.classList.toggle(s[e],i)}function ct(t,e,i,s,r,a){let n,o,l,h,d;var c;return"style"===e?function(t,e,i){if(!e)return i?at(t,"style"):e;var s=t.style;if("string"==typeof e)return s.cssText=e;let r,a;for(a in"string"==typeof i&&(s.cssText=i=void 0),e=e||{},i=i||{})null==e[a]&&s.removeProperty(a),delete i[a];for(a in e)(r=e[a])!==i[a]&&(s.setProperty(a,r),i[a]=r);return i}(t,i,s):"classList"===e?function(t,e,i={}){var s=Object.keys(e||{}),r=Object.keys(i);let a,n;for(a=0,n=r.length;a<n;a++){var o=r[a];o&&"undefined"!==o&&!e[o]&&(dt(t,o,!1),delete i[o])}for(a=0,n=s.length;a<n;a++){var l=s[a],h=!!e[l];l&&"undefined"!==l&&i[l]!==h&&h&&(dt(t,l,!0),i[l]=h)}return i}(t,i,s):i===s?s:("ref"===e?a||i(t):"on:"===e.slice(0,3)?(a=e.slice(3),s&&t.removeEventListener(a,s),i&&t.addEventListener(a,i)):"oncapture:"===e.slice(0,10)?(a=e.slice(10),s&&t.removeEventListener(a,s,!0),i&&t.addEventListener(a,i,!0)):"on"===e.slice(0,2)?(a=e.slice(2).toLowerCase(),!(c=tt.has(a))&&s&&(s=Array.isArray(s)?s[0]:s,t.removeEventListener(a,s)),(c||i)&&(function(t,e,i,s){if(s)Array.isArray(i)?(t["$$"+e]=i[0],t[`$$${e}Data`]=i[1]):t["$$"+e]=i;else if(Array.isArray(i)){const s=i[0];t.addEventListener(e,i[0]=e=>s.call(t,i[1],e))}else t.addEventListener(e,i)}(t,a,i,c),c)&&rt([a])):"attr:"===e.slice(0,5)?at(t,e.slice(5),i):(d="prop:"===e.slice(0,5))||(l=J.has(e))||!r&&((h=function(t,e){return"object"==typeof(t=Z[t])?t[e]?t.$:void 0:t}(e,t.tagName))||(o=Y.has(e)))||(n=t.nodeName.includes("-"))?(d&&(e=e.slice(5),o=!0),"class"===e||"className"===e?nt(t,i):!n||o||l?t[h||e]=i:t[function(t){return t.toLowerCase().replace(/-([a-z])/g,((t,e)=>e.toUpperCase()))}(e)]=i):(s=r&&-1<e.indexOf(":")&&et[e.split(":")[0]])?function(t,e,i,s){null==s?t.removeAttributeNS(e,i):t.setAttributeNS(e,i,s)}(t,s,e,i):at(t,Q[e]||e,i),i)}function ut(t){var e="$$"+t.type;let i=t.composedPath&&t.composedPath()[0]||t.target;for(t.target!==i&&Object.defineProperty(t,"target",{configurable:!0,value:i}),Object.defineProperty(t,"currentTarget",{configurable:!0,get:()=>i||document});i;){var s=i[e];if(s&&!i.disabled){var r=i[e+"Data"];if(void 0!==r?s.call(i,r,t):s.call(i,t),t.cancelBubble)return}i=i._$host||i.parentNode||i.host}}function pt(t,e,i,s,r){for(;"function"==typeof i;)i=i();if(e!==i){var a=typeof e,n=void 0!==s;if(t=n&&i[0]&&i[0].parentNode||t,"string"==a||"number"==a)if("number"==a&&(e=e.toString()),n){let r=i[0];r&&3===r.nodeType?r.data=e:r=document.createTextNode(e),i=mt(t,i,s,r)}else i=""!==i&&"string"==typeof i?t.firstChild.data=e:t.textContent=e;else if(null==e||"boolean"==a)i=mt(t,i,s);else{if("function"==a)return A((()=>{let r=e();for(;"function"==typeof r;)r=r();i=pt(t,r,i,s)})),()=>i;if(Array.isArray(e)){const o=[];if(a=i&&Array.isArray(i),gt(o,e,i,r))return A((()=>i=pt(t,o,i,s,!0))),()=>i;if(0===o.length){if(i=mt(t,i,s),n)return i}else a?0===i.length?ft(t,o,s):function(t,e,i){let s=i.length,r=e.length,a=s,n=0,o=0,l=e[r-1].nextSibling,h=null;for(;n<r||o<a;)if(e[n]===i[o])n++,o++;else{for(;e[r-1]===i[a-1];)r--,a--;if(r===n)for(var d=a<s?o?i[o-1].nextSibling:i[a-o]:l;o<a;)t.insertBefore(i[o++],d);else if(a===o)for(;n<r;)h&&h.has(e[n])||e[n].remove(),n++;else if(e[n]===i[a-1]&&i[o]===e[r-1]){var c=e[--r].nextSibling;t.insertBefore(i[o++],e[n++].nextSibling),t.insertBefore(i[--a],c),e[r]=i[a]}else{if(!h){h=new Map;let t=o;for(;t<a;)h.set(i[t],t++)}var u=h.get(e[n]);if(null!=u)if(o<u&&u<a){let s,l=n,d=1;for(;++l<r&&l<a&&null!=(s=h.get(e[l]))&&s===u+d;)d++;if(d>u-o)for(var p=e[n];o<u;)t.insertBefore(i[o++],p);else t.replaceChild(i[o++],e[n++])}else n++;else e[n++].remove()}}}(t,i,o):(i&&mt(t),ft(t,o));i=o}else if(e instanceof Node){if(Array.isArray(i)){if(n)return i=mt(t,i,s,e);mt(t,i,null,e)}else null!=i&&""!==i&&t.firstChild?t.replaceChild(e,t.firstChild):t.appendChild(e);i=e}else console.warn("Unrecognized value. Skipped inserting",e)}}return i}function gt(t,e,i,s){let r=!1;for(let n=0,o=e.length;n<o;n++){let o=e[n],l=i&&i[n];if(o instanceof Node)t.push(o);else if(null!=o&&!0!==o&&!1!==o)if(Array.isArray(o))r=gt(t,o,l)||r;else if("function"==typeof o)if(s){for(;"function"==typeof o;)o=o();r=gt(t,Array.isArray(o)?o:[o],Array.isArray(l)?l:[l])||r}else t.push(o),r=!0;else{var a=String(o);l&&3===l.nodeType?(l.data=a,t.push(l)):t.push(document.createTextNode(a))}}return r}function ft(t,e,i=null){for(let s=0,r=e.length;s<r;s++)t.insertBefore(e[s],i)}function mt(t,e,i,s){if(void 0===i)return t.textContent="";var r=s||document.createTextNode("");if(e.length){let s=!1;for(let o=e.length-1;0<=o;o--){var a,n=e[o];r!==n?(a=n.parentNode===t,s||o?a&&n.remove():a?t.replaceChild(r,n):t.insertBefore(r,i)):s=!0}}else t.insertBefore(r,i);return[r]}function vt(t){return(e,i)=>{const s=i.element;return w((r=>{const a=function(t){var e=Object.keys(t),i={};for(let s=0;s<e.length;s++){const[r,a]=x(t[e[s]]);Object.defineProperty(i,e[s],{get:r,set(t){a((()=>t))}})}return i}(e);s.addPropertyChangedCallback(((t,e)=>a[t]=e)),s.addReleaseCallback((()=>{s.renderRoot.textContent="",r()}));var n=t(a,i);return ht(s.renderRoot,n)}),function(t){if(t.assignedSlot&&t.assignedSlot._$owner)return t.assignedSlot._$owner;let e=t.parentNode;for(;e&&!e._$owner&&(!e.assignedSlot||!e.assignedSlot._$owner);)e=e.parentNode;return(e&&e.assignedSlot?e.assignedSlot:t)._$owner}(s))}}function bt(t,e,i){return 2===arguments.length&&(i=e,e={}),n(t,e)(vt(i))}const yt={chatflowid:"",apiHost:void 0,fileTextExtractionUrl:{default:"",image:""},chatflowConfig:void 0,theme:void 0};var wt,xt,At='/*! tailwindcss v3.3.1 | MIT License | https://tailwindcss.com*/*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}html{-webkit-text-size-adjust:100%;font-feature-settings:normal;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-variation-settings:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{color:inherit;font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af;opacity:1}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]{display:none}*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.pointer-events-none{pointer-events:none}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{inset:0}.bottom-20{bottom:80px}.bottom-24{bottom:96px}.left-0{left:0}.top-0{top:0}.z-10{z-index:10}.my-2{margin-bottom:8px;margin-top:8px}.-ml-1{margin-left:-4px}.mb-2{margin-bottom:8px}.ml-1{margin-left:4px}.ml-2{margin-left:8px}.mr-1{margin-right:4px}.mr-2{margin-right:8px}.mr-3{margin-right:12px}.flex{display:flex}.\\!hidden{display:none!important}.hidden{display:none}.h-10{height:40px}.h-12{height:48px}.h-16{height:64px}.h-2{height:8px}.h-32{height:128px}.h-5{height:20px}.h-6{height:24px}.h-7{height:28px}.h-9{height:36px}.h-\\[calc\\(100vh-117px\\)\\]{height:calc(100vh - 117px)}.h-full{height:100%}.max-h-\\[704px\\]{max-height:704px}.min-h-\\[calc\\(100vh-117px\\)\\]{min-height:calc(100vh - 117px)}.min-h-full{min-height:100%}.w-10{width:40px}.w-12{width:48px}.w-16{width:64px}.w-2{width:8px}.w-5{width:20px}.w-6{width:24px}.w-7{width:28px}.w-9{width:36px}.w-full{width:100%}.min-w-full{min-width:100%}.max-w-full{max-width:100%}.flex-1{flex:1 1 0%}.flex-shrink-0{flex-shrink:0}.-rotate-180{--tw-rotate:-180deg}.-rotate-180,.rotate-0{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-0{--tw-rotate:0deg}.scale-0{--tw-scale-x:0;--tw-scale-y:0}.scale-0,.scale-100{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-100{--tw-scale-x:1;--tw-scale-y:1}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.animate-fade-in{animation:fade-in .3s ease-out}@keyframes spin{to{transform:rotate(1turn)}}.animate-spin{animation:spin 1s linear infinite}.flex-col{flex-direction:column}.items-start{align-items:flex-start}.items-end{align-items:flex-end}.items-center{align-items:center}.justify-start{justify-content:flex-start}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-2{gap:8px}.gap-6{gap:24px}.gap-8{gap:32px}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.overflow-y-scroll{overflow-y:scroll}.scroll-smooth{scroll-behavior:smooth}.whitespace-pre-wrap{white-space:pre-wrap}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:8px}.border{border-width:1px}.bg-black{--tw-bg-opacity:1;background-color:rgb(0 0 0/var(--tw-bg-opacity))}.bg-transparent{background-color:transparent}.bg-opacity-50{--tw-bg-opacity:0.5}.bg-cover{background-size:cover}.bg-center{background-position:50%}.fill-transparent{fill:transparent}.stroke-2{stroke-width:2}.object-cover{-o-object-fit:cover;object-fit:cover}.p-4{padding:16px}.px-2{padding-left:8px;padding-right:8px}.px-3{padding-left:12px;padding-right:12px}.px-4{padding-left:16px;padding-right:16px}.py-1{padding-bottom:4px;padding-top:4px}.py-2{padding-bottom:8px;padding-top:8px}.py-4{padding-bottom:16px;padding-top:16px}.pt-20{padding-top:80px}.text-left{text-align:left}.text-center{text-align:center}.text-base{font-size:16px;line-height:24px}.text-sm{font-size:14px;line-height:20px}.text-xl{font-size:20px;line-height:28px}.font-semibold{font-weight:600}.text-white{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.opacity-0{opacity:0}.opacity-100{opacity:1}.opacity-25{opacity:.25}.opacity-75{opacity:.75}.shadow-md{--tw-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color),0 2px 4px -2px var(--tw-shadow-color)}.shadow-md,.shadow-xl{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.shadow-xl{--tw-shadow:0 20px 25px -5px rgba(0,0,0,.1),0 8px 10px -6px rgba(0,0,0,.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color),0 8px 10px -6px var(--tw-shadow-color)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition{transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-all{transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-opacity{transition-duration:.15s;transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-transform{transition-duration:.15s;transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1)}.duration-200{transition-duration:.2s}.ease-out{transition-timing-function:cubic-bezier(0,0,.2,1)}@import url("https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@100;300;400;500;600;700&family=Inter:wght@100;300;400;500;600;700&display=swap");:host{--chatbot-container-bg-image:none;--chatbot-container-bg-color:transparent;--chatbot-container-font-family:"Open Sans";--chatbot-button-bg-color:#0042da;--chatbot-button-color:#fff;--chatbot-host-bubble-bg-color:#f7f8ff;--chatbot-host-bubble-color:#303235;--chatbot-guest-bubble-bg-color:#3b81f6;--chatbot-guest-bubble-color:#fff;--chatbot-input-bg-color:#fff;--chatbot-input-color:#303235;--chatbot-input-placeholder-color:#9095a0;--chatbot-header-bg-color:#fff;--chatbot-header-color:#303235;--chatbot-border-radius:6px;--PhoneInputCountryFlag-borderColor:transparent;--PhoneInput-color--focus:transparent}a{color:#16bed7;font-weight:500}a:hover{text-decoration:underline}pre{word-wrap:break-word;font-size:13px;margin:5px;overflow:auto;padding:5px;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;width:auto}.string{color:green}.number{color:#ff8c00}.boolean{color:blue}.null{color:#f0f}.key{color:#002b36}.scrollable-container::-webkit-scrollbar{display:none}.scrollable-container{-ms-overflow-style:none;scrollbar-width:none}.text-fade-in{transition:opacity .4s ease-in .2s}.bubble-typing{transition:width .4s ease-out,height .4s ease-out}.bubble1,.bubble2,.bubble3{background-color:var(--chatbot-host-bubble-color);opacity:.5}.bubble1,.bubble2{animation:chatBubbles 1s ease-in-out infinite}.bubble2{animation-delay:.3s}.bubble3{animation:chatBubbles 1s ease-in-out infinite;animation-delay:.5s}@keyframes chatBubbles{0%{transform:translateY(0)}50%{transform:translateY(-5px)}to{transform:translateY(0)}}button,input,textarea{font-weight:300}.slate-a{text-decoration:underline}.slate-html-container>div{min-height:24px}.slate-bold{font-weight:700}.slate-italic{font-style:oblique}.slate-underline{text-decoration:underline}.text-input::-moz-placeholder{color:#9095a0!important;opacity:1!important}.text-input::placeholder{color:#9095a0!important;opacity:1!important}.chatbot-container{background-color:var(--chatbot-container-bg-color);background-image:var(--chatbot-container-bg-image);font-family:Open Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}.chatbot-button{background-color:#0042da;border:1px solid #0042da;border-radius:var(--chatbot-border-radius);color:var(--chatbot-button-color)}.chatbot-button.selectable{border:1px solid #0042da}.chatbot-button.selectable,.chatbot-host-bubble{background-color:#f7f8ff;color:var(--chatbot-host-bubble-color)}.chatbot-host-bubble>.bubble-typing{background-color:#f7f8ff;border:var(--chatbot-host-bubble-border);border-radius:6px}.chatbot-host-bubble iframe,.chatbot-host-bubble img,.chatbot-host-bubble video{border-radius:var(--chatbot-border-radius)}.chatbot-guest-bubble{background-color:#3b81f6;border-radius:6px;color:var(--chatbot-guest-bubble-color)}.chatbot-file-bubble{border-radius:0 0 5px 5px;font-family:IBM Plex Sans;font-size:12px;font-style:normal;font-weight:500;gap:6px;letter-spacing:.5px;line-height:120%;max-width:304px;min-width:304px}.chatbot-loading-icon-animation{animation:spin 1.75s linear infinite}.chatbot-input{background-color:#fff;border:1px solid #d3d3d3;border-radius:var(--chatbot-border-radius);color:#303235;filter:drop-shadow(0 4px 4px rgba(42,118,126,.05))}.upload-file-button{border-radius:4px;font-family:Inter;font-size:14px;font-style:normal;font-weight:700;line-height:18px;padding:16px 14px;text-transform:uppercase}.upload-file-button:disabled{opacity:.5}.modal-backdrop{background-color:rgba(0,0,0,.7);height:100vh;left:0;position:fixed;top:0;width:100%}.modal,.modal-backdrop{align-items:center;display:flex;justify-content:center}.modal{background-color:#fff;border-radius:16px;flex-direction:column;min-height:332px;min-width:300px;padding:32px 16px}.modal-title{color:#3c3c3b;font-family:Inter;font-size:16px;font-style:normal;font-weight:700;line-height:normal;text-align:center}.chatbot-input-error-message{color:#303235}.chatbot-button>.send-icon{fill:var(--chatbot-button-color)}.chatbot-chat-view{max-width:800px}.ping span{background-color:#0042da}.rating-icon-container svg{stroke:#0042da;fill:#f7f8ff;height:42px;transition:fill .1s ease-out;width:42px}.rating-icon-container.selected svg{fill:#0042da}.rating-icon-container:hover svg{filter:brightness(.9)}.rating-icon-container:active svg{filter:brightness(.75)}.upload-progress-bar{background-color:#0042da;border-radius:var(--chatbot-border-radius)}.total-files-indicator{background-color:#0042da;color:var(--chatbot-button-color);font-size:10px}.chatbot-upload-input{transition:border-color .1s ease-out}.chatbot-upload-input.dragging-over{border-color:#0042da}.secondary-button{background-color:#f7f8ff;border-radius:var(--chatbot-border-radius);color:var(--chatbot-host-bubble-color)}.chatbot-country-select{color:#303235}.chatbot-country-select,.chatbot-date-input{background-color:#fff;border-radius:var(--chatbot-border-radius)}.chatbot-date-input{color:#303235;color-scheme:light}.chatbot-popup-blocked-toast{border-radius:var(--chatbot-border-radius)}.messagelist{border-radius:.5rem;height:100%;overflow-y:scroll;width:100%}.messagelistloading{display:flex;justify-content:center;margin-top:1rem;width:100%}.usermessage{padding:1rem 1.5rem}.usermessagewaiting-light{background:linear-gradient(270deg,#ede7f6,#e3f2fd,#ede7f6);background-position:-100% 0;background-size:200% 200%}.usermessagewaiting-dark,.usermessagewaiting-light{animation:loading-gradient 2s ease-in-out infinite;animation-direction:alternate;animation-name:loading-gradient;padding:1rem 1.5rem}.usermessagewaiting-dark{background:linear-gradient(270deg,#2e2352,#1d3d60,#2e2352);background-position:-100% 0;background-size:200% 200%;color:#ececf1}@keyframes loading-gradient{0%{background-position:-100% 0}to{background-position:100% 0}}.apimessage{animation:fadein .5s;padding:1rem 1.5rem}@keyframes fadein{0%{opacity:0}to{opacity:1}}.apimessage,.usermessage,.usermessagewaiting{display:flex}.markdownanswer{line-height:1.75}.markdownanswer a:hover{opacity:.8}.markdownanswer a{color:#16bed7;font-weight:500}.markdownanswer code{color:#15cb19;font-weight:500;white-space:pre-wrap!important}.markdownanswer ol,.markdownanswer ul{margin:1rem}.boticon,.usericon{border-radius:1rem;margin-right:1rem}.markdownanswer h1,.markdownanswer h2,.markdownanswer h3{font-size:inherit}.center{flex-direction:column;padding:10px;position:relative}.center,.cloud{align-items:center;display:flex;justify-content:center}.cloud{border-radius:.5rem;height:calc(100% - 50px);width:400px}input{background-color:transparent;border:none;font-family:Poppins,sans-serif;padding:10px}.header-button{align-items:center;background:#2a767e;border:1px solid #fafafa;border-radius:4px;color:#fff;display:flex;flex-shrink:0;font-family:Inter;font-size:12px;font-style:normal;font-weight:700;gap:10px;height:34px;justify-content:center;line-height:18px;padding:9px 14px;position:fixed;right:7px;text-transform:uppercase;top:16px;width:174px;z-index:10}.dropzone{background:#f8f8ff;border:.787px dashed rgba(42,118,126,.3);border-radius:5px;flex-shrink:0;height:216.939px;width:100%}.dropzone h3{color:#3c3c3b;padding:4px;text-align:center}.dropzone h3,.dropzone h3>a{font-family:Inter;font-size:12.59px;font-style:normal;font-weight:600;line-height:18.885px}.dropzone h3>a{color:#2a767e;cursor:pointer;text-decoration-line:underline}.dropzone p{color:#676767;font-family:IBM Plex Sans;font-size:9.443px;font-style:normal;font-weight:400;line-height:14.164px;padding:4px;text-align:center}.upload-message{color:#3c3c3b;font-family:Inter;font-size:14px;font-style:normal;font-weight:600;line-height:normal}.upload-file-item{background:#fff;border:1px solid #11af22;border-radius:4px;flex-shrink:0;height:36px;max-width:300px;min-width:300px;padding:0 10px}.upload-file-item p{color:#3c3c3b;font-family:IBM Plex Sans;font-size:12px;font-style:normal;font-weight:400;line-height:18px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%}.hover\\:scale-110:hover{--tw-scale-x:1.1;--tw-scale-y:1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:brightness-90:hover{--tw-brightness:brightness(.9);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.focus\\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.active\\:scale-95:active{--tw-scale-x:.95;--tw-scale-y:.95;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.active\\:brightness-75:active{--tw-brightness:brightness(.75);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.disabled\\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\\:opacity-50:disabled{opacity:.5}.disabled\\:brightness-100:disabled{--tw-brightness:brightness(1);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}@media (min-width:640px){.sm\\:right-5{right:20px}.sm\\:my-8{margin-bottom:32px;margin-top:32px}.sm\\:w-\\[400px\\]{width:400px}.sm\\:w-full{width:100%}.sm\\:max-w-lg{max-width:512px}.sm\\:p-0{padding:0}}';const _t=t=>null==t,Ct=t=>null!=t,Et=async t=>{try{var e="string"==typeof t?t:t.url,i=await fetch(e,{method:"string"==typeof t?"GET":t.method,mode:"cors",headers:"string"!=typeof t&&Ct(t.body)?{"Content-Type":"application/json"}:void 0,body:"string"!=typeof t&&Ct(t.body)?JSON.stringify(t.body):void 0});let r;var s=i.headers.get("Content-Type");if(r=s&&s.includes("application/json")?await i.json():await i.text(),i.ok)return{data:r};{let t;throw t="object"==typeof r&&"error"in r?r.error:r||i.statusText}}catch(t){return console.error(t),{error:t}}},kt=st('<svg viewBox="0 0 24 24"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">'),St=st('<img alt="Bubble button icon">'),Tt=st('<button part="button"><svg viewBox="0 0 24 24"><path fill-rule="evenodd" clip-rule="evenodd" d="M18.601 8.39897C18.269 8.06702 17.7309 8.06702 17.3989 8.39897L12 13.7979L6.60099 8.39897C6.26904 8.06702 5.73086 8.06702 5.39891 8.39897C5.06696 8.73091 5.06696 9.2691 5.39891 9.60105L11.3989 15.601C11.7309 15.933 12.269 15.933 12.601 15.601L18.601 9.60105C18.9329 9.2691 18.9329 8.73091 18.601 8.39897Z">'),Pt=t=>{{const e=Tt(),i=e.firstChild;return e.$$click=()=>t.toggleBot(),e.style.setProperty("z-index","42424242"),ht(e,U(X,{get when(){return _t(t.customIconSrc)},keyed:!0,get children(){const e=kt();return A((i=>{var s=t.iconColor??"white",r="stroke-2 fill-transparent absolute duration-200 transition "+(t.isBotOpened?"scale-0 opacity-0":"scale-100 opacity-100")+("large"===t.size?" w-9":" w-7");return s!==i._v$&&(null!=(i._v$=s)?e.style.setProperty("stroke",s):e.style.removeProperty("stroke")),r!==i._v$2&&at(e,"class",i._v$2=r),i}),{_v$:void 0,_v$2:void 0}),e}}),i),ht(e,U(X,{get when(){return t.customIconSrc},get children(){const e=St();return A((i=>{var s=t.customIconSrc,r="rounded-full object-cover"+(t.isBotOpened?"scale-0 opacity-0":"scale-100 opacity-100")+("large"===t.size?" w-9 h-9":" w-7 h-7");return s!==i._v$3&&at(e,"src",i._v$3=s),r!==i._v$4&&nt(e,i._v$4=r),i}),{_v$3:void 0,_v$4:void 0}),e}}),i),A((s=>{var r="fixed shadow-md rounded-full hover:scale-110 active:scale-95 transition-transform duration-200 flex justify-center items-center animate-fade-in"+("large"===t.size?" w-16 h-16":" w-12 h-12"),a=t.backgroundColor??"#3B81F6",n=t.right?t.right.toString()+"px":"20px",o=t.bottom?t.bottom.toString()+"px":"20px",l=t.iconColor??"white",h="absolute duration-200 transition "+(t.isBotOpened?"scale-100 rotate-0 opacity-100":"scale-0 -rotate-180 opacity-0")+("large"===t.size?" w-9":" w-7");return r!==s._v$5&&nt(e,s._v$5=r),a!==s._v$6&&(null!=(s._v$6=a)?e.style.setProperty("background-color",a):e.style.removeProperty("background-color")),n!==s._v$7&&(null!=(s._v$7=n)?e.style.setProperty("right",n):e.style.removeProperty("right")),o!==s._v$8&&(null!=(s._v$8=o)?e.style.setProperty("bottom",o):e.style.removeProperty("bottom")),l!==s._v$9&&(null!=(s._v$9=l)?i.style.setProperty("fill",l):i.style.removeProperty("fill")),h!==s._v$10&&at(i,"class",s._v$10=h),s}),{_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0,_v$10:void 0}),e}},Mt=(rt(["click"]),({chatflowid:t,apiHost:e="http://localhost:3000",body:i})=>Et({method:"POST",url:e+"/api/v1/prediction/"+t,body:i})),Rt=st('<input class="focus:outline-none bg-transparent px-4 py-4 flex-1 w-full text-input" type="text">'),Lt=t=>{const[e,i]=W(t,["ref","onInput"]);return(s=Rt()).$$input=t=>e.onInput(t.currentTarget.value),"function"==typeof(r=t.ref)?lt(r,s):t.ref=s,ot(s,G({get disabled(){return t.disabled},get style(){return{"font-size":t.fontSize?t.fontSize+"px":"16px"}}},i),!1,!1),s;var s,r},It=(rt(["input"]),st('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="19px"><path d="M476.59 227.05l-.16-.07L49.35 49.84A23.56 23.56 0 0027.14 52 24.65 24.65 0 0016 72.59v113.29a24 24 0 0019.52 23.57l232.93 43.07a4 4 0 010 7.86L35.53 303.45A24 24 0 0016 327v113.31A23.57 23.57 0 0026.59 460a23.94 23.94 0 0013.22 4 24.55 24.55 0 009.52-1.93L476.4 285.94l.19-.09a32 32 0 000-58.8z">')),Dt=t=>{return ot(e=It(),G({get style(){return{fill:t.color??"#3B81F6"}}},t),!0,!0),e;var e},Ft=st('<button type="submit">'),Ot=st('<svg><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">'),Bt=t=>{return ot(e=Ft(),G({get disabled(){return t.isDisabled||t.isLoading}},t,{get class(){return"py-2 px-4 justify-center font-semibold text-white focus:outline-none flex items-center disabled:opacity-50 disabled:cursor-not-allowed disabled:brightness-100 transition-all filter hover:brightness-90 active:brightness-75 chatbot-button "+t.class},style:{background:"transparent",border:"none"}}),!1,!0),ht(e,U(X,{get when(){return!t.isLoading},get fallback(){return U(Nt,{class:"text-white"})},get children(){return U(Dt,{get color(){return t.sendButtonColor},get class(){return"send-icon flex "+(t.disableIcon?"hidden":"")}})}})),e;var e},Nt=t=>{return ot(e=Ot(),G(t,{get class(){return"animate-spin -ml-1 mr-3 h-5 w-5 "+t.class},xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","data-testid":"loading-spinner"}),!0,!0),e;var e},[zt,jt]=x(),Ht=st("<span>Send"),Ut=st('<div class="flex items-end justify-between chatbot-input" data-testid="input">'),qt=t=>{const[e,i]=x(t.defaultValue??"");let s;const r=t=>i(t),a=()=>{""!==e()&&s?.reportValidity()&&t.onSubmit(e()),i("")},n=t=>{var e=t.isComposing||229===t.keyCode;"Enter"!==t.key||e||a()};k((()=>{!zt()&&s&&s.focus()}));{const i=Ut();return i.$$keydown=n,i.style.setProperty("border-top","1px solid #eeeeee"),i.style.setProperty("left","20px"),i.style.setProperty("right","20px"),i.style.setProperty("bottom","75px"),i.style.setProperty("margin","auto"),i.style.setProperty("z-index","1000"),ht(i,U(Lt,{get disabled(){return t.disabled},ref(t){"function"==typeof s?s(t):s=t},onInput:r,get value(){return e()},get fontSize(){return t.fontSize},get placeholder(){return t.placeholder??"Type your question"}}),null),ht(i,U(Bt,{get sendButtonColor(){return t.sendButtonColor},type:"button",get isDisabled(){return""===e()},class:"my-2 ml-2","on:click":a,get children(){var t=Ht();return t.style.setProperty("font-family","Poppins, sans-serif"),t}}),null),A((e=>{var s=t.backgroundColor??"#ffffff",r=t.textColor??"#303235";return s!==e._v$&&(null!=(e._v$=s)?i.style.setProperty("background-color",s):i.style.removeProperty("background-color")),r!==e._v$2&&(null!=(e._v$2=r)?i.style.setProperty("color",r):i.style.removeProperty("color")),e}),{_v$:void 0,_v$2:void 0}),i}},Vt=(rt(["keydown"]),st('<figure data-testid="default-avatar"><svg width="75" height="75" viewBox="0 0 75 75" fill="none" xmlns="http://www.w3.org/2000/svg"><mask id="mask0" x="0" y="0" mask-type="alpha"><circle cx="37.5" cy="37.5" r="37.5" fill="#0042DA"></circle></mask><g mask="url(#mask0)"><rect x="-30" y="-43" width="131" height="154" fill="#0042DA"></rect><rect x="2.50413" y="120.333" width="81.5597" height="86.4577" rx="2.5" transform="rotate(-52.6423 2.50413 120.333)" stroke="#FED23D" stroke-width="5"></rect><circle cx="76.5" cy="-1.5" r="29" stroke="#FF8E20" stroke-width="5"></circle><path d="M-49.8224 22L-15.5 -40.7879L18.8224 22H-49.8224Z" stroke="#F7F8FF" stroke-width="5">')),$t=()=>{{const t=Vt(),e=t.firstChild;return A((i=>{var s="flex justify-center items-center rounded-full text-white relative "+(zt()?"w-6 h-6 text-sm":"w-10 h-10 text-xl"),r="absolute top-0 left-0 "+(zt()?" w-6 h-6 text-sm":"w-full h-full text-xl");return s!==i._v$&&nt(t,i._v$=s),r!==i._v$2&&at(e,"class",i._v$2=r),i}),{_v$:void 0,_v$2:void 0}),t}},Gt=st('<figure><img alt="Bot avatar" class="rounded-full object-cover w-full h-full">'),Wt=t=>{const[e,i]=x(t.initialAvatarSrc);return _((()=>{e()?.startsWith("{{")&&t.initialAvatarSrc?.startsWith("http")&&i(t.initialAvatarSrc)})),U(X,{get when(){return(t=>null!=t&&""!==t)(e())},keyed:!0,get fallback(){return U($t,{})},get children(){const t=Gt(),i=t.firstChild;return A((s=>{var r="flex justify-center items-center rounded-full text-white relative flex-shrink-0 "+(zt()?"w-6 h-6 text-sm":"w-10 h-10 text-xl"),a=e();return r!==s._v$&&nt(t,s._v$=r),a!==s._v$2&&at(i,"src",s._v$2=a),s}),{_v$:void 0,_v$2:void 0}),t}})};class Kt{source;flags;constructor(t,e=""){this.source=t.source,this.flags=e}setGroup(t,e){let i="string"==typeof e?e:e.source;return i=i.replace(/(^|[^\[])\^/g,"$1"),this.source=this.source.replace(t,i),this}getRegexp(){return new RegExp(this.source,this.flags)}}const Xt=/[&<>"']/,Yt=/[&<>"']/g,Jt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Qt=/[<>"']|&(?!#?\w+;)/,Zt=/[<>"']|&(?!#?\w+;)/g;function te(t,e){if(e){if(Xt.test(t))return t.replace(Yt,(t=>Jt[t]))}else if(Qt.test(t))return t.replace(Zt,(t=>Jt[t]));return t}function ee(t){return t.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,(function(t,e){return"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""}))}var ie;(ie=wt=wt||{})[ie.space=1]="space",ie[ie.text=2]="text",ie[ie.paragraph=3]="paragraph",ie[ie.heading=4]="heading",ie[ie.listStart=5]="listStart",ie[ie.listEnd=6]="listEnd",ie[ie.looseItemStart=7]="looseItemStart",ie[ie.looseItemEnd=8]="looseItemEnd",ie[ie.listItemStart=9]="listItemStart",ie[ie.listItemEnd=10]="listItemEnd",ie[ie.blockquoteStart=11]="blockquoteStart",ie[ie.blockquoteEnd=12]="blockquoteEnd",ie[ie.code=13]="code",ie[ie.table=14]="table",ie[ie.html=15]="html",ie[ie.hr=16]="hr";class se{gfm=!0;tables=!0;breaks=!1;pedantic=!1;sanitize=!1;sanitizer;mangle=!0;smartLists=!1;silent=!1;highlight;langPrefix="lang-";smartypants=!1;headerPrefix="";renderer;xhtml=!1;escape=te;unescape=ee;isNoP}class re{options;constructor(t){this.options=t||oe.options}code(t,e,i,s){this.options.highlight&&null!=(r=this.options.highlight(t,e))&&r!==t&&(i=!0,t=r);var r=i?t:this.options.escape(t,!0);return e?`\n<pre><code class="${this.options.langPrefix+this.options.escape(e,!0)}">${r}\n</code></pre>\n`:`\n<pre><code>${r}\n</code></pre>\n`}blockquote(t){return`<blockquote>\n${t}</blockquote>\n`}html(t){return t}heading(t,e,i){return`<h${e} id="${this.options.headerPrefix+i.toLowerCase().replace(/[^\w]+/g,"-")}">${t}</h${e}>\n`}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(t,e){return`\n<${e=e?"ol":"ul"}>\n${t}</${e}>\n`}listitem(t){return"<li>"+t+"</li>\n"}paragraph(t){return"<p>"+t+"</p>\n"}table(t,e){return`\n<table>\n<thead>\n${t}</thead>\n<tbody>\n${e}</tbody>\n</table>\n`}tablerow(t){return"<tr>\n"+t+"</tr>\n"}tablecell(t,e){var i=e.header?"th":"td";return(e.align?"<"+i+' style="text-align:'+e.align+'">':"<"+i+">")+t+"</"+i+">\n"}strong(t){return"<strong>"+t+"</strong>"}em(t){return"<em>"+t+"</em>"}codespan(t){return"<code>"+t+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(t){return"<del>"+t+"</del>"}link(t,e,i){if(this.options.sanitize){let s;try{s=decodeURIComponent(this.options.unescape(t)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return i}if(0===s.indexOf("javascript:")||0===s.indexOf("vbscript:")||0===s.indexOf("data:"))return i}let s='<a href="'+t+'"';return e&&(s+=' title="'+e+'"'),s+">"+i+"</a>"}image(t,e,i){let s='<img src="'+t+'" alt="'+i+'"';return e&&(s+=' title="'+e+'"'),s+(this.options.xhtml?"/>":">")}text(t){return t}}class ae{staticThis;links;options;static rulesBase=null;static rulesPedantic=null;static rulesGfm=null;static rulesBreaks=null;rules;renderer;inLink;hasRulesGfm;ruleCallbacks;constructor(t,e,i=oe.options,s){if(this.staticThis=t,this.links=e,this.options=i,this.renderer=s||this.options.renderer||new re(this.options),!this.links)throw new Error("InlineLexer requires 'links' parameter.");this.setRules()}static output(t,e,i){return new this(this,e,i).output(t)}static getRulesBase(){var t;return this.rulesBase||((t={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ <>]+(@|:\/)[^ <>]+)>/,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^<'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)([\s\S]*?[^`])\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/,_inside:/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,_href:/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/}).link=new Kt(t.link).setGroup("inside",t._inside).setGroup("href",t._href).getRegexp(),t.reflink=new Kt(t.reflink).setGroup("inside",t._inside).getRegexp(),this.rulesBase=t)}static getRulesPedantic(){return this.rulesPedantic||(this.rulesPedantic={...this.getRulesBase(),strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/})}static getRulesGfm(){var t,e,i;return this.rulesGfm||(t=this.getRulesBase(),e=new Kt(t.escape).setGroup("])","~|])").getRegexp(),i=new Kt(t.text).setGroup("]|","~]|").setGroup("|","|https?://|").getRegexp(),this.rulesGfm={...t,escape:e,url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:i})}static getRulesBreaks(){var t,e;return this.rulesBreaks||(t=this.getRulesGfm(),e=this.getRulesGfm(),this.rulesBreaks={...e,br:new Kt(t.br).setGroup("{2,}","*").getRegexp(),text:new Kt(e.text).setGroup("{2,}","*").getRegexp()})}setRules(){this.options.gfm?this.options.breaks?this.rules=this.staticThis.getRulesBreaks():this.rules=this.staticThis.getRulesGfm():this.options.pedantic?this.rules=this.staticThis.getRulesPedantic():this.rules=this.staticThis.getRulesBase(),this.hasRulesGfm=void 0!==this.rules.url}output(t){let e,i="";for(;t;)if(e=this.rules.escape.exec(t))t=t.substring(e[0].length),i+=e[1];else if(e=this.rules.autolink.exec(t)){let s,r;t=t.substring(e[0].length),r="@"===e[2]?(s=this.options.escape(":"===e[1].charAt(6)?this.mangle(e[1].substring(7)):this.mangle(e[1])),this.mangle("mailto:")+s):s=this.options.escape(e[1]),i+=this.renderer.link(r,null,s)}else if(!this.inLink&&this.hasRulesGfm&&(e=this.rules.url.exec(t))){t=t.substring(e[0].length);var s=this.options.escape(e[1]);i+=this.renderer.link(s,null,s)}else if(e=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(e[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(e[0])&&(this.inLink=!1),t=t.substring(e[0].length),i+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(e[0]):this.options.escape(e[0]):e[0];else if(e=this.rules.link.exec(t))t=t.substring(e[0].length),this.inLink=!0,i+=this.outputLink(e,{href:e[2],title:e[3]}),this.inLink=!1;else if(e=(e=this.rules.reflink.exec(t))||this.rules.nolink.exec(t)){t=t.substring(e[0].length);s=(e[2]||e[1]).replace(/\s+/g," ");var r=this.links[s.toLowerCase()];r&&r.href?(this.inLink=!0,i+=this.outputLink(e,r),this.inLink=!1):(i+=e[0].charAt(0),t=e[0].substring(1)+t)}else if(e=this.rules.strong.exec(t))t=t.substring(e[0].length),i+=this.renderer.strong(this.output(e[2]||e[1]));else if(e=this.rules.em.exec(t))t=t.substring(e[0].length),i+=this.renderer.em(this.output(e[2]||e[1]));else if(e=this.rules.code.exec(t))t=t.substring(e[0].length),i+=this.renderer.codespan(this.options.escape(e[2].trim(),!0));else if(e=this.rules.br.exec(t))t=t.substring(e[0].length),i+=this.renderer.br();else if(this.hasRulesGfm&&(e=this.rules.del.exec(t)))t=t.substring(e[0].length),i+=this.renderer.del(this.output(e[1]));else if(e=this.rules.text.exec(t))t=t.substring(e[0].length),i+=this.renderer.text(this.options.escape(this.smartypants(e[0])));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return i}outputLink(t,e){var i=this.options.escape(e.href);e=e.title?this.options.escape(e.title):null;return"!"!==t[0].charAt(0)?this.renderer.link(i,e,this.output(t[1])):this.renderer.image(i,e,this.options.escape(t[1]))}smartypants(t){return this.options.smartypants?t.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/([{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/([{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,""):t}mangle(t){if(!this.options.mangle)return t;let e="";var i=t.length;for(let s=0;s<i;s++){let i;.5<Math.random()&&(i="x"+t.charCodeAt(s).toString(16)),e+="&#"+i+";"}return e}}class ne{simpleRenderers=[];tokens;token;inlineLexer;options;renderer;line=0;constructor(t){this.tokens=[],this.token=null,this.options=t||oe.options,this.renderer=this.options.renderer||new re(this.options)}static parse(t,e,i){return new this(i).parse(e,t)}parse(t,e){this.inlineLexer=new ae(ae,t,this.options,this.renderer),this.tokens=e.reverse();let i="";for(;this.next();)i+=this.tok();return i}debug(t,e){this.inlineLexer=new ae(ae,t,this.options,this.renderer),this.tokens=e.reverse();let i="";for(;this.next();){var s=this.tok();this.token.line=this.line+=s.split("\n").length-1,i+=s}return i}next(){return this.token=this.tokens.pop()}getNextElement(){return this.tokens[this.tokens.length-1]}parseText(){let t=this.token.text;for(var e;(e=this.getNextElement())&&e.type==wt.text;)t+="\n"+this.next().text;return this.inlineLexer.output(t)}tok(){switch(this.token.type){case wt.space:return"";case wt.paragraph:return this.renderer.paragraph(this.inlineLexer.output(this.token.text));case wt.text:return this.options.isNoP?this.parseText():this.renderer.paragraph(this.parseText());case wt.heading:return this.renderer.heading(this.inlineLexer.output(this.token.text),this.token.depth,this.token.text);case wt.listStart:{let e="";for(var t=this.token.ordered;this.next().type!=wt.listEnd;)e+=this.tok();return this.renderer.list(e,t)}case wt.listItemStart:{let t="";for(;this.next().type!=wt.listItemEnd;)t+=this.token.type==wt.text?this.parseText():this.tok();return this.renderer.listitem(t)}case wt.looseItemStart:{let t="";for(;this.next().type!=wt.listItemEnd;)t+=this.tok();return this.renderer.listitem(t)}case wt.code:return this.renderer.code(this.token.text,this.token.lang,this.token.escaped,this.token.meta);case wt.table:{t="";let s,r="";s="";for(let t=0;t<this.token.header.length;t++){var e={header:!0,align:this.token.align[t]},i=this.inlineLexer.output(this.token.header[t]);s+=this.renderer.tablecell(i,e)}t+=this.renderer.tablerow(s);for(const t of this.token.cells){s="";for(let e=0;e<t.length;e++)s+=this.renderer.tablecell(this.inlineLexer.output(t[e]),{header:!1,align:this.token.align[e]});r+=this.renderer.tablerow(s)}return this.renderer.table(t,r)}case wt.blockquoteStart:{let t="";for(;this.next().type!=wt.blockquoteEnd;)t+=this.tok();return this.renderer.blockquote(t)}case wt.hr:return this.renderer.hr();case wt.html:return t=this.token.pre||this.options.pedantic?this.token.text:this.inlineLexer.output(this.token.text),this.renderer.html(t);default:if(this.simpleRenderers.length)for(let t=0;t<this.simpleRenderers.length;t++)if(this.token.type=="simpleRule"+(t+1))return this.simpleRenderers[t].call(this.renderer,this.token.execArr);if(t=`Token with "${this.token.type}" type was not found.`,!this.options.silent)throw new Error(t);console.log(t)}}}class oe{static options=new se;static simpleRenderers=[];static setOptions(t){return Object.assign(this.options,t),this}static setBlockRule(t,e=(()=>"")){return le.simpleRules.push(t),this.simpleRenderers.push(e),this}static parse(t,e){try{e={...this.options,...e};var{tokens:i,links:s}=this.callBlockLexer(t,e);return this.callParser(i,s,e)}catch(t){return this.callMe(t)}}static debug(t,e=this.options){var{tokens:t,links:i}=this.callBlockLexer(t,e);let s=t.slice();return(e=new ne(e)).simpleRenderers=this.simpleRenderers,e=e.debug(i,t),{tokens:s=s.map((t=>{t.type=wt[t.type]||t.type;var e=t.line;return delete t.line,e?{line:e,...t}:t})),links:i,result:e}}static callBlockLexer(t="",e){if("string"!=typeof t)throw new Error(`Expected that the 'src' parameter would have a 'string' type, got '${typeof t}'`);return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n").replace(/^ +$/gm,""),le.lex(t,e,!0)}static callParser(t,e,i){var s;return this.simpleRenderers.length?((s=new ne(i)).simpleRenderers=this.simpleRenderers,s.parse(e,t)):ne.parse(t,e,i)}static callMe(t){if(t.message+="\nPlease report this to https://github.com/ts-stack/markdown",this.options.silent)return"<p>An error occured:</p><pre>"+this.options.escape(t.message+"",!0)+"</pre>";throw t}}class le{staticThis;static simpleRules=[];static rulesBase=null;static rulesGfm=null;static rulesTables=null;rules;options;links={};tokens=[];hasRulesGfm;hasRulesTables;constructor(t,e){this.staticThis=t,this.options=e||oe.options,this.setRules()}static lex(t,e,i,s){return new this(this,e).getTokens(t,i,s)}static getRulesBase(){var t,e;return this.rulesBase||((t={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/,bullet:/(?:[*+-]|\d+\.)/,item:/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/}).item=new Kt(t.item,"gm").setGroup(/bull/g,t.bullet).getRegexp(),t.list=new Kt(t.list).setGroup(/bull/g,t.bullet).setGroup("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))").setGroup("def","\\n+(?="+t.def.source+")").getRegexp(),e="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",t.html=new Kt(t.html).setGroup("comment",/<!--[\s\S]*?-->/).setGroup("closed",/<(tag)[\s\S]+?<\/\1>/).setGroup("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/).setGroup(/tag/g,e).getRegexp(),t.paragraph=new Kt(t.paragraph).setGroup("hr",t.hr).setGroup("heading",t.heading).setGroup("lheading",t.lheading).setGroup("blockquote",t.blockquote).setGroup("tag","<"+e).setGroup("def",t.def).getRegexp(),this.rulesBase=t)}static getRulesGfm(){var t,e,i,s;return this.rulesGfm||(i=(e={...t=this.getRulesBase(),fences:/^ *(`{3,}|~{3,})[ \.]*((\S+)? *[^\n]*)\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}).fences.source.replace("\\1","\\2"),s=t.list.source.replace("\\1","\\3"),e.paragraph=new Kt(t.paragraph).setGroup("(?!",`(?!${i}|${s}|`).getRegexp(),this.rulesGfm=e)}static getRulesTable(){return this.rulesTables||(this.rulesTables={...this.getRulesGfm(),nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/})}setRules(){this.options.gfm?this.options.tables?this.rules=this.staticThis.getRulesTable():this.rules=this.staticThis.getRulesGfm():this.rules=this.staticThis.getRulesBase(),this.hasRulesGfm=void 0!==this.rules.fences,this.hasRulesTables=void 0!==this.rules.table}getTokens(t,e,i){let s,r=t;t:for(;r;)if((s=this.rules.newline.exec(r))&&(r=r.substring(s[0].length),1<s[0].length)&&this.tokens.push({type:wt.space}),s=this.rules.code.exec(r)){r=r.substring(s[0].length);var a=s[0].replace(/^ {4}/gm,"");this.tokens.push({type:wt.code,text:this.options.pedantic?a:a.replace(/\n+$/,"")})}else if(this.hasRulesGfm&&(s=this.rules.fences.exec(r)))r=r.substring(s[0].length),this.tokens.push({type:wt.code,meta:s[2],lang:s[3],text:s[4]||""});else if(s=this.rules.heading.exec(r))r=r.substring(s[0].length),this.tokens.push({type:wt.heading,depth:s[1].length,text:s[2]});else if(e&&this.hasRulesTables&&(s=this.rules.nptable.exec(r))){r=r.substring(s[0].length);var n={type:wt.table,header:s[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:[]};for(let t=0;t<n.align.length;t++)/^ *-+: *$/.test(n.align[t])?n.align[t]="right":/^ *:-+: *$/.test(n.align[t])?n.align[t]="center":/^ *:-+ *$/.test(n.align[t])?n.align[t]="left":n.align[t]=null;var o=s[3].replace(/\n$/,"").split("\n");for(let t=0;t<o.length;t++)n.cells[t]=o[t].split(/ *\| */);this.tokens.push(n)}else if(s=this.rules.lheading.exec(r))r=r.substring(s[0].length),this.tokens.push({type:wt.heading,depth:"="===s[2]?1:2,text:s[1]});else if(s=this.rules.hr.exec(r))r=r.substring(s[0].length),this.tokens.push({type:wt.hr});else if(s=this.rules.blockquote.exec(r))r=r.substring(s[0].length),this.tokens.push({type:wt.blockquoteStart}),a=s[0].replace(/^ *> ?/gm,""),this.getTokens(a),this.tokens.push({type:wt.blockquoteEnd});else if(s=this.rules.list.exec(r)){r=r.substring(s[0].length);var l,h=s[2],d=(this.tokens.push({type:wt.listStart,ordered:1<h.length}),s[0].match(this.rules.item)),c=d.length;let t,e=!1;for(let s=0;s<c;s++){let a=d[s];l=a.length,-1!==(a=a.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(l-=a.length,a=this.options.pedantic?a.replace(/^ {1,4}/gm,""):a.replace(new RegExp("^ {1,"+l+"}","gm"),"")),!this.options.smartLists||s===c-1||h===(l=this.staticThis.getRulesBase().bullet.exec(d[s+1])[0])||1<h.length&&1<l.length||(r=d.slice(s+1).join("\n")+r,s=c-1),t=e||/\n\n(?!\s*$)/.test(a),s!==c-1&&(e="\n"===a.charAt(a.length-1),t=t||e),this.tokens.push({type:t?wt.looseItemStart:wt.listItemStart}),this.getTokens(a,!1,i),this.tokens.push({type:wt.listItemEnd})}this.tokens.push({type:wt.listEnd})}else if(s=this.rules.html.exec(r)){r=r.substring(s[0].length);var u=s[1];this.tokens.push({type:this.options.sanitize?wt.paragraph:wt.html,pre:!this.options.sanitizer&&("pre"===u||"script"===u||"style"===u),text:s[0]})}else if(e&&(s=this.rules.def.exec(r)))r=r.substring(s[0].length),this.links[s[1].toLowerCase()]={href:s[2],title:s[3]};else if(e&&this.hasRulesTables&&(s=this.rules.table.exec(r))){r=r.substring(s[0].length);var p={type:wt.table,header:s[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:[]};for(let t=0;t<p.align.length;t++)/^ *-+: *$/.test(p.align[t])?p.align[t]="right":/^ *:-+: *$/.test(p.align[t])?p.align[t]="center":/^ *:-+ *$/.test(p.align[t])?p.align[t]="left":p.align[t]=null;var g=s[3].replace(/(?: *\| *)?\n$/,"").split("\n");for(let t=0;t<g.length;t++)p.cells[t]=g[t].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(p)}else{if(this.staticThis.simpleRules.length){var f=this.staticThis.simpleRules;for(let t=0;t<f.length;t++)if(s=f[t].exec(r)){r=r.substring(s[0].length);var m="simpleRule"+(t+1);this.tokens.push({type:m,execArr:s});continue t}}if(e&&(s=this.rules.paragraph.exec(r)))r=r.substring(s[0].length),"\n"===s[1].slice(-1)?this.tokens.push({type:wt.paragraph,text:s[1].slice(0,-1)}):this.tokens.push({type:0<this.tokens.length?wt.paragraph:wt.text,text:s[1]});else if(s=this.rules.text.exec(r))r=r.substring(s[0].length),this.tokens.push({type:wt.text,text:s[0]});else if(r)throw new Error("Infinite loop on byte: "+r.charCodeAt(0)+`, near text '${r.slice(0,30)}...'`)}return{tokens:this.tokens,links:this.links}}}const he=st('<div class="flex justify-end mb-2 items-end guest-container"><span class="px-4 py-2 mr-2 whitespace-pre-wrap max-w-full chatbot-guest-bubble" data-testid="guest-bubble">'),de=(oe.setOptions({isNoP:!0}),t=>{let e;k((()=>{e&&(e.innerHTML=oe.parse(t.message))}));{const i=he(),s=i.firstChild;i.style.setProperty("margin-left","50px");return"function"==typeof e?lt(e,s):e=s,s.style.setProperty("border-radius","6px"),ht(i,U(X,{get when(){return t.showAvatar},get children(){return U(Wt,{get initialAvatarSrc(){return t.avatarSrc}})}}),null),A((e=>{var i=t.backgroundColor??"#3B81F6",r=t.textColor??"#ffffff";return i!==e._v$&&(null!=(e._v$=i)?s.style.setProperty("background-color",i):s.style.removeProperty("background-color")),r!==e._v$2&&(null!=(e._v$2=r)?s.style.setProperty("color",r):s.style.removeProperty("color")),e}),{_v$:void 0,_v$2:void 0}),i}}),ce=st('<div class="flex justify-start mb-2 items-start host-container"><span class="px-4 py-2 ml-2 whitespace-pre-wrap max-w-full chatbot-host-bubble" data-testid="host-bubble">'),ue=t=>{let e;k((()=>{e&&(e.innerHTML=t.message)}));{const i=ce(),s=i.firstChild;i.style.setProperty("margin-right","50px"),ht(i,U(X,{get when(){return t.showAvatar},get children(){return U(Wt,{get initialAvatarSrc(){return t.avatarSrc}})}}),s);return"function"==typeof e?lt(e,s):e=s,s.style.setProperty("border-radius","6px"),A((e=>{var i=t.backgroundColor??"#f7f8ff",r=t.textColor??"#303235";return i!==e._v$&&(null!=(e._v$=i)?s.style.setProperty("background-color",i):s.style.removeProperty("background-color")),r!==e._v$2&&(null!=(e._v$2=r)?s.style.setProperty("color",r):s.style.removeProperty("color")),e}),{_v$:void 0,_v$2:void 0}),i}},pe=st('<div class="flex items-center"><div class="w-2 h-2 mr-1 rounded-full bubble1"></div><div class="w-2 h-2 mr-1 rounded-full bubble2"></div><div class="w-2 h-2 rounded-full bubble3">'),ge=()=>pe(),fe=st('<div class="flex justify-start mb-2 items-start animate-fade-in host-container"><span class="px-4 py-4 ml-2 whitespace-pre-wrap max-w-full chatbot-host-bubble" data-testid="host-bubble">'),me=()=>{return ht((t=fe()).firstChild,U(ge,{})),t;var t},ve=st('<div data-modal-target="defaultModal" data-modal-toggle="defaultModal" class="flex justify-start mb-2 items-start animate-fade-in host-container hover:brightness-90 active:brightness-75"><span class="px-2 py-1 ml-1 whitespace-pre-wrap max-w-full chatbot-host-bubble" data-testid="host-bubble">'),be=t=>{return i=(e=ve()).firstChild,e.$$click=()=>t.onSourceClick?.(),i.style.setProperty("width","max-content"),i.style.setProperty("max-width","80px"),i.style.setProperty("font-size","13px"),i.style.setProperty("border-radius","15px"),i.style.setProperty("cursor","pointer"),i.style.setProperty("text-overflow","ellipsis"),i.style.setProperty("overflow","hidden"),i.style.setProperty("white-space","nowrap"),ht(i,(()=>t.pageContent)),e;var e,i},ye=(rt(["click"]),st('<svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.49989 3.26L9.87989 6.05L10.1099 6.55L10.6099 6.625L13.6899 7.07L11.4999 9.22L11.1249 9.585L11.2149 10.085L11.7399 13.15L8.98489 11.705L8.49989 11.5L8.03489 11.745L5.27989 13.17L5.77989 10.105L5.86989 9.605L5.49989 9.22L3.28989 7.045L6.36989 6.6L6.86989 6.525L7.09989 6.025L8.49989 3.26ZM8.49989 1L6.22489 5.61L1.13989 6.345L4.81989 9.935L3.94989 15L8.49989 12.61L13.0499 15L12.1799 9.935L15.8599 6.35L10.7749 5.61L8.49989 1Z" fill="#3C3C3B">')),we=()=>ye(),xe=st('<span><span>Powered by<a href="https://www.startse.com/" target="_blank" rel="noopener noreferrer" class="lite-badge" id="lite-badge"><span>StartSe'),Ae=st("<button><span>"),_e="#303235",Ce=t=>{let e;const i=t=>{t.forEach((t=>{t.removedNodes.forEach((t=>{}))}))};k((()=>{document&&t.botContainer&&(e=new MutationObserver(i)).observe(t.botContainer,{subtree:!1,childList:!0})})),S((()=>{e&&e.disconnect()}));{const e=xe(),i=e.firstChild,s=i.firstChild.nextSibling;return e.style.setProperty("font-size","13px"),e.style.setProperty("bottom","0"),e.style.setProperty("padding","10px 12px"),e.style.setProperty("margin","auto"),e.style.setProperty("width","100%"),e.style.setProperty("text-align","center"),e.style.setProperty("display","flex"),i.style.setProperty("display","flex"),i.style.setProperty("align-items","center"),s.style.setProperty("font-weight","bold"),s.style.setProperty("margin-left","3px"),ht(e,(()=>{const e=C((()=>!!t.showButton));return()=>e()&&(()=>{const e=Ae(),i=e.firstChild;return e.$$click=()=>{window.open(t.buttonLink,"_blank")},e.style.setProperty("border-radius","5px"),e.style.setProperty("padding","12.5px"),e.style.setProperty("cursor","pointer"),ht(e,U(we,{}),i),i.style.setProperty("margin-left","5px"),ht(i,(()=>t.buttonText)),A((s=>{var r="2px solid "+(t.buttonColor||"#303235"),a=t.buttonColor||"#303235";return r!==s._v$5&&(null!=(s._v$5=r)?e.style.setProperty("border",r):e.style.removeProperty("border")),a!==s._v$6&&(null!=(s._v$6=a)?i.style.setProperty("color",a):i.style.removeProperty("color")),s}),{_v$5:void 0,_v$6:void 0}),e})()})(),null),A((i=>{var r=t.poweredByTextColor??_e,a=t.badgeBackgroundColor??"#ffffff",n=t.showButton?"space-between":"center",o=t.poweredByTextColor??_e;return r!==i._v$&&(null!=(i._v$=r)?e.style.setProperty("color",r):e.style.removeProperty("color")),a!==i._v$2&&(null!=(i._v$2=a)?e.style.setProperty("background-color",a):e.style.removeProperty("background-color")),n!==i._v$3&&(null!=(i._v$3=n)?e.style.setProperty("justify-content",n):e.style.removeProperty("justify-content")),o!==i._v$4&&(null!=(i._v$4=o)?s.style.setProperty("color",o):s.style.removeProperty("color")),i}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),e}},Ee=(rt(["click"]),Object.create(null)),ke=(Ee.open="0",Ee.close="1",Ee.ping="2",Ee.pong="3",Ee.message="4",Ee.upgrade="5",Ee.noop="6",Object.create(null)),Se=(Object.keys(Ee).forEach((t=>{ke[Ee[t]]=t})),{type:"error",data:"parser error"}),Te="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Pe="function"==typeof ArrayBuffer,Me=t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Re=({type:t,data:e},i,s)=>Te&&e instanceof Blob?i?s(e):Le(e,s):Pe&&(e instanceof ArrayBuffer||Me(e))?i?s(e):Le(new Blob([e]),s):s(Ee[t]+(e||"")),Le=(t,e)=>{const i=new FileReader;return i.onload=function(){var t=i.result.split(",")[1];e("b"+(t||""))},i.readAsDataURL(t)};function Ie(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let De;const Fe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Oe="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let t=0;t<64;t++)Oe[Fe.charCodeAt(t)]=t;const Be="function"==typeof ArrayBuffer,Ne=(t,e)=>{var i;return"string"!=typeof t?{type:"message",data:je(t,e)}:"b"===(i=t.charAt(0))?{type:"message",data:ze(t.substring(1),e)}:ke[i]?1<t.length?{type:ke[i],data:t.substring(1)}:{type:ke[i]}:Se},ze=(t,e)=>{var i;return Be?(i=(t=>{let e,i,s,r,a,n=.75*t.length,o=t.length,l=0;"="===t[t.length-1]&&(n--,"="===t[t.length-2])&&n--;var h=new ArrayBuffer(n),d=new Uint8Array(h);for(e=0;e<o;e+=4)i=Oe[t.charCodeAt(e)],s=Oe[t.charCodeAt(e+1)],r=Oe[t.charCodeAt(e+2)],a=Oe[t.charCodeAt(e+3)],d[l++]=i<<2|s>>4,d[l++]=(15&s)<<4|r>>2,d[l++]=(3&r)<<6|63&a;return h})(t),je(i,e)):{base64:!0,data:t}},je=(t,e)=>"blob"!==e?t instanceof ArrayBuffer?t:t.buffer:t instanceof Blob?t:new Blob([t]),He=String.fromCharCode(30);function Ue(){return new TransformStream({transform(t,e){!function(t,e){Te&&t.data instanceof Blob?t.data.arrayBuffer().then(Ie).then(e):Pe&&(t.data instanceof ArrayBuffer||Me(t.data))?e(Ie(t.data)):Re(t,!1,(t=>{De=De||new TextEncoder,e(De.encode(t))}))}(t,(i=>{var s,r=i.length;let a;r<126?(a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,r)):r<65536?(a=new Uint8Array(3),(s=new DataView(a.buffer)).setUint8(0,126),s.setUint16(1,r)):(a=new Uint8Array(9),(s=new DataView(a.buffer)).setUint8(0,127),s.setBigUint64(1,BigInt(r))),t.data&&"string"!=typeof t.data&&(a[0]|=128),e.enqueue(a),e.enqueue(i)}))}})}let qe;function Ve(t){return t.reduce(((t,e)=>t+e.length),0)}function $e(t,e){if(t[0].length===e)return t.shift();var i=new Uint8Array(e);let s=0;for(let r=0;r<e;r++)i[r]=t[0][s++],s===t[0].length&&(t.shift(),s=0);return t.length&&s<t[0].length&&(t[0]=t[0].slice(s)),i}function Ge(t){if(t)return function(t){for(var e in Ge.prototype)t[e]=Ge.prototype[e];return t}(t)}Ge.prototype.on=Ge.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},Ge.prototype.once=function(t,e){function i(){this.off(t,i),e.apply(this,arguments)}return i.fn=e,this.on(t,i),this},Ge.prototype.off=Ge.prototype.removeListener=Ge.prototype.removeAllListeners=Ge.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)this._callbacks={};else{var i=this._callbacks["$"+t];if(i)if(1==arguments.length)delete this._callbacks["$"+t];else{for(var s,r=0;r<i.length;r++)if((s=i[r])===e||s.fn===e){i.splice(r,1);break}0===i.length&&delete this._callbacks["$"+t]}}return this},Ge.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),i=this._callbacks["$"+t],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(i){s=0;for(var r=(i=i.slice(0)).length;s<r;++s)i[s].apply(this,e)}return this},Ge.prototype.emitReserved=Ge.prototype.emit,Ge.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},Ge.prototype.hasListeners=function(t){return!!this.listeners(t).length};const We="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function Ke(t,...e){return e.reduce(((e,i)=>(t.hasOwnProperty(i)&&(e[i]=t[i]),e)),{})}const Xe=We.setTimeout,Ye=We.clearTimeout;function Je(t,e){e.useNativeTimers?(t.setTimeoutFn=Xe.bind(We),t.clearTimeoutFn=Ye.bind(We)):(t.setTimeoutFn=We.setTimeout.bind(We),t.clearTimeoutFn=We.clearTimeout.bind(We))}function Qe(t){return"string"==typeof t?function(t){let e,i=0;for(let s=0,r=t.length;s<r;s++)(e=t.charCodeAt(s))<128?i+=1:e<2048?i+=2:e<55296||57344<=e?i+=3:(s++,i+=4);return i}(t):Math.ceil(1.33*(t.byteLength||t.size))}class Ze extends Error{constructor(t,e,i){super(t),this.description=e,this.context=i,this.type="TransportError"}}class ti extends Ge{constructor(t){super(),this.writable=!1,Je(this,t),this.opts=t,this.query=t.query,this.socket=t.socket}onError(t,e,i){return super.emitReserved("error",new Ze(t,e,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(t){"open"===this.readyState&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){t=Ne(t,this.socket.binaryType),this.onPacket(t)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){var t=this.opts.hostname;return-1===t.indexOf(":")?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(t){return t=function(t){let e="";for(var i in t)t.hasOwnProperty(i)&&(e.length&&(e+="&"),e+=encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e}(t),t.length?"?"+t:""}}const ei="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),ii=64,si={};let ri,ai=0,ni=0;function oi(t){let e="";for(;e=ei[t%ii]+e,0<(t=Math.floor(t/ii)););return e}function li(){var t=oi(+new Date);return t!==ri?(ai=0,ri=t):t+"."+oi(ai++)}for(;ni<ii;ni++)si[ei[ni]]=ni;let hi=!1;try{hi="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(ie){}const di=hi;function ci(t){t=t.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||di))return new XMLHttpRequest}catch(t){}if(!t)try{return new(We[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}function ui(){}const pi=null!=new ci({xdomain:!1}).responseType;class gi extends Ge{constructor(t,e){super(),Je(this,e),this.opts=e,this.method=e.method||"GET",this.uri=t,this.data=void 0!==e.data?e.data:null,this.create()}create(){var t,e=Ke(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd;const i=this.xhr=new ci(e);try{i.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders)for(var s in i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(s)&&i.setRequestHeader(s,this.opts.extraHeaders[s])}catch(t){}if("POST"===this.method)try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{i.setRequestHeader("Accept","*/*")}catch(t){}null!=(t=this.opts.cookieJar)&&t.addCookies(i),"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),i.onreadystatechange=()=>{var t;3===i.readyState&&null!=(t=this.opts.cookieJar)&&t.parseCookies(i),4===i.readyState&&(200===i.status||1223===i.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"==typeof i.status?i.status:0)}),0))},i.send(this.data)}catch(t){return void this.setTimeoutFn((()=>{this.onError(t)}),0)}"undefined"!=typeof document&&(this.index=gi.requestsCount++,gi.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=ui,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete gi.requests[this.index],this.xhr=null}}onLoad(){var t=this.xhr.responseText;null!==t&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}if(gi.requestsCount=0,gi.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",fi);else if("function"==typeof addEventListener){addEventListener("onpagehide"in We?"pagehide":"unload",fi,!1)}function fi(){for(var t in gi.requests)gi.requests.hasOwnProperty(t)&&gi.requests[t].abort()}const mi="function"==typeof Promise&&"function"==typeof Promise.resolve?t=>Promise.resolve().then(t):(t,e)=>e(t,0),vi=We.WebSocket||We.MozWebSocket,bi="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();const yi={websocket:class extends ti{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(this.check()){var t=this.uri(),e=this.opts.protocols,i=bi?{}:Ke(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=bi?new vi(t,e,i):e?new vi(t,e):new vi(t)}catch(t){return this.emitReserved("error",t)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let i=0;i<t.length;i++){var e=t[i];const s=i===t.length-1;Re(e,this.supportsBinary,(t=>{try{this.ws.send(t)}catch(t){}s&&mi((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){var t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=li()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}check(){return!!vi}},webtransport:class extends ti{get name(){return"webtransport"}doOpen(){"function"==typeof WebTransport&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then((()=>{this.onClose()})).catch((t=>{this.onError("webtransport error",t)})),this.transport.ready.then((()=>{this.transport.createBidirectionalStream().then((t=>{var e=function(t,e){qe=qe||new TextDecoder;const i=[];let s=0,r=-1,a=!1;return new TransformStream({transform(n,o){for(i.push(n);;){if(0===s){if(Ve(i)<1)break;var l=$e(i,1);a=128==(128&l[0]),r=127&l[0],s=r<126?3:126===r?1:2}else if(1===s){if(Ve(i)<2)break;l=$e(i,2),r=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),s=3}else if(2===s){if(Ve(i)<8)break;var h=$e(i,8),d=(h=new DataView(h.buffer,h.byteOffset,h.length)).getUint32(0);if(d>Math.pow(2,21)-1){o.enqueue(Se);break}r=d*Math.pow(2,32)+h.getUint32(4),s=3}else{if(Ve(i)<r)break;d=$e(i,r),o.enqueue(Ne(a?d:qe.decode(d),e)),s=0}if(0===r||r>t){o.enqueue(Se);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType);const i=t.readable.pipeThrough(e).getReader();(e=Ue()).readable.pipeTo(t.writable),this.writer=e.writable.getWriter();const s=()=>{i.read().then((({done:t,value:e})=>{t||(this.onPacket(e),s())})).catch((t=>{}))};s(),t={type:"open"},this.query.sid&&(t.data=`{"sid":"${this.query.sid}"}`),this.writer.write(t).then((()=>this.onOpen()))}))})))}write(t){this.writable=!1;for(let i=0;i<t.length;i++){var e=t[i];const s=i===t.length-1;this.writer.write(e).then((()=>{s&&mi((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){var t;null!=(t=this.transport)&&t.close()}},polling:class extends ti{constructor(t){if(super(t),this.polling=!1,"undefined"!=typeof location){var e="https:"===location.protocol;let i=location.port;i=i||(e?"443":"80"),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||i!==t.port}e=t&&t.forceBase64,this.supportsBinary=pi&&!e,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let t=0;this.polling&&(t++,this.once("pollComplete",(function(){--t||e()}))),this.writable||(t++,this.once("drain",(function(){--t||e()})))}else e()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){((t,e)=>{var i=t.split(He),s=[];for(let t=0;t<i.length;t++){var r=Ne(i[t],e);if(s.push(r),"error"===r.type)break}return s})(t,this.socket.binaryType).forEach((t=>{if("opening"===this.readyState&&"open"===t.type&&this.onOpen(),"close"===t.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(t)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState)&&this.poll()}doClose(){var t=()=>{this.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}write(t){this.writable=!1,((t,e)=>{const i=t.length,s=new Array(i);let r=0;t.forEach(((t,a)=>{Re(t,!1,(t=>{s[a]=t,++r===i&&e(s.join(He))}))}))})(t,(t=>{this.doWrite(t,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){var t=this.opts.secure?"https":"http",e=this.query||{};return!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=li()),this.supportsBinary||e.sid||(e.b64=1),this.createUri(t,e)}request(t={}){return Object.assign(t,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new gi(this.uri(),t)}doWrite(t,e){(t=this.request({method:"POST",data:t})).on("success",e),t.on("error",((t,e)=>{this.onError("xhr post error",t,e)}))}doPoll(){var t=this.request();t.on("data",this.onData.bind(this)),t.on("error",((t,e)=>{this.onError("xhr poll error",t,e)})),this.pollXhr=t}}},wi=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,xi=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ai(t){var e=t,i=t.indexOf("["),s=t.indexOf("]");-1!=i&&-1!=s&&(t=t.substring(0,i)+t.substring(i,s).replace(/:/g,";")+t.substring(s,t.length));let r=wi.exec(t||""),a={},n=14;for(;n--;)a[xi[n]]=r[n]||"";return-1!=i&&-1!=s&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=function(t,e){var i=e.replace(/\/{2,9}/g,"/").split("/");return"/"!=e.slice(0,1)&&0!==e.length||i.splice(0,1),"/"==e.slice(-1)&&i.splice(i.length-1,1),i}(0,a.path),a.queryKey=function(t,e){const i={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,s){e&&(i[e]=s)})),i}(0,a.query),a}let _i=class t extends Ge{constructor(t,e={}){super(),this.binaryType="arraybuffer",this.writeBuffer=[],t&&"object"==typeof t&&(e=t,t=null),t?(t=Ai(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=Ai(e.host).host),Je(this,e),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=e.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(t){var e={},i=t.split("&");for(let t=0,r=i.length;t<r;t++){var s=i[t].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),"localhost"!==this.hostname)&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1)),this.open()}createTransport(t){var e=((e=Object.assign({},this.opts.query)).EIO=4,e.transport=t,this.id&&(e.sid=this.id),Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]));return new yi[t](e)}open(){let e;if(this.opts.rememberUpgrade&&t.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}setTransport(t){this.transport&&this.transport.removeAllListeners(),(this.transport=t).on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(t=>this.onClose("transport close",t)))}probe(e){let i=this.createTransport(e),s=!1;t.priorWebsocketSuccess=!1;const r=()=>{s||(i.send([{type:"ping",data:"probe"}]),i.once("packet",(e=>{s||("pong"===e.type&&"probe"===e.data?(this.upgrading=!0,this.emitReserved("upgrading",i),i&&(t.priorWebsocketSuccess="websocket"===i.name,this.transport.pause((()=>{s||"closed"!==this.readyState&&(d(),this.setTransport(i),i.send([{type:"upgrade"}]),this.emitReserved("upgrade",i),i=null,this.upgrading=!1,this.flush())})))):((e=new Error("probe error")).transport=i.name,this.emitReserved("upgradeError",e)))})))};function a(){s||(s=!0,d(),i.close(),i=null)}const n=t=>{(t=new Error("probe error: "+t)).transport=i.name,a(),this.emitReserved("upgradeError",t)};function o(){n("transport closed")}function l(){n("socket closed")}function h(t){i&&t.name!==i.name&&a()}const d=()=>{i.removeListener("open",r),i.removeListener("error",n),i.removeListener("close",o),this.off("close",l),this.off("upgrading",h)};i.once("open",r),i.once("error",n),i.once("close",o),this.once("close",l),this.once("upgrading",h),-1!==this.upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn((()=>{s||i.open()}),200):i.open()}onOpen(){if(this.readyState="open",t.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade){let t=0;for(var e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),this.resetPingTimeout(),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),(this.prevBufferLen=0)===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){var t;"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(t=this.getWritablePackets(),this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush"))}getWritablePackets(){if(this.maxPayload&&"polling"===this.transport.name&&1<this.writeBuffer.length){let e=1;for(let i=0;i<this.writeBuffer.length;i++){var t=this.writeBuffer[i].data;if(t&&(e+=Qe(t)),0<i&&e>this.maxPayload)return this.writeBuffer.slice(0,i);e+=2}}return this.writeBuffer}write(t,e,i){return this.sendPacket("message",t,e,i),this}send(t,e,i){return this.sendPacket("message",t,e,i),this}sendPacket(t,e,i,s){"function"==typeof e&&(s=e,e=void 0),"function"==typeof i&&(s=i,i=null),"closing"!==this.readyState&&"closed"!==this.readyState&&((i=i||{}).compress=!1!==i.compress,this.emitReserved("packetCreate",t={type:t,data:e,options:i}),this.writeBuffer.push(t),s&&this.once("flush",s),this.flush())}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},i=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{(this.upgrading?i:t)()})):(this.upgrading?i:t)()),this}onError(e){t.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){var e=[];let i=0;for(var s=t.length;i<s;i++)~this.transports.indexOf(t[i])&&e.push(t[i]);return e}};_i.protocol=4;const Ci="function"==typeof ArrayBuffer,Ei=t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,ki=Object.prototype.toString,Si="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===ki.call(Blob),Ti="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===ki.call(File);function Pi(t){return Ci&&(t instanceof ArrayBuffer||Ei(t))||Si&&t instanceof Blob||Ti&&t instanceof File}function Mi(t,e){if(t&&"object"==typeof t)if(Array.isArray(t)){for(let e=0,i=t.length;e<i;e++)if(Mi(t[e]))return!0}else{if(Pi(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return Mi(t.toJSON(),!0);for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&Mi(t[e]))return!0}return!1}function Ri(t){var e=[],i=t.data;return t.data=Li(i,e),t.attachments=e.length,{packet:t,buffers:e}}function Li(t,e){if(!t)return t;var i;if(Pi(t))return i={_placeholder:!0,num:e.length},e.push(t),i;if(Array.isArray(t)){var s=new Array(t.length);for(let i=0;i<t.length;i++)s[i]=Li(t[i],e);return s}if("object"!=typeof t||t instanceof Date)return t;var r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=Li(t[i],e));return r}function Ii(t,e){return t.data=Di(t.data,e),delete t.attachments,t}function Di(t,e){if(t){if(t&&!0===t._placeholder){if("number"==typeof t.num&&0<=t.num&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}if(Array.isArray(t))for(let i=0;i<t.length;i++)t[i]=Di(t[i],e);else if("object"==typeof t)for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(t[i]=Di(t[i],e))}return t}const Fi=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];!function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(xt=xt||{});function Oi(t){return"[object Object]"===Object.prototype.toString.call(t)}class Bi extends Ge{constructor(t){super(),this.reviver=t}add(t){let e;if("string"==typeof t){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");var i=(e=this.decodeString(t)).type===xt.BINARY_EVENT;(!i&&e.type!==xt.BINARY_ACK||(e.type=i?xt.EVENT:xt.ACK,this.reconstructor=new Ni(e),0===e.attachments))&&super.emitReserved("decoded",e)}else{if(!Pi(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(e=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,super.emitReserved("decoded",e))}}decodeString(t){let e=0;var i={type:Number(t.charAt(0))};if(void 0===xt[i.type])throw new Error("unknown packet type "+i.type);if(i.type===xt.BINARY_EVENT||i.type===xt.BINARY_ACK){for(var s=e+1;"-"!==t.charAt(++e)&&e!=t.length;);if((s=t.substring(s,e))!=Number(s)||"-"!==t.charAt(e))throw new Error("Illegal attachments");i.attachments=Number(s)}if("/"===t.charAt(e+1)){for(s=e+1;++e&&","!==t.charAt(e)&&e!==t.length;);i.nsp=t.substring(s,e)}else i.nsp="/";if(""!==(s=t.charAt(e+1))&&Number(s)==s){for(s=e+1;++e;){var r=t.charAt(e);if(null==r||Number(r)!=r){--e;break}if(e===t.length)break}i.id=Number(t.substring(s,e+1))}if(t.charAt(++e)){if(s=this.tryParse(t.substr(e)),!Bi.isPayloadValid(i.type,s))throw new Error("invalid payload");i.data=s}return i}tryParse(t){try{return JSON.parse(t,this.reviver)}catch(t){return!1}}static isPayloadValid(t,e){switch(t){case xt.CONNECT:return Oi(e);case xt.DISCONNECT:return void 0===e;case xt.CONNECT_ERROR:return"string"==typeof e||Oi(e);case xt.EVENT:case xt.BINARY_EVENT:return Array.isArray(e)&&("number"==typeof e[0]||"string"==typeof e[0]&&-1===Fi.indexOf(e[0]));case xt.ACK:case xt.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Ni{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){return this.buffers.push(t),this.buffers.length===this.reconPack.attachments?(t=Ii(this.reconPack,this.buffers),this.finishedReconstruction(),t):null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}var zi=Object.freeze({__proto__:null,Decoder:Bi,Encoder:class{constructor(t){this.replacer=t}encode(t){return t.type!==xt.EVENT&&t.type!==xt.ACK||!Mi(t)?[this.encodeAsString(t)]:this.encodeAsBinary({type:t.type===xt.EVENT?xt.BINARY_EVENT:xt.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id})}encodeAsString(t){let e=""+t.type;return t.type!==xt.BINARY_EVENT&&t.type!==xt.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){t=Ri(t);var e=this.encodeAsString(t.packet);return(t=t.buffers).unshift(e),t}},get PacketType(){return xt},protocol:5});function ji(t,e,i){return t.on(e,i),function(){t.off(e,i)}}const Hi=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Ui extends Ge{constructor(t,e,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){var t;this.subs||(t=this.io,this.subs=[ji(t,"open",this.onopen.bind(this)),ji(t,"packet",this.onpacket.bind(this)),ji(t,"error",this.onerror.bind(this)),ji(t,"close",this.onclose.bind(this))])}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(Hi.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');var i,s;return e.unshift(t),!this._opts.retries||this.flags.fromQueue||this.flags.volatile?((t={type:xt.EVENT,data:e,options:{}}).options.compress=!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(i=this.ids++,s=e.pop(),this._registerAckCallback(i,s),t.id=i),s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable,(!this.flags.volatile||s&&this.connected)&&(this.connected?(this.notifyOutgoingListeners(t),this.packet(t)):this.sendBuffer.push(t)),this.flags={}):this._addToQueue(e),this}_registerAckCallback(t,e){var i=null!=(i=this.flags.timeout)?i:this._opts.ackTimeout;if(void 0===i)this.acks[t]=e;else{const s=this.io.setTimeoutFn((()=>{delete this.acks[t];for(let e=0;e<this.sendBuffer.length;e++)this.sendBuffer[e].id===t&&this.sendBuffer.splice(e,1);e.call(this,new Error("operation has timed out"))}),i);this.acks[t]=(...t)=>{this.io.clearTimeoutFn(s),e.apply(this,[null,...t])}}}emitWithAck(t,...e){const i=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise(((s,r)=>{e.push(((t,e)=>i?t?r(t):s(e):s(t))),this.emit(t,...e)}))}_addToQueue(t){let e;"function"==typeof t[t.length-1]&&(e=t.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push(((t,...s)=>{if(i===this._queue[0])return null!==t?i.tryCount>this._opts.retries&&(this._queue.shift(),e)&&e(t):(this._queue.shift(),e&&e(null,...s)),i.pending=!1,this._drainQueue()})),this._queue.push(i),this._drainQueue()}_drainQueue(t=!1){var e;!this.connected||0===this._queue.length||(e=this._queue[0]).pending&&!t||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){"function"==typeof this.auth?this.auth((t=>{this._sendConnectPacket(t)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:xt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case xt.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case xt.EVENT:case xt.BINARY_EVENT:this.onevent(t);break;case xt.ACK:case xt.BINARY_ACK:this.onack(t);break;case xt.DISCONNECT:this.ondisconnect();break;case xt.CONNECT_ERROR:this.destroy();var e=new Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e)}}onevent(t){var e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length)for(const e of this._anyListeners.slice())e.apply(this,t);super.emit.apply(this,t),this._pid&&t.length&&"string"==typeof t[t.length-1]&&(this._lastOffset=t[t.length-1])}ack(t){const e=this;let i=!1;return function(...s){i||(i=!0,e.packet({type:xt.ACK,id:t,data:s}))}}onack(t){var e=this.acks[t.id];"function"==typeof e&&(e.apply(this,t.data),delete this.acks[t.id])}onconnect(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((t=>this.emitEvent(t))),this.receiveBuffer=[],this.sendBuffer.forEach((t=>{this.notifyOutgoingListeners(t),this.packet(t)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((t=>t())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:xt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(this._anyListeners)if(t){var e=this._anyListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(this._anyOutgoingListeners)if(t){var e=this._anyOutgoingListeners;for(let i=0;i<e.length;i++)if(t===e[i])return e.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length)for(const e of this._anyOutgoingListeners.slice())e.apply(this,t.data)}}function qi(t){this.ms=(t=t||{}).min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=0<t.jitter&&t.jitter<=1?t.jitter:0,this.attempts=0}qi.prototype.duration=function(){var t,e,i=this.ms*Math.pow(this.factor,this.attempts++);return this.jitter&&(t=Math.random(),e=Math.floor(t*this.jitter*i),i=0==(1&Math.floor(10*t))?i-e:i+e),0|Math.min(i,this.max)},qi.prototype.reset=function(){this.attempts=0},qi.prototype.setMin=function(t){this.ms=t},qi.prototype.setMax=function(t){this.max=t},qi.prototype.setJitter=function(t){this.jitter=t};class Vi extends Ge{constructor(t,e){super(),this.nsps={},this.subs=[],t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.opts=e,Je(this,e),this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(null!=(i=e.randomizationFactor)?i:.5),this.backoff=new qi({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this._readyState="closed",this.uri=t;var i=e.parser||zi;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=!1!==e.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null!=(e=this.backoff)&&e.setMin(t),this)}randomizationFactor(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null!=(e=this.backoff)&&e.setJitter(t),this)}reconnectionDelayMax(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null!=(e=this.backoff)&&e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(!~this._readyState.indexOf("open")){this.engine=new _i(this.uri,this.opts);const s=this.engine,r=this,a=(this._readyState="opening",this.skipReconnect=!1,ji(s,"open",(function(){r.onopen(),t&&t()}))),n=e=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",e),t?t(e):this.maybeReconnectOnOpen()};var e=ji(s,"error",n);if(!1!==this._timeout){var i=this._timeout;const t=this.setTimeoutFn((()=>{a(),n(new Error("timeout")),s.close()}),i);this.opts.autoUnref&&t.unref(),this.subs.push((()=>{this.clearTimeoutFn(t)}))}this.subs.push(a),this.subs.push(e)}return this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");var t=this.engine;this.subs.push(ji(t,"ping",this.onping.bind(this)),ji(t,"data",this.ondata.bind(this)),ji(t,"error",this.onerror.bind(this)),ji(t,"close",this.onclose.bind(this)),ji(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(t){this.onclose("parse error",t)}}ondecoded(t){mi((()=>{this.emitReserved("packet",t)}),this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let i=this.nsps[t];return i?this._autoConnect&&!i.active&&i.connect():(i=new Ui(this,t,e),this.nsps[t]=i),i}_destroy(t){for(const t of Object.keys(this.nsps)){if(this.nsps[t].active)return}this._close()}_packet(t){var e=this.encoder.encode(t);for(let i=0;i<e.length;i++)this.engine.write(e[i],t.options)}cleanup(){this.subs.forEach((t=>t())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var e=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn((()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect)||t.open((e=>{e?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",e)):t.onreconnect()}))}),e);this.opts.autoUnref&&i.unref(),this.subs.push((()=>{this.clearTimeoutFn(i)}))}}onreconnect(){var t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const $i={};function Gi(t,e){"object"==typeof t&&(e=t,t=void 0);t=function(t,e="",i){let s=t;return i=i||"undefined"!=typeof location&&location,"string"==typeof(t=null==t?i.protocol+"//"+i.host:t)&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?i.protocol+t:i.host+t),/^(https?|wss?):\/\//.test(t)||(t=void 0!==i?i.protocol+"//"+t:"https://"+t),s=Ai(t)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/",t=-1!==s.host.indexOf(":")?"["+s.host+"]":s.host,s.id=s.protocol+"://"+t+":"+s.port+e,s.href=s.protocol+"://"+t+(i&&i.port===s.port?"":":"+s.port),s}(t,(e=e||{}).path||"/socket.io");var i=t.source,s=t.id,r=t.path;r=$i[s]&&r in $i[s].nsps;let a;return a=(r=e.forceNew||e["force new connection"]||!1===e.multiplex||r)?new Vi(i,e):($i[s]||($i[s]=new Vi(i,e)),$i[s]),t.query&&!e.query&&(e.query=t.queryKey),a.socket(t.path,e)}Object.assign(Gi,{Manager:Vi,Socket:Ui,io:Gi,connect:Gi});const Wi=st("<style>"),Ki=st('<div class="relative z-10" aria-labelledby="modal-title" role="dialog" aria-modal="true"><style></style><div class="fixed inset-0 bg-black bg-opacity-50 transition-opacity animate-fade-in"></div><div class="fixed inset-0 z-10 overflow-y-auto"><div class="flex min-h-full items-center justify-center p-4 text-center sm:p-0"><div class="relative transform overflow-hidden rounded-lg text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg">'),Xi=st("<div><pre>");const Yi=t=>{let e;const[i]=W(t,["onOpen","onClose","isOpen","value"]),[s,r]=(k((()=>{e&&(e.innerHTML=function(t){return(t=(t="string"!=typeof t?JSON.stringify(t,void 0,2):t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,(function(t){let e="number";return/^"/.test(t)?e=/:$/.test(t)?"key":"string":/true|false/.test(t)?e="boolean":/null/.test(t)&&(e="null"),'<span class="'+e+'">'+t+"</span>"}))}(JSON.stringify(t?.value,void 0,2)))})),x(i.isOpen??!1)),a=(_((()=>{_t(t.isOpen)||t.isOpen===s()||o()})),t=>{t.stopPropagation()}),n=()=>{r(!1),i.onClose?.(),document.body.style.overflow="auto"},o=()=>{s()?n():(r(!0),i.onOpen?.(),document.body.style.overflow="hidden")};return U(X,{get when(){return s()},get children(){return[(ht(r=Wi(),At),r),(r=Ki(),i=r.firstChild,s=i.nextSibling.nextSibling.firstChild.firstChild,r.style.setProperty("z-index","1100"),r.addEventListener("click",n),ht(i,At),s.style.setProperty("background-color","transparent"),s.style.setProperty("margin-left","20px"),s.style.setProperty("margin-right","20px"),s.addEventListener("click",a),s.addEventListener("pointerdown",a),ht(s,(()=>{const i=C((()=>!!t.value));return()=>{return i()&&(s=(t=Xi()).firstChild,t.style.setProperty("background","white"),t.style.setProperty("margin","auto"),t.style.setProperty("padding","7px"),"function"==typeof(r=e)?lt(r,s):e=s,t);var t,s,r}})()),r)];var i,s,r}})},Ji=st('<button class="flex justify-center items-center upload-file-button">'),Qi=t=>{{const e=Ji();return e.$$click=e=>t.onSubmit(e),e.style.setProperty("width","100%"),e.style.setProperty("left","20px"),e.style.setProperty("right","20px"),e.style.setProperty("bottom","75px"),e.style.setProperty("margin","auto"),e.style.setProperty("z-index","1000"),ht(e,(()=>t.children)),A((i=>{var s=t.backgroundColor??"#ffffff",r=t.textColor??"#303235",a=t.disabled;return s!==i._v$&&(null!=(i._v$=s)?e.style.setProperty("background-color",s):e.style.removeProperty("background-color")),r!==i._v$2&&(null!=(i._v$2=r)?e.style.setProperty("color",r):e.style.removeProperty("color")),a!==i._v$3&&(e.disabled=i._v$3=a),i}),{_v$:void 0,_v$2:void 0,_v$3:void 0}),e}},Zi=(rt(["click"]),st('<div class="modal-backdrop"><div class="fixed modal">')),ts=t=>{let e;const i=i=>{e.contains(i.target)||t.onClose()};return C((()=>{const s=C((()=>!!t.isOpen));return()=>{return s()?(a=(r=Zi()).firstChild,r.$$click=i,"function"==typeof(n=e)?lt(n,a):e=a,ht(a,(()=>t.children)),r):[];var r,a,n}})())};function es(t){var e=[];if(t)for(const s in t){var i=+s;isNaN(i)||(i=t[i])&&(i={source:URL.createObjectURL(i),name:i.name,size:i.size,file:i},e.push(i))}return e}function is(t){const[e,i]=x([]);let s=()=>{};const r=async t=>{t.preventDefault(),t.stopPropagation();let e=[];(t=t.currentTarget).files&&(e=es(t.files)),t.removeEventListener("change",r),t.remove(),i(e);try{await s(e)}catch(t){console.error(t)}};return{files:e,selectFiles:e=>{e&&(s=e),e=function({multiple:t=!1,accept:e=""}){var i=document.createElement("input");return i.type="file",i.accept=e,i.multiple=t,i}(t||{}),e.addEventListener("change",r),e.click()},removeFile:t=>{i((e=>e.filter((e=>e.name!==t))))},clearFiles:()=>{i([])}}}rt(["click"]);const ss=st('<svg width="49" height="43" viewBox="0 0 49 43" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="Upload icon"><path id="Vector" d="M25.6402 10.6774L25.5755 10.6581C25.2503 10.5611 25.0648 10.2191 25.1619 9.89358L25.6402 10.6774ZM25.6402 10.6774L25.643 10.6741M25.6402 10.6774L25.643 10.6741M25.643 10.6741C25.948 10.7292 26.2505 10.5465 26.3401 10.244C27.157 7.49922 29.7306 5.58174 32.5978 5.58174C32.9373 5.58174 33.2126 5.30642 33.2126 4.96697C33.2126 4.62751 32.9373 4.3522 32.5978 4.3522C29.074 4.3522 26.1127 6.69839 25.1619 9.89351L25.643 10.6741Z" fill="#2A767E" stroke="#F9FFF9" stroke-width="0.209167"></path><path id="Vector_2" d="M39.74 29.966H36.6789C36.3972 29.966 36.1688 29.7375 36.1688 29.4558C36.1688 29.1741 36.3972 28.9456 36.6789 28.9456H39.74C43.9595 28.9456 47.3927 25.5125 47.3927 21.2929C47.3927 17.0734 43.9595 13.6403 39.74 13.6403H39.6664C39.5184 13.6403 39.3777 13.5761 39.2808 13.4642C39.1839 13.3524 39.1402 13.2041 39.1613 13.0576C39.2068 12.7398 39.2298 12.4206 39.2298 12.1097C39.2298 8.45285 36.2543 5.47736 32.5974 5.47736C31.1748 5.47736 29.818 5.92194 28.6737 6.76336C28.4223 6.94812 28.0652 6.86613 27.9198 6.58954C24.6791 0.418577 16.2146 -0.41012 11.8263 4.95808C9.97764 7.21962 9.25128 10.1615 9.83332 13.0288C9.89746 13.3455 9.65512 13.6406 9.33334 13.6406H9.12891C4.90939 13.6406 1.47622 17.0738 1.47622 21.2933C1.47622 25.5129 4.90939 28.946 9.12891 28.946H12.1899C12.4716 28.946 12.7001 29.1745 12.7001 29.4562C12.7001 29.7379 12.4716 29.9664 12.1899 29.9664H9.12891C4.34666 29.9664 0.455811 26.0755 0.455811 21.2933C0.455811 16.6452 4.13126 12.8393 8.72841 12.6293C8.29658 9.6546 9.12235 6.65402 11.0362 4.31234C15.7346 -1.43555 24.7387 -0.791285 28.5449 5.61803C29.7592 4.85676 31.1486 4.45741 32.5973 4.45741C37.0278 4.45741 40.5386 8.22838 40.2314 12.6341C44.7862 12.8896 48.4128 16.6754 48.4128 21.2929C48.4128 26.0755 44.522 29.966 39.7397 29.966L39.74 29.966Z" fill="#2A767E"></path><path id="Vector_3" d="M11.5067 29.1677C11.5067 36.2584 17.2753 42.0269 24.366 42.0269C31.4567 42.0269 37.2252 36.2583 37.2252 29.1677C37.2252 22.077 31.4567 16.3085 24.366 16.3085C17.2752 16.3085 11.5067 22.0771 11.5067 29.1677ZM12.7365 29.1677C12.7365 22.7554 17.9536 17.5383 24.366 17.5383C30.7783 17.5383 35.9954 22.7553 35.9954 29.1677C35.9954 35.58 30.7783 40.7972 24.366 40.7972C17.9537 40.7972 12.7365 35.5801 12.7365 29.1677Z" fill="#2A767E" stroke="#F9FFF9" stroke-width="0.209167"></path><g id="arrow"><path id="Vector_4" d="M24.1212 34.3021C24.1212 34.5661 24.3354 34.7802 24.5993 34.7802C24.8633 34.7802 25.0774 34.5664 25.0774 34.3021V24.5908C25.0774 24.3268 24.8633 24.1127 24.5993 24.1127C24.3353 24.1127 24.1212 24.3268 24.1212 24.5908V34.3021Z" fill="#2A767E" stroke="#2A767E" stroke-width="0.209167"></path><path id="Vector_5" d="M24.5992 25.268L21.9493 27.9179L21.9492 27.918L24.5992 25.268ZM24.5992 25.268L27.2492 27.918C27.3424 28.0112 27.4651 28.058 27.5872 28.058L24.5992 25.268ZM24.9372 24.2538C24.7505 24.067 24.4477 24.0669 24.2611 24.2538L27.5872 28.058C27.7091 28.058 27.832 28.0116 27.9254 27.9179C28.1121 27.7311 28.112 27.4286 27.9253 27.2418L24.9372 24.2538Z" fill="#2A767E" stroke="#2A767E" stroke-width="0.209167">'),rs=()=>ss(),as=st('<svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="Delete"><circle id="Ellipse 5" cx="8.47168" cy="8" r="8" fill="black" fill-opacity="0.6"></circle><g id="Bin icon"><path id="Vector" d="M11.9488 5.14517H10.9493C10.9359 5.14054 10.922 5.13753 10.9079 5.13614H9.84366V4.25348C9.84372 4.18714 9.81772 4.12346 9.77137 4.07608C9.72496 4.02871 9.66188 4.00138 9.59561 4H7.07864C7.0114 4 6.94694 4.02667 6.89944 4.07422C6.85189 4.12177 6.82517 4.18624 6.82517 4.25348V5.13614H5.76631C5.75222 5.13753 5.73832 5.14054 5.72496 5.14517H4.72539C4.6348 5.14517 4.55113 5.19345 4.50587 5.27188C4.46061 5.35031 4.46061 5.44691 4.50587 5.52535C4.55114 5.60378 4.63481 5.65211 4.72539 5.65211H5.53975L6.19778 11.7735C6.20482 11.8358 6.23456 11.8933 6.28133 11.9351C6.32804 11.9769 6.38853 11.9999 6.45125 12H10.2265C10.2886 11.9991 10.3482 11.9756 10.3942 11.9339C10.4402 11.8922 10.4694 11.8352 10.4764 11.7735L11.1344 5.66105H11.9488C12.0394 5.66105 12.1231 5.61277 12.1683 5.53434C12.2136 5.45591 12.2136 5.35924 12.1683 5.28087C12.1231 5.20244 12.0394 5.1541 11.9488 5.1541L11.9488 5.14517ZM7.33758 4.50695H9.33664V5.13614H7.33758V4.50695ZM9.99647 11.4894H6.67775L6.04855 5.66111H10.6256L9.99647 11.4894Z" fill="white"></path><path id="Vector_2" d="M8.3377 10.8962C8.40493 10.8962 8.4694 10.8695 8.51696 10.822C8.56451 10.7744 8.59117 10.71 8.59117 10.6427V6.50791C8.59117 6.41732 8.5429 6.33365 8.46447 6.28839C8.38604 6.24306 8.28937 6.24306 8.21094 6.28839C8.1325 6.33365 8.08423 6.41732 8.08423 6.50791V10.6427C8.08423 10.71 8.11089 10.7744 8.15845 10.822C8.206 10.8695 8.27046 10.8962 8.3377 10.8962H8.3377Z" fill="white"></path><path id="Vector_3" d="M7.33981 10.8944H7.35058C7.41752 10.8917 7.4806 10.8625 7.52611 10.8133C7.57156 10.7641 7.59576 10.6989 7.59329 10.632L7.44046 6.49719L7.44052 6.49713C7.43913 6.42941 7.41018 6.36512 7.36028 6.31926C7.31032 6.27345 7.24387 6.25004 7.17622 6.25443C7.10928 6.25726 7.0462 6.28645 7.00075 6.33563C6.95524 6.38481 6.93111 6.45 6.93351 6.51694L7.08634 10.6517C7.08953 10.7169 7.11758 10.7784 7.16477 10.8236C7.21191 10.8687 7.27457 10.8941 7.33981 10.8944L7.33981 10.8944Z" fill="white"></path><path id="Vector_4" d="M9.32638 10.8946H9.33534C9.40216 10.8961 9.46687 10.8713 9.51562 10.8256C9.56431 10.7798 9.59321 10.7168 9.59604 10.6501L9.74887 6.51526H9.74881C9.75128 6.44832 9.72708 6.38313 9.68163 6.33395C9.63613 6.28477 9.57304 6.25558 9.5061 6.25275C9.43766 6.24571 9.3694 6.2678 9.31806 6.31367C9.26672 6.35947 9.2371 6.42484 9.23644 6.49371L9.08181 10.6285H9.08187C9.07844 10.6964 9.10239 10.7627 9.14838 10.8128C9.19431 10.8628 9.25847 10.8923 9.32637 10.8946L9.32638 10.8946Z" fill="white">'),ns=()=>as(),os=st('<div class="flex items-center justify-between upload-file-item"><p></p><div>'),ls=t=>{return s=(i=(e=os()).firstChild).nextSibling,ht(i,(()=>t.file.name)),s.$$click=()=>t.onDelete(),s.style.setProperty("cursor","pointer"),ht(s,U(ns,{})),e;var e,i,s},hs=(rt(["click"]),st('<form class="flex flex-col justify-center items-center gap-8"><div class="flex flex-col justify-center items-center gap-6"><h2 class="modal-title">Faa o upload do seu Laudo Mdico</h2><div class="dropzone flex justify-center items-center"><div class="flex flex-col justify-center items-center gap-2"><div><h3>Arraste & solte arquivos ou <a>Escolha</a></h3><p>Formatos suportados: JPEG, PNG, PDF</p></div></div></div><div class="flex flex-col gap-2">')),ds=st('<h4 class="upload-message">Fazendo upload do documento'),cs=t=>{const[e,i]=x([]),{selectFiles:s,clearFiles:r}=is({accept:"image/jpeg,image/gif,image/png,application/pdf,image/x-eps"}),{setRef:a,clearFiles:n}=function(t){const[e,i]=x([]),[s,r]=x(!1);let a;const n=e=>{r(!0),Promise.resolve(t?.onDragStart?.(es(e.dataTransfer?.files||null)))},o=e=>{r(!1),Promise.resolve(t?.onDragEnd?.(es(e.dataTransfer?.files||null)))},l=e=>{Promise.resolve(t?.onDragEnter?.(es(e.dataTransfer?.files||null)))},h=e=>{Promise.resolve(t?.onDragLeave?.(es(e.dataTransfer?.files||null)))},d=e=>{e.preventDefault(),Promise.resolve(t?.onDragOver?.(es(e.dataTransfer?.files||null)))},c=e=>{Promise.resolve(t?.onDrag?.(es(e.dataTransfer?.files||null)))},u=e=>{e.preventDefault(),e=es(e.dataTransfer?.files||null),i(e),Promise.resolve(t?.onDrop?.(e))};return k((()=>{a&&(a.addEventListener("dragstart",n),a.addEventListener("dragenter",l),a.addEventListener("dragend",o),a.addEventListener("dragleave",h),a.addEventListener("dragover",d),a.addEventListener("drag",c),a.addEventListener("drop",u),S((()=>{a?.removeEventListener("dragstart",n),a?.removeEventListener("dragenter",l),a?.removeEventListener("dragend",o),a?.removeEventListener("dragleave",h),a?.removeEventListener("dragover",d),a?.removeEventListener("drag",c),a?.removeEventListener("drop",u)})))})),{setRef:t=>{a=t},files:e,isDragging:s,removeFile:t=>{i((e=>e.filter((e=>e.name!==t))))},clearFiles:()=>{i([])}}}({onDrop:t=>{i(t)}}),o=()=>{r(),n(),i([])};return u=(c=(d=(h=(l=hs()).firstChild.firstChild.nextSibling).firstChild).firstChild).firstChild.firstChild.nextSibling,p=h.nextSibling,lt(a,h),ht(d,U(rs,{}),c),u.$$click=t=>{t.preventDefault(),s((t=>{i(t)}))},ht(p,(()=>{const t=C((()=>0<e().length));return()=>t()&&ds()})(),null),ht(p,U(K,{get each(){return e()},children:t=>U(ls,{file:t,onDelete:o})}),null),ht(l,U(Qi,{onSubmit:i=>{i.preventDefault(),t.onSubmit(e())},get backgroundColor(){return t.buttonInput?.backgroundColor},get textColor(){return t.buttonInput?.textColor},get disabled(){return 0===e()?.length},children:"Enviar Arquivos"}),null),l;var l,h,d,c,u,p},us=(rt(["click"]),st('<svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.06686 13.8666H5.2002V12.1333H6.06686C6.29672 12.1333 6.51716 12.2246 6.67969 12.3871C6.84222 12.5497 6.93353 12.7701 6.93353 13C6.93353 13.2298 6.84222 13.4503 6.67969 13.6128C6.51716 13.7753 6.29672 13.8666 6.06686 13.8666ZM12.1335 17.3333V12.1333H13.0002C13.2301 12.1333 13.4505 12.2246 13.613 12.3871C13.7756 12.5497 13.8669 12.7701 13.8669 13V16.4666C13.8669 16.6965 13.7756 16.9169 13.613 17.0795C13.4505 17.242 13.2301 17.3333 13.0002 17.3333H12.1335Z" fill="#F34646"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M1.7334 2.6C1.7334 1.91044 2.00733 1.24912 2.49492 0.761522C2.98252 0.273928 3.64384 0 4.3334 0L18.5589 0L24.2667 5.70787V23.4C24.2667 24.0896 23.9928 24.7509 23.5052 25.2385C23.0176 25.7261 22.3563 26 21.6667 26H4.3334C3.64384 26 2.98252 25.7261 2.49492 25.2385C2.00733 24.7509 1.7334 24.0896 1.7334 23.4V2.6ZM6.06673 10.4H3.46673V19.0667H5.20007V15.6H6.06673C6.75629 15.6 7.41762 15.3261 7.90521 14.8385C8.3928 14.3509 8.66673 13.6896 8.66673 13C8.66673 12.3104 8.3928 11.6491 7.90521 11.1615C7.41762 10.6739 6.75629 10.4 6.06673 10.4ZM13.0001 10.4H10.4001V19.0667H13.0001C13.6896 19.0667 14.3509 18.7927 14.8385 18.3051C15.3261 17.8176 15.6001 17.1562 15.6001 16.4667V13C15.6001 12.3104 15.3261 11.6491 14.8385 11.1615C14.3509 10.6739 13.6896 10.4 13.0001 10.4ZM17.3334 19.0667V10.4H22.5334V12.1333H19.0667V13.8667H20.8001V15.6H19.0667V19.0667H17.3334Z" fill="#F34646"></path><rect x="2" y="8" width="21" height="13" fill="#F34646"></rect><path d="M4.6456 18V11.4545H7.10014C7.60298 11.4545 8.02486 11.5483 8.36577 11.7358C8.70881 11.9233 8.96768 12.1811 9.1424 12.5092C9.31925 12.8352 9.40767 13.206 9.40767 13.6214C9.40767 14.0412 9.31925 14.4141 9.1424 14.7401C8.96555 15.0661 8.70455 15.3228 8.35938 15.5103C8.0142 15.6957 7.58913 15.7884 7.08416 15.7884H5.45739V14.8136H6.92436C7.21839 14.8136 7.45916 14.7624 7.64666 14.6602C7.83416 14.5579 7.97266 14.4173 8.06214 14.2383C8.15376 14.0593 8.19957 13.8537 8.19957 13.6214C8.19957 13.3892 8.15376 13.1847 8.06214 13.0078C7.97266 12.831 7.8331 12.6935 7.64347 12.5955C7.45597 12.4954 7.21413 12.4453 6.91797 12.4453H5.83132V18H4.6456ZM12.6556 18H10.4376V11.4545H12.7004C13.3502 11.4545 13.9085 11.5856 14.3751 11.8477C14.8438 12.1076 15.2039 12.4815 15.4553 12.9695C15.7068 13.4574 15.8325 14.0412 15.8325 14.7209C15.8325 15.4027 15.7057 15.9886 15.4521 16.4787C15.2007 16.9687 14.8374 17.3448 14.3623 17.6069C13.8893 17.869 13.3204 18 12.6556 18ZM11.6233 16.9741H12.5981C13.0541 16.9741 13.4344 16.891 13.7391 16.7248C14.0438 16.5565 14.2728 16.3061 14.4262 15.9737C14.5796 15.6392 14.6563 15.2216 14.6563 14.7209C14.6563 14.2202 14.5796 13.8047 14.4262 13.4744C14.2728 13.142 14.0459 12.8938 13.7455 12.7298C13.4472 12.5636 13.0764 12.4805 12.6333 12.4805H11.6233V16.9741ZM16.9591 18V11.4545H21.1523V12.4485H18.1448V14.2255H20.8646V15.2195H18.1448V18H16.9591Z" fill="white">')),ps=()=>us();var gs,fs,ms,vs,bs={640:(t,e,i)=>{i.d(e,{AnnotationLayer:()=>z,FreeTextAnnotationElement:()=>E,InkAnnotationElement:()=>L,StampAnnotationElement:()=>B});var s=i(266),r=i(473),a=i(780);function n(t){return Math.floor(255*Math.max(0,Math.min(1,t))).toString(16).padStart(2,"0")}function o(t){return Math.max(0,Math.min(255,255*t))}class l{static CMYK_G([t,e,i,s]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return[t=o(t),t,t]}static G_HTML([t]){return"#"+(t=n(t))+t+t}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(o)}static RGB_HTML(t){return"#"+t.map(n).join("")}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,i+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,i,s]){return[o(1-Math.min(1,t+s)),o(1-Math.min(1,i+s)),o(1-Math.min(1,e+s))]}static CMYK_HTML(t){return t=this.CMYK_RGB(t).slice(1),this.RGB_HTML(t)}static RGB_CMYK([t,e,i]){return["CMYK",t=1-t,e=1-e,i=1-i,Math.min(t,e,i)]}}var h=i(160);const d=new WeakSet;function c(t){return{width:t[2]-t[0],height:t[3]-t[1]}}class u{static create(t){switch(t.data.annotationType){case s.AnnotationType.LINK:return new g(t);case s.AnnotationType.TEXT:return new f(t);case s.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new v(t);case"Btn":return t.data.radioButton?new w(t):new(t.data.checkBox?y:x)(t);case"Ch":return new A(t);case"Sig":return new b(t)}return new m(t);case s.AnnotationType.POPUP:return new _(t);case s.AnnotationType.FREETEXT:return new E(t);case s.AnnotationType.LINE:return new k(t);case s.AnnotationType.SQUARE:return new S(t);case s.AnnotationType.CIRCLE:return new T(t);case s.AnnotationType.POLYLINE:return new P(t);case s.AnnotationType.CARET:return new R(t);case s.AnnotationType.INK:return new L(t);case s.AnnotationType.POLYGON:return new M(t);case s.AnnotationType.HIGHLIGHT:return new I(t);case s.AnnotationType.UNDERLINE:return new D(t);case s.AnnotationType.SQUIGGLY:return new F(t);case s.AnnotationType.STRIKEOUT:return new O(t);case s.AnnotationType.STAMP:return new B(t);case s.AnnotationType.FILEATTACHMENT:return new N(t);default:return new p(t)}}}class p{#t=!1;constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:s=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:i}){return!!(t?.str||e?.str||i?.str)}get hasPopupData(){return p._hasPopupData(this.data)}_createContainer(t){var{data:e,parent:{page:i,viewport:r}}=this,a=document.createElement("section"),{pageWidth:r,pageHeight:n,pageX:o,pageY:l}=(a.setAttribute("data-annotation-id",e.id),this instanceof m||(a.tabIndex=1e3),a.style.zIndex=this.parent.zIndex++,this.data.popupRef&&a.setAttribute("aria-haspopup","dialog"),e.noRotate&&a.classList.add("norotate"),r.rawDims);if(!e.rect||this instanceof _){const t=e.rotation;e.hasOwnCanvas||0===t||this.setRotation(t,a)}else{var{width:h,height:d}=c(e.rect),i=s.Util.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]);if(!t&&0<e.borderStyle.width){a.style.borderWidth=e.borderStyle.width+"px";t=e.borderStyle.horizontalCornerRadius;var u=e.borderStyle.verticalCornerRadius;switch(0<t||0<u?a.style.borderRadius=`calc(${t}px * var(--scale-factor)) / calc(${u}px * var(--scale-factor))`:this instanceof w&&(a.style.borderRadius=`calc(${h}px * var(--scale-factor)) / calc(${d}px * var(--scale-factor))`),e.borderStyle.style){case s.AnnotationBorderStyleType.SOLID:a.style.borderStyle="solid";break;case s.AnnotationBorderStyleType.DASHED:a.style.borderStyle="dashed";break;case s.AnnotationBorderStyleType.BEVELED:(0,s.warn)("Unimplemented border style: beveled");break;case s.AnnotationBorderStyleType.INSET:(0,s.warn)("Unimplemented border style: inset");break;case s.AnnotationBorderStyleType.UNDERLINE:a.style.borderBottomStyle="solid"}(t=e.borderColor||null)?(this.#t=!0,a.style.borderColor=s.Util.makeHexColor(0|t[0],0|t[1],0|t[2])):a.style.borderWidth=0}a.style.left=100*(i[0]-o)/r+"%",a.style.top=100*(i[1]-l)/n+"%";const p=e.rotation;e.hasOwnCanvas||0===p?(a.style.width=100*h/r+"%",a.style.height=100*d/n+"%"):this.setRotation(p,a)}return a}setRotation(t,e=this.container){if(this.data.rect){var{pageWidth:i,pageHeight:s}=this.parent.viewport.rawDims,{width:r,height:a}=c(this.data.rect);let n,o;o=t%180==0?(n=100*r/i,100*a/s):(n=100*a/i,100*r/s),e.style.width=n+"%",e.style.height=o+"%",e.setAttribute("data-main-rotation",(360-t)%360)}}get _commonActions(){const t=(t,e,i)=>{var s=(t=i.detail[t])[0];t=t.slice(1);i.target.style[e]=l[s+"_HTML"](t),this.annotationStorage.setValue(this.data.id,{[e]:l[s+"_rgb"](t)})};return(0,s.shadow)(this,"_commonActions",{display:t=>{var e=(t=t.detail.display)%2==1;this.container.style.visibility=e?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:e,noPrint:1===t||2===t})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{t=t.detail.hidden,this.container.style.visibility=t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:t,noView:t})},focus:t=>{setTimeout((()=>t.target.focus({preventScroll:!1})),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:t=>{t=t.detail.rotation,this.setRotation(t),this.annotationStorage.setValue(this.data.id,{rotation:t})}})}_dispatchEventFromSandbox(t,e){var i=this._commonActions;for(const s of Object.keys(e.detail))(t[s]||i[s])?.(e)}_setDefaultPropertiesFromJS(t){if(this.enableScripting){var e=this.annotationStorage.getRawValue(this.data.id);if(e){var i,s,r=this._commonActions;for([i,s]of Object.entries(e)){var a=r[i];a&&(a({detail:{[i]:s},target:t}),delete e[i])}}}}_createQuadrilaterals(){if(this.container){var t=this.data.quadPoints;if(t){var[e,i,s,r]=this.data.rect;if(1===t.length){var[,{x:a,y:n},{x:o,y:l}]=t[0];if(s===a&&r===n&&e===o&&i===l)return}let A;a=this.container.style,this.#t&&(({borderColor:n,borderWidth:o}=a),a.borderWidth=0,A=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${n}" stroke-width="${o}">`],this.container.classList.add("hasBorder"));var h,d,c,u,l,p=s-e,g=r-i,f=this.svgFactory,n=((l=f.createElement("svg")).classList.add("quadrilateralsContainer"),l.setAttribute("width",0),l.setAttribute("height",0),f.createElement("defs")),m=(l.append(n),f.createElement("clipPath")),o="clippath_"+this.data.id;for([,{x:h,y:d},{x:c,y:u}]of(m.setAttribute("id",o),m.setAttribute("clipPathUnits","objectBoundingBox"),n.append(m),t)){var v=f.createElement("rect"),b=(c-e)/p,y=(r-d)/g,w=(h-c)/p,x=(d-u)/g;v.setAttribute("x",b),v.setAttribute("y",y),v.setAttribute("width",w),v.setAttribute("height",x),m.append(v),A?.push(`<rect vector-effect="non-scaling-stroke" x="${b}" y="${y}" width="${w}" height="${x}"/>`)}this.#t&&(A.push("</g></svg>')"),a.backgroundImage=A.join("")),this.container.append(l),this.container.style.clipPath=`url(#${o})`}}}_createPopup(){var{container:t,data:e}=this,t=(t.setAttribute("aria-haspopup","dialog"),new _({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:"popup_"+e.id,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){(0,s.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){var i=[];if(this._fieldObjects){var r=this._fieldObjects[t];if(r)for(var{page:a,id:n,exportValues:o}of r)-1!==a&&n!==e&&(a="string"==typeof o?o:null,(o=document.querySelector(`[data-element-id="${n}"]`))&&!d.has(o)?(0,s.warn)("_getElementsByName - element not allowed: "+n):i.push({id:n,exportValue:a,domElement:o}))}else for(const s of document.getElementsByName(t)){var l=s.exportValue,h=s.getAttribute("data-element-id");h!==e&&d.has(s)&&i.push({id:h,exportValue:l,domElement:s})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){var t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(this._isEditable){const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",(()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})}))}}}class g extends p{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){var{data:t,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let s=!1;return t.url?(e.addLinkAttributes(i,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(i,t.action),s=!0):t.attachment?(this.#e(i,t.attachment,t.attachmentDest),s=!0):t.setOCGState?(this.#i(i,t.setOCGState),s=!0):t.dest?(this._bindLink(i,t.dest),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),s=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(i,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(i),this.container}#s(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),!e&&""!==e||this.#s()}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),this.#s()}#e(t,e,i=null){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,i),!1),this.#s()}#i(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),this.#s()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");var i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(e.actions)){var s=i.get(r);s&&(t[s]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:r}}),!1))}t.onclick||(t.onclick=()=>!1),this.#s()}_bindResetFormAction(t,e){const i=t.onclick;i||(t.href=this.linkService.getAnchorUrl("")),this.#s(),this._fieldObjects?t.onclick=()=>{i?.();var{fields:t,refs:r,include:a}=e,n=[];if(0!==t.length||0!==r.length){var o,l=new Set(r);for(const e of t)for({id:o}of this._fieldObjects[e]||[])l.add(o);for(const t of Object.values(this._fieldObjects))for(const e of t)l.has(e.id)===a&&n.push(e)}else for(const t of Object.values(this._fieldObjects))n.push(...t);var h=this.annotationStorage,c=[];for(const t of n){var u=t.id;switch(c.push(u),t.type){case"text":var p=t.defaultValue||"";h.setValue(u,{value:p});break;case"checkbox":case"radiobutton":p=t.defaultValue===t.exportValues,h.setValue(u,{value:p});break;case"combobox":case"listbox":var g=t.defaultValue||"";h.setValue(u,{value:g});break;default:continue}var f=document.querySelector(`[data-element-id="${u}"]`);f&&(d.has(f)?f.dispatchEvent(new Event("resetform")):(0,s.warn)("_bindResetFormAction - element not allowed: "+u))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}}),!1}:((0,s.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1))}}class f extends p{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");var t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class m extends p{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&("CANVAS"===t.previousSibling?.nodeName&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return s.FeatureTest.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,s,r){i.includes("mouse")?t.addEventListener(i,(t=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(t),shift:t.shiftKey,modifier:this._getKeyModifier(t)}})})):t.addEventListener(i,(t=>{if("blur"===i){if(!e.focused||!t.relatedTarget)return;e.focused=!1}else if("focus"===i){if(e.focused)return;e.focused=!0}r&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(t)}})}))}_setEventListeners(t,e,i,s){for(var[r,a]of i)"Action"!==a&&!this.data.actions?.[a]||("Focus"!==a&&"Blur"!==a||(e||={focused:!1}),this._setEventListener(t,e,r,a,s),"Focus"!==a||this.data.actions?.Blur?"Blur"!==a||this.data.actions?.Focus||this._setEventListener(t,e,"focus","Focus",null):this._setEventListener(t,e,"blur","Blur",null))}_setBackgroundColor(t){var e=this.data.backgroundColor||null;t.style.backgroundColor=null===e?"transparent":s.Util.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){var e=this.data.defaultAppearanceData.fontColor,i=this.data.defaultAppearanceData.fontSize||9;t=t.style;let r;var a,n,o=t=>Math.round(10*t)/10;r=this.data.multiLine?(n=Math.abs(this.data.rect[3]-this.data.rect[1]-2),a=Math.round(n/(s.LINE_FACTOR*i))||1,Math.min(i,o(n/a/s.LINE_FACTOR))):(n=Math.abs(this.data.rect[3]-this.data.rect[1]-2),Math.min(i,o(n/s.LINE_FACTOR))),t.fontSize=`calc(${r}px * var(--scale-factor))`,t.color=s.Util.makeHexColor(e[0],e[1],e[2]),null!==this.data.textAlignment&&(t.textAlign=["left","center","right"][this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class v extends m{constructor(t){super(t,{isRenderable:t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue})}setPropertyOnSiblings(t,e,i,s){var r=this.annotationStorage;for(const a of this._getElementsByName(t.name,t.id))a.domElement&&(a.domElement[e]=i),r.setValue(a.id,{[s]:i})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){var s=t.getValue(e,{value:this.data.fieldValue});let a=s.value||"";var r=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;r&&a.length>r&&(a=a.slice(0,r));let n=s.formattedValue||this.data.textContent?.join("\n")||null;n&&this.data.comb&&(n=n.replaceAll(/\s+/g,""));const o={userValue:a,formattedValue:n,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?((i=document.createElement("textarea")).textContent=n??a,this.data.doNotScroll&&(i.style.overflowY="hidden")):((i=document.createElement("input")).type="text",i.setAttribute("value",n??a),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),d.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=1e3,this._setRequired(i,this.data.required),r&&(i.maxLength=r),i.addEventListener("input",(s=>{t.setValue(e,{value:s.target.value}),this.setPropertyOnSiblings(i,"value",s.target.value,"value"),o.formattedValue=null})),i.addEventListener("resetform",(t=>{var e=this.data.defaultFieldValue??"";i.value=o.userValue=e,o.formattedValue=null}));let l=t=>{var e=o.formattedValue;null!=e&&(t.target.value=e),t.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",(t=>{o.focused||(t=t.target,o.userValue&&(t.value=o.userValue),o.lastCommittedValue=t.value,o.commitKey=1,this.data.actions?.Focus)||(o.focused=!0)})),i.addEventListener("updatefromsandbox",(i=>{this.showElementAndHideCanvas(i.target),this._dispatchEventFromSandbox({value(i){o.userValue=i.detail.value??"",t.setValue(e,{value:o.userValue.toString()}),i.target.value=o.userValue},formattedValue(i){var s=i.detail.formattedValue;null!=(o.formattedValue=s)&&i.target!==document.activeElement&&(i.target.value=s),t.setValue(e,{formattedValue:s})},selRange(t){t.target.setSelectionRange(...t.detail.selRange)},charLimit:i=>{var s=i.detail.charLimit;i=i.target;if(0===s)i.removeAttribute("maxLength");else{i.setAttribute("maxLength",s);let r=o.userValue;!r||r.length<=s||(r=r.slice(0,s),i.value=o.userValue=r,t.setValue(e,{value:r}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:r,willCommit:!0,commitKey:1,selStart:i.selectionStart,selEnd:i.selectionEnd}}))}}},i)})),i.addEventListener("keydown",(t=>{let i=-(o.commitKey=1);var s;"Escape"===t.key?i=0:"Enter"!==t.key||this.data.multiLine?"Tab"===t.key&&(o.commitKey=3):i=2,-1!==i&&(s=t.target.value,o.lastCommittedValue!==s)&&(o.lastCommittedValue=s,o.userValue=s,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:s,willCommit:!0,commitKey:i,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}))}));const s=l;l=null,i.addEventListener("blur",(t=>{var i;o.focused&&t.relatedTarget&&(this.data.actions?.Blur||(o.focused=!1),i=t.target.value,o.userValue=i,o.lastCommittedValue!==i&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:i,willCommit:!0,commitKey:o.commitKey,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}),s(t))})),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",(t=>{o.lastCommittedValue=null;var{data:i,target:s}=t,{value:r,selectionStart:a,selectionEnd:n}=s;let l=a,h=n;switch(t.inputType){case"deleteWordBackward":var d=r.substring(0,a).match(/\w*[^\w]*$/);d&&(l-=d[0].length);break;case"deleteWordForward":(d=r.substring(a).match(/^[^\w]*\w*/))&&(h+=d[0].length);break;case"deleteContentBackward":a===n&&--l;break;case"deleteContentForward":a===n&&(h+=1)}t.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:r,change:i||"",willCommit:!1,selStart:l,selEnd:h}})})),this._setEventListeners(i,o,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.value))}l&&i.addEventListener("blur",l),this.data.comb&&(s=(this.data.rect[2]-this.data.rect[0])/r,i.classList.add("comb"),i.style.letterSpacing=`calc(${s}px * var(--scale-factor) - 1ch)`)}else(i=document.createElement("div")).textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class b extends m{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class y extends m{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let s=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;"string"==typeof s&&(s="Off"!==s,t.setValue(i,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");var r=document.createElement("input");return d.add(r),r.setAttribute("data-element-id",i),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=1e3,r.addEventListener("change",(s=>{var{name:s,checked:r}=s.target;for(const n of this._getElementsByName(s,i)){var a=r&&n.exportValue===e.exportValue;n.domElement&&(n.domElement.checked=a),t.setValue(n.id,{value:a})}t.setValue(i,{value:r})})),r.addEventListener("resetform",(t=>{var i=e.defaultFieldValue||"Off";t.target.checked=i===e.exportValue})),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",(e=>{this._dispatchEventFromSandbox({value(e){e.target.checked="Off"!==e.detail.value,t.setValue(i,{value:e.target.checked})}},e)})),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.checked))),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class w extends m{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let s=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if("string"==typeof s&&(s=s!==e.buttonValue,t.setValue(i,{value:s})),s)for(const s of this._getElementsByName(e.fieldName,i))t.setValue(s.id,{value:!1});var r=document.createElement("input");if(d.add(r),r.setAttribute("data-element-id",i),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=1e3,r.addEventListener("change",(e=>{var{name:e,checked:s}=e.target;for(const s of this._getElementsByName(e,i))t.setValue(s.id,{value:!1});t.setValue(i,{value:s})})),r.addEventListener("resetform",(t=>{var i=e.defaultFieldValue;t.target.checked=null!=i&&i===e.buttonValue})),this.enableScripting&&this.hasJSActions){const s=e.buttonValue;r.addEventListener("updatefromsandbox",(e=>{this._dispatchEventFromSandbox({value:e=>{var r=s===e.detail.value;for(const s of this._getElementsByName(e.target.name)){var a=r&&s.id===i;s.domElement&&(s.domElement.checked=a),t.setValue(s.id,{value:a})}}},e)})),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.checked))}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class x extends g{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){var t=super.render(),e=(t.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(t.title=this.data.alternativeText),t.lastChild);return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",(t=>{this._dispatchEventFromSandbox({},t)}))),t}}class A extends m{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id;var i=t.getValue(e,{value:this.data.fieldValue});const s=document.createElement("select");d.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=1e3;let r=this.data.combo&&0<this.data.options.length;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",(t=>{var e=this.data.defaultFieldValue;for(const t of s.options)t.selected=t.value===e}));for(const t of this.data.options){var a=document.createElement("option");a.textContent=t.displayValue,a.value=t.exportValue,i.value.includes(t.exportValue)&&(a.setAttribute("selected",!0),r=!1),s.append(a)}let n=null;if(r){const t=document.createElement("option");t.value=" ",t.setAttribute("hidden",!0),t.setAttribute("selected",!0),s.prepend(t),n=()=>{t.remove(),s.removeEventListener("input",n),n=null},s.addEventListener("input",n)}const o=t=>{const e=t?"value":"textContent";var{options:t,multiple:i}=s;return i?Array.prototype.filter.call(t,(t=>t.selected)).map((t=>t[e])):-1===t.selectedIndex?null:t[t.selectedIndex][e]};let l=o(!1);const h=t=>(t=t.target.options,Array.prototype.map.call(t,(t=>({displayValue:t.textContent,exportValue:t.value}))));return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",(i=>{this._dispatchEventFromSandbox({value(i){n?.();i=i.detail.value;var r=new Set(Array.isArray(i)?i:[i]);for(const t of s.options)t.selected=r.has(t.value);t.setValue(e,{value:o(!0)}),l=o(!1)},multipleSelection(t){s.multiple=!0},remove(i){var r=s.options,a=i.detail.remove;r[a].selected=!1,s.remove(a),0<r.length&&-1===Array.prototype.findIndex.call(r,(t=>t.selected))&&(r[0].selected=!0),t.setValue(e,{value:o(!0),items:h(i)}),l=o(!1)},clear(i){for(;0!==s.length;)s.remove(0);t.setValue(e,{value:null,items:[]}),l=o(!1)},insert(i){var{index:r,displayValue:a,exportValue:n}=i.detail.insert,r=s.children[r],d=document.createElement("option");d.textContent=a,d.value=n,r?r.before(d):s.append(d),t.setValue(e,{value:o(!0),items:h(i)}),l=o(!1)},items(i){for(var r=i.detail.items;0!==s.length;)s.remove(0);for(const t of r){var{displayValue:a,exportValue:n}=t,d=document.createElement("option");d.textContent=a,d.value=n,s.append(d)}0<s.options.length&&(s.options[0].selected=!0),t.setValue(e,{value:o(!0),items:h(i)}),l=o(!1)},indices(i){var s=new Set(i.detail.indices);for(const t of i.target.options)t.selected=s.has(t.index);t.setValue(e,{value:o(!0)}),l=o(!1)},editable(t){t.target.disabled=!t.detail.editable}},i)})),s.addEventListener("input",(i=>{var s=o(!0);t.setValue(e,{value:s}),i.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:l,changeEx:s,willCommit:!1,commitKey:1,keyDown:!1}})})),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],(t=>t.target.value))):s.addEventListener("input",(function(i){t.setValue(e,{value:o(!0)})})),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class _ extends p{constructor(t){var{data:e,elements:i}=t;super(t,{isRenderable:p._hasPopupData(e)}),this.elements=i}render(){this.container.classList.add("popupAnnotation");var t=new C({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const i of this.elements)i.popup=t,e.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",e.map((t=>""+s.AnnotationPrefix+t)).join(",")),this.container}}class C{#r=this.#a.bind(this);#n=this.#o.bind(this);#l=this.#h.bind(this);#d=this.#c.bind(this);#u=null;#p=null;#g=null;#f=null;#m=null;#v=null;#b=null;#y=!1;#w=null;#x=null;#A=null;#_=null;#C=!1;constructor({container:t,color:e,elements:i,titleObj:s,modificationDate:a,contentsObj:n,richText:o,parent:l,rect:h,parentRect:d,open:c}){this.#p=t,this.#_=s,this.#g=n,this.#A=o,this.#v=l,this.#u=e,this.#x=h,this.#b=d,this.#m=i,this.#f=r.PDFDateString.toDateObject(a),this.trigger=i.flatMap((t=>t.getElementsToTriggerPopup()));for(const t of this.trigger)t.addEventListener("click",this.#d),t.addEventListener("mouseenter",this.#l),t.addEventListener("mouseleave",this.#n),t.classList.add("popupTriggerArea");for(const t of i)t.container?.addEventListener("keydown",this.#r);this.#p.hidden=!0,c&&this.#c()}render(){if(!this.#w){var{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:r,pageY:a}}}=this.#v,n=this.#w=document.createElement("div");if(n.className="popup",this.#u){var o=n.style.outlineColor=s.Util.makeHexColor(...this.#u);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?n.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`:n.style.backgroundColor=s.Util.makeHexColor(...this.#u.map((t=>Math.floor(.7*(255-t)+t))))}var l=((o=document.createElement("span")).className="header",document.createElement("h1"));o=(o.append(l),({dir:l.dir,str:l.textContent}=this.#_),n.append(o),this.#f&&((l=document.createElement("span")).classList.add("popupDate"),l.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),l.setAttribute("data-l10n-args",JSON.stringify({date:this.#f.toLocaleDateString(),time:this.#f.toLocaleTimeString()})),o.append(l)),this.#g),l=this.#A;!l?.str||o?.str&&o.str!==l.str?(o=this._formatContents(o),n.append(o)):(h.XfaLayer.render({xfaHtml:l.html,intent:"richText",div:n}),n.lastChild.classList.add("richText","popupContent"));let d=!!this.#b,c=d?this.#b:this.#x;for(const t of this.#m)if(!c||null!==s.Util.intersect(t.data.rect,c)){c=t.data.rect,d=!0;break}o=s.Util.normalizeRect([c[0],t[3]-c[1]+t[1],c[2],t[3]-c[3]+t[1]]),l=d?c[2]-c[0]+5:0,t=o[0]+l,l=o[1],(o=this.#p.style).left=100*(t-r)/e+"%",o.top=100*(l-a)/i+"%",this.#p.append(n)}}_formatContents({str:t,dir:e}){var i=document.createElement("p"),s=(i.classList.add("popupContent"),i.dir=e,t.split(/(?:\r\n?|\n)/));for(let t=0,e=s.length;t<e;++t){var r=s[t];i.append(document.createTextNode(r)),t<e-1&&i.append(document.createElement("br"))}return i}#a(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||("Enter"===t.key||"Escape"===t.key&&this.#y)&&this.#c()}#c(){this.#y=!this.#y,this.#y?(this.#h(),this.#p.addEventListener("click",this.#d),this.#p.addEventListener("keydown",this.#r)):(this.#o(),this.#p.removeEventListener("click",this.#d),this.#p.removeEventListener("keydown",this.#r))}#h(){this.#w||this.render(),this.isVisible?this.#y&&this.#p.classList.add("focused"):(this.#p.hidden=!1,this.#p.style.zIndex=parseInt(this.#p.style.zIndex)+1e3)}#o(){this.#p.classList.remove("focused"),!this.#y&&this.isVisible&&(this.#p.hidden=!0,this.#p.style.zIndex=parseInt(this.#p.style.zIndex)-1e3)}forceHide(){this.#C=this.isVisible,this.#C&&(this.#p.hidden=!0)}maybeShow(){this.#C&&(this.#C=!1,this.#p.hidden=!1)}get isVisible(){return!1===this.#p.hidden}}class E extends p{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=s.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){var t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const i of this.textContent){var e=document.createElement("span");e.textContent=i,t.append(e)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}class k extends p{#E=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");var t,e=this.data,{width:i,height:t}=c(e.rect),i=this.svgFactory.create(i,t,!0);return(t=this.#E=this.svgFactory.createElement("svg:line")).setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),t.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),t.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),t.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),t.setAttribute("stroke-width",e.borderStyle.width||1),t.setAttribute("stroke","transparent"),t.setAttribute("fill","transparent"),i.append(t),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#E}addHighlightArea(){this.container.classList.add("highlightArea")}}class S extends p{#k=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");var t=this.data,{width:e,height:i}=c(t.rect),s=this.svgFactory.create(e,i,!0),r=t.borderStyle.width,a=this.#k=this.svgFactory.createElement("svg:rect");return a.setAttribute("x",r/2),a.setAttribute("y",r/2),a.setAttribute("width",e-r),a.setAttribute("height",i-r),a.setAttribute("stroke-width",r||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#k}addHighlightArea(){this.container.classList.add("highlightArea")}}class T extends p{#S=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");var t=this.data,{width:e,height:i}=c(t.rect),s=this.svgFactory.create(e,i,!0),r=t.borderStyle.width,a=this.#S=this.svgFactory.createElement("svg:ellipse");return a.setAttribute("cx",e/2),a.setAttribute("cy",i/2),a.setAttribute("rx",e/2-r/2),a.setAttribute("ry",i/2-r/2),a.setAttribute("stroke-width",r||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#S}addHighlightArea(){this.container.classList.add("highlightArea")}}class P extends p{#T=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);var t=this.data,{width:e,height:i}=c(t.rect),e=this.svgFactory.create(e,i,!0);let s=[];for(const e of t.vertices){var r=e.x-t.rect[0],a=t.rect[3]-e.y;s.push(r+","+a)}return s=s.join(" "),(i=this.#T=this.svgFactory.createElement(this.svgElementName)).setAttribute("points",s),i.setAttribute("stroke-width",t.borderStyle.width||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),e.append(i),this.container.append(e),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#T}addHighlightArea(){this.container.classList.add("highlightArea")}}class M extends P{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class R extends p{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class L extends p{#P=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=s.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);var t=this.data,{width:e,height:i}=c(t.rect),s=this.svgFactory.create(e,i,!0);for(const e of t.inkLists){let i=[];for(const s of e){var r=s.x-t.rect[0],a=t.rect[3]-s.y;i.push(r+","+a)}i=i.join(" ");var n=this.svgFactory.createElement(this.svgElementName);this.#P.push(n),n.setAttribute("points",i),n.setAttribute("stroke-width",t.borderStyle.width||1),n.setAttribute("stroke","transparent"),n.setAttribute("fill","transparent"),!t.popupRef&&this.hasPopupData&&this._createPopup(),s.append(n)}return this.container.append(s),this.container}getElementsToTriggerPopup(){return this.#P}addHighlightArea(){this.container.classList.add("highlightArea")}}class I extends p{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class D extends p{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class F extends p{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class O extends p{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class B extends p{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class N extends p{#M=null;constructor(t){super(t,{isRenderable:!0});var{filename:t,content:e}=this.data.file;this.filename=(0,r.getFilenameFromUrl)(t,!0),this.content=e,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:t,content:e})}render(){this.container.classList.add("fileAttachmentAnnotation");var{container:t,data:e}=this;let i;e.hasAppearance||0===e.fillAlpha?i=document.createElement("div"):((i=document.createElement("img")).src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(100*e.fillAlpha)}%);`)),i.addEventListener("dblclick",this.#R.bind(this)),this.#M=i;const r=s.FeatureTest.platform.isMac;return t.addEventListener("keydown",(t=>{"Enter"===t.key&&(r?t.metaKey:t.ctrlKey)&&this.#R()})),!e.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return this.#M}addHighlightArea(){this.container.classList.add("highlightArea")}#R(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class z{#L=null;#I=null;#D=new Map;constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,page:s,viewport:r}){this.div=t,this.#L=e,this.#I=i,this.page=s,this.viewport=r,this.zIndex=0}#F(t,e){var i=t.firstChild||t;i.id=""+s.AnnotationPrefix+e,this.div.append(t),this.#L?.moveElementInDOM(this.div,t,i,!1)}async render(t){var e=t.annotations,i=this.div,n=((0,r.setLayerDimensions)(i,this.viewport),new Map),o={data:null,layer:i,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:!1!==t.renderForms,svgFactory:new r.DOMSVGFactory,annotationStorage:t.annotationStorage||new a.AnnotationStorage,enableScripting:!0===t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const t of e)if(!t.noHTML){var l=t.annotationType===s.AnnotationType.POPUP;if(l){var h;if(!(h=n.get(t.id)))continue;o.elements=h}else{var{width:h,height:d}=c(t.rect);if(h<=0||d<=0)continue}o.data=t,(d=u.create(o)).isRenderable&&(!l&&t.popupRef&&((l=n.get(t.popupRef))?l.push(d):n.set(t.popupRef,[d])),0<d.annotationEditorType&&this.#D.set(d.data.id,d),l=d.render(),t.hidden&&(l.style.visibility="hidden"),this.#F(l,t.id))}this.#O()}update({viewport:t}){var e=this.div;this.viewport=t,(0,r.setLayerDimensions)(e,{rotation:t.rotation}),this.#O(),e.hidden=!1}#O(){if(this.#I){var t,e,i=this.div;for([t,e]of this.#I){var s,r=i.querySelector(`[data-annotation-id="${t}"]`);r&&((s=r.firstChild)?"CANVAS"===s.nodeName?s.replaceWith(e):s.before(e):r.append(e))}this.#I.clear()}}getEditableAnnotations(){return Array.from(this.#D.values())}getEditableAnnotation(t){return this.#D.get(t)}}},780:(t,e,i)=>{i.d(e,{AnnotationStorage:()=>o,PrintAnnotationStorage:()=>l,SerializableEmpty:()=>n});var s=i(266),r=i(115),a=i(825);const n=Object.freeze({map:null,hash:"",transfer:void 0});class o{#B=!1;#N=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){return void 0===(t=this.#N.get(t))?e:Object.assign(e,t)}getRawValue(t){return this.#N.get(t)}remove(t){if(this.#N.delete(t),0===this.#N.size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(const t of this.#N.values())if(t instanceof r.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(t,e){var i=this.#N.get(t);let s=!1;if(void 0!==i)for(var[a,n]of Object.entries(e))i[a]!==n&&(s=!0,i[a]=n);else s=!0,this.#N.set(t,e);s&&this.#z(),e instanceof r.AnnotationEditor&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(e.constructor._type)}has(t){return this.#N.has(t)}getAll(){return 0<this.#N.size?(0,s.objectFromMap)(this.#N):null}setAll(t){for(var[e,i]of Object.entries(t))this.setValue(e,i)}get size(){return this.#N.size}#z(){this.#B||(this.#B=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this.#B&&(this.#B=!1,"function"==typeof this.onResetModified)&&this.onResetModified()}get print(){return new l(this)}get serializable(){if(0===this.#N.size)return n;var t,e,i=new Map,s=new a.MurmurHash3_64,o=[],l=Object.create(null);let h=!1;for([t,e]of this.#N){var d=e instanceof r.AnnotationEditor?e.serialize(!1,l):e;d&&(i.set(t,d),s.update(t+":"+JSON.stringify(d)),h||=!!d.bitmap)}if(h)for(const t of i.values())t.bitmap&&o.push(t.bitmap);return 0<i.size?{map:i,hash:s.hexdigest(),transfer:o}:n}}class l extends o{#j;constructor(t){super();var{map:t,hash:e,transfer:i}=t.serializable;t=structuredClone(t,i?{transfer:i}:null);this.#j={map:t,hash:e,transfer:i}}get print(){(0,s.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#j}}},406:(t,e,i)=>{i.a(t,(async(t,s)=>{try{i.d(e,{PDFDataRangeTransport:()=>k,PDFWorker:()=>R,build:()=>B,getDocument:()=>function(t){if("string"==typeof t||t instanceof URL?t={url:t}:(0,r.isArrayBuffer)(t)&&(t={data:t}),"object"!=typeof t)throw new Error("Invalid parameter in getDocument, need parameter object.");if(!t.url&&!t.data&&!t.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const e=new E,i=e.docId,s=t.url?function(t){if(t instanceof URL)return t.href;try{return new URL(t,window.location).href}catch{if(r.isNodeJS&&"string"==typeof t)return t}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(t.url):null,a=t.data?function(t){if(r.isNodeJS&&"undefined"!=typeof Buffer&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if("string"==typeof t)return(0,r.stringToBytes)(t);if("object"==typeof t&&!isNaN(t?.length)||(0,r.isArrayBuffer)(t))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(t.data):null,o=t.httpHeaders||null,l=!0===t.withCredentials,h=t.password??null,u=t.range instanceof k?t.range:null,p=Number.isInteger(t.rangeChunkSize)&&0<t.rangeChunkSize?t.rangeChunkSize:w;let b=t.worker instanceof R?t.worker:null;const y=t.verbosity,S="string"!=typeof t.docBaseUrl||(0,n.isDataScheme)(t.docBaseUrl)?null:t.docBaseUrl,T="string"==typeof t.cMapUrl?t.cMapUrl:null,P=!1!==t.cMapPacked,M=t.CMapReaderFactory||A,I="string"==typeof t.standardFontDataUrl?t.standardFontDataUrl:null,D=t.StandardFontDataFactory||C,F=!0!==t.stopAtErrors,O=Number.isInteger(t.maxImageSize)&&-1<t.maxImageSize?t.maxImageSize:-1,B=!1!==t.isEvalSupported,N="boolean"==typeof t.isOffscreenCanvasSupported?t.isOffscreenCanvasSupported:!r.isNodeJS,z=Number.isInteger(t.canvasMaxAreaInBytes)?t.canvasMaxAreaInBytes:-1,j="boolean"==typeof t.disableFontFace?t.disableFontFace:r.isNodeJS,H=!0===t.fontExtraProperties,U=!0===t.enableXfa,q=t.ownerDocument||globalThis.document,V=!0===t.disableRange,$=!0===t.disableStream,G=!0===t.disableAutoFetch,W=!0===t.pdfBug,K=u?u.length:t.length??NaN,X="boolean"==typeof t.useSystemFonts?t.useSystemFonts:!r.isNodeJS&&!j,Y="boolean"==typeof t.useWorkerFetch?t.useWorkerFetch:M===n.DOMCMapReaderFactory&&D===n.DOMStandardFontDataFactory&&T&&I&&(0,n.isValidFetchUrl)(T,document.baseURI)&&(0,n.isValidFetchUrl)(I,document.baseURI),J=t.canvasFactory||new x({ownerDocument:q}),Q=t.filterFactory||new _({docId:i,ownerDocument:q}),Z=((0,r.setVerbosityLevel)(y),{canvasFactory:J,filterFactory:Q});Y||(Z.cMapReaderFactory=new M({baseUrl:T,isCompressed:P}),Z.standardFontDataFactory=new D({baseUrl:I})),b||(t={verbosity:y,port:d.GlobalWorkerOptions.workerPort},b=t.port?R.fromPort(t):new R(t),e._worker=b);const tt={docId:i,apiVersion:"4.0.379",data:a,password:h,disableAutoFetch:G,rangeChunkSize:p,length:K,docBaseUrl:S,enableXfa:U,evaluatorOptions:{maxImageSize:O,disableFontFace:j,ignoreErrors:F,isEvalSupported:B,isOffscreenCanvasSupported:N,canvasMaxAreaInBytes:z,fontExtraProperties:H,useSystemFonts:X,cMapUrl:Y?T:null,standardFontDataUrl:Y?I:null}},et={ignoreErrors:F,isEvalSupported:B,disableFontFace:j,fontExtraProperties:H,enableXfa:U,ownerDocument:q,disableAutoFetch:G,pdfBug:W,styleElement:null};return b.promise.then((function(){if(e.destroyed)throw new Error("Loading aborted");var t=async function(t,e){if(t.destroyed)throw new Error("Worker was destroyed");if(e=await t.messageHandler.sendWithPromise("GetDocRequest",e,e.data?[e.data.buffer]:null),t.destroyed)throw new Error("Worker was destroyed");return e}(b,tt),h=new Promise((function(t){let e;var i;u?e=new g.PDFDataTransportStream({length:K,initialData:u.initialData,progressiveDone:u.progressiveDone,contentDispositionFilename:u.contentDispositionFilename,disableRange:V,disableStream:$},u):a||(i={url:s,length:K,httpHeaders:o,withCredentials:l,rangeChunkSize:p,disableRange:V,disableStream:$},e=new(r.isNodeJS?v.PDFNodeStream:(0,n.isValidFetchUrl)(i.url)?f.PDFFetchStream:m.PDFNetworkStream)(i)),t(e)}));return Promise.all([t,h]).then((function([t,s]){if(e.destroyed)throw new Error("Loading aborted");t=new c.MessageHandler(i,t,b.port),s=new L(t,e,s,et,Z),e._transport=s,t.send("Ready",null)}))})).catch(e._capability.reject),e},version:()=>O});var r=i(266),a=i(780),n=i(473),o=i(742),l=i(738),h=i(250),d=i(368),c=i(694),u=i(472),p=i(890),g=i(92),f=i(171),m=i(474),v=i(498),b=i(521),y=t([l,v]);[l,v]=y.then?(await y)():y;const w=65536,x=r.isNodeJS?l.NodeCanvasFactory:n.DOMCanvasFactory,A=r.isNodeJS?l.NodeCMapReaderFactory:n.DOMCMapReaderFactory,_=r.isNodeJS?l.NodeFilterFactory:n.DOMFilterFactory,C=r.isNodeJS?l.NodeStandardFontDataFactory:n.DOMStandardFontDataFactory;class E{static#H=0;constructor(){this._capability=new r.PromiseCapability,this._transport=null,this._worker=null,this.docId="d"+E.#H++,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await(this._transport?.destroy())}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}class k{constructor(t,e,i=!1,s=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new r.PromiseCapability}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const i of this._rangeListeners)i(t,e)}onDataProgress(t,e){this._readyCapability.promise.then((()=>{for(const i of this._progressListeners)i(t,e)}))}onDataProgressiveRead(t){this._readyCapability.promise.then((()=>{for(const e of this._progressiveReadListeners)e(t)}))}onDataProgressiveDone(){this._readyCapability.promise.then((()=>{for(const t of this._progressiveDoneListeners)t()}))}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){(0,r.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class S{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,r.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class T{#U=null;#q=!1;constructor(t,e,i,s=!1){this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=s?new n.StatTimer:null,this._pdfBug=s,this.commonObjs=i.commonObjs,this.objs=new I,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:s=0,dontFlip:r=!1}={}){return new n.PageViewport({viewBox:this.view,scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:r})}getAnnotations({intent:t="display"}={}){return t=this._transport.getRenderingIntent(t),this._transport.getAnnotations(this._pageIndex,t.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,r.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,viewport:e,intent:i="display",annotationMode:s=r.AnnotationMode.ENABLE,transform:a=null,background:n=null,optionalContentConfigPromise:o=null,annotationCanvasMap:l=null,pageColors:h=null,printAnnotationStorage:d=null}){this._stats?.time("Overall"),i=this._transport.getRenderingIntent(i,s,d),this.#q=!1,this.#V(),o=o||this._transport.getOptionalContentConfig();let c=this._intentStates.get(i.cacheKey);c||(c=Object.create(null),this._intentStates.set(i.cacheKey,c)),c.streamReaderCancelTimeout&&(clearTimeout(c.streamReaderCancelTimeout),c.streamReaderCancelTimeout=null);const u=!!(i.renderingIntent&r.RenderingIntentFlag.PRINT),p=(c.displayReadyCapability||(c.displayReadyCapability=new r.PromiseCapability,c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(i)),t=>{c.renderTasks.delete(g),(this._maybeCleanupAfterRender||u)&&(this.#q=!0),this.#$(!u),t?(g.capability.reject(t),this._abortOperatorList({intentState:c,reason:t instanceof Error?t:new Error(t)})):g.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")}),g=new F({callback:p,params:{canvasContext:t,viewport:e,transform:a,background:n},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:c.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!u,pdfBug:this._pdfBug,pageColors:h});return(c.renderTasks||=new Set).add(g),s=g.task,Promise.all([c.displayReadyCapability.promise,o]).then((([t,e])=>{this.destroyed?p():(this._stats?.time("Rendering"),g.initializeGraphics({transparency:t,optionalContentConfig:e}),g.operatorListChanged())})).catch(p),s}getOperatorList({intent:t="display",annotationMode:e=r.AnnotationMode.ENABLE,printAnnotationStorage:i=null}={}){t=this._transport.getRenderingIntent(t,e,i,!0);let s,a=this._intentStates.get(t.cacheKey);return a||(a=Object.create(null),this._intentStates.set(t.cacheKey,a)),a.opListReadCapability||((s=Object.create(null)).operatorListChanged=function(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(s))},a.opListReadCapability=new r.PromiseCapability,(a.renderTasks||=new Set).add(s),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(t)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===t,disableNormalization:!0===e},{highWaterMark:100,size:t=>t.items.length})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then((t=>b.XfaText.textContent(t)));const e=this.streamTextContent(t);return new Promise((function(t,i){const s=e.getReader(),r={items:[],styles:Object.create(null)};!function e(){s.read().then((function({value:i,done:s}){s?t(r):(Object.assign(r.styles,i.styles),r.items.push(...i.items),e())}),i)}()}))}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;var t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),this.#q=!1,this.#V(),Promise.all(t)}cleanup(t=!1){this.#q=!0;var e=this.#$(!1);return t&&e&&(this._stats&&=new n.StatTimer),e}#$(t=!1){if(this.#V(),!this.#q||this.destroyed)return!1;if(t)return this.#U=setTimeout((()=>{this.#U=null,this.#$(!1)}),5e3),!1;for(var{renderTasks:e,operatorList:i}of this._intentStates.values())if(0<e.size||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),!(this.#q=!1)}#V(){this.#U&&(clearTimeout(this.#U),this.#U=null)}_startRenderPage(t,e){(e=this._intentStates.get(e))&&(this._stats?.timeEnd("Page Request"),e.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let i=0,s=t.length;i<s;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const t of e.renderTasks)t.operatorListChanged();t.lastChunk&&this.#$(!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i}){var{map:i,transfer:s}=i;const r=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:i},s).getReader(),a=this._intentStates.get(e),n=(a.streamReader=r,()=>{r.read().then((({value:t,done:e})=>{e?a.streamReader=null:this._transport.destroyed||(this._renderPageChunk(t,a),n())}),(t=>{if(a.streamReader=null,!this._transport.destroyed){if(a.operatorList){a.operatorList.lastChunk=!0;for(const t of a.renderTasks)t.operatorListChanged();this.#$(!0)}if(a.displayReadyCapability)a.displayReadyCapability.reject(t);else{if(!a.opListReadCapability)throw t;a.opListReadCapability.reject(t)}}}))});n()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(0<t.renderTasks.size)return;if(e instanceof n.RenderingCancelledException){let i=100;return 0<e.extraDelay&&e.extraDelay<1e3&&(i+=e.extraDelay),void(t.streamReaderCancelTimeout=setTimeout((()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})}),i))}}if(t.streamReader.cancel(new r.AbortException(e.message)).catch((()=>{})),t.streamReader=null,!this._transport.destroyed){for(var[s,a]of this._intentStates)if(a===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}class P{#G=new Set;#W=Promise.resolve();postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};this.#W.then((()=>{for(const t of this.#G)t.call(this,i)}))}addEventListener(t,e){this.#G.add(e)}removeEventListener(t,e){this.#G.delete(e)}terminate(){this.#G.clear()}}const M={isWorkerDisabled:!1,fakeWorkerId:0};r.isNodeJS&&(M.isWorkerDisabled=!0,d.GlobalWorkerOptions.workerSrc||="./pdf.worker.mjs"),M.isSameOrigin=function(t,e){let i;try{if(!(i=new URL(t)).origin||"null"===i.origin)return!1}catch{return!1}return t=new URL(e,i),i.origin===t.origin},M.createCDNWrapper=function(t){return URL.createObjectURL(new Blob([`await import("${t}");`],{type:"text/javascript"}))};class R{static#K;constructor({name:t=null,port:e=null,verbosity:i=(0,r.getVerbosityLevel)()}={}){if(this.name=t,this.destroyed=!1,this.verbosity=i,this._readyCapability=new r.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,e){if(R.#K?.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(R.#K||=new WeakMap).set(e,this),this._initializeFromPort(e)}else this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new c.MessageHandler("main","worker",t),this._messageHandler.on("ready",(function(){})),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!M.isWorkerDisabled&&!R.#X){let t=R.workerSrc;try{M.isSameOrigin(window.location.href,t)||(t=M.createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new c.MessageHandler("main","worker",e),s=()=>{e.removeEventListener("error",r),i.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=()=>{this._webWorker||s()},a=(e.addEventListener("error",r),i.on("test",(t=>{e.removeEventListener("error",r),this.destroyed?s():t?(this._messageHandler=i,this._port=e,this._webWorker=e,this._readyCapability.resolve(),i.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),i.destroy(),e.terminate())})),i.on("ready",(t=>{if(e.removeEventListener("error",r),this.destroyed)s();else try{a()}catch{this._setupFakeWorker()}})),()=>{var t=new Uint8Array;i.send("test",t,[t.buffer])});return void a()}catch{(0,r.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){M.isWorkerDisabled||((0,r.warn)("Setting up fake worker."),M.isWorkerDisabled=!0),R._setupFakeWorkerGlobal.then((t=>{var e,i,s;this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):(e=new P,this._port=e,i="fake"+M.fakeWorkerId++,s=new c.MessageHandler(i+"_worker",i,e),t.setup(s,e),t=new c.MessageHandler(i,i+"_worker",e),this._messageHandler=t,this._readyCapability.resolve(),t.send("configure",{verbosity:this.verbosity}))})).catch((t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))}))}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),R.#K?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){if(!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");var e=this.#K?.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new R(t)}static get workerSrc(){if(d.GlobalWorkerOptions.workerSrc)return d.GlobalWorkerOptions.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#X(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){return(0,r.shadow)(this,"_setupFakeWorkerGlobal",(async()=>this.#X||(await import(this.workerSrc)).WorkerMessageHandler)())}}class L{#Y=new Map;#J=new Map;#Q=new Map;#Z=null;constructor(t,e,i,s,a){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new I,this.fontLoader=new o.FontLoader({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this._params=s,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new r.PromiseCapability,this.setupMessageHandler()}#tt(t,e=null){var i=this.#Y.get(t);return i||(i=this.messageHandler.sendWithPromise(t,e),this.#Y.set(t,i),i)}get annotationStorage(){return(0,r.shadow)(this,"annotationStorage",new a.AnnotationStorage)}getRenderingIntent(t,e=r.AnnotationMode.ENABLE,i=null,s=!1){let n=r.RenderingIntentFlag.DISPLAY,o=a.SerializableEmpty;switch(t){case"any":n=r.RenderingIntentFlag.ANY;break;case"display":break;case"print":n=r.RenderingIntentFlag.PRINT;break;default:(0,r.warn)("getRenderingIntent - invalid intent: "+t)}switch(e){case r.AnnotationMode.DISABLE:n+=r.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case r.AnnotationMode.ENABLE:break;case r.AnnotationMode.ENABLE_FORMS:n+=r.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case r.AnnotationMode.ENABLE_STORAGE:o=((n+=r.RenderingIntentFlag.ANNOTATIONS_STORAGE)&r.RenderingIntentFlag.PRINT&&i instanceof a.PrintAnnotationStorage?i:this.annotationStorage).serializable;break;default:(0,r.warn)("getRenderingIntent - invalid annotationMode: "+e)}return s&&(n+=r.RenderingIntentFlag.OPLIST),{renderingIntent:n,cacheKey:n+"_"+o.hash,annotationStorageSerializable:o}}destroy(){if(!this.destroyCapability){this.destroyed=!0,this.destroyCapability=new r.PromiseCapability,this.#Z?.reject(new Error("Worker was destroyed during onPassword callback"));var t=[];for(const e of this.#J.values())t.push(e._destroy());this.#J.clear(),this.#Q.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();var e=this.messageHandler.sendWithPromise("Terminate",null);t.push(e),Promise.all(t).then((()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#Y.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new r.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()}),this.destroyCapability.reject)}return this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",((t,e)=>{(0,r.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=t=>{this._lastProgress={loaded:t.loaded,total:t.total}},e.onPull=()=>{this._fullReader.read().then((function({value:t,done:i}){i?e.close():((0,r.assert)(t instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(t),1,[t]))})).catch((t=>{e.error(t)}))},e.onCancel=t=>{this._fullReader.cancel(t),e.ready.catch((t=>{if(!this.destroyed)throw t}))}})),t.on("ReaderHeadersReady",(t=>{const i=new r.PromiseCapability,s=this._fullReader;return s.headersReady.then((()=>{s.isStreamingSupported&&s.isRangeSupported||(this._lastProgress&&e.onProgress?.(this._lastProgress),s.onProgress=t=>{e.onProgress?.({loaded:t.loaded,total:t.total})}),i.resolve({isStreamingSupported:s.isStreamingSupported,isRangeSupported:s.isRangeSupported,contentLength:s.contentLength})}),i.reject),i.promise})),t.on("GetRangeReader",((t,e)=>{(0,r.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(t.begin,t.end);i?(e.onPull=()=>{i.read().then((function({value:t,done:i}){i?e.close():((0,r.assert)(t instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(t),1,[t]))})).catch((t=>{e.error(t)}))},e.onCancel=t=>{i.cancel(t),e.ready.catch((t=>{if(!this.destroyed)throw t}))}):e.close()})),t.on("GetDoc",(({pdfInfo:t})=>{this._numPages=t.numPages,this._htmlForXfa=t.htmlForXfa,delete t.htmlForXfa,e._capability.resolve(new S(t,this))})),t.on("DocException",(function(t){let i;switch(t.name){case"PasswordException":i=new r.PasswordException(t.message,t.code);break;case"InvalidPDFException":i=new r.InvalidPDFException(t.message);break;case"MissingPDFException":i=new r.MissingPDFException(t.message);break;case"UnexpectedResponseException":i=new r.UnexpectedResponseException(t.message,t.status);break;case"UnknownErrorException":i=new r.UnknownErrorException(t.message,t.details);break;default:(0,r.unreachable)("DocException - expected a valid Error.")}e._capability.reject(i)})),t.on("PasswordRequest",(t=>{if(this.#Z=new r.PromiseCapability,e.onPassword){try{e.onPassword((t=>{t instanceof Error?this.#Z.reject(t):this.#Z.resolve({password:t})}),t.code)}catch(t){this.#Z.reject(t)}}else this.#Z.reject(new r.PasswordException(t.message,t.code));return this.#Z.promise})),t.on("DataLoaded",(t=>{e.onProgress?.({loaded:t.length,total:t.length}),this.downloadInfoCapability.resolve(t)})),t.on("StartRenderPage",(t=>{this.destroyed||this.#J.get(t.pageIndex)._startRenderPage(t.transparency,t.cacheKey)})),t.on("commonobj",(([e,i,s])=>{if(!this.destroyed&&!this.commonObjs.has(e))switch(i){case"Font":const h=this._params;if("error"in s){var a=s.error;(0,r.warn)("Error during font loading: "+a),this.commonObjs.resolve(e,a)}else{a=h.pdfBug&&globalThis.FontInspector?.enabled?(t,e)=>globalThis.FontInspector.fontAdded(t,e):null;const i=new o.FontFaceObject(s,{isEvalSupported:h.isEvalSupported,disableFontFace:h.disableFontFace,ignoreErrors:h.ignoreErrors,inspectFont:a});this.fontLoader.bind(i).catch((i=>t.sendWithPromise("FontFallback",{id:e}))).finally((()=>{!h.fontExtraProperties&&i.data&&(i.data=null),this.commonObjs.resolve(e,i)}))}break;case"CopyLocalImage":var n=s.imageRef;(0,r.assert)(n,"The imageRef must be defined.");for(const t of this.#J.values())for(var[,l]of t.objs)if(l.ref===n)return l.dataLen?(this.commonObjs.resolve(e,structuredClone(l)),l.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(e,s);break;default:throw new Error("Got unknown common object type "+i)}return null})),t.on("obj",(([t,e,i,s])=>{if(!this.destroyed){var a=this.#J.get(e);if(!a.objs.has(t))if(0===a._intentStates.size)s?.bitmap?.close();else switch(i){case"Image":a.objs.resolve(t,s),s?.dataLen>r.MAX_IMAGE_SIZE_TO_CACHE&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(t,s);break;default:throw new Error("Got unknown object type "+i)}}})),t.on("DocProgress",(t=>{this.destroyed||e.onProgress?.({loaded:t.loaded,total:t.total})})),t.on("FetchBuiltInCMap",(t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(t):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.")))),t.on("FetchStandardFontData",(t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(t):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,r.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");var{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally((()=>{this.annotationStorage.resetModified()}))}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1;return this.#Q.get(e)||(t=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then((t=>{if(this.destroyed)throw new Error("Transport destroyed");return t=new T(e,t,this,this._params.pdfBug),this.#J.set(e,t),t})),this.#Q.set(e,t),t)}getPageIndex(t){return"object"!=typeof t||null===t||!Number.isInteger(t.num)||t.num<0||!Number.isInteger(t.gen)||t.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen})}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#tt("GetFieldObjects")}hasJSActions(){return this.#tt("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return"string"!=typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#tt("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then((t=>new p.OptionalContentConfig(t)))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){var t="GetMetadata",e=this.#Y.get(t);return e||(e=this.messageHandler.sendWithPromise(t,null).then((t=>({info:t[0],metadata:t[1]?new u.Metadata(t[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}))),this.#Y.set(t,e),e)}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#J.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#Y.clear(),this.filterFactory.destroy(!0)}}get loadingParams(){var{disableAutoFetch:t,enableXfa:e}=this._params;return(0,r.shadow)(this,"loadingParams",{disableAutoFetch:t,enableXfa:e})}}class I{#et=Object.create(null);#it(t){return this.#et[t]||={capability:new r.PromiseCapability,data:null}}get(t,e=null){if(e){const i=this.#it(t);return i.capability.promise.then((()=>e(i.data))),null}const i=this.#et[t];if(i?.capability.settled)return i.data;throw new Error(`Requesting object that isn't resolved yet ${t}.`)}has(t){return this.#et[t]?.capability.settled??!1}resolve(t,e=null){(t=this.#it(t)).data=e,t.capability.resolve()}clear(){for(const e in this.#et){var t=this.#et[e].data;t?.bitmap?.close()}this.#et=Object.create(null)}*[Symbol.iterator](){for(const i in this.#et){var{capability:t,data:e}=this.#et[i];t.settled&&(yield[i,e])}}}class D{#st=null;constructor(t){this.#st=t,this.onContinue=null}get promise(){return this.#st.capability.promise}cancel(t=0){this.#st.cancel(null,t)}get separateAnnots(){var t,e=this.#st.operatorList.separateAnnots;return!!e&&(t=this.#st.annotationCanvasMap,e.form||e.canvas&&0<t?.size)}}class F{static#rt=new WeakSet;constructor({callback:t,params:e,objs:i,commonObjs:s,annotationCanvasMap:a,operatorList:n,pageIndex:o,canvasFactory:l,filterFactory:h,useRequestAnimationFrame:d=!1,pdfBug:c=!1,pageColors:u=null}){this.callback=t,this.params=e,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=n,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=h,this._pdfBug=c,this.pageColors=u,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===d&&"undefined"!=typeof window,this.cancelled=!1,this.capability=new r.PromiseCapability,this.task=new D(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch((function(){}))}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(!this.cancelled){if(this._canvas){if(F.#rt.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");F.#rt.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var{canvasContext:i,viewport:s,transform:r,background:a}=this.params;this.gfx=new h.CanvasGraphics(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:s,transparency:t,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),F.#rt.delete(this._canvas),this.callback(t||new n.RenderingCancelledException("Rendering cancelled, page "+(this._pageIndex+1),e))}operatorListChanged(){this.graphicsReady?(this.stepper?.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||=this._continueBound}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame((()=>{this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk)&&(this.gfx.endDrawing(),F.#rt.delete(this._canvas),this.callback()))}}const O="4.0.379",B="9e14d04fd";s()}catch(t){s(t)}}))},822:(t,e,i)=>{i.d(e,{BaseCMapReaderFactory:()=>n,BaseCanvasFactory:()=>a,BaseFilterFactory:()=>r,BaseSVGFactory:()=>l,BaseStandardFontDataFactory:()=>o});var s=i(266);class r{constructor(){this.constructor===r&&(0,s.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addHighlightHCMFilter(t,e,i,s){return"none"}destroy(t=0){}}class a{constructor(){this.constructor===a&&(0,s.unreachable)("Cannot initialize BaseCanvasFactory.")}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");return{canvas:t=this._createCanvas(t,e),context:t.getContext("2d")}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){(0,s.unreachable)("Abstract method `_createCanvas` called.")}}class n{constructor({baseUrl:t=null,isCompressed:e=!0}){this.constructor===n&&(0,s.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return t=this.isCompressed?s.CMapCompressionType.BINARY:s.CMapCompressionType.NONE,this._fetchData(e,t).catch((t=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: `+e)}))}_fetchData(t,e){(0,s.unreachable)("Abstract method `_fetchData` called.")}}class o{constructor({baseUrl:t=null}){this.constructor===o&&(0,s.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const e=""+this.baseUrl+t;return this._fetchData(e).catch((t=>{throw new Error("Unable to load font data at: "+e)}))}_fetchData(t){(0,s.unreachable)("Abstract method `_fetchData` called.")}}class l{constructor(){this.constructor===l&&(0,s.unreachable)("Cannot initialize BaseSVGFactory.")}create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");var s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),i||(s.setAttribute("width",t+"px"),s.setAttribute("height",e+"px")),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} `+e),s}createElement(t){if("string"!=typeof t)throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){(0,s.unreachable)("Abstract method `_createSVG` called.")}}},250:(t,e,i)=>{i.d(e,{CanvasGraphics:()=>I});var s=i(266),r=i(473);const a="Fill",n="Stroke",o="Shading";function l(t,e){var i,s,r;e&&(i=e[2]-e[0],s=e[3]-e[1],(r=new Path2D).rect(e[0],e[1],i,s),t.clip(r))}class h{constructor(){this.constructor===h&&(0,s.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,s.unreachable)("Abstract method `getPattern` called.")}}class d extends h{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;"axial"===this._type?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const t of this._colorStops)e.addColorStop(t[0],t[1]);return e}getPattern(t,e,i,o){let h;var d,c;return o===n||o===a?(o=e.current.getClippedPathBoundingBox(o,(0,r.getCurrentTransform)(t))||[0,0,0,0],d=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,(c=(d=e.cachedCanvases.getCanvas("pattern",d,c,!0)).context).clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-o[0],-o[1]),i=s.Util.transform(i,[1,0,0,1,o[0],o[1]]),c.transform(...e.baseTransform),this.matrix&&c.transform(...this.matrix),l(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),h=t.createPattern(d.canvas,"no-repeat"),o=new DOMMatrix(i),h.setTransform(o)):(l(t,this._bbox),h=this._createGradient(t)),h}}function c(t,e,i,s,r,a,n,o){var l=e.coords,h=e.colors,d=t.data,c=4*t.width;let u;l[i+1]>l[s+1]&&(u=i,i=s,s=u,u=a,a=n,n=u),l[s+1]>l[r+1]&&(u=s,s=r,r=u,u=n,n=o,o=u),l[i+1]>l[s+1]&&(u=i,i=s,s=u,u=a,a=n,n=u);var p=(l[i]+e.offsetX)*e.scaleX,g=(l[i+1]+e.offsetY)*e.scaleY,f=(l[s]+e.offsetX)*e.scaleX,m=(l[s+1]+e.offsetY)*e.scaleY,v=(l[r]+e.offsetX)*e.scaleX,b=(l[r+1]+e.offsetY)*e.scaleY;if(!(b<=g)){var y=h[a],w=h[a+1],x=h[a+2],A=h[n],_=h[n+1],C=h[n+2],E=h[o],k=h[o+1],S=h[o+2],T=(t=Math.round(g),Math.round(b));let e,i,s,r;for(let a=t;a<=T;a++){if(a<m){e=p-(p-f)*(I=a<g?0:(g-a)/(g-m)),i=y-(y-A)*I,s=w-(w-_)*I,r=x-(x-C)*I}else{let t;t=a>b?1:m==b?0:(m-a)/(m-b),e=f-(f-v)*t,i=A-(A-E)*t,s=_-(_-k)*t,r=C-(C-S)*t}let t;var P=p-(p-v)*(t=a<g?0:a>b?1:(g-a)/(g-b)),M=y-(y-E)*t,R=w-(w-k)*t,L=x-(x-S)*t,I=Math.round(Math.min(e,P)),D=Math.round(Math.max(e,P));let n=c*a+4*I;for(let a=I;a<=D;a++)(t=(e-a)/(e-P))<0?t=0:1<t&&(t=1),d[n++]=i-(i-M)*t|0,d[n++]=s-(s-R)*t|0,d[n++]=r-(r-L)*t|0,d[n++]=255}}}function u(t,e,i){var s=e.coords,r=e.colors;let a,n;switch(e.type){case"lattice":var o=e.verticesPerRow,l=Math.floor(s.length/o)-1,h=o-1;for(a=0;a<l;a++){let e=a*o;for(let a=0;a<h;a++,e++)c(t,i,s[e],s[e+1],s[e+o],r[e],r[e+1],r[e+o]),c(t,i,s[e+o+1],s[e+1],s[e+o],r[e+o+1],r[e+1],r[e+o])}break;case"triangles":for(a=0,n=s.length;a<n;a+=3)c(t,i,s[a],s[a+1],s[a+2],r[a],r[a+1],r[a+2]);break;default:throw new Error("illegal figure")}}class p extends h{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,i){var s=Math.floor(this._bounds[0]),r=Math.floor(this._bounds[1]),a=Math.ceil(this._bounds[2])-s,n=Math.ceil(this._bounds[3])-r,o=Math.min(Math.ceil(Math.abs(a*t[0]*1.1)),3e3),l=(a=a/o,n=n/(t=Math.min(Math.ceil(Math.abs(n*t[1]*1.1)),3e3)),{coords:this._coords,colors:this._colors,offsetX:-s,offsetY:-r,scaleX:1/a,scaleY:1/n}),h=(i=i.getCanvas("mesh",o+4,t+4,!1)).context,d=h.createImageData(o,t);if(e){var c=d.data;for(let t=0,i=c.length;t<i;t+=4)c[t]=e[0],c[t+1]=e[1],c[t+2]=e[2],c[t+3]=255}for(const t of this._figures)u(d,t,l);return h.putImageData(d,2,2),{canvas:i.canvas,offsetX:s-2*a,offsetY:r-2*n,scaleX:a,scaleY:n}}getPattern(t,e,i,a){let n;l(t,this._bbox),a===o?n=s.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(t)):(n=s.Util.singularValueDecompose2dScale(e.baseTransform),this.matrix&&(h=s.Util.singularValueDecompose2dScale(this.matrix),n=[n[0]*h[0],n[1]*h[1]]));var h=this._createMeshCanvas(n,a===o?null:this._background,e.cachedCanvases);return a!==o&&(t.setTransform(...e.baseTransform),this.matrix)&&t.transform(...this.matrix),t.translate(h.offsetX,h.offsetY),t.scale(h.scaleX,h.scaleY),t.createPattern(h.canvas,"no-repeat")}}class g extends h{getPattern(){return"hotpink"}}const f=1,m=2;class v{static MAX_PATTERN_SIZE=3e3;constructor(t,e,i,s,r){this.operatorList=t[2],this.matrix=t[3]||[1,0,0,1,0,0],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=i,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(t){var e=this.operatorList,i=this.bbox,a=this.xstep,n=this.ystep,o=this.paintType,l=this.tilingType,h=this.color,d=this.canvasGraphicsFactory,c=(l=((0,s.info)("TilingType: "+l),i[0]),i[1]),u=i[2],p=(i=i[3],s.Util.singularValueDecompose2dScale(this.matrix)),g=s.Util.singularValueDecompose2dScale(this.baseTransform);p=[p[0]*g[0],p[1]*g[1]],g=this.getSizeAndScale(a,this.ctx.canvas.width,p[0]),a=this.getSizeAndScale(n,this.ctx.canvas.height,p[1]),p=(n=t.cachedCanvases.getCanvas("pattern",g.size,a.size,!0)).context;(d=d.createCanvasGraphics(p)).groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(d,o,h);let f=l,m=c,v=u,b=i;return l<0&&(f=0,v+=Math.abs(l)),c<0&&(m=0,b+=Math.abs(c)),p.translate(-g.scale*f,-a.scale*m),d.transform(g.scale,0,0,a.scale,0,0),p.save(),this.clipBbox(d,f,m,v,b),d.baseTransform=(0,r.getCurrentTransform)(d.ctx),d.executeOperatorList(e),d.endDrawing(),{canvas:n.canvas,scaleX:g.scale,scaleY:a.scale,offsetX:f,offsetY:m}}getSizeAndScale(t,e,i){t=Math.abs(t),e=Math.max(v.MAX_PATTERN_SIZE,e);let s=Math.ceil(t*i);return s>=e?s=e:i=s/t,{scale:i,size:s}}clipBbox(t,e,i,s,a){t.ctx.rect(e,i,s-e,a-i),t.current.updateRectMinMax((0,r.getCurrentTransform)(t.ctx),[e,i,s,a]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){var r=t.ctx,a=t.current;switch(e){case f:var n=this.ctx;r.fillStyle=n.fillStyle,r.strokeStyle=n.strokeStyle,a.fillColor=n.fillStyle,a.strokeColor=n.strokeStyle;break;case m:n=s.Util.makeHexColor(i[0],i[1],i[2]),r.fillStyle=n,r.strokeStyle=n,a.fillColor=n,a.strokeColor=n;break;default:throw new s.FormatError("Unsupported paint type: "+e)}}getPattern(t,e,i,r){let a=i;r!==o&&(a=s.Util.transform(a,e.baseTransform),this.matrix)&&(a=s.Util.transform(a,this.matrix)),i=this.createPatternCanvas(e);let n=new DOMMatrix(a);return n=(n=n.translate(i.offsetX,i.offsetY)).scale(1/i.scaleX,1/i.scaleY),(r=t.createPattern(i.canvas,"repeat")).setTransform(n),r}}const b=4096;class y{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let s;return void 0!==this.cache[t]?(s=this.cache[t],this.canvasFactory.reset(s,e,i)):(s=this.canvasFactory.create(e,i),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const e in this.cache){var t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function w(t,e,i,s,a,n,o,l,h,d){var c,u,p,g,[f,m,v,b,y,w]=(0,r.getCurrentTransform)(t);0===m&&0===v?(c=Math.round(o*f+y),u=Math.round(l*b+w),p=Math.abs(Math.round((o+h)*f+y)-c)||1,g=Math.abs(Math.round((l+d)*b+w)-u)||1,t.setTransform(Math.sign(f),0,0,Math.sign(b),c,u),t.drawImage(e,i,s,a,n,0,0,p,g),t.setTransform(f,m,v,b,y,w)):0===f&&0===b?(c=Math.round(l*v+y),u=Math.round(o*m+w),p=Math.abs(Math.round((l+d)*v+y)-c)||1,g=Math.abs(Math.round((o+h)*m+w)-u)||1,t.setTransform(0,Math.sign(m),Math.sign(v),0,c,u),t.drawImage(e,i,s,a,n,0,0,g,p),t.setTransform(f,m,v,b,y,w)):(t.drawImage(e,i,s,a,n,o,l,h,d),Math.hypot(f,m),Math.hypot(v,b))}class x{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=s.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=s.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=s.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){var t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,i){[e,i]=s.Util.applyTransform([e,i],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(t,e){var i=s.Util.applyTransform(e,t),r=s.Util.applyTransform(e.slice(2),t),a=s.Util.applyTransform([e[0],e[3]],t);e=s.Util.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,i[0],r[0],a[0],e[0]),this.minY=Math.min(this.minY,i[1],r[1],a[1],e[1]),this.maxX=Math.max(this.maxX,i[0],r[0],a[0],e[0]),this.maxY=Math.max(this.maxY,i[1],r[1],a[1],e[1])}updateScalingPathMinMax(t,e){s.Util.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.maxX=Math.max(this.maxX,e[1]),this.minY=Math.min(this.minY,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,i,r,a,n,o,l,h,d){e=s.Util.bezierBoundingBox(e,i,r,a,n,o,l,h),d?(d[0]=Math.min(d[0],e[0],e[2]),d[1]=Math.max(d[1],e[0],e[2]),d[2]=Math.min(d[2],e[1],e[3]),d[3]=Math.max(d[3],e[1],e[3])):this.updateRectMinMax(t,e)}getPathBoundingBox(t=a,e=null){var i=[this.minX,this.minY,this.maxX,this.maxY];return t===n&&(e||(0,s.unreachable)("Stroke bounding box must include transform."),e=(t=s.Util.singularValueDecompose2dScale(e))[0]*this.lineWidth/2,t=t[1]*this.lineWidth/2,i[0]-=e,i[1]-=t,i[2]+=e,i[3]+=t),i}updateClipFromPath(){var t=s.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=a,e=null){return s.Util.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function A(t,e){if("undefined"!=typeof ImageData&&e instanceof ImageData)t.putImageData(e,0,0);else{var i=e.height,r=e.width,a=i%16,n=(i-a)/16,o=0==a?n:1+n,l=t.createImageData(r,16);let w,x=0;var h=e.data,d=l.data;let A,_,C,E;if(e.kind===s.ImageKind.GRAYSCALE_1BPP){var c=h.byteLength,u=new Uint32Array(d.buffer,0,d.byteLength>>2),p=u.length,g=r+7>>3,f=4294967295,m=s.FeatureTest.isLittleEndian?4278190080:255;for(A=0;A<o;A++){for(C=A<n?16:a,w=0,_=0;_<C;_++){var v=c-x;let t=0;var b=g<v?r:8*v-7,y=-8&b;let e=0,i=0;for(;t<y;t+=8)i=h[x++],u[w++]=128&i?f:m,u[w++]=64&i?f:m,u[w++]=32&i?f:m,u[w++]=16&i?f:m,u[w++]=8&i?f:m,u[w++]=4&i?f:m,u[w++]=2&i?f:m,u[w++]=1&i?f:m;for(;t<b;t++)0===e&&(i=h[x++],e=128),u[w++]=i&e?f:m,e>>=1}for(;w<p;)u[w++]=0;t.putImageData(l,0,16*A)}}else if(e.kind===s.ImageKind.RGBA_32BPP){for(_=0,E=16*r*4,A=0;A<n;A++)d.set(h.subarray(x,x+E)),x+=E,t.putImageData(l,0,_),_+=16;A<o&&(E=r*a*4,d.set(h.subarray(x,x+E)),t.putImageData(l,0,_))}else{if(e.kind!==s.ImageKind.RGB_24BPP)throw new Error("bad image kind: "+e.kind);for(C=16,E=r*C,A=0;A<o;A++){for(A>=n&&(C=a,E=r*C),w=0,_=E;_--;)d[w++]=h[x++],d[w++]=h[x++],d[w++]=h[x++],d[w++]=255;t.putImageData(l,0,16*A)}}}}function _(t,e){if(e.bitmap)t.drawImage(e.bitmap,0,0);else{var i=e.height,r=e.width,a=i%16,n=(i-a)/16,o=0==a?n:1+n,l=t.createImageData(r,16);let u=0;var h=e.data,d=l.data;for(let e=0;e<o;e++){var c=e<n?16:a;({srcPos:u}=function({src:t,srcPos:e=0,dest:i,width:r,height:a,nonBlackColor:n,inverseDecode:o=!1}){var l=s.FeatureTest.isLittleEndian?4278190080:255,[h,d]=o?[n,l]:[l,n],c=r>>3,u=7&r,p=t.length;i=new Uint32Array(i.buffer);let g=0;for(let s=0;s<a;s++){for(var f=e+c;e<f;e++){var m=e<p?t[e]:255;i[g++]=128&m?d:h,i[g++]=64&m?d:h,i[g++]=32&m?d:h,i[g++]=16&m?d:h,i[g++]=8&m?d:h,i[g++]=4&m?d:h,i[g++]=2&m?d:h,i[g++]=1&m?d:h}if(0!=u){var v=e<p?t[e++]:255;for(let t=0;t<u;t++)i[g++]=v&1<<7-t?d:h}}return{srcPos:e,destPos:g}}({src:h,srcPos:u,dest:d,width:r,height:c,nonBlackColor:0})),t.putImageData(l,0,16*e)}}}function C(t,e){for(const i of["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"])void 0!==t[i]&&(e[i]=t[i]);void 0!==t.setLineDash&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function E(t){var e;t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",void 0!==t.setLineDash&&(t.setLineDash([]),t.lineDashOffset=0),s.isNodeJS||"none"!==(e=t.filter)&&""!==e&&(t.filter="none")}function k(t,e,i){var s=t.length;for(let a=3;a<s;a+=4){var r=i?i[t[a]]:t[a];e[a]=e[a]*r*(1/255)|0}}function S(t,e,i){var s=t.length;for(let a=3;a<s;a+=4){var r=77*t[a-3]+152*t[a-2]+28*t[a-1];e[a]=i?e[a]*i[r>>8]>>8:e[a]*r>>16}}function T(t,e){var i=((t=s.Util.singularValueDecompose2dScale(t))[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]),Math.fround((globalThis.devicePixelRatio||1)*r.PixelsPerInch.PDF_TO_CSS_UNITS));return void 0!==e?e:t[0]<=i||t[1]<=i}const P=["butt","round","square"],M=["miter","round","bevel"],R={},L={};class I{constructor(t,e,i,s,r,{optionalContentConfig:a,markedContentStack:n=null},o,l){this.ctx=t,this.current=new x(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=n||[],this.optionalContentConfig=a,this.cachedCanvases=new y(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=o,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=l,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return"string"==typeof t?(t.startsWith("g_")?this.commonObjs:this.objs).get(t):e}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:s=null}){var a=this.ctx.canvas.width,n=this.ctx.canvas.height,o=this.ctx.fillStyle;this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,a,n),this.ctx.fillStyle=o,i&&(s=this.cachedCanvases.getCanvas("transparent",a,n),this.compositeCtx=this.ctx,this.transparentCanvas=s.canvas,this.ctx=s.context,this.ctx.save(),this.ctx.transform(...(0,r.getCurrentTransform)(this.compositeCtx))),this.ctx.save(),E(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=(0,r.getCurrentTransform)(this.ctx)}executeOperatorList(t,e,i,r){var a=t.argsArray,n=t.fnArray;let o=e||0;var l=a.length;if(l===o)return o;var h=10<l-o&&"function"==typeof i,d=h?Date.now()+15:0;let c=0;for(var u,p=this.commonObjs,g=this.objs;;){if(void 0!==r&&o===r.nextBreakPoint)return r.breakIt(o,i),o;if((u=n[o])!==s.OPS.dependency)this[u].apply(this,a[o]);else for(const t of a[o]){var f=t.startsWith("g_")?p:g;if(!f.has(t))return f.get(t,i),o}if(++o===l)return o;if(h&&10<++c){if(Date.now()>d)return i(),o;c=0}}}#at(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#at(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#nt()}#nt(){var t,e;this.pageColors&&"none"!==(t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background))&&(e=this.ctx.filter,this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e)}_scaleImage(t,e){var i,s,r=t.width,a=t.height;let n=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),l=r,h=a,d="prescale1";for(;2<n&&1<l||2<o&&1<h;){let e=l,r=h;2<n&&1<l&&(e=16384<=l?Math.floor(l/2)-1||1:Math.ceil(l/2),n/=l/e),2<o&&1<h&&(r=16384<=h?Math.floor(h/2)-1||1:Math.ceil(h)/2,o/=h/r),(s=(i=this.cachedCanvases.getCanvas(d,e,r)).context).clearRect(0,0,e,r),s.drawImage(t,0,0,l,h,0,0,e,r),t=i.canvas,l=e,h=r,d="prescale1"===d?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:h}}_createMaskCanvas(t){var e=this.ctx,{width:i,height:n}=t,o=this.current.fillColor,l=this.current.patternFill,h=(0,r.getCurrentTransform)(e);let d,c,u,p;if((t.bitmap||t.data)&&1<t.count){var g=t.bitmap||t.data.buffer;if((g=(c=JSON.stringify(l?h:[h.slice(0,4),o]),(d=this._cachedBitmapsMap.get(g))||(d=new Map,this._cachedBitmapsMap.set(g,d)),d.get(c)))&&!l){return{canvas:g,offsetX:Math.round(Math.min(h[0],h[2])+h[4]),offsetY:Math.round(Math.min(h[1],h[3])+h[5])}}u=g}u||_((p=this.cachedCanvases.getCanvas("maskCanvas",i,n)).context,t);g=s.Util.transform(h,[1/i,0,0,-1/n,0,0]),g=s.Util.transform(g,[1,0,0,1,0,-n]);var f,m,[h,v,f,m]=s.Util.getAxialAlignedBoundingBox([0,0,i,n],g);f=Math.round(f-h)||1,m=Math.round(m-v)||1;const b=h,y=v;return(m=(f=this.cachedCanvases.getCanvas("fillCanvas",f,m)).context).translate(-b,-y),m.transform(...g),u||(u=(u=this._scaleImage(p.canvas,(0,r.getCurrentTransformInverse)(m))).img,d&&l&&d.set(c,u)),m.imageSmoothingEnabled=T((0,r.getCurrentTransform)(m),t.interpolate),w(m,u,0,0,u.width,u.height,0,0,i,n),m.globalCompositeOperation="source-in",h=s.Util.transform((0,r.getCurrentTransformInverse)(m),[1,0,0,1,-b,-y]),m.fillStyle=l?o.getPattern(e,this,h,a):o,m.fillRect(0,0,i,n),d&&!l&&(this.cachedCanvases.delete("fillCanvas"),d.set(c,f.canvas)),{canvas:f.canvas,offsetX:Math.round(b),offsetY:Math.round(y)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=P[t]}setLineJoin(t){this.ctx.lineJoin=M[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){var i=this.ctx;void 0!==i.setLineDash&&(i.setLineDash(t),i.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(var[e,i]of t)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){var t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");var t=this.ctx.canvas.width,e=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel;i=this.cachedCanvases.getCanvas(i,t,e);(t=(this.suspendedCtx=this.ctx,this.ctx=i.context,this.ctx)).setTransform(...(0,r.getCurrentTransform)(this.suspendedCtx)),C(this.suspendedCtx,t),function(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(t,i){e.translate(t,i),this.__originalTranslate(t,i)},t.scale=function(t,i){e.scale(t,i),this.__originalScale(t,i)},t.transform=function(t,i,s,r,a,n){e.transform(t,i,s,r,a,n),this.__originalTransform(t,i,s,r,a,n)},t.setTransform=function(t,i,s,r,a,n){e.setTransform(t,i,s,r,a,n),this.__originalSetTransform(t,i,s,r,a,n)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(t){e.rotate(t),this.__originalRotate(t)},t.clip=function(t){e.clip(t),this.__originalClip(t)},t.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},t.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},t.bezierCurveTo=function(t,i,s,r,a,n){e.bezierCurveTo(t,i,s,r,a,n),this.__originalBezierCurveTo(t,i,s,r,a,n)},t.rect=function(t,i,s,r){e.rect(t,i,s,r),this.__originalRect(t,i,s,r)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}(t,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),C(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){var e;this.current.activeSMask&&(t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height],e=this.current.activeSMask,function(t,e,i,s){var r=s[0],a=s[1],n=s[2]-r;if(s=s[3]-a,0!=n&&0!=s){var o=e.context,l=i,h=n,d=s,c=(n=e.subtype,s=e.backdrop,e.transferMap),u=r,p=a,g=e.offsetX,f=e.offsetY,m=!!s,v=m?s[0]:0,b=m?s[1]:0,y=m?s[2]:0,w="Luminosity"===n?S:k,x=Math.min(d,Math.ceil(1048576/h));for(let t=0;t<d;t+=x){var A=Math.min(x,d-t),_=o.getImageData(u-g,t+(p-f),h,A);if(A=l.getImageData(u,t+p,h,A),m){R=L=C=void 0;var C=_.data,E=v,T=b,P=y,M=C.length;for(let t=3;t<M;t+=4){var R,L=C[t];0===L?(C[t-3]=E,C[t-2]=T,C[t-1]=P):L<255&&(R=255-L,C[t-3]=C[t-3]*L+E*R>>8,C[t-2]=C[t-2]*L+T*R>>8,C[t-1]=C[t-1]*L+P*R>>8)}}w(_.data,A.data,c),l.putImageData(A,u,t+p)}t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore()}}(this.suspendedCtx,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore())}save(){(this.inSMaskMode?(C(this.ctx,this.suspendedCtx),this.suspendedCtx):this.ctx).save();var t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),C(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,i,s,r,a){this.ctx.transform(t,e,i,s,r,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i){var a=this.ctx,n=this.current;let o,l,h=n.x,d=n.y;var c=(0,r.getCurrentTransform)(a),u=0===c[0]&&0===c[3]||0===c[1]&&0===c[2],p=u?i.slice(0):null;for(let i=0,r=0,b=t.length;i<b;i++)switch(0|t[i]){case s.OPS.rectangle:h=e[r++],d=e[r++];var g=e[r++],f=e[r++],m=h+g,v=d+f;a.moveTo(h,d),0===g||0===f?a.lineTo(m,v):(a.lineTo(m,d),a.lineTo(m,v),a.lineTo(h,v)),u||n.updateRectMinMax(c,[h,d,m,v]),a.closePath();break;case s.OPS.moveTo:h=e[r++],d=e[r++],a.moveTo(h,d),u||n.updatePathMinMax(c,h,d);break;case s.OPS.lineTo:h=e[r++],d=e[r++],a.lineTo(h,d),u||n.updatePathMinMax(c,h,d);break;case s.OPS.curveTo:o=h,l=d,h=e[r+4],d=e[r+5],a.bezierCurveTo(e[r],e[r+1],e[r+2],e[r+3],h,d),n.updateCurvePathMinMax(c,o,l,e[r],e[r+1],e[r+2],e[r+3],h,d,p),r+=6;break;case s.OPS.curveTo2:o=h,l=d,a.bezierCurveTo(h,d,e[r],e[r+1],e[r+2],e[r+3]),n.updateCurvePathMinMax(c,o,l,h,d,e[r],e[r+1],e[r+2],e[r+3],p),h=e[r+2],d=e[r+3],r+=4;break;case s.OPS.curveTo3:o=h,l=d,h=e[r+2],d=e[r+3],a.bezierCurveTo(e[r],e[r+1],h,d,h,d),n.updateCurvePathMinMax(c,o,l,e[r],e[r+1],h,d,h,d,p),r+=4;break;case s.OPS.closePath:a.closePath()}u&&n.updateScalingPathMinMax(c,p),n.setCurrentPoint(h,d)}closePath(){this.ctx.closePath()}stroke(t=!0){var e=this.ctx,i=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof i&&i?.getPattern?(e.save(),e.strokeStyle=i.getPattern(e,this,(0,r.getCurrentTransformInverse)(e),n),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){var e=this.ctx,i=this.current.fillColor;let s=!1;this.current.patternFill&&(e.save(),e.fillStyle=i.getPattern(e,this,(0,r.getCurrentTransformInverse)(e),a),s=!0),i=this.current.getClippedPathBoundingBox(),this.contentVisible&&null!==i&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),s&&e.restore(),t&&this.consumePath(i)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=R}eoClip(){this.pendingClip=L}beginText(){this.current.textMatrix=s.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){var t=this.pendingTextPaths,e=this.ctx;if(void 0===t)e.beginPath();else{e.save(),e.beginPath();for(const i of t)e.setTransform(...i.transform),e.translate(i.x,i.y),i.addToPath(e,i.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var i=this.commonObjs.get(t),r=this.current;if(!i)throw new Error("Can't find font for "+t);if(r.fontMatrix=i.fontMatrix||s.FONT_IDENTITY_MATRIX,0!==r.fontMatrix[0]&&0!==r.fontMatrix[3]||(0,s.warn)("Invalid font matrix for font "+t),e<0?(e=-e,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=e,!i.isType3Font){t=i.loadedName||"sans-serif",r=i.systemFontInfo?.css||`"${t}", `+i.fallbackName;let s="normal";i.black?s="900":i.bold&&(s="bold"),t=i.italic?"italic":"normal";let a=e;e<16?a=16:100<e&&(a=100),this.current.fontSizeScale=e/a,this.ctx.font=t+` ${s} ${a}px `+r}}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,i,s,r,a){this.current.textMatrix=[t,e,i,s,r,a],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,i,a){var n=this.ctx,o=(c=this.current).font,l=c.textRenderingMode,h=c.fontSize/c.fontSizeScale,d=l&s.TextRenderingMode.FILL_STROKE_MASK,c=(l=!!(l&s.TextRenderingMode.ADD_TO_PATH_FLAG),c.patternFill&&!o.missingFile);let u;(o.disableFontFace||l||c)&&(u=o.getPathGenerator(this.commonObjs,t)),o.disableFontFace||c?(n.save(),n.translate(e,i),n.beginPath(),u(n,h),a&&n.setTransform(...a),d!==s.TextRenderingMode.FILL&&d!==s.TextRenderingMode.FILL_STROKE||n.fill(),d!==s.TextRenderingMode.STROKE&&d!==s.TextRenderingMode.FILL_STROKE||n.stroke(),n.restore()):(d!==s.TextRenderingMode.FILL&&d!==s.TextRenderingMode.FILL_STROKE||n.fillText(t,e,i),d!==s.TextRenderingMode.STROKE&&d!==s.TextRenderingMode.FILL_STROKE||n.strokeText(t,e,i)),l&&(this.pendingTextPaths||=[]).push({transform:(0,r.getCurrentTransform)(n),x:e,y:i,fontSize:h,addToPath:u})}get isFontSubpixelAAEnabled(){var t=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10).context,e=(t.scale(1.5,1),t.fillText("I",0,10),t.getImageData(0,0,10,10).data);let i=!1;for(let t=3;t<e.length;t+=4)if(0<e[t]&&e[t]<255){i=!0;break}return(0,s.shadow)(this,"isFontSubpixelAAEnabled",i)}showText(t){var e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(t);var n=e.fontSize;if(0!==n){var o=this.ctx,l=e.fontSizeScale,h=e.charSpacing,d=e.wordSpacing,c=e.fontDirection,u=e.textHScale*c,p=t.length,g=i.vertical,f=g?1:-1,m=i.defaultVMetrics,v=n*e.fontMatrix[0],b=e.textRenderingMode===s.TextRenderingMode.FILL&&!i.disableFontFace&&!e.patternFill;o.save(),o.transform(...e.textMatrix),o.translate(e.x,e.y+e.textRise),0<c?o.scale(u,-1):o.scale(u,1);let P,M=(e.patternFill&&(o.save(),w=e.fillColor.getPattern(o,this,(0,r.getCurrentTransformInverse)(o),a),P=(0,r.getCurrentTransform)(o),o.restore(),o.fillStyle=w),e.lineWidth);var y,w=e.textMatrixScale;if(0===w||0===M?(y=e.textRenderingMode&s.TextRenderingMode.FILL_STROKE_MASK)!==s.TextRenderingMode.STROKE&&y!==s.TextRenderingMode.FILL_STROKE||(M=this.getSinglePixelWidth()):M/=w,1!==l&&(o.scale(l,l),M/=l),o.lineWidth=M,i.isInvalidPDFjsFont){var x=[];let i=0;for(const e of t)x.push(e.unicode),i+=e.width;o.fillText(x.join(""),0,0),e.x+=i*v*u,o.restore(),this.compose()}else{let s,r=0;for(s=0;s<p;++s){var A=t[s];if("number"==typeof A)r+=f*A*n/1e3;else{let t=!1;var _,C,E,k=(A.isSpace?d:0)+h,S=A.fontChar,T=A.accent;let e,s,a=A.width;s=g?(_=A.vmetric||m,C=-(A.vmetric?_[1]:.5*a)*v,E=_[2]*v,a=_?-_[0]:a,e=C/l,(r+E)/l):(e=r/l,0),i.remeasure&&0<a&&(a<(_=1e3*o.measureText(S).width/n*l)&&this.isFontSubpixelAAEnabled?(C=a/_,t=!0,o.save(),o.scale(C,1),e/=C):a!==_&&(e+=(a-_)/2e3*n/l)),this.contentVisible&&(A.isInFont||i.missingFile)&&(b&&!T?o.fillText(S,e,s):(this.paintChar(S,e,s,P),T&&(E=e+n*T.offset.x/l,A=s-n*T.offset.y/l,this.paintChar(T.fontChar,E,A,P)))),r+=S=g?a*v-k*c:a*v+k*c,t&&o.restore()}}g?e.y-=r:e.x+=r*u,o.restore(),this.compose()}}}showType3Text(t){var e,i,r=this.ctx,a=this.current,n=a.font,o=a.fontSize,l=a.fontDirection,h=n.vertical?1:-1,d=a.charSpacing,c=a.wordSpacing,u=a.textHScale*l,p=a.fontMatrix||s.FONT_IDENTITY_MATRIX,g=t.length;let f,m,v,b;if(!(a.textRenderingMode===s.TextRenderingMode.INVISIBLE)&&0!==o){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,r.save(),r.transform(...a.textMatrix),r.translate(a.x,a.y),r.scale(u,l),f=0;f<g;++f)"number"==typeof(m=t[f])?(this.ctx.translate(b=h*m*o/1e3,0),a.x+=b*u):(e=(m.isSpace?c:0)+d,(i=n.charProcOperatorList[m.operatorListId])?(this.contentVisible&&(this.processingType3=m,this.save(),r.scale(o,o),r.transform(...p),this.executeOperatorList(i),this.restore()),v=s.Util.applyTransform([m.width,0],p)[0]*o+e,r.translate(v,0),a.x+=v*u):(0,s.warn)(`Type3 character "${m.operatorListId}" is not available.`));r.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,i,s,r,a){this.ctx.rect(i,s,r-i,a-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){var e,i,s;return"TilingPattern"===t[0]?(e=t[1],i=this.baseTransform||(0,r.getCurrentTransform)(this.ctx),s={createCanvasGraphics:t=>new I(t,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})},new v(t,e,this.ctx,s,i)):this._getPattern(t[1],t[2])}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,i){t=s.Util.makeHexColor(t,e,i),this.ctx.strokeStyle=t,this.current.strokeColor=t}setFillRGBColor(t,e,i){t=s.Util.makeHexColor(t,e,i),this.ctx.fillStyle=t,this.current.fillColor=t,this.current.patternFill=!1}_getPattern(t,e=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=function(t){switch(t[0]){case"RadialAxial":return new d(t);case"Mesh":return new p(t);case"Dummy":return new g}throw new Error("Unknown IR type: "+t[0])}(this.getObject(t)),this.cachedPatterns.set(t,i)),e&&(i.matrix=e),i}shadingFill(t){var e,i,a;this.contentVisible&&(e=this.ctx,this.save(),t=this._getPattern(t),e.fillStyle=t.getPattern(e,this,(0,r.getCurrentTransformInverse)(e),o),(t=(0,r.getCurrentTransformInverse)(e))?(({width:e,height:i}=e.canvas),[e,i,t,a]=s.Util.getAxialAlignedBoundingBox([0,0,e,i],t),this.ctx.fillRect(e,i,t-e,a-i)):this.ctx.fillRect(-1e10,-1e10,2e10,2e10),this.compose(this.current.getClippedPathBoundingBox()),this.restore())}beginInlineImage(){(0,s.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,s.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(t,e){var i;this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(t)&&6===t.length&&this.transform(...t),this.baseTransform=(0,r.getCurrentTransform)(this.ctx),e)&&(t=e[2]-e[0],i=e[3]-e[1],this.ctx.rect(e[0],e[1],t,i),this.current.updateRectMinMax((0,r.getCurrentTransform)(this.ctx),e),this.clip(),this.endPath())}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(this.contentVisible){this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);var e=this.ctx,i=(t.isolated||(0,s.info)("TODO: Support non-isolated groups."),t.knockout&&(0,s.warn)("Knockout groups not supported."),(0,r.getCurrentTransform)(e));if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");var a=s.Util.getAxialAlignedBoundingBox(t.bbox,(0,r.getCurrentTransform)(e)),n=[0,0,e.canvas.width,e.canvas.height],o=(a=s.Util.intersect(a,n)||[0,0,0,0],n=Math.floor(a[0]),Math.floor(a[1]));let h=Math.max(Math.ceil(a[2])-n,1),d=Math.max(Math.ceil(a[3])-o,1),c=1,u=1,p=(h>b&&(c=h/b,h=b),d>b&&(u=d/b,d=b),this.current.startNewPathAndClipBox([0,0,h,d]),"groupAt"+this.groupLevel);t.smask&&(p+="_smask_"+this.smaskCounter++%2);var l=(a=this.cachedCanvases.getCanvas(p,h,d)).context;l.scale(1/c,1/u),l.translate(-n,-o),l.transform(...i),t.smask?this.smaskStack.push({canvas:a.canvas,context:l,offsetX:n,offsetY:o,scaleX:c,scaleY:u,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(n,o),e.scale(c,u),e.save()),C(e,l),this.ctx=l,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}}endGroup(t){var e,i;this.contentVisible&&(this.groupLevel--,e=this.ctx,i=this.groupStack.pop(),this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask?(this.tempSMask=this.smaskStack.pop(),this.restore()):(this.ctx.restore(),i=(0,r.getCurrentTransform)(this.ctx),this.restore(),this.ctx.save(),this.ctx.setTransform(...i),t=s.Util.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],i),this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(t)))}beginAnnotation(t,e,i,a,n){var o,l,h,d,c;this.#at(),E(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(e)&&4===e.length&&(o=e[2]-e[0],l=e[3]-e[1],n&&this.annotationCanvasMap?((i=i.slice())[4]-=e[0],i[5]-=e[1],(e=e.slice())[0]=e[1]=0,e[2]=o,e[3]=l,[n,h]=s.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(this.ctx)),c=this.viewportScale,d=Math.ceil(o*this.outputScaleX*c),c=Math.ceil(l*this.outputScaleY*c),({canvas:d,context:c}=(this.annotationCanvas=this.canvasFactory.create(d,c),this.annotationCanvas)),this.annotationCanvasMap.set(t,d),this.annotationCanvas.savedCtx=this.ctx,this.ctx=c,this.ctx.save(),this.ctx.setTransform(n,0,0,-h,0,l*h),E(this.ctx)):(E(this.ctx),this.ctx.rect(e[0],e[1],o,l),this.ctx.clip(),this.endPath())),this.current=new x(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...a)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#nt(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){var e,i;this.contentVisible&&(e=t.count,(t=this.getObject(t.data,t)).count=e,e=this.ctx,(i=this.processingType3)&&(void 0===i.compiled&&(i.compiled=function(t){const{width:e,height:i}=t;if(1e3<e||1e3<i)return null;var s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=e+1;let a,n,o,l=new Uint8Array(r*(i+1));var h=e+7&-8;let d=new Uint8Array(h*i),c=0;for(const e of t.data){let t=128;for(;0<t;)d[c++]=e&t?0:255,t>>=1}let u=0;for((c=0)!==d[c]&&(l[0]=1,++u),n=1;n<e;n++)d[c]!==d[c+1]&&(l[n]=d[c]?2:1,++u),c++;for(0!==d[c]&&(l[n]=2,++u),a=1;a<i;a++){c=a*h,o=a*r,d[c-h]!==d[c]&&(l[o]=d[c]?1:8,++u);let t=(d[c]?4:0)+(d[c-h]?8:0);for(n=1;n<e;n++)s[t=(t>>2)+(d[c+1]?4:0)+(d[c-h+1]?8:0)]&&(l[o+n]=s[t],++u),c++;if(d[c-h]!==d[c]&&(l[o+n]=d[c]?2:4,++u),1e3<u)return null}for(c=h*(i-1),o=a*r,0!==d[c]&&(l[o]=8,++u),n=1;n<e;n++)d[c]!==d[c+1]&&(l[o+n]=d[c]?4:8,++u),c++;if(0!==d[c]&&(l[o+n]=4,++u),1e3<u)return null;var p=new Int32Array([0,r,-1,0,-r,0,0,0,1]);const g=new Path2D;for(a=0;u&&a<=i;a++){let t=a*r;for(var f=t+e;t<f&&!l[t];)t++;if(t!==f){g.moveTo(t%r,a);var m=t;let e=l[t];do{for(var v=p[e];t+=v,!l[t];);var b=l[t];5!==b&&10!==b?(e=b,l[t]=0):(e=b&51*e>>4,l[t]&=e>>2|e<<2),g.lineTo(t%r,t/r|0),l[t]||--u}while(m!==t);--a}}return d=null,l=null,function(t){t.save(),t.scale(1/e,-1/i),t.translate(0,-i),t.fill(g),t.beginPath(),t.restore()}}(t)),i.compiled)?i.compiled(e):(t=(i=this._createMaskCanvas(t)).canvas,e.save(),e.setTransform(1,0,0,1,0,0),e.drawImage(t,i.offsetX,i.offsetY),e.restore(),this.compose()))}paintImageMaskXObjectRepeat(t,e,i=0,a=0,n,o){if(this.contentVisible){t=this.getObject(t.data,t);var l=this.ctx,h=(l.save(),(0,r.getCurrentTransform)(l)),d=(l.transform(e,i,a,n,0,0),this._createMaskCanvas(t));l.setTransform(1,0,0,1,d.offsetX-h[4],d.offsetY-h[5]);for(let t=0,r=o.length;t<r;t+=2){var c=s.Util.transform(h,[e,i,a,n,o[t],o[t+1]]),[c,u]=s.Util.applyTransform([0,0],c);l.drawImage(d.canvas,c,u)}l.restore(),this.compose()}}paintImageMaskXObjectGroup(t){if(this.contentVisible){var e=this.ctx,i=this.current.fillColor,s=this.current.patternFill;for(const u of t){var{data:n,width:o,height:l,transform:h}=u,d=this.cachedCanvases.getCanvas("maskCanvas",o,l),c=d.context,n=(c.save(),this.getObject(n,u));_(c,n),c.globalCompositeOperation="source-in",c.fillStyle=s?i.getPattern(c,this,(0,r.getCurrentTransformInverse)(e),a):i,c.fillRect(0,0,o,l),c.restore(),e.save(),e.transform(...h),e.scale(1,-1),w(e,d.canvas,0,0,o,l,0,-1,1,1),e.restore()}this.compose()}}paintImageXObject(t){this.contentVisible&&((t=this.getObject(t))?this.paintInlineImageXObject(t):(0,s.warn)("Dependent image isn't ready yet"))}paintImageXObjectRepeat(t,e,i,r){if(this.contentVisible)if(t=this.getObject(t)){var a=t.width,n=t.height,o=[];for(let t=0,s=r.length;t<s;t+=2)o.push({transform:[e,0,0,i,r[t],r[t+1]],x:0,y:0,w:a,h:n});this.paintInlineImageXObjectGroup(t,o)}else(0,s.warn)("Dependent image isn't ready yet")}applyTransferMapsToCanvas(t){return"none"!==this.current.transferMaps&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){var e,i;return"none"===this.current.transferMaps?t.bitmap:(({bitmap:t,width:e,height:i}=t),(i=(e=this.cachedCanvases.getCanvas("inlineImage",e,i)).context).filter=this.current.transferMaps,i.drawImage(t,0,0),i.filter="none",e.canvas)}paintInlineImageXObject(t){if(this.contentVisible){var e=t.width,i=t.height,a=this.ctx;let o;this.save(),s.isNodeJS||"none"!==(n=a.filter)&&""!==n&&(a.filter="none"),a.scale(1/e,-1/i),o=t.bitmap?this.applyTransferMapsToBitmap(t):"function"==typeof HTMLElement&&t instanceof HTMLElement||!t.data?t:(A(n=this.cachedCanvases.getCanvas("inlineImage",e,i).context,t),this.applyTransferMapsToCanvas(n));var n=this._scaleImage(o,(0,r.getCurrentTransformInverse)(a));a.imageSmoothingEnabled=T((0,r.getCurrentTransform)(a),t.interpolate),w(a,n.img,0,0,n.paintWidth,n.paintHeight,0,-i,e,i),this.compose(),this.restore()}}paintInlineImageXObjectGroup(t,e){if(this.contentVisible){var i,s,r=this.ctx;let a;a=t.bitmap||(s=t.width,i=t.height,A(s=this.cachedCanvases.getCanvas("inlineImage",s,i).context,t),this.applyTransferMapsToCanvas(s));for(const t of e)r.save(),r.transform(...t.transform),r.scale(1,-1),w(r,a,t.x,t.y,t.w,t.h,0,-1,1,1),r.restore();this.compose()}}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){var e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t),t=this.ctx;this.pendingClip&&(e||(this.pendingClip===L?t.clip("evenodd"):t.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),t.beginPath()}getSinglePixelWidth(){var t,e,i;return this._cachedGetSinglePixelWidth||(0===(i=(0,r.getCurrentTransform)(this.ctx))[1]&&0===i[2]?this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(i[0]),Math.abs(i[3])):(t=Math.abs(i[0]*i[3]-i[2]*i[1]),e=Math.hypot(i[0],i[2]),i=Math.hypot(i[1],i[3]),this._cachedGetSinglePixelWidth=Math.max(e,i)/t)),this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){var t,e,i,s=this.current.lineWidth,{a:r,b:a,c:n,d:o}=this.ctx.getTransform();let l,h;0===a&&0===n?(i=Math.abs(r))===(t=Math.abs(o))?l=h=0===s?1/i:(e=i*s)<1?1/e:1:h=0===s?(l=1/i,1/t):(l=(e=i*s)<1?1/e:1,(i=t*s)<1?1/i:1):(t=Math.abs(r*o-a*n),e=Math.hypot(r,a),i=Math.hypot(n,o),h=0===s?(l=i/t,e/t):(l=(r=s*t)<i?i/r:1,r<e?e/r:1)),this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=h}return this._cachedScaleForStroking}rescaleAndStroke(t){var e=this.ctx,i=this.current.lineWidth,[s,r]=this.getScaleForStroking();if(e.lineWidth=i||1,1===s&&1===r)e.stroke();else{if(i=e.getLineDash(),t&&e.save(),e.scale(s,r),0<i.length){const t=Math.max(s,r);e.setLineDash(i.map((e=>e/t))),e.lineDashOffset/=t}e.stroke(),t&&e.restore()}}isContentVisible(){for(let t=this.markedContentStack.length-1;0<=t;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const t in s.OPS)void 0!==I.prototype[t]&&(I.prototype[s.OPS[t]]=I.prototype[t])},473:(t,e,i)=>{i.d(e,{DOMCMapReaderFactory:()=>h,DOMCanvasFactory:()=>o,DOMFilterFactory:()=>n,DOMSVGFactory:()=>c,DOMStandardFontDataFactory:()=>d,PDFDateString:()=>b,PageViewport:()=>u,PixelsPerInch:()=>a,RenderingCancelledException:()=>p,StatTimer:()=>f,fetchData:()=>l,getColorValues:()=>function(t){var e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const s of t.keys()){e.style.color=s;var i=window.getComputedStyle(e).color;t.set(s,y(i))}e.remove()},getCurrentTransform:()=>function(t){var{a:t,b:e,c:i,d:s,e:r,f:a}=t.getTransform();return[t,e,i,s,r,a]},getCurrentTransformInverse:()=>function(t){var{a:t,b:e,c:i,d:s,e:r,f:a}=t.getTransform().invertSelf();return[t,e,i,s,r,a]},getFilenameFromUrl:()=>function(t,e=!1){return e||([t]=t.split(/[#?]/,1)),t.substring(t.lastIndexOf("/")+1)},getPdfFilenameFromUrl:()=>function(t,e="document.pdf"){if("string"!=typeof t)return e;if(g(t))return(0,s.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;var i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i;t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(t);let r=i.exec(t[1])||i.exec(t[2])||i.exec(t[3]);if(r&&(r=r[0]).includes("%"))try{r=i.exec(decodeURIComponent(r))[0]}catch{}return r||e},getRGB:()=>y,getXfaPageViewport:()=>function(t,{scale:e=1,rotation:i=0}){var{width:t,height:s}=t.attributes.style;t=[0,0,parseInt(t),parseInt(s)];return new u({viewBox:t,scale:e,rotation:i})},isDataScheme:()=>g,isPdfFile:()=>function(t){return"string"==typeof t&&/\.pdf$/i.test(t)},isValidFetchUrl:()=>m,noContextMenu:()=>function(t){t.preventDefault()},setLayerDimensions:()=>function(t,e,i=!1,r=!0){var a,n,o,l;e instanceof u&&(({pageWidth:o,pageHeight:n}=e.rawDims),a=t.style,o=`var(--scale-factor) * ${o}px`,n=`var(--scale-factor) * ${n}px`,o=(l=s.FeatureTest.isCSSRoundSupported)?`round(${o}, 1px)`:`calc(${o})`,l=l?`round(${n}, 1px)`:`calc(${n})`,i&&e.rotation%180!=0?(a.width=l,a.height=o):(a.width=o,a.height=l)),r&&t.setAttribute("data-main-rotation",e.rotation)}});e=i(822);var s=i(266);const r="http://www.w3.org/2000/svg";class a{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}class n extends e.BaseFilterFactory{#ot;#lt;#H;#ht;#dt;#ct;#ut;#pt;#gt;#ft;#mt=0;constructor({docId:t,ownerDocument:e=globalThis.document}={}){super(),this.#H=t,this.#ht=e}get#vt(){return this.#ot||=new Map}get#bt(){var t,e;return this.#lt||((e=(t=this.#ht.createElement("div")).style).visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1,(e=this.#ht.createElementNS(r,"svg")).setAttribute("width",0),e.setAttribute("height",0),this.#lt=this.#ht.createElementNS(r,"defs"),t.append(e),e.append(this.#lt),this.#ht.body.append(t)),this.#lt}addFilter(t){if(!t)return"none";var e=this.#vt.get(t);if(e)return e;let i,s,r,a;if(1===t.length){var n=t[0],o=new Array(256);for(let t=0;t<256;t++)o[t]=n[t]/255;a=i=s=r=o.join(",")}else{var[l,h,d]=t,c=new Array(256),u=new Array(256),p=new Array(256);for(let t=0;t<256;t++)c[t]=l[t]/255,u[t]=h[t]/255,p[t]=d[t]/255;i=c.join(","),s=u.join(","),r=p.join(","),a=""+i+s+r}return(e=this.#vt.get(a))?(this.#vt.set(t,e),e):(e=`g_${this.#H}_transfer_map_`+this.#mt++,this.#vt.set(t,t=`url(#${e})`),this.#vt.set(a,t),e=this.#yt(e),this.#wt(i,s,r,e),t)}addHCMFilter(t,e){var i=t+"-"+e;if(this.#ct!==i&&(this.#ct=i,this.#ut="none",this.#dt?.remove(),t)&&e){const n=this.#xt(t),o=(t=s.Util.makeHexColor(...n),this.#xt(e));if(e=s.Util.makeHexColor(...o),this.#bt.style.color="",("#000000"!==t||"#ffffff"!==e)&&t!==e){var r=new Array(256);for(let t=0;t<=255;t++){var a=t/255;r[t]=a<=.03928?a/12.92:((.055+a)/1.055)**2.4}i=r.join(","),t=`g_${this.#H}_hcm_filter`,e=this.#pt=this.#yt(t),this.#wt(i,i,i,e),this.#At(e),i=(t,e)=>{var i=n[t]/255,s=o[t]/255,r=new Array(e+1);for(let t=0;t<=e;t++)r[t]=i+t/e*(s-i);return r.join(",")},this.#wt(i(0,5),i(1,5),i(2,5),e),this.#ut=`url(#${t})`}}return this.#ut}addHighlightHCMFilter(t,e,i,s){var r=t+`-${e}-${i}-`+s;if(this.#gt!==r&&(this.#gt=r,this.#ft="none",this.#pt?.remove(),t)&&e){var[r,t]=[t,e].map(this.#xt.bind(this));let a=Math.round(.2126*r[0]+.7152*r[1]+.0722*r[2]),n=Math.round(.2126*t[0]+.7152*t[1]+.0722*t[2]),[o,l]=[i,s].map(this.#xt.bind(this));n<a&&([a,n,o,l]=[n,a,l,o]),this.#bt.style.color="",e=(t,e,i)=>{var s=new Array(256),r=(n-a)/i,o=t/255,l=(e-t)/(255*i);let h=0;for(let t=0;t<=i;t++){var d=Math.round(a+t*r),c=o+t*l;for(let t=h;t<=d;t++)s[t]=c;h=d+1}for(let t=h;t<256;t++)s[t]=s[h-1];return s.join(",")},r=`g_${this.#H}_hcm_highlight_filter`,t=this.#pt=this.#yt(r),this.#At(t),this.#wt(e(o[0],l[0],5),e(o[1],l[1],5),e(o[2],l[2],5),t),this.#ft=`url(#${r})`}return this.#ft}destroy(t=!1){t&&(this.#ut||this.#ft)||(this.#lt&&(this.#lt.parentNode.parentNode.remove(),this.#lt=null),this.#ot&&(this.#ot.clear(),this.#ot=null),this.#mt=0)}#At(t){var e=this.#ht.createElementNS(r,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#yt(t){var e=this.#ht.createElementNS(r,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#bt.append(e),e}#_t(t,e,i){(e=this.#ht.createElementNS(r,e)).setAttribute("type","discrete"),e.setAttribute("tableValues",i),t.append(e)}#wt(t,e,i,s){var a=this.#ht.createElementNS(r,"feComponentTransfer");s.append(a),this.#_t(a,"feFuncR",t),this.#_t(a,"feFuncG",e),this.#_t(a,"feFuncB",i)}#xt(t){return this.#bt.style.color=t,y(getComputedStyle(this.#bt).getPropertyValue("color"))}}class o extends e.BaseCanvasFactory{constructor({ownerDocument:t=globalThis.document}={}){super(),this._document=t}_createCanvas(t,e){var i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}async function l(t,e="text"){if(m(t,document.baseURI)){var i=await fetch(t);if(!i.ok)throw new Error(i.statusText);switch(e){case"arraybuffer":return i.arrayBuffer();case"blob":return i.blob();case"json":return i.json()}return i.text()}return new Promise(((i,s)=>{const r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(200===r.status||0===r.status){let t;switch(e){case"arraybuffer":case"blob":case"json":t=r.response;break;default:t=r.responseText}if(t)return void i(t)}s(new Error(r.statusText))}},r.send(null)}))}class h extends e.BaseCMapReaderFactory{_fetchData(t,e){return l(t,this.isCompressed?"arraybuffer":"text").then((t=>({cMapData:t instanceof ArrayBuffer?new Uint8Array(t):(0,s.stringToBytes)(t),compressionType:e})))}}class d extends e.BaseStandardFontDataFactory{_fetchData(t){return l(t,"arraybuffer").then((t=>new Uint8Array(t)))}}class c extends e.BaseSVGFactory{_createSVG(t){return document.createElementNS(r,t)}}class u{constructor({viewBox:t,scale:e,rotation:i,offsetX:s=0,offsetY:r=0,dontFlip:a=!1}){this.viewBox=t,this.scale=e,this.rotation=i,this.offsetX=s,this.offsetY=r;var n=(t[2]+t[0])/2,o=(t[3]+t[1])/2;let l,h,d,c,u,p,g,f;switch((i%=360)<0&&(i+=360),i){case 180:l=-1,h=0,d=0,c=1;break;case 90:l=0,h=1,d=1,c=0;break;case 270:l=0,h=-1,d=-1,c=0;break;case 0:l=1,h=0,d=0,c=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(d=-d,c=-c),f=0===l?(u=Math.abs(o-t[1])*e+s,p=Math.abs(n-t[0])*e+r,g=(t[3]-t[1])*e,(t[2]-t[0])*e):(u=Math.abs(n-t[0])*e+s,p=Math.abs(o-t[1])*e+r,g=(t[2]-t[0])*e,(t[3]-t[1])*e),this.transform=[l*e,h*e,d*e,c*e,u-l*e*n-d*e*o,p-h*e*n-c*e*o],this.width=g,this.height=f}get rawDims(){var t=this.viewBox;return(0,s.shadow)(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new u({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:r})}convertToViewportPoint(t,e){return s.Util.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){var e=s.Util.applyTransform([t[0],t[1]],this.transform);t=s.Util.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],t[0],t[1]]}convertToPdfPoint(t,e){return s.Util.applyInverseTransform([t,e],this.transform)}}class p extends s.BaseException{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function g(t){var e=t.length;let i=0;for(;i<e&&""===t[i].trim();)i++;return"data:"===t.substring(i,i+5).toLowerCase()}class f{started=Object.create(null);times=[];time(t){t in this.started&&(0,s.warn)("Timer is already running for "+t),this.started[t]=Date.now()}timeEnd(t){t in this.started||(0,s.warn)("Timer has not been started for "+t),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){var t,e,i,s,r=[];let a=0;for({name:t}of this.times)a=Math.max(t.length,a);for({name:e,start:i,end:s}of this.times)r.push(`${e.padEnd(a)} ${s-i}ms\n`);return r.join("")}}function m(t,e){try{var i=(e?new URL(t,e):new URL(t)).protocol;return"http:"===i||"https:"===i}catch{return!1}}let v;class b{static toDateObject(t){if(!t||"string"!=typeof t)return null;if(!(t=(v||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?")).exec(t)))return null;var e=parseInt(t[1],10),i=1<=(i=parseInt(t[2],10))&&i<=12?i-1:0,s=1<=(s=parseInt(t[3],10))&&s<=31?s:1;let r=parseInt(t[4],10),a=(r=0<=r&&r<=23?r:0,parseInt(t[5],10));a=0<=a&&a<=59?a:0;var n=0<=(n=parseInt(t[6],10))&&n<=59?n:0,o=t[7]||"Z",l=0<=(l=parseInt(t[8],10))&&l<=23?l:0;t=0<=(t=parseInt(t[9],10)||0)&&t<=59?t:0;return"-"===o?(r+=l,a+=t):"+"===o&&(r-=l,a-=t),new Date(Date.UTC(e,i,s,r,a,n))}}function y(t){var e;return t.startsWith("#")?[(16711680&(e=parseInt(t.slice(1),16)))>>16,(65280&e)>>8,255&e]:t.startsWith("rgb(")?t.slice(4,-1).split(",").map((t=>parseInt(t))):t.startsWith("rgba(")?t.slice(5,-1).split(",").map((t=>parseInt(t))).slice(0,3):((0,s.warn)(`Not a valid color format: "${t}"`),[0,0,0])}},423:(t,e,i)=>{i.d(e,{DrawLayer:()=>a});var s=i(473),r=i(266);class a{#v=null;#mt=0;#Ct=new Map;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(this.#v){if(this.#v!==t){if(0<this.#Ct.size)for(const e of this.#Ct.values())e.remove(),t.append(e);this.#v=t}}else this.#v=t}static get _svgFactory(){return(0,r.shadow)(this,"_svgFactory",new s.DOMSVGFactory)}static#Et(t,{x:e,y:i,width:s,height:r}){(t=t.style).top=100*i+"%",t.left=100*e+"%",t.width=100*s+"%",t.height=100*r+"%"}#kt(t){var e=a._svgFactory.create(1,1,!0);return this.#v.append(e),a.#Et(e,t),e}highlight({outlines:t,box:e},i,s){var r=this.#mt++,n=((e=this.#kt(e)).classList.add("highlight"),a._svgFactory.createElement("defs")),o=(e.append(n),a._svgFactory.createElement("path")),l=(n.append(o),`path_p${this.pageIndex}_`+r);o.setAttribute("id",l),o.setAttribute("d",a.#St(t)),o=a._svgFactory.createElement("clipPath"),n.append(o),t="clip_"+l,o.setAttribute("id",t),o.setAttribute("clipPathUnits","objectBoundingBox"),n=a._svgFactory.createElement("use"),o.append(n),n.setAttribute("href","#"+l),n.classList.add("clip"),o=a._svgFactory.createElement("use");return e.append(o),e.setAttribute("fill",i),e.setAttribute("fill-opacity",s),o.setAttribute("href","#"+l),this.#Ct.set(r,e),{id:r,clipPathId:`url(#${t})`}}highlightOutline({outlines:t,box:e}){var i=this.#mt++,s=((e=this.#kt(e)).classList.add("highlightOutline"),a._svgFactory.createElement("defs")),r=(e.append(s),a._svgFactory.createElement("path"));s.append(r),s=`path_p${this.pageIndex}_`+i,r.setAttribute("id",s),r.setAttribute("d",a.#St(t)),r.setAttribute("vector-effect","non-scaling-stroke"),t=a._svgFactory.createElement("use"),e.append(t),t.setAttribute("href","#"+s),r=t.cloneNode();return e.append(r),t.classList.add("mainOutline"),r.classList.add("secondaryOutline"),this.#Ct.set(i,e),i}static#St(t){var e=[];for(const r of t){let[t,a]=r;e.push(`M${t} `+a);for(let n=2;n<r.length;n+=2){var i=r[n],s=r[n+1];i===t?(e.push("V"+s),a=s):s===a&&(e.push("H"+i),t=i)}e.push("Z")}return e.join(" ")}updateBox(t,e){a.#Et(this.#Ct.get(t),e)}rotate(t,e){this.#Ct.get(t).setAttribute("data-main-rotation",e)}changeColor(t,e){this.#Ct.get(t).setAttribute("fill",e)}changeOpacity(t,e){this.#Ct.get(t).setAttribute("fill-opacity",e)}addClass(t,e){this.#Ct.get(t).classList.add(e)}removeClass(t,e){this.#Ct.get(t).classList.remove(e)}remove(t){null!==this.#v&&(this.#Ct.get(t).remove(),this.#Ct.delete(t))}destroy(){this.#v=null;for(const t of this.#Ct.values())t.remove();this.#Ct.clear()}}},629:(t,e,i)=>{i.d(e,{AnnotationEditorLayer:()=>g});var s=i(266),r=i(115),a=i(812),n=i(640);class o extends r.AnnotationEditor{#Tt=this.editorDivBlur.bind(this);#Pt=this.editorDivFocus.bind(this);#Mt=this.editorDivInput.bind(this);#Rt=this.editorDivKeydown.bind(this);#u;#Lt="";#It=this.id+"-editor";#Dt;#Ft=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){var t=o.prototype,e=t=>t.isEmpty(),i=a.AnnotationEditorUIManager.TRANSLATE_SMALL,r=a.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,s.shadow)(this,"_keyboardManager",new a.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:e}]]))}static _type="freetext";static _editorType=s.AnnotationEditorType.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.#u=t.color||o._defaultColor||r.AnnotationEditor._defaultLineColor,this.#Dt=t.fontSize||o._defaultFontSize}static initialize(t){r.AnnotationEditor.initialize(t,{strings:["pdfjs-free-text-default-content"]}),t=getComputedStyle(document.documentElement),this._internalPadding=parseFloat(t.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case s.AnnotationEditorParamsType.FREETEXT_SIZE:o._defaultFontSize=e;break;case s.AnnotationEditorParamsType.FREETEXT_COLOR:o._defaultColor=e}}updateParams(t,e){switch(t){case s.AnnotationEditorParamsType.FREETEXT_SIZE:this.#Ot(e);break;case s.AnnotationEditorParamsType.FREETEXT_COLOR:this.#Bt(e)}}static get defaultPropertiesToUpdate(){return[[s.AnnotationEditorParamsType.FREETEXT_SIZE,o._defaultFontSize],[s.AnnotationEditorParamsType.FREETEXT_COLOR,o._defaultColor||r.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[s.AnnotationEditorParamsType.FREETEXT_SIZE,this.#Dt],[s.AnnotationEditorParamsType.FREETEXT_COLOR,this.#u]]}#Ot(t){const e=t=>{this.editorDiv.style.fontSize=`calc(${t}px * var(--scale-factor))`,this.translate(0,-(t-this.#Dt)*this.parentScale),this.#Dt=t,this.#Nt()},i=this.#Dt;this.addCommands({cmd:()=>{e(t)},undo:()=>{e(i)},mustExec:!0,type:s.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#Bt(t){const e=this.#u;this.addCommands({cmd:()=>{this.#u=this.editorDiv.style.color=t},undo:()=>{this.#u=this.editorDiv.style.color=e},mustExec:!0,type:s.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){var t=this.parentScale;return[-o._internalPadding*t,-(o._internalPadding+this.#Dt)*t]}rebuild(){this.parent&&(super.rebuild(),null===this.div||this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(s.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#Rt),this.editorDiv.addEventListener("focus",this.#Pt),this.editorDiv.addEventListener("blur",this.#Tt),this.editorDiv.addEventListener("input",this.#Mt))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#It),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#Rt),this.editorDiv.removeEventListener("focus",this.#Pt),this.editorDiv.removeEventListener("blur",this.#Tt),this.editorDiv.removeEventListener("input",this.#Mt),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv)&&this.editorDiv.focus()}onceAdded(){this.width?this.#zt():(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#jt(){var t=this.editorDiv.getElementsByTagName("div");if(0===t.length)return this.editorDiv.innerText;var e=[];for(const i of t)e.push(i.innerText.replace(/\r\n?|\n/,""));return e.join("\n")}#Nt(){var t,e,i,[s,r]=this.parentDimensions;let a;this.isAttachedToDOM?a=this.div.getBoundingClientRect():(({currentLayer:t,div:e}=this),i=e.style.display,e.style.display="hidden",t.div.append(this.div),a=e.getBoundingClientRect(),e.remove(),e.style.display=i),this.rotation%180==this.parentRotation%180?(this.width=a.width/s,this.height=a.height/r):(this.width=a.height/s,this.height=a.width/r),this.fixAndSetPosition()}commit(){if(this.isInEditMode()){super.commit(),this.disableEditMode();const t=this.#Lt,e=this.#Lt=this.#jt().trimEnd();if(t!==e){const i=t=>{(this.#Lt=t)?(this.#Ht(),this._uiManager.rebuild(this),this.#Nt()):this.remove()};this.addCommands({cmd:()=>{i(e)},undo:()=>{i(t)},mustExec:!1}),this.#Nt()}}}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&"Enter"===t.key&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){o._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(!this.div){let h,d;var t;if(this.width&&(h=this.x,d=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#It),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),r.AnnotationEditor._l10nPromise.get("pdfjs-free-text-default-content").then((t=>this.editorDiv?.setAttribute("default-content",t))),this.editorDiv.contentEditable=!0,(t=this.editorDiv.style).fontSize=`calc(${this.#Dt}px * var(--scale-factor))`,t.color=this.#u,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,a.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){var[t,e]=this.parentDimensions;if(this.annotationElementId){var i=this.#Ft.position;let[r,a]=this.getInitialTranslation();[r,a]=this.pageTranslationToScreen(r,a);var[s,n]=this.pageDimensions,[o,l]=this.pageTranslation;let c,u;switch(this.rotation){case 0:c=h+(i[0]-o)/s,u=d+this.height-(i[1]-l)/n;break;case 90:c=h+(i[0]-o)/s,u=d-(i[1]-l)/n,[r,a]=[a,-r];break;case 180:c=h-this.width+(i[0]-o)/s,u=d-(i[1]-l)/n,[r,a]=[-r,-a];break;case 270:c=h+(i[0]-o-this.height*n)/s,u=d+(i[1]-l-this.width*s)/n,[r,a]=[-a,r]}this.setAt(c*t,u*e,r,a)}else this.setAt(h*t,d*e,this.width*t,this.height*e);this.#Ht(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0}return this.div}#Ht(){if(this.editorDiv.replaceChildren(),this.#Lt)for(const e of this.#Lt.split("\n")){var t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}get contentDiv(){return this.editorDiv}static deserialize(t,e,i){let r=null;if(t instanceof n.FreeTextAnnotationElement){var{data:{defaultAppearanceData:{fontSize:a,fontColor:o},rect:l,rotation:h,id:d},textContent:c,textPosition:u,parent:{page:{pageNumber:p}}}=t;if(!c||0===c.length)return null;r=t={annotationType:s.AnnotationEditorType.FREETEXT,color:Array.from(o),fontSize:a,value:c.join("\n"),position:u,pageIndex:p-1,rect:l,rotation:h,id:d,deleted:!1}}return(o=super.deserialize(t,e,i)).#Dt=t.fontSize,o.#u=s.Util.makeHexColor(...t.color),o.#Lt=t.value,o.annotationElementId=t.id||null,o.#Ft=r,o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};var e=o._internalPadding*this.parentScale,i=(e=this.getRect(e,e),r.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#u));i={annotationType:s.AnnotationEditorType.FREETEXT,color:i,fontSize:this.#Dt,value:this.#Lt,pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId};if(!t){if(this.annotationElementId&&!this.#Ut(i))return null;i.id=this.annotationElementId}return i}#Ut(t){const{value:e,fontSize:i,color:s,rect:r,pageIndex:a}=this.#Ft;return t.value!==e||t.fontSize!==i||t.rect.some(((t,e)=>1<=Math.abs(t-r[e])))||t.color.some(((t,e)=>t!==s[e]))||t.pageIndex!==a}#zt(t=!1){this.annotationElementId&&(this.#Nt(),t||0!==this.width&&0!==this.height?(t=o._internalPadding*this.parentScale,this.#Ft.rect=this.getRect(t,t)):setTimeout((()=>this.#zt(!0)),0))}}var l=i(97),h=i(405);class d extends r.AnnotationEditor{#qt;#Vt=null;#$t=null;#Gt=null;#Wt=null;#Kt=null;#mt=null;#Xt=null;#Yt;#Jt=null;static _defaultColor=null;static _defaultOpacity=1;static _l10nPromise;static _type="highlight";static _editorType=s.AnnotationEditorType.HIGHLIGHT;constructor(t){super({...t,name:"highlightEditor"}),d._defaultColor||=this._uiManager.highlightColors?.values().next().value||"#fff066",this.color=t.color||d._defaultColor,this.#Yt=t.opacity||d._defaultOpacity,this.#qt=t.boxes||null,this._isDraggable=!1,this.#Qt(),this.#Zt(),this.rotate(this.rotation)}#Qt(){var t=new h.Outliner(this.#qt,.001);this.#Kt=t.getOutlines(),({x:this.x,y:this.y,width:this.width,height:this.height}=this.#Kt.box),t=new h.Outliner(this.#qt,.0025,.001,"ltr"===this._uiManager.direction),t=(this.#Gt=t.getOutlines(),this.#Gt.box).lastPoint;this.#Xt=[(t[0]-this.x)/this.width,(t[1]-this.y)/this.height]}static initialize(t){r.AnnotationEditor.initialize(t)}static updateDefaultParams(t,e){t===s.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR&&(d._defaultColor=e)}get toolbarPosition(){return this.#Xt}updateParams(t,e){t===s.AnnotationEditorParamsType.HIGHLIGHT_COLOR&&this.#Bt(e)}static get defaultPropertiesToUpdate(){return[[s.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR,d._defaultColor]]}get propertiesToUpdate(){return[[s.AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||d._defaultColor]]}#Bt(t){const e=this.color;this.addCommands({cmd:()=>{this.color=t,this.parent.drawLayer.changeColor(this.#mt,t),this.#$t?.updateColor(t)},undo:()=>{this.color=e,this.parent.drawLayer.changeColor(this.#mt,e),this.#$t?.updateColor(e)},mustExec:!0,type:s.AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}async addEditToolbar(){var t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(this.#$t=new l.ColorPicker({editor:this}),t.addColorPicker(this.#$t)),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(0)}getRect(t,e){return super.getRect(t,e,0)}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){super.remove(),this.#te()}rebuild(){this.parent&&(super.rebuild(),null===this.div||(this.#Zt(),this.isAttachedToDOM)||this.parent.add(this))}setParent(t){let e=!1;this.parent&&!t?this.#te():t&&(this.#Zt(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#te(){null!==this.#mt&&this.parent&&(this.parent.drawLayer.remove(this.#mt),this.#mt=null,this.parent.drawLayer.remove(this.#Jt),this.#Jt=null)}#Zt(t=this.parent){null===this.#mt&&(({id:this.#mt,clipPathId:this.#Vt}=t.drawLayer.highlight(this.#Kt,this.color,this.#Yt)),this.#Wt&&(this.#Wt.style.clipPath=this.#Vt),this.#Jt=t.drawLayer.highlightOutline(this.#Gt))}static#ee({x:t,y:e,width:i,height:s},r){switch(r){case 90:return{x:1-e-s,y:t,width:s,height:i};case 180:return{x:1-t-i,y:1-e-s,width:i,height:s};case 270:return{x:e,y:1-t-i,width:s,height:i}}return{x:t,y:e,width:i,height:s}}rotate(t){var e=this.parent.drawLayer;e.rotate(this.#mt,t),e.rotate(this.#Jt,t),e.updateBox(this.#mt,d.#ee(this,t)),e.updateBox(this.#Jt,d.#ee(this.#Gt.box,t))}render(){var t,e,i;return this.div||(t=super.render(),e=this.#Wt=document.createElement("div"),[e,i]=(t.append(e),e.className="internal",e.style.clipPath=this.#Vt,this.parentDimensions),this.setDims(this.width*e,this.height*i),(0,a.bindEvents)(this,this.#Wt,["pointerover","pointerleave"]),this.enableEditing(),t)}pointerover(){this.parent.drawLayer.addClass(this.#Jt,"hovered")}pointerleave(){this.parent.drawLayer.removeClass(this.#Jt,"hovered")}select(){super.select(),this.parent?.drawLayer.removeClass(this.#Jt,"hovered"),this.parent?.drawLayer.addClass(this.#Jt,"selected")}unselect(){super.unselect(),this.parent?.drawLayer.removeClass(this.#Jt,"selected")}#ie(){var t,e,i,s,[r,a]=this.pageDimensions,n=this.#qt,o=new Array(8*n.length);let l=0;for({x:t,y:e,width:i,height:s}of n){var h=t*r,d=(1-e-s)*a;o[l]=o[l+4]=h,o[l+1]=o[l+3]=d,o[l+2]=o[l+6]=h+i*r,o[l+5]=o[l+7]=d+s*a,l+=8}return o}#se(){var[t,e]=this.pageDimensions,i=this.width*t,s=this.height*e,r=this.x*t,a=(1-this.y-this.height)*e,n=[];for(const t of this.#Kt.outlines){var o=new Array(t.length);for(let e=0;e<t.length;e+=2)o[e]=r+t[e]*i,o[e+1]=a+(1-t[e+1])*s;n.push(o)}return n}static deserialize(t,e,i){e=super.deserialize(t,e,i);var{rect:i,color:r,quadPoints:a}=t,[n,o]=(e.color=s.Util.makeHexColor(...r),e.#Yt=t.opacity,e.pageDimensions),l=(e.width=(i[2]-i[0])/n,e.height=(i[3]-i[1])/o,e.#qt=[]);for(let t=0;t<a.length;t+=8)l.push({x:a[4]/n,y:1-a[t+5]/o,width:(a[t+2]-a[t])/n,height:(a[t+5]-a[t+1])/o});return e.#Qt(),e}serialize(t=!1){var e;return this.isEmpty()||t?null:(t=this.getRect(0,0),e=r.AnnotationEditor._colorManager.convert(this.color),{annotationType:s.AnnotationEditorType.HIGHLIGHT,color:e,opacity:this.#Yt,quadPoints:this.#ie(),outlines:this.#se(),pageIndex:this.pageIndex,rect:t,rotation:0,structTreeParentId:this._structTreeParentId})}static canCreateNewEmptyEditor(){return!1}}var c=i(473);class u extends r.AnnotationEditor{#re=0;#ae=0;#ne=this.canvasPointermove.bind(this);#oe=this.canvasPointerleave.bind(this);#le=this.canvasPointerup.bind(this);#he=this.canvasPointerdown.bind(this);#de=null;#ce=new Path2D;#ue=!1;#pe=!1;#ge=!1;#fe=null;#me=0;#ve=0;#be=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";static _editorType=s.AnnotationEditorType.INK;constructor(t){super({...t,name:"inkEditor"}),this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t){r.AnnotationEditor.initialize(t)}static updateDefaultParams(t,e){switch(t){case s.AnnotationEditorParamsType.INK_THICKNESS:u._defaultThickness=e;break;case s.AnnotationEditorParamsType.INK_COLOR:u._defaultColor=e;break;case s.AnnotationEditorParamsType.INK_OPACITY:u._defaultOpacity=e/100}}updateParams(t,e){switch(t){case s.AnnotationEditorParamsType.INK_THICKNESS:this.#ye(e);break;case s.AnnotationEditorParamsType.INK_COLOR:this.#Bt(e);break;case s.AnnotationEditorParamsType.INK_OPACITY:this.#we(e)}}static get defaultPropertiesToUpdate(){return[[s.AnnotationEditorParamsType.INK_THICKNESS,u._defaultThickness],[s.AnnotationEditorParamsType.INK_COLOR,u._defaultColor||r.AnnotationEditor._defaultLineColor],[s.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*u._defaultOpacity)]]}get propertiesToUpdate(){return[[s.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||u._defaultThickness],[s.AnnotationEditorParamsType.INK_COLOR,this.color||u._defaultColor||r.AnnotationEditor._defaultLineColor],[s.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??u._defaultOpacity))]]}#ye(t){const e=this.thickness;this.addCommands({cmd:()=>{this.thickness=t,this.#xe()},undo:()=>{this.thickness=e,this.#xe()},mustExec:!0,type:s.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#Bt(t){const e=this.color;this.addCommands({cmd:()=>{this.color=t,this.#Ae()},undo:()=>{this.color=e,this.#Ae()},mustExec:!0,type:s.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#we(t){t/=100;const e=this.opacity;this.addCommands({cmd:()=>{this.opacity=t,this.#Ae()},undo:()=>{this.opacity=e,this.#Ae()},mustExec:!0,type:s.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),null!==this.div)&&(this.canvas||(this.#_e(),this.#Ce()),this.isAttachedToDOM||(this.parent.add(this),this.#Ee()),this.#xe())}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#de&&(clearTimeout(this.#de),this.#de=null),this.#fe.disconnect(),this.#fe=null,super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&null===t&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){var[t,e]=this.parentDimensions,t=this.width*t,e=this.height*e;this.setDimensions(t,e)}enableEditMode(){this.#ue||null===this.canvas||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#he))}disableEditMode(){this.isInEditMode()&&null!==this.canvas&&(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#he))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}#ke(){var{parentRotation:t,parentDimensions:[e,i]}=this;switch(t){case 90:return[0,i,i,e];case 180:return[e,i,e,i];case 270:return[e,0,i,e];default:return[0,0,e,i]}}#Se(){var{ctx:t,color:e,opacity:i,thickness:s,parentScale:r,scaleFactor:n}=this;t.lineWidth=s*r/n,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=""+e+(0,a.opacityToHex)(i)}#Te(t,e){this.canvas.addEventListener("contextmenu",c.noContextMenu),this.canvas.addEventListener("pointerleave",this.#oe),this.canvas.addEventListener("pointermove",this.#ne),this.canvas.addEventListener("pointerup",this.#le),this.canvas.removeEventListener("pointerdown",this.#he),this.isEditing=!0,this.#ge||(this.#ge=!0,this.#Ee(),this.thickness||=u._defaultThickness,this.color||=u._defaultColor||r.AnnotationEditor._defaultLineColor,this.opacity??=u._defaultOpacity),this.currentPath.push([t,e]),this.#pe=!1,this.#Se(),this.#be=()=>{this.#Pe(),this.#be&&window.requestAnimationFrame(this.#be)},window.requestAnimationFrame(this.#be)}#Me(t,e){var[i,s]=this.currentPath.at(-1);if(!(1<this.currentPath.length&&t===i&&e===s)){i=this.currentPath;let s=this.#ce;i.push([t,e]),this.#pe=!0,i.length<=2?(s.moveTo(...i[0]),s.lineTo(t,e)):(3===i.length&&(this.#ce=s=new Path2D,s.moveTo(...i[0])),this.#Re(s,...i.at(-3),...i.at(-2),t,e))}}#Le(){var t;0!==this.currentPath.length&&(t=this.currentPath.at(-1),this.#ce.lineTo(...t))}#Ie(t,e){let i;this.#be=null,t=Math.min(Math.max(t,0),this.canvas.width),e=Math.min(Math.max(e,0),this.canvas.height),this.#Me(t,e),this.#Le(),i=1!==this.currentPath.length?this.#De():[[t=[t,e],t.slice(),t.slice(),t]];const s=this.#ce,r=this.currentPath;this.currentPath=[],this.#ce=new Path2D,this.addCommands({cmd:()=>{this.allRawPaths.push(r),this.paths.push(i),this.bezierPath2D.push(s),this.rebuild()},undo:()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(this.#_e(),this.#Ce()),this.#xe())},mustExec:!0})}#Pe(){if(this.#pe){this.#pe=!1,Math.ceil(this.thickness*this.parentScale);var t=(e=this.currentPath.slice(-3)).map((t=>t[0])),e=e.map((t=>t[1])),i=(Math.min(...t),Math.max(...t),Math.min(...e),Math.max(...e),this).ctx;i.save(),i.clearRect(0,0,this.canvas.width,this.canvas.height);for(const t of this.bezierPath2D)i.stroke(t);i.stroke(this.#ce),i.restore()}}#Re(t,e,i,s,r,a,n){e=(e+s)/2,i=(i+r)/2,a=(s+a)/2,n=(r+n)/2,t.bezierCurveTo(e+2*(s-e)/3,i+2*(r-i)/3,a+2*(s-a)/3,n+2*(r-n)/3,a,n)}#De(){var t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];var e=[];let i,[s,r]=t[0];for(i=1;i<t.length-2;i++){const[o,l]=t[i],[h,d]=t[i+1];var a=(o+h)/2,n=(l+d)/2;const c=[s+2*(o-s)/3,r+2*(l-r)/3],u=[a+2*(o-a)/3,n+2*(l-n)/3];e.push([[s,r],c,u,[a,n]]),[s,r]=[a,n]}const[o,l]=t[i],[h,d]=t[i+1],c=[s+2*(o-s)/3,r+2*(l-r)/3],u=[h+2*(o-h)/3,d+2*(l-d)/3];return e.push([[s,r],c,u,[h,d]]),e}#Ae(){if(this.isEmpty())this.#Fe();else{this.#Se();var{canvas:t,ctx:e}=this;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height),this.#Fe();for(const t of this.bezierPath2D)e.stroke(t)}}commit(){this.#ue||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#ue=!0,this.div.classList.add("disabled"),this.#xe(!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){0===t.button&&this.isInEditMode()&&!this.#ue&&(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),this.#Te(t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),this.#Me(t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),this.#Oe(t)}canvasPointerleave(t){this.#Oe(t)}#Oe(t){this.canvas.removeEventListener("pointerleave",this.#oe),this.canvas.removeEventListener("pointermove",this.#ne),this.canvas.removeEventListener("pointerup",this.#le),this.canvas.addEventListener("pointerdown",this.#he),this.#de&&clearTimeout(this.#de),this.#de=setTimeout((()=>{this.#de=null,this.canvas.removeEventListener("contextmenu",c.noContextMenu)}),10),this.#Ie(t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#_e(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#Ce(){this.#fe=new ResizeObserver((t=>{(t=t[0].contentRect).width&&t.height&&this.setDimensions(t.width,t.height)})),this.#fe.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#ue}render(){if(!this.div){let r,a;this.width&&(r=this.x,a=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");var[t,e,i,s]=this.#ke();this.setAt(t,e,0,0),this.setDims(i,s),this.#_e(),this.width?([t,e]=this.parentDimensions,this.setAspectRatio(this.width*t,this.height*e),this.setAt(r*t,a*e,this.width*t,this.height*e),this.#ge=!0,this.#Ee(),this.setDims(this.width*t,this.height*e),this.#Ae(),this.div.classList.add("disabled")):(this.div.classList.add("editing"),this.enableEditMode()),this.#Ce()}return this.div}#Ee(){var t,e;this.#ge&&([t,e]=this.parentDimensions,this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*e),this.#Fe())}setDimensions(t,e){var i=Math.round(t),s=Math.round(e);this.#me===i&&this.#ve===s||(this.#me=i,this.#ve=s,this.canvas.style.visibility="hidden",[i,s]=this.parentDimensions,this.width=t/i,this.height=e/s,this.fixAndSetPosition(),this.#ue&&this.#Be(t,e),this.#Ee(),this.#Ae(),this.canvas.style.visibility="visible",this.fixDims())}#Be(t,e){var i=this.#Ne();t=(t-i)/this.#ae,e=(e-i)/this.#re;this.scaleFactor=Math.min(t,e)}#Fe(){var t=this.#Ne()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)}static#ze(t){var e=new Path2D;for(let n=0,o=t.length;n<o;n++){var[i,s,r,a]=t[n];0===n&&e.moveTo(...i),e.bezierCurveTo(s[0],s[1],r[0],r[1],a[0],a[1])}return e}static#je(t,e,i){var[s,r,a,n]=e;switch(i){case 0:for(let e=0,i=t.length;e<i;e+=2)t[e]+=s,t[e+1]=n-t[e+1];break;case 90:for(let e=0,i=t.length;e<i;e+=2){var o=t[e];t[e]=t[e+1]+s,t[e+1]=o+r}break;case 180:for(let e=0,i=t.length;e<i;e+=2)t[e]=a-t[e],t[e+1]+=r;break;case 270:for(let e=0,i=t.length;e<i;e+=2){var l=t[e];t[e]=a-t[e+1],t[e+1]=n-l}break;default:throw new Error("Invalid rotation")}return t}static#He(t,e,i){var[s,r,a,n]=e;switch(i){case 0:for(let e=0,i=t.length;e<i;e+=2)t[e]-=s,t[e+1]=n-t[e+1];break;case 90:for(let e=0,i=t.length;e<i;e+=2){var o=t[e];t[e]=t[e+1]-r,t[e+1]=o-s}break;case 180:for(let e=0,i=t.length;e<i;e+=2)t[e]=a-t[e],t[e+1]-=r;break;case 270:for(let e=0,i=t.length;e<i;e+=2){var l=t[e];t[e]=n-t[e+1],t[e+1]=a-l}break;default:throw new Error("Invalid rotation")}return t}#Ue(t,e,i,s){var r=[],a=this.thickness/2,n=t*e+a,o=t*i+a;for(const e of this.paths){var l=[],h=[];for(let i=0,s=e.length;i<s;i++){var[d,c,p,g]=e[i],f=t*d[0]+n,d=t*d[1]+o,m=t*c[0]+n,c=t*c[1]+o,v=t*p[0]+n,p=t*p[1]+o,b=t*g[0]+n,g=t*g[1]+o;0===i&&(l.push(f,d),h.push(f,d)),l.push(m,c,v,p,b,g),h.push(m,c),i===s-1&&h.push(b,g)}r.push({bezier:u.#je(l,s,this.rotation),points:u.#je(h,s,this.rotation)})}return r}#qe(){let t=1/0,e=-1/0,i=1/0,r=-1/0;for(const h of this.paths)for(var[a,n,o,l]of h)a=s.Util.bezierBoundingBox(...a,...n,...o,...l),t=Math.min(t,a[0]),i=Math.min(i,a[1]),e=Math.max(e,a[2]),r=Math.max(r,a[3]);return[t,i,e,r]}#Ne(){return this.#ue?Math.ceil(this.thickness*this.parentScale):0}#xe(t=!1){var e,i,s,a,n,o;this.isEmpty()||(this.#ue?(o=this.#qe(),e=this.#Ne(),this.#ae=Math.max(r.AnnotationEditor.MIN_SIZE,o[2]-o[0]),this.#re=Math.max(r.AnnotationEditor.MIN_SIZE,o[3]-o[1]),i=Math.ceil(e+this.#ae*this.scaleFactor),s=Math.ceil(e+this.#re*this.scaleFactor),[a,n]=this.parentDimensions,this.width=i/a,this.height=s/n,this.setAspectRatio(i,s),a=this.translationX,n=this.translationY,this.translationX=-o[0],this.translationY=-o[1],this.#Ee(),this.#Ae(),this.#me=i,this.#ve=s,this.setDims(i,s),o=t?e/this.scaleFactor/2:0,this.translate(a-this.translationX-o,n-this.translationY-o)):this.#Ae())}static deserialize(t,e,i){if(t instanceof n.InkAnnotationElement)return null;var a,o=super.deserialize(t,e,i),[e,i]=(o.thickness=t.thickness,o.color=s.Util.makeHexColor(...t.color),o.opacity=t.opacity,o.pageDimensions),l=(e=o.width*e,i=o.height*i,o.parentScale),h=t.thickness/2,{paths:t,rect:d,rotation:c}=(o.#ue=!0,o.#me=Math.round(e),o.#ve=Math.round(i),t);for({bezier:a}of t){a=u.#He(a,d,c);var p=[];o.paths.push(p);let t=l*(a[0]-h),e=l*(a[1]-h);for(let i=2,s=a.length;i<s;i+=6){var g=l*(a[i]-h),f=l*(a[i+1]-h),m=l*(a[i+2]-h),v=l*(a[i+3]-h),b=l*(a[i+4]-h),y=l*(a[i+5]-h);p.push([[t,e],[g,f],[m,v],[b,y]]),t=b,e=y}var w=this.#ze(p);o.bezierPath2D.push(w)}return t=o.#qe(),o.#ae=Math.max(r.AnnotationEditor.MIN_SIZE,t[2]-t[0]),o.#re=Math.max(r.AnnotationEditor.MIN_SIZE,t[3]-t[1]),o.#Be(e,i),o}serialize(){var t,e;return this.isEmpty()?null:(t=this.getRect(0,0),e=r.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle),{annotationType:s.AnnotationEditorType.INK,color:e,thickness:this.thickness,opacity:this.opacity,paths:this.#Ue(this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId})}}class p extends r.AnnotationEditor{#Ve=null;#$e=null;#Ge=null;#We=null;#Ke=null;#Xe="";#Ye=null;#fe=null;#Je=null;#Qe=!1;#Ze=!1;static _type="stamp";static _editorType=s.AnnotationEditorType.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#We=t.bitmapUrl,this.#Ke=t.bitmapFile}static initialize(t){r.AnnotationEditor.initialize(t)}static get supportedTypes(){return(0,s.shadow)(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map((t=>"image/"+t)))}static get supportedTypesStr(){return(0,s.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,e){e.pasteEditor(s.AnnotationEditorType.STAMP,{bitmapFile:t.getAsFile()})}#ti(t,e=!1){t?(this.#Ve=t.bitmap,e||(this.#$e=t.id,this.#Qe=t.isSvg),t.file&&(this.#Xe=t.file.name),this.#_e()):this.remove()}#ei(){this.#Ge=null,this._uiManager.enableWaiting(!1),this.#Ye&&this.div.focus()}#ii(){var t;if(this.#$e)this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#$e).then((t=>this.#ti(t,!0))).finally((()=>this.#ei()));else if(this.#We)t=this.#We,this.#We=null,this._uiManager.enableWaiting(!0),this.#Ge=this._uiManager.imageManager.getFromUrl(t).then((t=>this.#ti(t))).finally((()=>this.#ei()));else if(this.#Ke)t=this.#Ke,this.#Ke=null,this._uiManager.enableWaiting(!0),this.#Ge=this._uiManager.imageManager.getFromFile(t).then((t=>this.#ti(t))).finally((()=>this.#ei()));else{const t=document.createElement("input");t.type="file",t.accept=p.supportedTypesStr,this.#Ge=new Promise((e=>{t.addEventListener("change",(async()=>{var i;t.files&&0!==t.files.length?(this._uiManager.enableWaiting(!0),i=await this._uiManager.imageManager.getFromFile(t.files[0]),this.#ti(i)):this.remove(),e()})),t.addEventListener("cancel",(()=>{this.remove(),e()}))})).finally((()=>this.#ei())),t.click()}}remove(){this.#$e&&(this.#Ve=null,this._uiManager.imageManager.deleteId(this.#$e),this.#Ye?.remove(),this.#Ye=null,this.#fe?.disconnect(),this.#fe=null,this.#Je)&&(clearTimeout(this.#Je),this.#Je=null),super.remove()}rebuild(){this.parent?(super.rebuild(),null===this.div||(this.#$e&&this.#ii(),this.isAttachedToDOM)||this.parent.add(this)):this.#$e&&this.#ii()}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#Ge||this.#Ve||this.#We||this.#Ke)}get isResizable(){return!0}render(){if(!this.div){let i,s;var t,e;this.width&&(i=this.x,s=this.y),super.render(),this.div.hidden=!0,this.#Ve?this.#_e():this.#ii(),this.width&&([t,e]=this.parentDimensions,this.setAt(i*t,s*e,this.width*t,this.height*e))}return this.div}#_e(){var t=this.div;let{width:e,height:i}=this.#Ve;var[s,r]=this.pageDimensions,[a,n]=(this.width?(e=this.width*s,i=this.height*r):(e>.75*s||i>.75*r)&&(e*=a=Math.min(.75*s/e,.75*r/i),i*=a),this.parentDimensions),a=(this.setDims(e*a/s,i*n/r),this._uiManager.enableWaiting(!1),this.#Ye=document.createElement("canvas"));t.append(a),t.hidden=!1,this.#si(e,i),this.#Ce(),this.#Ze||(this.parent.addUndoableEditor(this),this.#Ze=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton(),this.#Xe&&a.setAttribute("aria-label",this.#Xe)}#ri(t,e){var[i,s]=this.parentDimensions;this.width=t/i,this.height=e/s,this.setDims(t,e),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),(this._initialOptions=null)!==this.#Je&&clearTimeout(this.#Je),this.#Je=setTimeout((()=>{this.#Je=null,this.#si(t,e)}),200)}#ai(t,e){var{width:i,height:s}=this.#Ve;let r=i,a=s,n=this.#Ve;for(;r>2*t||a>2*e;){var o=r,l=a,h=(r>2*t&&(r=16384<=r?Math.floor(r/2)-1:Math.ceil(r/2)),a>2*e&&(a=16384<=a?Math.floor(a/2)-1:Math.ceil(a/2)),new OffscreenCanvas(r,a));h.getContext("2d").drawImage(n,0,0,o,l,0,0,r,a),n=h.transferToImageBitmap()}return n}#si(t,e){t=Math.ceil(t),e=Math.ceil(e);var i,s=this.#Ye;!s||s.width===t&&s.height===e||(s.width=t,s.height=e,i=this.#Qe?this.#Ve:this.#ai(t,e),(s=s.getContext("2d")).filter=this._uiManager.hcmFilter,s.drawImage(i,0,0,i.width,i.height,0,0,t,e))}getImageForAltText(){return this.#Ye}#ni(t){return t?this.#Qe&&(t=this._uiManager.imageManager.getSvgUrl(this.#$e))?t:(t=document.createElement("canvas"),({width:t.width,height:t.height}=this.#Ve),t.getContext("2d").drawImage(this.#Ve,0,0),t.toDataURL()):this.#Qe?([t,e]=this.pageDimensions,t=Math.round(this.width*t*c.PixelsPerInch.PDF_TO_CSS_UNITS),e=Math.round(this.height*e*c.PixelsPerInch.PDF_TO_CSS_UNITS),(i=new OffscreenCanvas(t,e)).getContext("2d").drawImage(this.#Ve,0,0,this.#Ve.width,this.#Ve.height,0,0,t,e),i.transferToImageBitmap()):structuredClone(this.#Ve);var e,i}#Ce(){this.#fe=new ResizeObserver((t=>{(t=t[0].contentRect).width&&t.height&&this.#ri(t.width,t.height)})),this.#fe.observe(this.div)}static deserialize(t,e,i){var s,r,a,o;return t instanceof n.StampAnnotationElement?null:(e=super.deserialize(t,e,i),({rect:t,bitmapUrl:s,bitmapId:o,isSvg:r,accessibilityData:a}=t),[i,o]=(o&&i.imageManager.isValidId(o)?e.#$e=o:e.#We=s,e.#Qe=r,e.pageDimensions),e.width=(t[2]-t[0])/i,e.height=(t[3]-t[1])/o,a&&(e.altTextData=a),e)}serialize(t=!1,e=null){var i,r;return this.isEmpty()?null:(i={annotationType:s.AnnotationEditorType.STAMP,bitmapId:this.#$e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#Qe,structTreeParentId:this._structTreeParentId},t?(i.bitmapUrl=this.#ni(!0),i.accessibilityData=this.altTextData):(({decorative:t,altText:r}=this.altTextData),!t&&r&&(i.accessibilityData={type:"Figure",alt:r}),null!==e&&(e.stamps||=new Map,t=this.#Qe?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null,e.stamps.has(this.#$e)?this.#Qe&&t>(r=e.stamps.get(this.#$e)).area&&(r.area=t,r.serialized.bitmap.close(),r.serialized.bitmap=this.#ni(!1)):(e.stamps.set(this.#$e,{area:t,serialized:i}),i.bitmap=this.#ni(!1)))),i)}}class g{#L;#oi=!1;#li=null;#hi=this.pointerup.bind(this);#di=this.pointerUpAfterSelection.bind(this);#ci=this.pointerdown.bind(this);#ui=null;#pi=this.selectionStart.bind(this);#gi=new Map;#fi=!1;#mi=!1;#vi=!1;#bi=null;#yi;static _initialized=!1;static#wi=new Map([o,u,p,d].map((t=>[t._editorType,t])));constructor({uiManager:t,pageIndex:e,div:i,accessibilityManager:s,annotationLayer:r,drawLayer:a,textLayer:n,viewport:o,l10n:l}){var h=[...g.#wi.values()];if(!g._initialized){g._initialized=!0;for(const t of h)t.initialize(l)}t.registerEditorTypes(h),this.#yi=t,this.pageIndex=e,this.div=i,this.#L=s,this.#li=r,this.viewport=o,this.#bi=n,this.drawLayer=a,this.#yi.addLayer(this)}get isEmpty(){return 0===this.#gi.size}updateToolbar(t){this.#yi.updateToolbar(t)}updateMode(t=this.#yi.getMode()){switch(this.#xi(),t){case s.AnnotationEditorType.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;case s.AnnotationEditorType.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case s.AnnotationEditorType.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}if(t!==s.AnnotationEditorType.NONE){var e=this.div.classList;for(const i of g.#wi.values())e.toggle(i._type+"Editing",t===i._editorType);this.div.hidden=!1}}addInkEditorIfNeeded(t){if(this.#yi.getMode()===s.AnnotationEditorType.INK){if(!t)for(const t of this.#gi.values())if(t.isEmpty())return void t.setInBackground();this.#Ai({offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(t){this.#yi.setEditingState(t)}addCommands(t){this.#yi.addCommands(t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}enable(){this.togglePointerEvents(!0);var t,e=new Set;for(const t of this.#gi.values())t.enableEditing(),t.annotationElementId&&e.add(t.annotationElementId);if(this.#li)for(const i of this.#li.getEditableAnnotations())i.hide(),this.#yi.isDeletedAnnotationElement(i.data.id)||e.has(i.data.id)||(t=this.deserialize(i))&&(this.addOrRebuild(t),t.enableEditing())}disable(){this.#vi=!0,this.togglePointerEvents(!1);var t=new Set;for(const e of this.#gi.values())e.disableEditing(),e.annotationElementId&&null===e.serialize()?(this.getEditableAnnotation(e.annotationElementId)?.show(),e.remove()):t.add(e.annotationElementId);if(this.#li)for(const i of this.#li.getEditableAnnotations()){var e=i.data.id;t.has(e)||this.#yi.isDeletedAnnotationElement(e)||i.show()}this.#xi(),this.isEmpty&&(this.div.hidden=!0);var i=this.div.classList;for(const t of g.#wi.values())i.remove(t._type+"Editing");this.disableTextSelection(),this.#vi=!1}getEditableAnnotation(t){return this.#li?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#yi.getActive()!==t&&this.#yi.setActiveEditor(t)}enableTextSelection(){this.#bi?.div&&document.addEventListener("selectstart",this.#pi)}disableTextSelection(){this.#bi?.div&&document.removeEventListener("selectstart",this.#pi)}enableClick(){this.div.addEventListener("pointerdown",this.#ci),this.div.addEventListener("pointerup",this.#hi)}disableClick(){this.div.removeEventListener("pointerdown",this.#ci),this.div.removeEventListener("pointerup",this.#hi)}attach(t){this.#gi.set(t.id,t);var e=t.annotationElementId;e&&this.#yi.isDeletedAnnotationElement(e)&&this.#yi.removeDeletedAnnotationElement(t)}detach(t){this.#gi.delete(t.id),this.#L?.removePointerInTextLayer(t.contentDiv),!this.#vi&&t.annotationElementId&&this.#yi.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#yi.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,this.#mi||this.addInkEditorIfNeeded(!1)}changeParent(t){t.parent!==this&&(t.annotationElementId&&(this.#yi.addDeletedAnnotationElement(t.annotationElementId),r.AnnotationEditor.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div)&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div))}add(t){var e;this.changeParent(t),this.#yi.addEditor(t),this.attach(t),t.isAttachedToDOM||(e=t.render(),this.div.append(e),t.isAttachedToDOM=!0),t.fixAndSetPosition(),t.onceAdded(),this.#yi.addToAnnotationStorage(t)}moveEditorInDOM(t){if(t.isAttachedToDOM){const e=document.activeElement;t.div.contains(e)&&!this.#ui&&(t._focusEventsAllowed=!1,this.#ui=setTimeout((()=>{this.#ui=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",(()=>{t._focusEventsAllowed=!0}),{once:!0}),e.focus())}),0)),t._structTreeParentId=this.#L?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild()):this.add(t)}addUndoableEditor(t){this.addCommands({cmd:()=>t._uiManager.rebuild(t),undo:()=>{t.remove()},mustExec:!1})}getNextId(){return this.#yi.getId()}get#_i(){return g.#wi.get(this.#yi.getMode())}#Ci(t){var e=this.#_i;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#_i?.canCreateNewEmptyEditor()}pasteEditor(t,e){this.#yi.updateToolbar(t),this.#yi.updateMode(t);var{offsetX:t,offsetY:i}=this.#Ei(),s=this.getNextId();(s=this.#Ci({parent:this,id:s,x:t,y:i,uiManager:this.#yi,isCentered:!0,...e}))&&this.add(s)}deserialize(t){return g.#wi.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#yi)||null}#Ai(t,e,i={}){var s=this.getNextId();return(s=this.#Ci({parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:this.#yi,isCentered:e,...i}))&&this.add(s),s}#Ei(){var{x:t,y:e,width:i,height:s}=this.div.getBoundingClientRect(),r=Math.max(0,t),a=Math.max(0,e),i=(r=(r+Math.min(window.innerWidth,t+i))/2-t,(a+Math.min(window.innerHeight,e+s))/2-e),[t,a]=this.viewport.rotation%180==0?[r,i]:[i,r];return{offsetX:t,offsetY:a}}addNewEditor(){this.#Ai(this.#Ei(),!0)}setSelected(t){this.#yi.setSelected(t)}toggleSelected(t){this.#yi.toggleSelected(t)}isSelected(t){return this.#yi.isSelected(t)}unselect(t){this.#yi.unselect(t)}selectionStart(t){this.#bi?.div.addEventListener("pointerup",this.#di,{once:!0})}pointerUpAfterSelection(t){var e=document.getSelection();if(0!==e.rangeCount){var i=e.getRangeAt(0);if(!i.collapsed&&this.#bi?.div.contains(i.commonAncestorContainer)){const{x:l,y:h,width:d,height:c}=this.#bi.div.getBoundingClientRect();let u;switch(i=i.getClientRects(),this.viewport.rotation){case 90:u=(t,e,i,s)=>({x:(e-h)/c,y:1-(t+i-l)/d,width:s/c,height:i/d});break;case 180:u=(t,e,i,s)=>({x:1-(t+i-l)/d,y:1-(e+s-h)/c,width:i/d,height:s/c});break;case 270:u=(t,e,i,s)=>({x:1-(e+s-h)/c,y:(t-l)/d,width:s/c,height:i/d});break;default:u=(t,e,i,s)=>({x:(t-l)/d,y:(e-h)/c,width:i/d,height:s/c})}var s,r,a,n,o=[];for({x:s,y:r,width:a,height:n}of i)0!==a&&0!==n&&o.push(u(s,r,a,n));0!==o.length&&this.#Ai(t,!1,{boxes:o}),e.empty()}}}pointerup(t){var e=s.FeatureTest.platform.isMac;0!==t.button||t.ctrlKey&&e||t.target===this.div&&this.#fi&&(this.#fi=!1,this.#oi?this.#yi.getMode()===s.AnnotationEditorType.STAMP?this.#yi.unselectAll():this.#Ai(t,!1):this.#oi=!0)}pointerdown(t){var e;this.#yi.getMode()===s.AnnotationEditorType.HIGHLIGHT&&this.enableTextSelection(),this.#fi?this.#fi=!1:(e=s.FeatureTest.platform.isMac,0!==t.button||t.ctrlKey&&e||t.target===this.div&&(this.#fi=!0,e=this.#yi.getActive(),this.#oi=!e||e.isEmpty()))}findNewParent(t,e,i){return null!==(e=this.#yi.findParent(e,i))&&e!==this&&(e.changeParent(t),!0)}destroy(){this.#yi.getActive()?.parent===this&&(this.#yi.commitOrRemove(),this.#yi.setActiveEditor(null)),this.#ui&&(clearTimeout(this.#ui),this.#ui=null);for(const t of this.#gi.values())this.#L?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#gi.clear(),this.#yi.removeLayer(this)}#xi(){this.#mi=!0;for(const t of this.#gi.values())t.isEmpty()&&t.remove();this.#mi=!1}render({viewport:t}){this.viewport=t,(0,c.setLayerDimensions)(this.div,t);for(const t of this.#yi.getEditors(this.pageIndex))this.add(t);this.updateMode()}update({viewport:t}){this.#yi.commitOrRemove();var e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,(0,c.setLayerDimensions)(this.div,{rotation:i}),e!==i)for(const t of this.#gi.values())t.rotate(i);this.updateMode()}get pageDimensions(){var{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}}},97:(t,e,i)=>{i.d(e,{ColorPicker:()=>n});var s=i(266),r=i(812),a=i(473);class n{#r=this.#a.bind(this);#ki=null;#Si=null;#Ti;#Pi=null;#Mi=!1;#Ri=!1;#Li;#yi=null;static get _keyboardManager(){return(0,s.shadow)(this,"_keyboardManager",new r.KeyboardManager([[["Escape","mac+Escape"],n.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],n.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],n.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],n.prototype._moveToPrevious],[["Home","mac+Home"],n.prototype._moveToBeginning],[["End","mac+End"],n.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){this.#Ri=!t,this.#yi=t?._uiManager||e,this.#Li=this.#yi._eventBus,this.#Ti=t?.color||this.#yi?.highlightColors.values().next().value||"#FFFF98"}renderButton(){var t=this.#ki=document.createElement("button"),e=(t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0),t.addEventListener("click",this.#Ii.bind(this)),this.#Si=document.createElement("span"));return e.className="swatch",e.style.backgroundColor=this.#Ti,t.append(e),t}renderMainDropdown(){var t=this.#Pi=this.#Di(s.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR);return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}#Di(t){var e,i,s=document.createElement("div");for([e,i]of(s.addEventListener("contextmenu",a.noContextMenu),s.className="dropdown",s.role="listbox",s.setAttribute("aria-multiselectable",!1),s.setAttribute("aria-orientation","vertical"),s.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#yi.highlightColors)){var r=document.createElement("button"),n=(r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=e,r.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-"+e),document.createElement("span"));r.append(n),n.className="swatch",n.style.backgroundColor=i,r.setAttribute("aria-selected",i===this.#Ti),r.addEventListener("click",this.#Fi.bind(this,t,i)),s.append(r)}return s.addEventListener("keydown",this.#r),s}#Fi(t,e,i){i.stopPropagation(),this.#Li.dispatch("switchannotationeditorparams",{source:this,type:t,value:e})}_colorSelectFromKeyboard(t){var e=t.target.getAttribute("data-color");e&&this.#Fi(e,t)}_moveToNext(t){(t.target===this.#ki?this.#Pi.firstChild:t.target.nextSibling)?.focus()}_moveToPrevious(t){t.target.previousSibling?.focus()}_moveToBeginning(){this.#Pi.firstChild?.focus()}_moveToEnd(){this.#Pi.lastChild?.focus()}#a(t){n._keyboardManager.exec(this,t)}#Ii(t){this.#Pi&&!this.#Pi.classList.contains("hidden")?this.hideDropdown():(this.#ki.addEventListener("keydown",this.#r),this.#Mi=0===t.detail,this.#Pi?this.#Pi.classList.remove("hidden"):(t=this.#Pi=this.#Di(s.AnnotationEditorParamsType.HIGHLIGHT_COLOR),this.#ki.append(t)))}hideDropdown(){this.#Pi?.classList.add("hidden")}_hideDropdownFromKeyboard(){this.#Ri||!this.#Pi||this.#Pi.classList.contains("hidden")||(this.hideDropdown(),this.#ki.removeEventListener("keydown",this.#r),this.#ki.focus({preventScroll:!0,focusVisible:this.#Mi}))}updateColor(t){if(this.#Si&&(this.#Si.style.backgroundColor=t),this.#Pi){var e=this.#yi.highlightColors.values();for(const i of this.#Pi.children)i.setAttribute("aria-selected",e.next().value===t)}}destroy(){this.#ki?.remove(),this.#ki=null,this.#Si=null,this.#Pi?.remove(),this.#Pi=null}}},115:(t,e,i)=>{i.d(e,{AnnotationEditor:()=>l});var s=i(812),r=i(266),a=i(473);class n{#Oi="";#Bi=!1;#Ni=null;#zi=null;#ji=null;#Hi=!1;#Ui=null;static _l10nPromise=null;constructor(t){this.#Ui=t}static initialize(t){n._l10nPromise||=t}async render(){const t=this.#Ni=document.createElement("button");t.className="altText";var e=await n._l10nPromise.get("pdfjs-editor-alt-text-button-label");t.textContent=e,t.setAttribute("aria-label",e),t.tabIndex="0",t.addEventListener("contextmenu",a.noContextMenu),t.addEventListener("pointerdown",(t=>t.stopPropagation()));const i=t=>{t.preventDefault(),this.#Ui._uiManager.editAltText(this.#Ui)};return t.addEventListener("click",i,{capture:!0}),t.addEventListener("keydown",(e=>{e.target===t&&"Enter"===e.key&&(this.#Hi=!0,i(e))})),await this.#qi(),t}finish(){this.#Ni&&(this.#Ni.focus({focusVisible:this.#Hi}),this.#Hi=!1)}get data(){return{altText:this.#Oi,decorative:this.#Bi}}set data({altText:t,decorative:e}){this.#Oi===t&&this.#Bi===e||(this.#Oi=t,this.#Bi=e,this.#qi())}toggle(t=!1){this.#Ni&&(!t&&this.#ji&&(clearTimeout(this.#ji),this.#ji=null),this.#Ni.disabled=!t)}destroy(){this.#Ni?.remove(),this.#Ni=null,this.#zi=null}async#qi(){const t=this.#Ni;if(t)if(this.#Oi||this.#Bi){t.classList.add("done"),n._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then((e=>{t.setAttribute("aria-label",e)}));let i=this.#zi;if(!i){this.#zi=i=document.createElement("span"),i.className="tooltip",i.setAttribute("role","tooltip");var e=i.id="alt-text-tooltip-"+this.#Ui.id;t.setAttribute("aria-describedby",e),t.addEventListener("mouseenter",(()=>{this.#ji=setTimeout((()=>{this.#ji=null,this.#zi.classList.add("show"),this.#Ui._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.#Ui.editorType,data:{action:"alt_text_tooltip"}}})}),100)})),t.addEventListener("mouseleave",(()=>{this.#ji&&(clearTimeout(this.#ji),this.#ji=null),this.#zi?.classList.remove("show")}))}i.innerText=this.#Bi?await n._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):this.#Oi,i.parentNode||t.append(i),this.#Ui.getImageForAltText()?.setAttribute("aria-describedby",i.id)}else t.classList.remove("done"),this.#zi?.remove()}}class o{#Vi=null;#$t=null;#Ui;#$i=null;constructor(t){this.#Ui=t}render(){var t,e,i,s=this.#Vi=document.createElement("div");return(i=((i=(s.className="editToolbar",s.addEventListener("contextmenu",a.noContextMenu),s.addEventListener("pointerdown",o.#Gi),this.#$i=document.createElement("div"))).className="buttons",s.append(i),this.#Ui.toolbarPosition))&&(t=s.style,e="ltr"===this.#Ui._uiManager.direction?1-i[0]:i[0],t.insetInlineEnd=100*e+"%",t.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`),this.#Wi(),s}static#Gi(t){t.stopPropagation()}#Ki(t){this.#Ui._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()}#Xi(t){this.#Ui._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()}#Yi(t){t.addEventListener("focusin",this.#Ki.bind(this),{capture:!0}),t.addEventListener("focusout",this.#Xi.bind(this),{capture:!0}),t.addEventListener("contextmenu",a.noContextMenu)}hide(){this.#Vi.classList.add("hidden"),this.#$t?.hideDropdown()}show(){this.#Vi.classList.remove("hidden")}#Wi(){var t=document.createElement("button");t.className="delete",t.tabIndex=0,t.setAttribute("data-l10n-id",`pdfjs-editor-remove-${this.#Ui.editorType}-button`),this.#Yi(t),t.addEventListener("click",(t=>{this.#Ui._uiManager.delete()})),this.#$i.append(t)}get#Ji(){var t=document.createElement("div");return t.className="divider",t}addAltTextButton(t){this.#Yi(t),this.#$i.prepend(t,this.#Ji)}addColorPicker(t){t=(this.#$t=t).renderButton(),this.#Yi(t),this.#$i.prepend(t,this.#Ji)}remove(){this.#Vi.remove(),this.#$t?.destroy(),this.#$t=null}}class l{#Qi=null;#Oi=null;#Zi=!1;#ts=null;#es=null;#is=this.focusin.bind(this);#ss=this.focusout.bind(this);#rs=null;#as="";#ns=!1;#os=!1;#ls=!1;#hs=!1;#ds=null;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#cs=!1;#us=l._zIndex++;static _borderLineWidth=-1;static _colorManager=new s.ColorManager;static _zIndex=1;static get _resizerKeyboardManager(){var t=l.prototype._resizeWithKeyboard,e=s.AnnotationEditorUIManager.TRANSLATE_SMALL,i=s.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,r.shadow)(this,"_resizerKeyboardManager",new s.KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],l.prototype._stopResizingWithKeyboard]]))}constructor(t){this.constructor===l&&(0,r.unreachable)("Cannot initialize AnnotationEditor."),this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;var{rotation:e,rawDims:{pageWidth:i,pageHeight:s,pageX:a,pageY:n}}=this.parent.viewport,[e,i]=(this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,s],this.pageTranslation=[a,n],this.parentDimensions);this.x=t.x/e,this.y=t.y/i,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,r.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){var e=new h({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e=null){if(l._l10nPromise||=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map((e=>[e,t.get(e.replaceAll(/([A-Z])/g,(t=>"-"+t.toLowerCase())))]))),e?.strings)for(const i of e.strings)l._l10nPromise.set(i,t.get(i));-1===l._borderLineWidth&&(e=getComputedStyle(document.documentElement),l._borderLineWidth=parseFloat(e.getPropertyValue("--outline-width"))||0)}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){(0,r.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#cs}set _isDraggable(t){this.#cs=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){var[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(2*t),this.y+=this.width*t/(2*e);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(2*t),this.y-=this.width*t/(2*e);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#us}setParent(t){null!==t?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#ps(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#ns?this.#ns=!1:this.parent.setSelected(this))}focusout(t){this._focusEventsAllowed&&this.isAttachedToDOM&&!t.relatedTarget?.closest("#"+this.id)&&(t.preventDefault(),!this.parent?.isMultipleSelection)&&this.commitOrRemove()}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,s){var[r,a]=this.parentDimensions;[i,s]=this.screenToPageTranslation(i,s),this.x=(t+i)/r,this.y=(e+s)/a,this.fixAndSetPosition()}#gs([t,e],i,s){[i,s]=this.screenToPageTranslation(i,s),this.x+=i/t,this.y+=s/e,this.fixAndSetPosition()}translate(t,e){this.#gs(this.parentDimensions,t,e)}translateInPage(t,e){this.#gs(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){var[i,s]=this.parentDimensions;if(this.x+=t/i,this.y+=e/s,this.parent&&(this.x<0||1<this.x||this.y<0||1<this.y)){const{x:t,y:e}=this.div.getBoundingClientRect();this.parent.findNewParent(this,t,e)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:a}=this;var[t,i]=this.#fs();r+=t,a+=i,this.div.style.left=(100*r).toFixed(2)+"%",this.div.style.top=(100*a).toFixed(2)+"%",this.div.scrollIntoView({block:"nearest"})}#fs(){var[t,e]=this.parentDimensions,i=l._borderLineWidth,s=i/t,r=i/e;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}fixAndSetPosition(t=this.rotation){var[e,i]=this.pageDimensions;let{x:s,y:r,width:a,height:n}=this;switch(a*=e,n*=i,s*=e,r*=i,t){case 0:s=Math.max(0,Math.min(e-a,s)),r=Math.max(0,Math.min(i-n,r));break;case 90:s=Math.max(0,Math.min(e-n,s)),r=Math.min(i,Math.max(a,r));break;case 180:s=Math.min(e,Math.max(a,s)),r=Math.min(i,Math.max(n,r));break;case 270:s=Math.min(e,Math.max(n,s)),r=Math.max(0,Math.min(i-a,r))}this.x=s/=e,this.y=r/=i;var[t,o]=this.#fs();(t=(s+=t,r+=o,this.div).style).left=(100*s).toFixed(2)+"%",t.top=(100*r).toFixed(2)+"%",this.moveInDOM()}static#ms(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return l.#ms(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return l.#ms(t,e,360-this.parentRotation)}#vs(t){switch(t){case 90:var[e,i]=this.pageDimensions;return[0,-e/i,i/e,0];case 180:return[-1,0,0,-1];case 270:var[i,e]=this.pageDimensions;return[0,i/e,-e/i,0];default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){var{parentScale:t,pageDimensions:[e,i]}=this,e=e*t,i=i*t;return r.FeatureTest.isCSSRoundSupported?[Math.round(e),Math.round(i)]:[e,i]}setDims(t,e){var[i,s]=this.parentDimensions;this.div.style.width=(100*t/i).toFixed(2)+"%",this.#Zi||(this.div.style.height=(100*e/s).toFixed(2)+"%")}fixDims(){var t,e,i=this.div.style,{height:s,width:r}=i,a=r.endsWith("%"),n=!this.#Zi&&s.endsWith("%");a&&n||([t,e]=this.parentDimensions,a||(i.width=(100*parseFloat(r)/t).toFixed(2)+"%"),this.#Zi)||n||(i.height=(100*parseFloat(s)/e).toFixed(2)+"%")}getInitialTranslation(){return[0,0]}#bs(){if(!this.#ts){this.#ts=document.createElement("div"),this.#ts.classList.add("resizers");for(const e of this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"]){var t=document.createElement("div");this.#ts.append(t),t.classList.add("resizer",e),t.setAttribute("data-resizer-name",e),t.addEventListener("pointerdown",this.#ys.bind(this,e)),t.addEventListener("contextmenu",a.noContextMenu),t.tabIndex=-1}this.div.prepend(this.#ts)}}#ys(t,e){e.preventDefault();var i=r.FeatureTest.platform.isMac;if(!(0!==e.button||e.ctrlKey&&i)){this.#Oi?.toggle(!1);const i=this.#ws.bind(this,t),s=this._isDraggable,r={passive:!(this._isDraggable=!1),capture:!0},a=(this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",i,r),this.x),n=this.y,o=this.width,l=this.height,h=this.parent.div.style.cursor,d=this.div.style.cursor,c=(this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor,()=>{this.parent.togglePointerEvents(!0),this.#Oi?.toggle(!0),this._isDraggable=s,window.removeEventListener("pointerup",c),window.removeEventListener("blur",c),window.removeEventListener("pointermove",i,r),this.parent.div.style.cursor=h,this.div.style.cursor=d,this.#xs(a,n,o,l)});window.addEventListener("pointerup",c),window.addEventListener("blur",c)}}#xs(t,e,i,s){const r=this.x,a=this.y,n=this.width,o=this.height;r===t&&a===e&&n===i&&o===s||this.addCommands({cmd:()=>{this.width=n,this.height=o,this.x=r,this.y=a;var[t,e]=this.parentDimensions;this.setDims(t*n,e*o),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=s,this.x=t,this.y=e;var[r,a]=this.parentDimensions;this.setDims(r*i,a*s),this.fixAndSetPosition()},mustExec:!0})}#ws(t,e){var[i,s]=this.parentDimensions,r=this.x,a=this.y,n=this.width,o=this.height,h=l.MIN_SIZE/i,d=l.MIN_SIZE/s,c=t=>Math.round(1e4*t)/1e4;const u=this.#vs(this.rotation);var p=(t,e)=>[u[0]*t+u[2]*e,u[1]*t+u[3]*e];const g=this.#vs(360-this.rotation);let f,m,v=!1,b=!1;switch(t){case"topLeft":v=!0,f=(t,e)=>[0,0],m=(t,e)=>[t,e];break;case"topMiddle":f=(t,e)=>[t/2,0],m=(t,e)=>[t/2,e];break;case"topRight":v=!0,f=(t,e)=>[t,0],m=(t,e)=>[0,e];break;case"middleRight":b=!0,f=(t,e)=>[t,e/2],m=(t,e)=>[0,e/2];break;case"bottomRight":v=!0,f=(t,e)=>[t,e],m=(t,e)=>[0,0];break;case"bottomMiddle":f=(t,e)=>[t/2,e],m=(t,e)=>[t/2,0];break;case"bottomLeft":v=!0,f=(t,e)=>[0,e],m=(t,e)=>[t,0];break;case"middleLeft":b=!0,f=(t,e)=>[0,e/2],m=(t,e)=>[t,e/2]}t=f(n,o);var y=m(n,o),w=p(...y);r=c(r+w[0]),a=c(a+w[1]);let x=1,A=1;var[e,_]=this.screenToPageTranslation(e.movementX,e.movementY),C=([e,_]=(E=e/i,C=_/s,[g[0]*E+g[2]*C,g[1]*E+g[3]*C]),v?(E=Math.hypot(n,o),x=A=Math.max(Math.min(Math.hypot(y[0]-t[0]-e,y[1]-t[1]-_)/E,1/n,1/o),h/n,d/o)):b?x=Math.max(h,Math.min(1,Math.abs(y[0]-t[0]-e)))/n:A=Math.max(d,Math.min(1,Math.abs(y[1]-t[1]-_)))/o,c(n*x)),E=c(o*A);h=r-(w=p(...m(C,E)))[0],e=a-w[1];this.width=C,this.height=E,this.x=h,this.y=e,this.setDims(i*C,s*E),this.fixAndSetPosition()}altTextFinish(){this.#Oi?.finish()}async addEditToolbar(){return this.#rs||this.#ls||(this.#rs=new o(this),this.div.append(this.#rs.render()),this.#Oi&&this.#rs.addAltTextButton(await this.#Oi.render())),this.#rs}removeEditToolbar(){this.#rs&&(this.#rs.remove(),this.#rs=null,this.#Oi?.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#Oi||(n.initialize(l._l10nPromise),this.#Oi=new n(this),await this.addEditToolbar())}get altTextData(){return this.#Oi?.data}set altTextData(t){this.#Oi&&(this.#Oi.data=t)}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#is),this.div.addEventListener("focusout",this.#ss);var[t,e]=this.parentDimensions,[t,e]=(this.parentRotation%180!=0&&(this.div.style.maxWidth=(100*e/t).toFixed(2)+"%",this.div.style.maxHeight=(100*t/e).toFixed(2)+"%"),this.getInitialTranslation());return this.translate(t,e),(0,s.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(t){var e=r.FeatureTest.platform.isMac;0!==t.button||t.ctrlKey&&e?t.preventDefault():(this.#ns=!0,this._isDraggable?this.#As(t):this.#_s(t))}#_s(t){var e=r.FeatureTest.platform.isMac;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#As(t){const e=this._uiManager.isSelected(this);let i,s;this._uiManager.setUpDragSession(),e&&(i={passive:!0,capture:!0},s=t=>{var[t,e]=this.screenToPageTranslation(t.movementX,t.movementY);this._uiManager.dragSelectedEditors(t,e)},window.addEventListener("pointermove",s,i));const r=()=>{window.removeEventListener("pointerup",r),window.removeEventListener("blur",r),e&&window.removeEventListener("pointermove",s,i),this.#ns=!1,this._uiManager.endDragSession()||this.#_s(t)};window.addEventListener("pointerup",r),window.addEventListener("blur",r)}moveInDOM(){this.#ds&&clearTimeout(this.#ds),this.#ds=setTimeout((()=>{this.#ds=null,this.parent?.moveEditorInDOM(this)}),0)}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition()}getRect(t,e,i=this.rotation){var s=this.parentScale,[r,a]=this.pageDimensions,[n,o]=this.pageTranslation,l=t/s,h=e/s,d=this.x*r,c=this.y*a,u=this.width*r,p=this.height*a;switch(i){case 0:return[d+l+n,a-c-h-p+o,d+l+u+n,a-c-h+o];case 90:return[d+h+n,a-c+l+o,d+h+p+n,a-c+l+u+o];case 180:return[d-l-u+n,a-c+h+o,d-l+n,a-c+h+p+o];case 270:return[d-h-p+n,a-c-l-u+o,d-h+n,a-c-l+o];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){var[i,s,r,a]=t,n=r-i,o=a-s;switch(this.rotation){case 0:return[i,e-a,n,o];case 90:return[i,e-s,o,n];case 180:return[r,e-s,n,o];case 270:return[r,e-a,o,n];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#ls=!0}disableEditMode(){this.#ls=!1}isInEditMode(){return this.#ls}shouldGetKeyboardEvents(){return this.#hs}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#is),this.div?.addEventListener("focusout",this.#ss)}rotate(t){}serialize(t=0,e){(0,r.unreachable)("An editor must be serializable")}static deserialize(t,e,i){e=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i});var[i,s]=(e.rotation=t.rotation,e.pageDimensions),[t,r,a,n]=e.getRectInCurrentCoords(t.rect,s);return e.x=t/i,e.y=r/s,e.width=a/i,e.height=n/s,e}remove(){this.div.removeEventListener("focusin",this.#is),this.div.removeEventListener("focusout",this.#ss),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#ds&&(clearTimeout(this.#ds),this.#ds=null),this.#ps(),this.removeEditToolbar()}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#bs(),this.#ts.classList.remove("hidden"),(0,s.bindEvents)(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(this.isResizable&&t.target===this.div&&"Enter"===t.key){this._uiManager.setSelected(this),this.#es={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};var e=this.#ts.children;if(!this.#Qi){this.#Qi=Array.from(e);var i=this.#Cs.bind(this),s=this.#Es.bind(this);for(const t of this.#Qi){var r=t.getAttribute("data-resizer-name");t.setAttribute("role","spinbutton"),t.addEventListener("keydown",i),t.addEventListener("blur",s),t.addEventListener("focus",this.#ks.bind(this,r)),l._l10nPromise.get("pdfjs-editor-resizer-label-"+r).then((e=>t.setAttribute("aria-label",e)))}}var a=this.#Qi[0];let h=0;for(const t of e){if(t===a)break;h++}var n=(360-this.rotation+this.parentRotation)%360/90*(this.#Qi.length/4);if(n!==h){if(n<h)for(let t=0;t<h-n;t++)this.#ts.append(this.#ts.firstChild);else if(n>h)for(let t=0;t<n-h;t++)this.#ts.firstChild.before(this.#ts.lastChild);let t=0;for(const i of e){var o=this.#Qi[t++].getAttribute("data-resizer-name");l._l10nPromise.get("pdfjs-editor-resizer-label-"+o).then((t=>i.setAttribute("aria-label",t)))}}this.#Ss(0),this.#hs=!0,this.#ts.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}}#Cs(t){l._resizerKeyboardManager.exec(this,t)}#Es(t){this.#hs&&t.relatedTarget?.parentNode!==this.#ts&&this.#ps()}#ks(t){this.#as=this.#hs?t:""}#Ss(t){if(this.#Qi)for(const e of this.#Qi)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#hs&&this.#ws(this.#as,{movementX:t,movementY:e})}#ps(){var t,e,i,s;this.#hs=!1,this.#Ss(-1),this.#es&&(({savedX:t,savedY:e,savedWidth:i,savedHeight:s}=this.#es),this.#xs(t,e,i,s),this.#es=null)}_stopResizingWithKeyboard(){this.#ps(),this.div.focus()}select(){this.makeResizable(),this.div?.classList.add("selectedEditor"),this.#rs?this.#rs?.show():this.addEditToolbar().then((()=>{this.div?.classList.contains("selectedEditor")&&this.#rs?.show()}))}unselect(){this.#ts?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus(),this.#rs?.hide()}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#os}set isEditing(t){this.#os=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){this.#Zi=!0;var i=this.div.style;i.aspectRatio=t/e,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}}class h extends l{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},405:(t,e,i)=>{i.d(e,{Outliner:()=>s});class s{#Ts;#Ps=[];#Ms=[];constructor(t,e=0,i=0,s=!0){let r=1/0,a=-1/0,n=1/0,o=-1/0;var l,h,d,c,u=10**-4;for({x:l,y:h,width:d,height:c}of t){var p=Math.floor((l-e)/u)*u,g=Math.ceil((l+d+e)/u)*u,f=Math.floor((h-e)/u)*u,m=Math.ceil((h+c+e)/u)*u;this.#Ps.push([p,f,m,!0],[g,f,m,!1]),r=Math.min(r,p),a=Math.max(a,g),n=Math.min(n,f),o=Math.max(o,m)}var v=a-r+2*i,b=o-n+2*i,y=r-i,w=n-i;i=[(t=this.#Ps.at(s?-1:-2))[0],t[2]];for(const t of this.#Ps){var[x,A,_]=t;t[0]=(x-y)/v,t[1]=(A-w)/b,t[2]=(_-w)/b}this.#Ts={x:y,y:w,width:v,height:b,lastPoint:i}}getOutlines(){this.#Ps.sort(((t,e)=>t[0]-e[0]||t[1]-e[1]||t[2]-e[2]));var t=[];for(const e of this.#Ps)e[3]?(t.push(...this.#Rs(e)),this.#Ls(e)):(this.#Is(e),t.push(...this.#Rs(e)));return this.#Ds(t)}#Ds(t){var e=[],i=new Set;for(const i of t){var[s,r,a]=i;e.push([s,r,i],[s,a,i])}e.sort(((t,e)=>t[1]-e[1]||t[0]-e[0]));for(let t=0,s=e.length;t<s;t+=2){var n=e[t][2],o=e[t+1][2];n.push(o),o.push(n),i.add(n),i.add(o)}for(var l,h=[];0<i.size;){var d=i.values().next().value;let[t,e,s,r,a]=d,n=(i.delete(d),t),o=e;for(h.push(l=[t,s]);;){let h;if(i.has(r))h=r;else{if(!i.has(a))break;h=a}i.delete(h),[t,e,s,r,a]=h,n!==t&&(l.push(n,o,t,o===e?e:s),n=t),o=o===e?s:e}l.push(n,o)}return{outlines:h,box:this.#Ts}}#Fs(t){var e=this.#Ms;let i=0,s=e.length-1;for(;i<=s;){var r=i+s>>1,a=e[r][0];if(a===t)return r;a<t?i=1+r:s=r-1}return s+1}#Ls([,t,e]){var i=this.#Fs(t);this.#Ms.splice(i,0,[t,e])}#Is([,t,e]){var i=this.#Fs(t);for(let a=i;a<this.#Ms.length;a++){var[s,r]=this.#Ms[a];if(s!==t)break;if(s===t&&r===e)return void this.#Ms.splice(a,1)}for(let s=i-1;0<=s;s--){var[a,n]=this.#Ms[s];if(a!==t)break;if(a===t&&n===e)return void this.#Ms.splice(s,1)}}#Rs(t){var[e,t,i]=t,s=[[e,t,i]],r=this.#Fs(i);for(let t=0;t<r;t++){var[a,n]=this.#Ms[t];for(let t=0,i=s.length;t<i;t++){var[,o,l]=s[t];if(!(n<=o||l<=a))if(a<=o)if(n<l)s[t][1]=n;else{if(1===i)return[];s.splice(t,1),t--,i--}else s[t][2]=a,n<l&&s.push([e,n,l])}}return s}}},812:(t,e,i)=>{i.d(e,{AnnotationEditorUIManager:()=>d,ColorManager:()=>h,KeyboardManager:()=>l,bindEvents:()=>function(t,e,i){for(const s of i)e.addEventListener(s,t[s].bind(t))},opacityToHex:()=>function(t){return Math.round(Math.min(255,Math.max(1,255*t))).toString(16).padStart(2,"0")}});var s=i(266),r=i(473);class a{#mt=0;getId(){return""+s.AnnotationEditorPrefix+this.#mt++}}class n{#Os=(0,s.getUuid)();#mt=0;#vt=null;static get _isSVGFittingCanvas(){const t=new OffscreenCanvas(1,3).getContext("2d"),e=new Image;e.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';var i=e.decode().then((()=>(t.drawImage(e,0,0,1,1,0,0,1,3),0===new Uint32Array(t.getImageData(0,0,1,1).data.buffer)[0])));return(0,s.shadow)(this,"_isSVGFittingCanvas",i)}async#Bs(t,e){this.#vt||=new Map;let i=this.#vt.get(t);if(null===i)return null;if(i?.bitmap)i.refCounter+=1;else{try{let t;if(i||={bitmap:null,id:`image_${this.#Os}_`+this.#mt++,refCounter:0,isSvg:!1},"image/svg+xml"===(t="string"==typeof e?(i.url=e,await(0,r.fetchData)(e,"blob")):i.file=e).type){const e=n._isSVGFittingCanvas,r=new FileReader,a=new Image;var s=new Promise(((t,s)=>{a.onload=()=>{i.bitmap=a,i.isSvg=!0,t()},r.onload=async()=>{var t=i.svgUrl=r.result;a.src=await e?t+"#svgView(preserveAspectRatio(none))":t},a.onerror=r.onerror=s}));r.readAsDataURL(t),await s}else i.bitmap=await createImageBitmap(t);i.refCounter=1}catch(t){console.error(t),i=null}this.#vt.set(t,i),i&&this.#vt.set(i.id,i)}return i}async getFromFile(t){var{lastModified:e,name:i,size:s,type:r}=t;return this.#Bs(e+`_${i}_${s}_`+r,t)}async getFromUrl(t){return this.#Bs(t,t)}async getFromId(t){return this.#vt||=new Map,(t=this.#vt.get(t))?t.bitmap?(t.refCounter+=1,t):t.file?this.getFromFile(t.file):this.getFromUrl(t.url):null}getSvgUrl(t){return t=this.#vt.get(t),t?.isSvg?t.svgUrl:null}deleteId(t){this.#vt||=new Map,(t=this.#vt.get(t))&&(--t.refCounter,0===t.refCounter)&&(t.bitmap=null)}isValidId(t){return t.startsWith(`image_${this.#Os}_`)}}class o{#Ns=[];#zs=!1;#js;#Hs=-1;constructor(t=128){this.#js=t}add({cmd:t,undo:e,mustExec:i,type:s=NaN,overwriteIfSameType:r=!1,keepUndo:a=!1}){i&&t(),this.#zs||(i={cmd:t,undo:e,type:s},-1===this.#Hs?(0<this.#Ns.length&&(this.#Ns.length=0),this.#Hs=0,this.#Ns.push(i)):r&&this.#Ns[this.#Hs].type===s?(a&&(i.undo=this.#Ns[this.#Hs].undo),this.#Ns[this.#Hs]=i):((t=this.#Hs+1)===this.#js?this.#Ns.splice(0,1):(this.#Hs=t)<this.#Ns.length&&this.#Ns.splice(t),this.#Ns.push(i)))}undo(){-1!==this.#Hs&&(this.#zs=!0,this.#Ns[this.#Hs].undo(),this.#zs=!1,--this.#Hs)}redo(){this.#Hs<this.#Ns.length-1&&(this.#Hs+=1,this.#zs=!0,this.#Ns[this.#Hs].cmd(),this.#zs=!1)}hasSomethingToUndo(){return-1!==this.#Hs}hasSomethingToRedo(){return this.#Hs<this.#Ns.length-1}destroy(){this.#Ns=null}}class l{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;var e,i,r,a=s.FeatureTest.platform.isMac;for([e,i,r={}]of t)for(const t of e){var n=t.startsWith("mac+");a&&n?(this.callbacks.set(t.slice(4),{callback:i,options:r}),this.allKeys.add(t.split("+").at(-1))):a||n||(this.callbacks.set(t,{callback:i,options:r}),this.allKeys.add(t.split("+").at(-1)))}}#Us(t){return t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key),t=this.buffer.join("+"),this.buffer.length=0,t}exec(t,e){var i,s,r,a;this.allKeys.has(e.key)&&(i=this.callbacks.get(this.#Us(e)))&&(({callback:i,options:{bubbles:s=!1,args:r=[],checker:a=null}}=i),a&&!a(t,e)||(i.bind(t,...r,e)(),s)||(e.stopPropagation(),e.preventDefault()))}}class h{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){var t=new Map([["CanvasText",null],["Canvas",null]]);return(0,r.getColorValues)(t),(0,s.shadow)(this,"_colors",t)}convert(t){const e=(0,r.getRGB)(t);if(window.matchMedia("(forced-colors: active)").matches)for(var[i,s]of this._colors)if(s.every(((t,i)=>t===e[i])))return h._colorsMapping.get(i);return e}getHexCode(t){var e=this._colors.get(t);return e?s.Util.makeHexColor(...e):t}}class d{#qs=null;#Vs=new Map;#$s=new Map;#Gs=null;#Ws=null;#Ks=new o;#Xs=0;#Ys=new Set;#Js=null;#wi=null;#Qs=new Set;#Zs=null;#tr=null;#er=null;#ir=new a;#sr=!1;#rr=!1;#ar=null;#nr=null;#or=s.AnnotationEditorType.NONE;#lr=new Set;#hr=null;#dr=this.blur.bind(this);#cr=this.focus.bind(this);#ur=this.copy.bind(this);#pr=this.cut.bind(this);#gr=this.paste.bind(this);#fr=this.keydown.bind(this);#mr=this.onEditingAction.bind(this);#vr=this.onPageChanging.bind(this);#br=this.onScaleChanging.bind(this);#yr=this.onRotationChanging.bind(this);#wr={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#xr=[0,0];#Ar=null;#p=null;#_r=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){var t=d.prototype,e=t=>t.#p.contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&t.hasSomethingToControl(),i=(t,{target:e})=>!(e instanceof HTMLInputElement)||"text"!==(e=e.type)&&"number"!==e,r=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return(0,s.shadow)(this,"_keyboardManager",new l([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(t,{target:e})=>!(e instanceof HTMLButtonElement)&&t.#p.contains(e)&&!t.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:t=>t.#p.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}]]))}constructor(t,e,i,s,a,n,o){this.#p=t,this.#_r=e,this.#Gs=i,this._eventBus=s,this._eventBus._on("editingaction",this.#mr),this._eventBus._on("pagechanging",this.#vr),this._eventBus._on("scalechanging",this.#br),this._eventBus._on("rotationchanging",this.#yr),this.#Ws=a.annotationStorage,this.#Zs=a.filterFactory,this.#hr=n,this.#er=o||null,this.viewParameters={realScale:r.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#Cr(),this.#Er(),this._eventBus._off("editingaction",this.#mr),this._eventBus._off("pagechanging",this.#vr),this._eventBus._off("scalechanging",this.#br),this._eventBus._off("rotationchanging",this.#yr);for(const t of this.#$s.values())t.destroy();this.#$s.clear(),this.#Vs.clear(),this.#Qs.clear(),this.#qs=null,this.#lr.clear(),this.#Ks.destroy(),this.#Gs?.destroy(),this.#tr&&(clearTimeout(this.#tr),this.#tr=null),this.#Ar&&(clearTimeout(this.#Ar),this.#Ar=null)}get hcmFilter(){return(0,s.shadow)(this,"hcmFilter",this.#hr?this.#Zs.addHCMFilter(this.#hr.foreground,this.#hr.background):"none")}get direction(){return(0,s.shadow)(this,"direction",getComputedStyle(this.#p).direction)}get highlightColors(){return(0,s.shadow)(this,"highlightColors",this.#er?new Map(this.#er.split(",").map((t=>t.split("=").map((t=>t.trim()))))):null)}setMainHighlightColorPicker(t){this.#nr=t}editAltText(t){this.#Gs?.editAltText(this,t)}onPageChanging({pageNumber:t}){this.#Xs=t-1}focusMainContainer(){this.#p.focus()}findParent(t,e){for(const n of this.#$s.values()){var{x:i,y:s,width:r,height:a}=n.div.getBoundingClientRect();if(i<=t&&t<=i+r&&s<=e&&e<=s+a)return n}return null}disableUserSelect(t=!1){this.#_r.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#Qs.add(t)}removeShouldRescale(t){this.#Qs.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*r.PixelsPerInch.PDF_TO_CSS_UNITS;for(const t of this.#Qs)t.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}addToAnnotationStorage(t){t.isEmpty()||!this.#Ws||this.#Ws.has(t.id)||this.#Ws.setValue(t.id,t)}#kr(){window.addEventListener("focus",this.#cr),window.addEventListener("blur",this.#dr)}#Er(){window.removeEventListener("focus",this.#cr),window.removeEventListener("blur",this.#dr)}blur(){if(this.hasSelection){var t=document.activeElement;for(const e of this.#lr)if(e.div.contains(t)){this.#ar=[e,t],e._focusEventsAllowed=!1;break}}}focus(){if(this.#ar){const[t,e]=this.#ar;this.#ar=null,e.addEventListener("focusin",(()=>{t._focusEventsAllowed=!0}),{once:!0}),e.focus()}}#Sr(){window.addEventListener("keydown",this.#fr)}#Cr(){window.removeEventListener("keydown",this.#fr)}#Tr(){document.addEventListener("copy",this.#ur),document.addEventListener("cut",this.#pr),document.addEventListener("paste",this.#gr)}#Pr(){document.removeEventListener("copy",this.#ur),document.removeEventListener("cut",this.#pr),document.removeEventListener("paste",this.#gr)}addEditListeners(){this.#Sr(),this.#Tr()}removeEditListeners(){this.#Cr(),this.#Pr()}copy(t){if(t.preventDefault(),this.#qs?.commitOrRemove(),this.hasSelection){var e=[];for(const t of this.#lr){var i=t.serialize(!0);i&&e.push(i)}0!==e.length&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}}cut(t){this.copy(t),this.delete()}paste(t){t.preventDefault(),t=t.clipboardData;for(const e of t.items)for(const t of this.#wi)if(t.isHandlingMimeForPasting(e.type))return void t.paste(e,this.currentLayer);let e=t.getData("application/pdfjs");if(e){try{e=JSON.parse(e)}catch(t){return void(0,s.warn)(`paste: "${t.message}".`)}if(Array.isArray(e)){this.unselectAll();var i=this.currentLayer;try{const t=[];for(const s of e){var r=i.deserialize(s);if(!r)return;t.push(r)}this.addCommands({cmd:()=>{for(const e of t)this.#Mr(e);this.#Rr(t)},undo:()=>{for(const e of t)e.remove()},mustExec:!0})}catch(t){(0,s.warn)(`paste: "${t.message}".`)}}}}keydown(t){this.isEditorHandlingKeyboard||d._keyboardManager.exec(this,t)}onEditingAction(t){["undo","redo","delete","selectAll"].includes(t.name)&&this[t.name]()}#Lr(t){Object.entries(t).some((([t,e])=>this.#wr[t]!==e))&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#wr,t)})}#Ir(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#kr(),this.#Sr(),this.#Tr(),this.#Lr({isEditing:this.#or!==s.AnnotationEditorType.NONE,isEmpty:this.#Dr(),hasSomethingToUndo:this.#Ks.hasSomethingToUndo(),hasSomethingToRedo:this.#Ks.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#Er(),this.#Cr(),this.#Pr(),this.#Lr({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#wi){this.#wi=t;for(const t of this.#wi)this.#Ir(t.defaultPropertiesToUpdate)}}getId(){return this.#ir.getId()}get currentLayer(){return this.#$s.get(this.#Xs)}getLayer(t){return this.#$s.get(t)}get currentPageIndex(){return this.#Xs}addLayer(t){this.#$s.set(t.pageIndex,t),this.#sr?t.enable():t.disable()}removeLayer(t){this.#$s.delete(t.pageIndex)}updateMode(t,e=null,i=!1){if(this.#or!==t)if((this.#or=t)===s.AnnotationEditorType.NONE)this.setEditingState(!1),this.#Fr();else{this.setEditingState(!0),this.#Or(),this.unselectAll();for(const e of this.#$s.values())e.updateMode(t);if(!e&&i)this.addNewEditorFromKeyboard();else if(e)for(const t of this.#Vs.values())if(t.annotationElementId===e){this.setSelected(t),t.enterInEditMode();break}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==this.#or&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){if(this.#wi){switch(t){case s.AnnotationEditorParamsType.CREATE:return void this.currentLayer.addNewEditor();case s.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:this.#nr?.updateColor(e)}for(const i of this.#lr)i.updateParams(t,e);for(const i of this.#wi)i.updateDefaultParams(t,e)}}enableWaiting(t=!1){if(this.#rr!==t){this.#rr=t;for(const e of this.#$s.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}#Or(){if(!this.#sr){this.#sr=!0;for(const t of this.#$s.values())t.enable()}}#Fr(){if(this.unselectAll(),this.#sr){this.#sr=!1;for(const t of this.#$s.values())t.disable()}}getEditors(t){var e=[];for(const i of this.#Vs.values())i.pageIndex===t&&e.push(i);return e}getEditor(t){return this.#Vs.get(t)}addEditor(t){this.#Vs.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#tr&&clearTimeout(this.#tr),this.#tr=setTimeout((()=>{this.focusMainContainer(),this.#tr=null}),0)),this.#Vs.delete(t.id),this.unselect(t),t.annotationElementId&&this.#Ys.has(t.annotationElementId)||this.#Ws?.remove(t.id)}addDeletedAnnotationElement(t){this.#Ys.add(t.annotationElementId),t.deleted=!0}isDeletedAnnotationElement(t){return this.#Ys.has(t)}removeDeletedAnnotationElement(t){this.#Ys.delete(t.annotationElementId),t.deleted=!1}#Mr(t){var e=this.#$s.get(t.pageIndex);e?e.addOrRebuild(t):this.addEditor(t)}setActiveEditor(t){this.#qs!==t&&(this.#qs=t)&&this.#Ir(t.propertiesToUpdate)}toggleSelected(t){this.#lr.has(t)?(this.#lr.delete(t),t.unselect(),this.#Lr({hasSelectedEditor:this.hasSelection})):(this.#lr.add(t),t.select(),this.#Ir(t.propertiesToUpdate),this.#Lr({hasSelectedEditor:!0}))}setSelected(t){for(const e of this.#lr)e!==t&&e.unselect();this.#lr.clear(),this.#lr.add(t),t.select(),this.#Ir(t.propertiesToUpdate),this.#Lr({hasSelectedEditor:!0})}isSelected(t){return this.#lr.has(t)}get firstSelectedEditor(){return this.#lr.values().next().value}unselect(t){t.unselect(),this.#lr.delete(t),this.#Lr({hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==this.#lr.size}get isEnterHandled(){return 1===this.#lr.size&&this.firstSelectedEditor.isEnterHandled}undo(){this.#Ks.undo(),this.#Lr({hasSomethingToUndo:this.#Ks.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#Dr()})}redo(){this.#Ks.redo(),this.#Lr({hasSomethingToUndo:!0,hasSomethingToRedo:this.#Ks.hasSomethingToRedo(),isEmpty:this.#Dr()})}addCommands(t){this.#Ks.add(t),this.#Lr({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#Dr()})}#Dr(){if(0===this.#Vs.size)return!0;if(1===this.#Vs.size)for(const t of this.#Vs.values())return t.isEmpty();return!1}delete(){if(this.commitOrRemove(),this.hasSelection){const t=[...this.#lr];this.addCommands({cmd:()=>{for(const e of t)e.remove()},undo:()=>{for(const e of t)this.#Mr(e)},mustExec:!0})}}commitOrRemove(){this.#qs?.commitOrRemove()}hasSomethingToControl(){return this.#qs||this.hasSelection}#Rr(t){this.#lr.clear();for(const e of t)e.isEmpty()||(this.#lr.add(e),e.select());this.#Lr({hasSelectedEditor:!0})}selectAll(){for(const t of this.#lr)t.commit();this.#Rr(this.#Vs.values())}unselectAll(){if((!this.#qs||(this.#qs.commitOrRemove(),this.#or===s.AnnotationEditorType.NONE))&&this.hasSelection){for(const t of this.#lr)t.unselect();this.#lr.clear(),this.#Lr({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),this.hasSelection){this.#xr[0]+=t,this.#xr[1]+=e;const[i,s]=this.#xr,r=[...this.#lr];this.#Ar&&clearTimeout(this.#Ar),this.#Ar=setTimeout((()=>{this.#Ar=null,this.#xr[0]=this.#xr[1]=0,this.addCommands({cmd:()=>{for(const t of r)this.#Vs.has(t.id)&&t.translateInPage(i,s)},undo:()=>{for(const t of r)this.#Vs.has(t.id)&&t.translateInPage(-i,-s)},mustExec:!1})}),1e3);for(const i of r)i.translateInPage(t,e)}}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#Js=new Map;for(const t of this.#lr)this.#Js.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#Js)return!1;this.disableUserSelect(!1);const t=this.#Js;this.#Js=null;let e=!1;for(var[{x:i,y:s,pageIndex:r},a]of t)a.newX=i,a.newY=s,a.newPageIndex=r,e||=i!==a.savedX||s!==a.savedY||r!==a.savedPageIndex;if(!e)return!1;const n=(t,e,i,s)=>{var r;this.#Vs.has(t.id)&&((r=this.#$s.get(s))?t._setParentAndPosition(r,e,i):(t.pageIndex=s,t.x=e,t.y=i))};return this.addCommands({cmd:()=>{for(var[e,{newX:i,newY:s,newPageIndex:r}]of t)n(e,i,s,r)},undo:()=>{for(var[e,{savedX:i,savedY:s,savedPageIndex:r}]of t)n(e,i,s,r)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#Js)for(const i of this.#Js.keys())i.drag(t,e)}rebuild(t){var e;null===t.parent?(e=this.getLayer(t.pageIndex))?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild()):t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||1===this.#lr.size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#qs===t}getActive(){return this.#qs}getMode(){return this.#or}get imageManager(){return(0,s.shadow)(this,"imageManager",new n)}}},171:(t,e,i)=>{i.d(e,{PDFFetchStream:()=>l});var s=i(266),r=i(253);function a(t,e,i){return{method:"GET",headers:t,signal:i.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function n(t){var e=new Headers;for(const s in t){var i=t[s];void 0!==i&&e.append(s,i)}return e}function o(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:((0,s.warn)("getArrayBuffer - unexpected data format: "+t),new Uint8Array(t).buffer)}class l{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new h(this),this._fullRequestReader}getRangeReader(t,e){return e<=this._progressiveDataLength?null:(t=new d(this,t,e),this._rangeRequestReaders.push(t),t)}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class h{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null,t=t.source,this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=new s.PromiseCapability,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._headers=n(this._stream.httpHeaders);const e=t.url;fetch(e,a(this._headers,this._withCredentials,this._abortController)).then((t=>{if(!(0,r.validateResponseStatus)(t.status))throw(0,r.createResponseStatusError)(t.status,e);this._reader=t.body.getReader(),this._headersCapability.resolve();var i=e=>t.headers.get(e),{allowRangeRequests:a,suggestedLength:n}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:i,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=n||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(i),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new s.AbortException("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;var{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:o(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class d{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0,t=t.source,this._withCredentials=t.withCredentials||!1,this._readCapability=new s.PromiseCapability,this._isStreamingSupported=!t.disableStream,this._abortController=new AbortController,this._headers=n(this._stream.httpHeaders),this._headers.append("Range",`bytes=${e}-`+(i-1));const o=t.url;fetch(o,a(this._headers,this._withCredentials,this._abortController)).then((t=>{if(!(0,r.validateResponseStatus)(t.status))throw(0,r.createResponseStatusError)(t.status,o);this._readCapability.resolve(),this._reader=t.body.getReader()})).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;var{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:o(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}},742:(t,e,i)=>{i.d(e,{FontFaceObject:()=>a,FontLoader:()=>r});var s=i(266);class r{#Br=new Set;constructor({ownerDocument:t=globalThis.document}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));var e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#Br.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(t&&!this.#Br.has(t.loadedName))if((0,s.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){var{loadedName:i,src:r,style:a}=t,r=new FontFace(i,r,a);this.addNativeFontFace(r);try{await r.load(),this.#Br.add(i),e?.(t)}catch{(0,s.warn)(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(r)}}else(0,s.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}async bind(t){if(!(t.attached||t.missingFile&&!t.systemFontInfo))if(t.attached=!0,t.systemFontInfo)await this.loadSystemFont(t);else if(this.isFontLoadingAPISupported){var e=t.createNativeFontFace();if(e){this.addNativeFontFace(e);try{await e.loaded}catch(i){throw(0,s.warn)(`Failed to load font '${e.family}': '${i}'.`),t.disableFontFace=!0,i}}}else(e=t.createFontFaceRule())&&(this.insertRule(e),this.isSyncFontLoadingSupported||await new Promise((e=>{e=this._queueLoadingCallback(e),this._prepareFontLoadEvent(t,e)})))}get isFontLoadingAPISupported(){var t=!!this._document?.fonts;return(0,s.shadow)(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(s.isNodeJS||"undefined"!=typeof navigator&&"string"==typeof navigator?.userAgent&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),(0,s.shadow)(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){const e=this.loadingRequests,i={done:!1,complete:function(){for((0,s.assert)(!i.done,"completeRequest() cannot be called twice."),i.done=!0;0<e.length&&e[0].done;){var t=e.shift();setTimeout(t.callback,0)}},callback:t};return e.push(i),i}get _loadTestFont(){var t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,s.shadow)(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(t,e){return t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|255&t.charCodeAt(e+3)}function r(t,e,i,s){return t.substring(0,e)+s+t.substring(e+i)}let a,n;var o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let h=0;var d="lt"+Date.now()+this.loadTestFontId++;let c=i(o=r(this._loadTestFont,976,d.length,d),16);for(a=0,n=d.length-3;a<n;a+=4)c=c-1482184792+i(d,a)|0;a<d.length&&(c=c-1482184792+i(d+"XXX",a)|0),o=r(o,16,4,(0,s.string32)(c)),o=`url(data:font/opentype;base64,${btoa(o)});`,this.insertRule(`@font-face {font-family:"${d}";src:${o}}`);const u=this._document.createElement("div");u.style.visibility="hidden",u.style.width=u.style.height="10px",u.style.position="absolute",u.style.top=u.style.left="0px";for(const e of[t.loadedName,d]){var p=this._document.createElement("span");p.textContent="Hi",p.style.fontFamily=e,u.append(p)}this._document.body.append(u),function t(e,i){30<++h?((0,s.warn)("Load test font never loaded."),i()):(l.font="30px "+e,l.fillText(".",0,20),0<l.getImageData(0,0,1,1).data[3]?i():setTimeout(t.bind(null,e,i)))}(d,(()=>{u.remove(),e.complete()}))}}class a{constructor(t,{isEvalSupported:e=!0,disableFontFace:i=!1,ignoreErrors:s=!1,inspectFont:r=null}){this.compiledGlyphs=Object.create(null);for(const e in t)this[e]=t[e];this.isEvalSupported=!1!==e,this.disableFontFace=!0===i,this.ignoreErrors=!0===s,this._inspectFont=r}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;var e;return t=this.cssFontInfo?(e={weight:this.cssFontInfo.fontWeight},this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),new FontFace(this.cssFontInfo.fontFamily,this.data,e)):new FontFace(this.loadedName,this.data,{}),this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;var t=(0,s.bytesToString)(this.data);t=`url(data:${this.mimetype};base64,${btoa(t)});`;let e;if(this.cssFontInfo){let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}else e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(void 0!==this.compiledGlyphs[e])return this.compiledGlyphs[e];let i;try{i=t.get(this.loadedName+"_path_"+e)}catch(t){if(this.ignoreErrors)return(0,s.warn)(`getPathGenerator - ignoring character: "${t}".`),this.compiledGlyphs[e]=function(t,e){};throw t}if(this.isEvalSupported&&s.FeatureTest.isEvalSupported){var r=[];for(const t of i){var a=void 0!==t.args?t.args.join(","):"";r.push("c.",t.cmd,"(",a,");\n")}return this.compiledGlyphs[e]=new Function("c","size",r.join(""))}return this.compiledGlyphs[e]=function(t,e){for(const s of i)"scale"===s.cmd&&(s.args=[e,-e]),t[s.cmd].apply(t,s.args)}}}},472:(t,e,i)=>{i.d(e,{Metadata:()=>r});var s=i(266);class r{#Nr;#zr;constructor({parsedData:t,rawData:e}){this.#Nr=t,this.#zr=e}getRaw(){return this.#zr}get(t){return this.#Nr.get(t)??null}getAll(){return(0,s.objectFromMap)(this.#Nr)}has(t){return this.#Nr.has(t)}}},474:(t,e,i)=>{i.d(e,{PDFNetworkStream:()=>o});var s=i(266),r=i(253);function a(t){return"string"!=typeof(t=t.response)?t:(0,s.stringToBytes)(t).buffer}class n{constructor(t,e={}){this.url=t,this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&e.httpHeaders||Object.create(null),this.withCredentials=e.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,i){var s={begin:t,end:e};for(const t in i)s[t]=i[t];return this.request(s)}requestFull(t){return this.request(t)}request(t){const e=new XMLHttpRequest;var i=this.currXhrId++,s=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const t in this.httpHeaders){var r=this.httpHeaders[t];void 0!==r&&e.setRequestHeader(t,r)}return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-`+(t.end-1)),s.expectedStatus=206):s.expectedStatus=200,e.responseType="arraybuffer",t.onError&&(e.onerror=function(i){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){(t=this.pendingRequests[t])&&t.onProgress?.(e)}onStateChange(t,e){var i,s,r=this.pendingRequests[t];r&&(2<=(i=r.xhr).readyState&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),4===i.readyState)&&t in this.pendingRequests&&(delete this.pendingRequests[t],0===i.status&&this.isHttp||(200!==(t=i.status||200)||206!==r.expectedStatus)&&t!==r.expectedStatus?r.onError?.(i.status):(s=a(i),206===t?(t=i.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(t),r.onDone({begin:parseInt(t[1],10),chunk:s})):s?r.onDone({begin:0,chunk:s}):r.onError?.(i.status)))}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){var e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class o{constructor(t){this._source=t,this._manager=new n(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){0<=(t=this._rangeRequestReaders.indexOf(t))&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return(0,s.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new l(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){return(t=new h(this._manager,t,e)).onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(t),t}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class l{constructor(t,e){this._manager=t;var i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(i),this._headersReceivedCapability=new s.PromiseCapability,this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){var t=this._fullRequestId;const e=this._manager.getRequestXhr(t);var i=t=>e.getResponseHeader(t),{allowRangeRequests:s,suggestedLength:a}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}_onDone(t){if(t&&(0<this._requests.length?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(0<this._cachedChunks.length)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=(0,r.createResponseStatusError)(t,this._url),this._headersReceivedCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;var t;return 0<this._cachedChunks.length?{value:this._cachedChunks.shift(),done:!1}:this._done?{value:void 0,done:!0}:(t=new s.PromiseCapability,this._requests.push(t),t.promise)}cancel(t){this._done=!0,this._headersReceivedCapability.reject(t);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class h{constructor(t,e,i){this._manager=t;var s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,i,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(t){t=t.chunk,0<this._requests.length?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=(0,r.createResponseStatusError)(t,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;var t;return null!==this._queuedChunk?(t=this._queuedChunk,this._queuedChunk=null,{value:t,done:!1}):this._done?{value:void 0,done:!0}:(t=new s.PromiseCapability,this._requests.push(t),t.promise)}cancel(t){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},253:(t,e,i)=>{i.d(e,{createResponseStatusError:()=>function(t,e){return 404===t||0===t&&e.startsWith("file:")?new s.MissingPDFException('Missing PDF "'+e+'".'):new s.UnexpectedResponseException(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t)},extractFilenameFromHeader:()=>function(t){if(t=t("Content-Disposition")){let e=function(t){let e=!0,i=a("filename\\*","i").exec(t);var r;if(i)return r=l(i=i[1]),o(r=d(r=h(r=unescape(r))));if(i=function(t){for(var e=[],i=a("filename\\*((?!0\\d)\\d+)(\\*?)","ig");null!==(s=i.exec(t));){var[,s,r,n]=s;if((s=parseInt(s,10))in e){if(0===s)break}else e[s]=[r,n]}var o=[];for(let t=0;t<e.length&&t in e;++t){let[i,s]=e[t];s=l(s),i&&(s=unescape(s),0===t)&&(s=h(s)),o.push(s)}return o.join("")}(t))return o(d(i));if(i=a("filename","i").exec(t))return i=i[1],o(d(l(i)));function a(t,e){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',e)}function n(t,i){if(t){if(!/^[\x00-\xFF]+$/.test(i))return i;try{var r=new TextDecoder(t,{fatal:!0}),a=(0,s.stringToBytes)(i);i=r.decode(a),e=!1}catch{}}return i}function o(t){return e&&/[\x80-\xff]/.test(t)&&(t=n("utf-8",t),e)?n("iso-8859-1",t):t}function l(t){if(t.startsWith('"')){var e=t.slice(1).split('\\"');for(let t=0;t<e.length;++t){var i=e[t].indexOf('"');-1!==i&&(e[t]=e[t].slice(0,i),e.length=t+1),e[t]=e[t].replaceAll(/\\(.)/g,"$1")}t=e.join('"')}return t}function h(t){var e=t.indexOf("'");return-1===e?t:n(t.slice(0,e),t.slice(e+1).replace(/^[^']*'/,""))}function d(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(t,e,i,s){if("q"===i||"Q"===i)return n(e,s=(s=s.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,(function(t,e){return String.fromCharCode(parseInt(e,16))})));try{s=atob(s)}catch{}return n(e,s)}))}return""}(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if((0,r.isPdfFile)(e))return e}return null},validateRangeRequestCapabilities:()=>function({getResponseHeader:t,isHttp:e,rangeChunkSize:i,disableRange:s}){var r={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(t("Content-Length"),10);return!Number.isInteger(a)||(r.suggestedLength=a)<=2*i||!s&&e&&"bytes"===t("Accept-Ranges")&&"identity"===(t("Content-Encoding")||"identity")&&(r.allowRangeRequests=!0),r},validateResponseStatus:()=>function(t){return 200===t||206===t}});var s=i(266),r=i(473)},498:(t,e,i)=>{i.a(t,(async(t,s)=>{try{i.d(e,{PDFNodeStream:()=>u});var r=i(266),a=i(253);let o,l,h,d;r.isNodeJS&&(o=await Promise.resolve().then((function(){return Js})),l=await Promise.resolve().then((function(){return Js})),h=await Promise.resolve().then((function(){return Js})),d=await Promise.resolve().then((function(){return Js})));const c=/^file:\/\/\/[a-zA-Z]:\//;class u{constructor(t){this.source=t,this.url=function(t){var e=d.parse(t);if("file:"!==e.protocol&&!e.host){if(/^[a-z]:[/\\]/i.test(t))return d.parse("file:///"+t);e.host||(e.protocol="file:")}return e}(t.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new(this.isFsUrl?v:f)(this),this._fullRequestReader}getRangeReader(t,e){return e<=this._progressiveDataLength?null:(t=new(this.isFsUrl?b:m)(this,t,e),this._rangeRequestReaders.push(t),t)}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class p{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,t=t.source,this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=new r.PromiseCapability,this._headersCapability=new r.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;var t=this._readableStream.read();return null===t?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){(this._readableStream=t).on("readable",(()=>{this._readCapability.resolve()})),t.on("end",(()=>{t.destroy(),this._done=!0,this._readCapability.resolve()})),t.on("error",(t=>{this._error(t)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new r.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class g{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new r.PromiseCapability,t=t.source,this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;var t=this._readableStream.read();return null===t?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){(this._readableStream=t).on("readable",(()=>{this._readCapability.resolve()})),t.on("end",(()=>{t.destroy(),this._done=!0,this._readCapability.resolve()})),t.on("error",(t=>{this._error(t)})),this._storedError&&this._readableStream.destroy(this._storedError)}}function n(t,e){return{protocol:t.protocol,auth:t.auth,host:t.hostname,port:t.port,path:t.path,method:"GET",headers:e}}class f extends p{constructor(t){super(t);var e=e=>{var i,s;404===e.statusCode?(i=new r.MissingPDFException(`Missing PDF "${this._url}".`),this._storedError=i,this._headersCapability.reject(i)):(this._headersCapability.resolve(),this._setReadableStream(e),({allowRangeRequests:e,suggestedLength:s}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:i=t=>this._readableStream.headers[t.toLowerCase()],isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange})),this._isRangeSupported=e,this._contentLength=s||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(i))};this._request=null,"http:"===this._url.protocol?this._request=l.request(n(this._url,t.httpHeaders),e):this._request=h.request(n(this._url,t.httpHeaders),e),this._request.on("error",(t=>{this._storedError=t,this._headersCapability.reject(t)})),this._request.end()}}class m extends g{constructor(t,e,i){super(t),this._httpHeaders={};for(const e in t.httpHeaders){var s=t.httpHeaders[e];void 0!==s&&(this._httpHeaders[e]=s)}this._httpHeaders.Range=`bytes=${e}-`+(i-1),e=t=>{var e;404===t.statusCode?(e=new r.MissingPDFException(`Missing PDF "${this._url}".`),this._storedError=e):this._setReadableStream(t)},this._request=null,"http:"===this._url.protocol?this._request=l.request(n(this._url,this._httpHeaders),e):this._request=h.request(n(this._url,this._httpHeaders),e),this._request.on("error",(t=>{this._storedError=t})),this._request.end()}}class v extends p{constructor(t){super(t);let e=decodeURIComponent(this._url.path);c.test(this._url.href)&&(e=e.replace(/^\//,"")),o.lstat(e,((t,i)=>{t?("ENOENT"===t.code&&(t=new r.MissingPDFException(`Missing PDF "${e}".`)),this._storedError=t,this._headersCapability.reject(t)):(this._contentLength=i.size,this._setReadableStream(o.createReadStream(e)),this._headersCapability.resolve())}))}}class b extends g{constructor(t,e,i){super(t);let s=decodeURIComponent(this._url.path);c.test(this._url.href)&&(s=s.replace(/^\//,"")),this._setReadableStream(o.createReadStream(s,{start:e,end:i-1}))}}s()}catch(t){s(t)}}),1)},738:(t,e,i)=>{i.a(t,(async(t,s)=>{try{i.d(e,{NodeCMapReaderFactory:()=>h,NodeCanvasFactory:()=>l,NodeFilterFactory:()=>o,NodeStandardFontDataFactory:()=>d});var r=i(822);let t,a;if(i(266).isNodeJS){t=await Promise.resolve().then((function(){return Js}));try{a=await Promise.resolve().then((function(){return Js}))}catch{}try{await Promise.resolve().then((function(){return hr}))}catch{}}const n=function(e){return new Promise(((i,s)=>{t.readFile(e,((t,e)=>{t||!e?s(new Error(t)):i(new Uint8Array(e))}))}))};class o extends r.BaseFilterFactory{}class l extends r.BaseCanvasFactory{_createCanvas(t,e){return a.createCanvas(t,e)}}class h extends r.BaseCMapReaderFactory{_fetchData(t,e){return n(t).then((t=>({cMapData:t,compressionType:e})))}}class d extends r.BaseStandardFontDataFactory{_fetchData(t){return n(t)}}s()}catch(t){s(t)}}),1)},890:(t,e,i)=>{i.d(e,{OptionalContentConfig:()=>o});var s=i(266),r=i(825);const a=Symbol("INTERNAL");class n{#jr=!0;constructor(t,e){this.name=t,this.intent=e}get visible(){return this.#jr}_setVisible(t,e){t!==a&&(0,s.unreachable)("Internal method `_setVisible` called."),this.#jr=e}}class o{#Hr=null;#Ur=new Map;#qr=null;#Vr=null;constructor(t){if(this.name=null,(this.creator=null)!==t){this.name=t.name,this.creator=t.creator,this.#Vr=t.order;for(const e of t.groups)this.#Ur.set(e.id,new n(e.name,e.intent));if("OFF"===t.baseState)for(const t of this.#Ur.values())t._setVisible(a,!1);for(const e of t.on)this.#Ur.get(e)._setVisible(a,!0);for(const e of t.off)this.#Ur.get(e)._setVisible(a,!1);this.#qr=this.getHash()}}#$r(t){var e=t.length;if(e<2)return!0;var i=t[0];for(let a=1;a<e;a++){var r=t[a];let e;if(Array.isArray(r))e=this.#$r(r);else{if(!this.#Ur.has(r))return(0,s.warn)("Optional content group not found: "+r),!0;e=this.#Ur.get(r).visible}switch(i){case"And":if(e)break;return!1;case"Or":if(e)return!0;break;case"Not":return!e;default:return!0}}return"And"===i}isVisible(t){if(0!==this.#Ur.size)if(t){if("OCG"===t.type)return this.#Ur.has(t.id)?this.#Ur.get(t.id).visible:((0,s.warn)("Optional content group not found: "+t.id),!0);if("OCMD"===t.type){if(t.expression)return this.#$r(t.expression);if(!t.policy||"AnyOn"===t.policy){for(const e of t.ids){if(!this.#Ur.has(e))return(0,s.warn)("Optional content group not found: "+e),!0;if(this.#Ur.get(e).visible)return!0}return!1}if("AllOn"===t.policy)for(const e of t.ids){if(!this.#Ur.has(e))return(0,s.warn)("Optional content group not found: "+e),!0;if(!this.#Ur.get(e).visible)return!1}else{if("AnyOff"===t.policy){for(const e of t.ids){if(!this.#Ur.has(e))return(0,s.warn)("Optional content group not found: "+e),!0;if(!this.#Ur.get(e).visible)return!0}return!1}if("AllOff"===t.policy)for(const e of t.ids){if(!this.#Ur.has(e))return(0,s.warn)("Optional content group not found: "+e),!0;if(this.#Ur.get(e).visible)return!1}else(0,s.warn)(`Unknown optional content policy ${t.policy}.`)}}else(0,s.warn)(`Unknown group type ${t.type}.`)}else(0,s.warn)("Optional content group not defined.");return!0}setVisibility(t,e=!0){this.#Ur.has(t)?(this.#Ur.get(t)._setVisible(a,!!e),this.#Hr=null):(0,s.warn)("Optional content group not found: "+t)}get hasInitialVisibility(){return null===this.#qr||this.getHash()===this.#qr}getOrder(){return this.#Ur.size?this.#Vr?this.#Vr.slice():[...this.#Ur.keys()]:null}getGroups(){return 0<this.#Ur.size?(0,s.objectFromMap)(this.#Ur):null}getGroup(t){return this.#Ur.get(t)||null}getHash(){if(null!==this.#Hr)return this.#Hr;var t,e,i=new r.MurmurHash3_64;for([t,e]of this.#Ur)i.update(t+":"+e.visible);return this.#Hr=i.hexdigest()}}},739:(t,e,i)=>{i.d(e,{renderTextLayer:()=>function(t){return(t=new d(t))._render(),t},updateTextLayer:()=>function({container:t,viewport:e,textDivs:i,textDivProperties:s,isOffscreenCanvasSupported:a,mustRotate:n=!0,mustRescale:l=!0}){if(n&&(0,r.setLayerDimensions)(t,{rotation:e.rotation}),l){n=o(0,a);var d={prevFontSize:null,prevFontFamily:null,div:null,scale:e.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:n};for(const t of i)d.properties=s.get(t),d.div=t,h(d)}}});var s=i(266),r=i(473);const a=30,n=new Map;function o(t,e){return(e&&s.FeatureTest.isOffscreenCanvasSupported?new OffscreenCanvas(t,t):((e=document.createElement("canvas")).width=e.height=t,e)).getContext("2d",{alpha:!1})}function l(t,e,i){var r=document.createElement("span"),l={angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0},h=(t._textDivs.push(r),s.Util.transform(t._transform,e.transform));let d=Math.atan2(h[1],h[0]);var c=((i=i[e.fontName]).vertical&&(d+=Math.PI/2),t._fontInspectorEnabled&&i.fontSubstitution||i.fontFamily),u=Math.hypot(h[2],h[3]),p=u*function(t,e){var i;if(i=n.get(t))return i;(i=o(a,e)).font="30px "+t;let s=(e=i.measureText("")).fontBoundingBoxAscent,r=Math.abs(e.fontBoundingBoxDescent);if(s)return e=s/(s+r),n.set(t,e),i.canvas.width=i.canvas.height=0,e;i.strokeStyle="red",i.clearRect(0,0,a,a),i.strokeText("g",0,0);let l=i.getImageData(0,0,a,a).data;r=0;for(let t=l.length-1-3;0<=t;t-=4)if(0<l[t]){r=Math.ceil(t/4/a);break}i.clearRect(0,0,a,a),i.strokeText("A",0,a),l=i.getImageData(0,0,a,a).data;for(let t=s=0,e=l.length;t<e;t+=4)if(0<l[t]){s=a-Math.floor(t/4/a);break}return i.canvas.width=i.canvas.height=0,s?(e=s/(s+r),n.set(t,e),e):(n.set(t,.8),.8)}(c,t._isOffscreenCanvasSupported);let g,f;f=0===d?(g=h[4],h[5]-p):(g=h[4]+p*Math.sin(d),h[5]-p*Math.cos(d));h="calc(var(--scale-factor)*",p=r.style;t._container===t._rootContainer?(p.left=(100*g/t._pageWidth).toFixed(2)+"%",p.top=(100*f/t._pageHeight).toFixed(2)+"%"):(p.left=h+g.toFixed(2)+"px)",p.top=h+f.toFixed(2)+"px)"),p.fontSize=h+u.toFixed(2)+"px)",p.fontFamily=c,l.fontSize=u,r.setAttribute("role","presentation"),r.textContent=e.str,r.dir=e.dir,t._fontInspectorEnabled&&(r.dataset.fontName=i.fontSubstitutionLoadedName||e.fontName),0!==d&&(l.angle=d*(180/Math.PI));let m=!1;(m=1<e.str.length||" "!==e.str&&e.transform[0]!==e.transform[3]&&(h=Math.abs(e.transform[0]))!==(p=Math.abs(e.transform[3]))&&1.5<Math.max(h,p)/Math.min(h,p)||m)&&(l.canvasWidth=i.vertical?e.height:e.width),t._textDivProperties.set(r,l),t._isReadableStream&&t._layoutText(r)}function h(t){var e,i,s,{div:r,scale:a,properties:n,ctx:o,prevFontSize:l,prevFontFamily:h}=t,d=r.style;let c="";0!==n.canvasWidth&&n.hasText&&(e=d.fontFamily,({canvasWidth:i,fontSize:s}=n),0<(l=(l===s&&h===e||(o.font=s*a+"px "+e,t.prevFontSize=s,t.prevFontFamily=e),o.measureText(r.textContent)).width))&&(c=`scaleX(${i*a/l})`),0<(c=0!==n.angle?`rotate(${n.angle}deg) `+c:c).length&&(d.transform=c)}class d{constructor({textContentSource:t,container:e,viewport:i,textDivs:a,textDivProperties:n,textContentItemsStr:l,isOffscreenCanvasSupported:h}){this._textContentSource=t,this._isReadableStream=t instanceof ReadableStream,this._container=this._rootContainer=e,this._textDivs=a||[],this._textContentItemsStr=l||[],this._isOffscreenCanvasSupported=h,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=n||new WeakMap,this._canceled=!1,this._capability=new s.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:i.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:o(0,h)};var{pageWidth:t,pageHeight:a,pageX:l,pageY:n}=i.rawDims;this._transform=[1,0,0,-1,-l,n+a],this._pageWidth=t,this._pageHeight=a,(0,r.setLayerDimensions)(e,i),this._capability.promise.finally((()=>{this._layoutTextParams=null})).catch((()=>{}))}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new s.AbortException("TextLayer task cancelled.")).catch((()=>{})),this._reader=null),this._capability.reject(new s.AbortException("TextLayer task cancelled."))}_processItems(t,e){for(const s of t){var i;void 0===s.str?"beginMarkedContentProps"===s.type||"beginMarkedContent"===s.type?(i=this._container,this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==s.id&&this._container.setAttribute("id",""+s.id),i.append(this._container)):"endMarkedContent"===s.type&&(this._container=this._container.parentNode):(this._textContentItemsStr.push(s.str),l(this,s,e))}}_layoutText(t){var e=this._layoutTextParams.properties=this._textDivProperties.get(t);this._layoutTextParams.div=t,h(this._layoutTextParams),e.hasText&&this._container.append(t),e.hasEOL&&((t=document.createElement("br")).setAttribute("role","presentation"),this._container.append(t))}_render(){const t=new s.PromiseCapability;let e=Object.create(null);if(this._isReadableStream){const i=()=>{this._reader.read().then((({value:s,done:r})=>{r?t.resolve():(Object.assign(e,s.styles),this._processItems(s.items,e),i())}),t.reject)};this._reader=this._textContentSource.getReader(),i()}else{if(!this._textContentSource)throw new Error('No "textContentSource" parameter specified.');var{items:i,styles:r}=this._textContentSource;this._processItems(i,r),t.resolve()}t.promise.then((()=>{e=null,function(t){if(!t._canceled){var e=t._textDivs,i=t._capability;if(!(1e5<e.length||t._isReadableStream))for(const i of e)t._layoutText(i);i.resolve()}}(this)}),this._capability.reject)}}},92:(t,e,i)=>{i.d(e,{PDFDataTransportStream:()=>a});var s=i(266),r=i(473);class a{constructor({length:t,initialData:e,progressiveDone:i=!1,contentDispositionFilename:r=null,disableRange:a=!1,disableStream:n=!1},o){(0,s.assert)(o,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=i,this._contentDispositionFilename=r,0<e?.length&&(i=(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e:new Uint8Array(e)).buffer,this._queuedChunks.push(i)),this._pdfDataRangeTransport=o,this._isStreamingSupported=!n,this._isRangeSupported=!a,this._contentLength=t,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener(((t,e)=>{this._onReceiveData({begin:t,chunk:e})})),this._pdfDataRangeTransport.addProgressListener(((t,e)=>{this._onProgress({loaded:t,total:e})})),this._pdfDataRangeTransport.addProgressiveReadListener((t=>{this._onReceiveData({chunk:t})})),this._pdfDataRangeTransport.addProgressiveDoneListener((()=>{this._onProgressiveDone()})),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e:new Uint8Array(e)).buffer;void 0===t?this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i):(e=this._rangeReaders.some((function(e){return e._begin===t&&(e._enqueue(i),!0)})),(0,s.assert)(e,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found."))}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){void 0===t.total?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){0<=(t=this._rangeReaders.indexOf(t))&&this._rangeReaders.splice(t,1)}getFullReader(){(0,s.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");var t=this._queuedChunks;return this._queuedChunks=null,new n(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){var i;return e<=this._progressiveDataLength?null:(i=new o(this,t,e),this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i)}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class n{constructor(t,e,i=!1,s=null){this._stream=t,this._done=i||!1,this._filename=(0,r.isPdfFile)(s)?s:null,this._queuedChunks=e||[],this._loaded=0;for(const t of this._queuedChunks)this._loaded+=t.byteLength;this._requests=[],this._headersReady=Promise.resolve(),(t._fullRequestReader=this).onProgress=null}_enqueue(t){this._done||(0<this._requests.length?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){var t;return 0<this._queuedChunks.length?{value:this._queuedChunks.shift(),done:!1}:this._done?{value:void 0,done:!0}:(t=new s.PromiseCapability,this._requests.push(t),t.promise)}cancel(t){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class o{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){var t;return this._queuedChunk?(t=this._queuedChunk,this._queuedChunk=null,{value:t,done:!1}):this._done?{value:void 0,done:!0}:(t=new s.PromiseCapability,this._requests.push(t),t.promise)}cancel(t){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},368:(t,e,i)=>{i.d(e,{GlobalWorkerOptions:()=>s});const s=Object.create(null);s.workerPort=null,s.workerSrc=""},160:(t,e,i)=>{i.d(e,{XfaLayer:()=>r});var s=i(521);class r{static setupStorage(t,e,i,s,r){var a=s.getValue(e,{value:null});switch(i.name){case"textarea":null!==a.value&&(t.textContent=a.value),"print"!==r&&t.addEventListener("input",(t=>{s.setValue(e,{value:t.target.value})}));break;case"input":if("radio"===i.attributes.type||"checkbox"===i.attributes.type){if(a.value===i.attributes.xfaOn?t.setAttribute("checked",!0):a.value===i.attributes.xfaOff&&t.removeAttribute("checked"),"print"===r)break;t.addEventListener("change",(t=>{s.setValue(e,{value:t.target.checked?t.target.getAttribute("xfaOn"):t.target.getAttribute("xfaOff")})}))}else{if(null!==a.value&&t.setAttribute("value",a.value),"print"===r)break;t.addEventListener("input",(t=>{s.setValue(e,{value:t.target.value})}))}break;case"select":if(null!==a.value){t.setAttribute("value",a.value);for(const t of i.children)t.attributes.value===a.value?t.attributes.selected=!0:t.attributes.hasOwnProperty("selected")&&delete t.attributes.selected}t.addEventListener("input",(t=>{t=-1===(t=t.target.options).selectedIndex?"":t[t.selectedIndex].value,s.setValue(e,{value:t})}))}}static setAttributes({html:t,element:e,storage:i=null,intent:s,linkService:r}){var a,n,o=e.attributes,l=t instanceof HTMLAnchorElement;for([a,n]of("radio"===o.type&&(o.name=o.name+"-"+s),Object.entries(o)))if(null!=n)switch(a){case"class":n.length&&t.setAttribute(a,n.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",n);break;case"style":Object.assign(t.style,n);break;case"textContent":t.textContent=n;break;default:l&&("href"===a||"newWindow"===a)||t.setAttribute(a,n)}l&&r.addLinkAttributes(t,o.href,o.newWindow),i&&o.dataId&&this.setupStorage(t,o.dataId,e,i)}static render(t){var e=t.annotationStorage,i=t.linkService,r=t.xfaHtml,a=t.intent||"display",n=document.createElement(r.name),o=(r.attributes&&this.setAttributes({html:n,element:r,intent:a,linkService:i}),"richText"!==a),l=t.div,h=(l.append(n),t.viewport&&(t=`matrix(${t.viewport.transform.join(",")})`,l.style.transform=t),o&&l.setAttribute("class","xfaLayer xfaFont"),[]);if(0===r.children.length)r.value&&(t=document.createTextNode(r.value),n.append(t),o)&&s.XfaText.shouldBuildText(r.name)&&h.push(t);else{for(var d=[[r,-1,n]];0<d.length;){var c,[u,p,g]=d.at(-1);p+1===u.children.length?d.pop():null!==(p=u.children[++d.at(-1)[1]])&&("#text"===(u=p.name)?(c=document.createTextNode(p.value),h.push(c),g.append(c)):(c=p?.attributes?.xmlns?document.createElementNS(p.attributes.xmlns,u):document.createElement(u),g.append(c),p.attributes&&this.setAttributes({html:c,element:p,storage:e,intent:a,linkService:i}),0<p.children?.length?d.push([p,-1,c]):p.value&&(g=document.createTextNode(p.value),o&&s.XfaText.shouldBuildText(u)&&h.push(g),c.append(g))))}for(const t of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))t.setAttribute("readOnly",!0)}return{textDivs:h}}static update(t){var e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}},521:(t,e,i)=>{i.d(e,{XfaText:()=>s});class s{static textContent(t){const e=[];var i={items:e,styles:Object.create(null)};return function t(i){if(i){let a=null;var r=i.name;if("#text"===r)a=i.value;else{if(!s.shouldBuildText(r))return;i?.attributes?.textContent?a=i.attributes.textContent:i.value&&(a=i.value)}if(null!==a&&e.push({str:a}),i.children)for(const e of i.children)t(e)}}(t),i}static shouldBuildText(t){return!("textarea"===t||"input"===t||"option"===t||"select"===t)}}},907:(t,e,i)=>{i.a(t,(async(t,s)=>{try{i.d(e,{AbortException:()=>r.AbortException,AnnotationEditorLayer:()=>l.AnnotationEditorLayer,AnnotationEditorParamsType:()=>r.AnnotationEditorParamsType,AnnotationEditorType:()=>r.AnnotationEditorType,AnnotationEditorUIManager:()=>h.AnnotationEditorUIManager,AnnotationLayer:()=>d.AnnotationLayer,AnnotationMode:()=>r.AnnotationMode,CMapCompressionType:()=>r.CMapCompressionType,ColorPicker:()=>c.ColorPicker,DOMSVGFactory:()=>n.DOMSVGFactory,DrawLayer:()=>u.DrawLayer,FeatureTest:()=>r.FeatureTest,GlobalWorkerOptions:()=>p.GlobalWorkerOptions,ImageKind:()=>r.ImageKind,InvalidPDFException:()=>r.InvalidPDFException,MissingPDFException:()=>r.MissingPDFException,OPS:()=>r.OPS,Outliner:()=>g.Outliner,PDFDataRangeTransport:()=>a.PDFDataRangeTransport,PDFDateString:()=>n.PDFDateString,PDFWorker:()=>a.PDFWorker,PasswordResponses:()=>r.PasswordResponses,PermissionFlag:()=>r.PermissionFlag,PixelsPerInch:()=>n.PixelsPerInch,PromiseCapability:()=>r.PromiseCapability,RenderingCancelledException:()=>n.RenderingCancelledException,UnexpectedResponseException:()=>r.UnexpectedResponseException,Util:()=>r.Util,VerbosityLevel:()=>r.VerbosityLevel,XfaLayer:()=>f.XfaLayer,build:()=>a.build,createValidAbsoluteUrl:()=>r.createValidAbsoluteUrl,fetchData:()=>n.fetchData,getDocument:()=>a.getDocument,getFilenameFromUrl:()=>n.getFilenameFromUrl,getPdfFilenameFromUrl:()=>n.getPdfFilenameFromUrl,getXfaPageViewport:()=>n.getXfaPageViewport,isDataScheme:()=>n.isDataScheme,isPdfFile:()=>n.isPdfFile,noContextMenu:()=>n.noContextMenu,normalizeUnicode:()=>r.normalizeUnicode,renderTextLayer:()=>o.renderTextLayer,setLayerDimensions:()=>n.setLayerDimensions,shadow:()=>r.shadow,updateTextLayer:()=>o.updateTextLayer,version:()=>a.version});var r=i(266),a=i(406),n=i(473),o=i(739),l=i(629),h=i(812),d=i(640),c=i(97),u=i(423),p=i(368),g=i(405),f=i(160),m=t([a]);a=(m.then?(await m)():m)[0];s()}catch(t){s(t)}}))},694:(t,e,i)=>{i.d(e,{MessageHandler:()=>f});var s=i(266);const r=1,a=2,n=1,o=2,l=3,h=4,d=5,c=6,u=7,p=8;function g(t){switch(t instanceof Error||"object"==typeof t&&null!==t||(0,s.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new s.AbortException(t.message);case"MissingPDFException":return new s.MissingPDFException(t.message);case"PasswordException":return new s.PasswordException(t.message,t.code);case"UnexpectedResponseException":return new s.UnexpectedResponseException(t.message,t.status);case"UnknownErrorException":return new s.UnknownErrorException(t.message,t.details);default:return new s.UnknownErrorException(t.message,t.toString())}}class f{constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=t=>{const e=t.data;if(e.targetName===this.sourceName)if(e.stream)this.#Gr(e);else if(e.callback){t=e.callbackId;var s=this.callbackCapabilities[t];if(!s)throw new Error("Cannot resolve callback "+t);if(delete this.callbackCapabilities[t],e.callback===r)s.resolve(e.data);else{if(e.callback!==a)throw new Error("Unexpected callback case");s.reject(g(e.reason))}}else{const t=this.actionHandler[e.action];if(!t)throw new Error("Unknown action from worker: "+e.action);if(e.callbackId){const s=this.sourceName,n=e.sourceName;new Promise((function(i){i(t(e.data))})).then((function(t){i.postMessage({sourceName:s,targetName:n,callback:r,callbackId:e.callbackId,data:t})}),(function(t){i.postMessage({sourceName:s,targetName:n,callback:a,callbackId:e.callbackId,reason:g(t)})}))}else e.streamId?this.#Wr(e):t(e.data)}},i.addEventListener("message",this._onComObjOnMessage)}on(t,e){var i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){var r=this.callbackId++,a=new s.PromiseCapability;this.callbackCapabilities[r]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:e},i)}catch(t){a.reject(t)}return a.promise}sendWithStream(t,e,i,r){const a=this.streamId++,o=this.sourceName,l=this.targetName,h=this.comObj;return new ReadableStream({start:i=>{var n=new s.PromiseCapability;return this.streamControllers[a]={controller:i,startCall:n,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:o,targetName:l,action:t,streamId:a,data:e,desiredSize:i.desiredSize},r),n.promise},pull:t=>{var e=new s.PromiseCapability;return this.streamControllers[a].pullCall=e,h.postMessage({sourceName:o,targetName:l,stream:c,streamId:a,desiredSize:t.desiredSize}),e.promise},cancel:t=>{(0,s.assert)(t instanceof Error,"cancel must have a valid reason");var e=new s.PromiseCapability;return this.streamControllers[a].cancelCall=e,this.streamControllers[a].isClosed=!0,h.postMessage({sourceName:o,targetName:l,stream:n,streamId:a,reason:g(t)}),e.promise}},i)}#Wr(t){const e=t.streamId,i=this.sourceName,r=t.sourceName,a=this.comObj,n=this,o=this.actionHandler[t.action],c={enqueue(t,n=1,o){var l;this.isCancelled||(l=this.desiredSize,this.desiredSize-=n,0<l&&this.desiredSize<=0&&(this.sinkCapability=new s.PromiseCapability,this.ready=this.sinkCapability.promise),a.postMessage({sourceName:i,targetName:r,stream:h,streamId:e,chunk:t},o))},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:i,targetName:r,stream:l,streamId:e}),delete n.streamSinks[e])},error(t){(0,s.assert)(t instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:i,targetName:r,stream:d,streamId:e,reason:g(t)}))},sinkCapability:new s.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[e]=c,new Promise((function(e){e(o(t.data,c))})).then((function(){a.postMessage({sourceName:i,targetName:r,stream:p,streamId:e,success:!0})}),(function(t){a.postMessage({sourceName:i,targetName:r,stream:p,streamId:e,reason:g(t)})}))}#Gr(t){const e=t.streamId,i=this.sourceName,r=t.sourceName,a=this.comObj,f=this.streamControllers[e],m=this.streamSinks[e];switch(t.stream){case p:t.success?f.startCall.resolve():f.startCall.reject(g(t.reason));break;case u:t.success?f.pullCall.resolve():f.pullCall.reject(g(t.reason));break;case c:m?(m.desiredSize<=0&&0<t.desiredSize&&m.sinkCapability.resolve(),m.desiredSize=t.desiredSize,new Promise((function(t){t(m.onPull?.())})).then((function(){a.postMessage({sourceName:i,targetName:r,stream:u,streamId:e,success:!0})}),(function(t){a.postMessage({sourceName:i,targetName:r,stream:u,streamId:e,reason:g(t)})}))):a.postMessage({sourceName:i,targetName:r,stream:u,streamId:e,success:!0});break;case h:(0,s.assert)(f,"enqueue should have stream controller"),f.isClosed||f.controller.enqueue(t.chunk);break;case l:(0,s.assert)(f,"close should have stream controller"),f.isClosed||(f.isClosed=!0,f.controller.close(),this.#Kr(f,e));break;case d:(0,s.assert)(f,"error should have stream controller"),f.controller.error(g(t.reason)),this.#Kr(f,e);break;case o:t.success?f.cancelCall.resolve():f.cancelCall.reject(g(t.reason)),this.#Kr(f,e);break;case n:m&&(new Promise((function(e){e(m.onCancel?.(g(t.reason)))})).then((function(){a.postMessage({sourceName:i,targetName:r,stream:o,streamId:e,success:!0})}),(function(t){a.postMessage({sourceName:i,targetName:r,stream:o,streamId:e,reason:g(t)})})),m.sinkCapability.reject(g(t.reason)),m.isCancelled=!0,delete this.streamSinks[e]);break;default:throw new Error("Unexpected stream case")}}async#Kr(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},825:(t,e,i)=>{i.d(e,{MurmurHash3_64:()=>n});var s=i(266);const r=4294901760,a=65535;class n{constructor(t){this.h1=t?4294967295&t:3285377520,this.h2=t?4294967295&t:3285377520}update(t){let e,i;if("string"==typeof t){e=new Uint8Array(2*t.length);for(let s=i=0,r=t.length;s<r;s++){var n=t.charCodeAt(s);n<=255?e[i++]=n:(e[i++]=n>>>8,e[i++]=255&n)}}else{if(!(0,s.isArrayBuffer)(t))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");e=t.slice(),i=e.byteLength}var o=i>>2,l=i-4*o,h=new Uint32Array(e.buffer,0,o);let d,c=0,u=this.h1,p=this.h2;var g=3432918353,f=461845907;for(let t=0;t<o;t++)1&t?(c=(c=(c=(c=h[t])*g&r|11601*c&a)<<15|c>>>17)*f&r|13715*c&a,u=5*(u=(u^=c)<<13|u>>>19)+3864292196):(d=(d=(d=(d=h[t])*g&r|11601*d&a)<<15|d>>>17)*f&r|13715*d&a,p=5*(p=(p^=d)<<13|p>>>19)+3864292196);switch(c=0,l){case 3:c^=e[4*o+2]<<16;case 2:c^=e[4*o+1]<<8;case 1:c=(c=(c=(c^=e[4*o])*g&r|11601*c&a)<<15|c>>>17)*f&r|13715*c&a,1&o?u^=c:p^=c}this.h1=u,this.h2=p}hexdigest(){var t=this.h1,e=this.h2;t=3981806797*(t^=e>>>1)&r|36045*t&a;return t=444984403*(t^=(e=4283543511*e&r|(2950163797*(e<<16|t>>>16)&r)>>>16)>>>1)&r|60499*t&a,((t^=(e=3301882366*e&r|(3120437893*(e<<16|t>>>16)&r)>>>16)>>>1)>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}},266:(t,e,i)=>{i.d(e,{AbortException:()=>I,AnnotationBorderStyleType:()=>v,AnnotationEditorParamsType:()=>u,AnnotationEditorPrefix:()=>d,AnnotationEditorType:()=>c,AnnotationMode:()=>h,AnnotationPrefix:()=>H,AnnotationType:()=>m,BaseException:()=>E,CMapCompressionType:()=>y,FONT_IDENTITY_MATRIX:()=>a,FeatureTest:()=>F,FormatError:()=>L,IDENTITY_MATRIX:()=>r,ImageKind:()=>f,InvalidPDFException:()=>P,LINE_FACTOR:()=>o,MAX_IMAGE_SIZE_TO_CACHE:()=>n,MissingPDFException:()=>M,OPS:()=>w,PasswordException:()=>S,PasswordResponses:()=>x,PermissionFlag:()=>p,PromiseCapability:()=>N,RenderingIntentFlag:()=>l,TextRenderingMode:()=>g,UnexpectedResponseException:()=>R,UnknownErrorException:()=>T,Util:()=>B,VerbosityLevel:()=>b,assert:()=>function(t,e){t||_(e)},bytesToString:()=>D,createValidAbsoluteUrl:()=>function(t,e=null,i=null){if(t)try{if(i&&"string"==typeof t&&(i.addDefaultProtocol&&t.startsWith("www.")&&2<=t.match(/\./g)?.length&&(t="http://"+t),i.tryConvertEncoding))try{t=function(t){return decodeURIComponent(escape(t))}(t)}catch{}var s=e?new URL(t,e):new URL(t);if(function(t){switch(t?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return 1;default:return}}(s))return s}catch{}return null},getUuid:()=>function(){if("undefined"!=typeof crypto&&"function"==typeof crypto?.randomUUID)return crypto.randomUUID();var t=new Uint8Array(32);if("undefined"!=typeof crypto&&"function"==typeof crypto?.getRandomValues)crypto.getRandomValues(t);else for(let e=0;e<32;e++)t[e]=Math.floor(255*Math.random());return D(t)},getVerbosityLevel:()=>function(){return A},info:()=>function(t){A>=b.INFOS&&console.log("Info: "+t)},isArrayBuffer:()=>function(t){return"object"==typeof t&&void 0!==t?.byteLength},isNodeJS:()=>s,normalizeUnicode:()=>function(t){return z||(z=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,j=new Map([["","t"]])),t.replaceAll(z,((t,e,i)=>e?e.normalize("NFKC"):j.get(i)))},objectFromMap:()=>function(t){var e=Object.create(null);for(var[i,s]of t)e[i]=s;return e},setVerbosityLevel:()=>function(t){Number.isInteger(t)&&(A=t)},shadow:()=>C,string32:()=>function(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)},stringToBytes:()=>function(t){"string"!=typeof t&&_("Invalid argument for stringToBytes");var e=t.length,i=new Uint8Array(e);for(let s=0;s<e;++s)i[s]=255&t.charCodeAt(s);return i},unreachable:()=>_,warn:()=>function(t){A>=b.WARNINGS&&console.log("Warning: "+t)}});const s=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type),r=[1,0,0,1,0,0],a=[.001,0,0,.001,0,0],n=1e7,o=1.35,l={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},h={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},d="pdfjs_internal_editor_",c={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},u={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32},p={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},g={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},f={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},m={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},v={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},b={ERRORS:0,WARNINGS:1,INFOS:5},y={NONE:0,BINARY:1},w={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},x={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let A=b.WARNINGS;function _(t){throw new Error(t)}function C(t,e,i,s=!1){return Object.defineProperty(t,e,{value:i,enumerable:!s,configurable:!0,writable:!1}),i}k.prototype=new Error;const E=k.constructor=k;function k(t,e){this.constructor===k&&_("Cannot initialize BaseException."),this.message=t,this.name=e}class S extends E{constructor(t,e){super(t,"PasswordException"),this.code=e}}class T extends E{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class P extends E{constructor(t){super(t,"InvalidPDFException")}}class M extends E{constructor(t){super(t,"MissingPDFException")}}class R extends E{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class L extends E{constructor(t){super(t,"FormatError")}}class I extends E{constructor(t){super(t,"AbortException")}}function D(t){"object"==typeof t&&void 0!==t?.length||_("Invalid argument for bytesToString");var e=t.length;if(e<8192)return String.fromCharCode.apply(null,t);var i=[];for(let r=0;r<e;r+=8192){var s=Math.min(r+8192,e);s=t.subarray(r,s);i.push(String.fromCharCode.apply(null,s))}return i.join("")}class F{static get isLittleEndian(){return C(this,"isLittleEndian",function(){var t;return 1===((t=new Uint8Array(4))[0]=1,t=new Uint32Array(t.buffer,0,1))[0]}())}static get isEvalSupported(){return C(this,"isEvalSupported",function(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return C(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}static get platform(){return"undefined"!=typeof navigator&&"string"==typeof navigator?.platform?C(this,"platform",{isMac:navigator.platform.includes("Mac")}):C(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){return C(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const O=[...Array(256).keys()].map((t=>t.toString(16).padStart(2,"0")));class B{static makeHexColor(t,e,i){return"#"+O[t]+O[e]+O[i]}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[1],e[1]=i),e[0]*=t[0],e[1]*=t[0],t[3]<0&&(i=e[2],e[2]=e[3],e[3]=i),e[2]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[2],e[2]=i,i=e[1],e[1]=e[3],e[3]=i,t[1]<0&&(i=e[2],e[2]=e[3],e[3]=i),e[2]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[1],e[1]=i),e[0]*=t[2],e[1]*=t[2]),e[0]+=t[4],e[1]+=t[4],e[2]+=t[5],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){return[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]}static applyInverseTransform(t,e){var i=e[0]*e[3]-e[1]*e[2];return[(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/i,(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/i]}static getAxialAlignedBoundingBox(t,e){var i=this.applyTransform(t,e),s=this.applyTransform(t.slice(2,4),e),r=this.applyTransform([t[0],t[3]],e);t=this.applyTransform([t[2],t[1]],e);return[Math.min(i[0],s[0],r[0],t[0]),Math.min(i[1],s[1],r[1],t[1]),Math.max(i[0],s[0],r[0],t[0]),Math.max(i[1],s[1],r[1],t[1])]}static inverseTransform(t){var e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){var e=[t[0],t[2],t[1],t[3]],i=t[0]*e[0]+t[1]*e[2],s=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2];t=(e=(i+(t=t[2]*e[1]+t[3]*e[3]))/2)-(i=Math.sqrt((i+t)**2-4*(i*t-r*s))/2)||1;return[Math.sqrt(e+i||1),Math.sqrt(t)]}static normalizeRect(t){var e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){var i,s=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));return r<s||(i=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),(t=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3])))<i)?null:[s,i,r,t]}static bezierBoundingBox(t,e,i,s,r,a,n,o){var l=[],h=[[],[]];let d,c,u,p,g,f,m,v;for(let h=0;h<2;++h)u=0===h?(c=6*t-12*i+6*r,d=-3*t+9*i-9*r+3*n,3*i-3*t):(c=6*e-12*s+6*a,d=-3*e+9*s-9*a+3*o,3*s-3*e),Math.abs(d)<1e-12?Math.abs(c)<1e-12||0<(p=-u/c)&&p<1&&l.push(p):(m=c*c-4*u*d,v=Math.sqrt(m),m<0||(0<(g=(-c+v)/(2*d))&&g<1&&l.push(g),0<(f=(-c-v)/(2*d))&&f<1&&l.push(f)));let b,y=l.length;for(var w=y;y--;)b=1-(p=l[y]),h[0][y]=b*b*b*t+3*b*b*p*i+3*b*p*p*r+p*p*p*n,h[1][y]=b*b*b*e+3*b*b*p*s+3*b*p*p*a+p*p*p*o;return h[0][w]=t,h[1][w]=e,h[0][w+1]=n,h[1][w+1]=o,h[0].length=h[1].length=w+2,[Math.min(...h[0]),Math.min(...h[1]),Math.max(...h[0]),Math.max(...h[1])]}}class N{#Xr=!1;constructor(){this.promise=new Promise(((t,e)=>{this.resolve=e=>{this.#Xr=!0,t(e)},this.reject=t=>{this.#Xr=!0,e(t)}}))}get settled(){return this.#Xr}}let z=null,j=null;const H="pdfjs_internal_id_"}},ys={};function ws(t){var e=ys[t];return void 0!==e||(e=ys[t]={exports:{}},bs[t](e,e.exports,ws)),e.exports}gs="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",fs="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",ms="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",vs=t=>{t&&t.d<1&&(t.d=1,t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},ws.a=(t,e,i)=>{i&&((s=[]).d=-1);var s,r,a,n,o=new Set,l=t.exports,h=new Promise(((t,e)=>{n=e,a=t}));h[fs]=l,h[gs]=t=>(s&&t(s),o.forEach(t),h.catch((t=>{}))),t.exports=h,e((t=>{r=t.map((t=>{if(null!==t&&"object"==typeof t){if(t[gs])return t;var e,i;if(t.then)return(e=[]).d=0,t.then((t=>{i[fs]=t,vs(e)}),(t=>{i[ms]=t,vs(e)})),(i={})[gs]=t=>t(e),i}var s={};return s[gs]=t=>{},s[fs]=t,s}));var e,i=()=>r.map((t=>{if(t[ms])throw t[ms];return t[fs]}));return t=new Promise((t=>{(e=()=>t(i)).r=0;var a=t=>t!==s&&!o.has(t)&&(o.add(t),t)&&!t.d&&(e.r++,t.push(e));r.map((t=>t[gs](a)))})),e.r?t:i()}),(t=>(t?n(h[ms]=t):a(l),vs(s)))),s&&s.d<0&&(s.d=0)},ws.d=(t,e)=>{for(var i in e)ws.o(e,i)&&!ws.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},ws.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var xs=ws(907),As=((xs=globalThis.pdfjsLib=await(globalThis.pdfjsLibPromise=xs)).AbortException,xs.AnnotationEditorLayer,xs.AnnotationEditorParamsType,xs.AnnotationEditorType,xs.AnnotationEditorUIManager,xs.AnnotationLayer,xs.AnnotationMode,xs.CMapCompressionType,xs.ColorPicker,xs.DOMSVGFactory,xs.DrawLayer,xs.FeatureTest,xs.GlobalWorkerOptions),_s=(xs.ImageKind,xs.InvalidPDFException,xs.MissingPDFException,xs.OPS,xs.Outliner,xs.PDFDataRangeTransport,xs.PDFDateString,xs.PDFWorker,xs.PasswordResponses,xs.PermissionFlag,xs.PixelsPerInch,xs.PromiseCapability,xs.RenderingCancelledException,xs.UnexpectedResponseException,xs.Util,xs.VerbosityLevel,xs.XfaLayer,xs.build,xs.createValidAbsoluteUrl,xs.fetchData,xs.getDocument);xs.getFilenameFromUrl,xs.getPdfFilenameFromUrl,xs.getXfaPageViewport,xs.isDataScheme,xs.isPdfFile,xs.noContextMenu,xs.normalizeUnicode,xs.renderTextLayer,xs.setLayerDimensions,xs.shadow,xs.updateTextLayer,xs.version;const Cs=st('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M19 3H5C3.89543 3 3 3.89543 3 5V19C3 20.1046 3.89543 21 5 21H19C20.1046 21 21 20.1046 21 19V5C21 3.89543 20.1046 3 19 3Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M9 11C10.1046 11 11 10.1046 11 9C11 7.89543 10.1046 7 9 7C7.89543 7 7 7.89543 7 9C7 10.1046 7.89543 11 9 11Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M21 14.9999L17.914 11.9139C17.5389 11.539 17.0303 11.3284 16.5 11.3284C15.9697 11.3284 15.4611 11.539 15.086 11.9139L6 20.9999" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">'),Es=()=>Cs(),ks=st('<div class="flex flex-col justify-end mb-2 items-end guest-container"><canvas class="mr-2" width="304" height="138"></canvas><span class="px-4 py-2 mr-2 whitespace-pre-wrap max-w-full chatbot-guest-bubble chatbot-file-bubble flex" data-testid="guest-bubble"> <!> '),Ss=(oe.setOptions({isNoP:!0}),t=>{let e;As.workerSrc="https://cdn.jsdelivr.net/npm/pdfjs-dist@4.0.379/build/pdf.worker.mjs",k((async()=>{if(e.getContext){const r=e.getContext("2d");if(t.message.name.toLowerCase().includes(".pdf")){var i=await(await _s(await t.message.file.arrayBuffer()).promise).getPage(1),s=r.canvas.width/i.getViewport({scale:1}).width;s=i.getViewport({scale:s});await i.render({viewport:s,canvasContext:r}).promise}else{const e=new Image;e.onload=function(){var t=r.canvas.width/e.width;r.drawImage(e,0,0,e.width*t,e.height*t)},e.src=t.message.source}}}));const i=C((()=>t.message.name.includes(".pdf")?U(ps,{}):U(Es,{})));{const s=ks(),r=s.firstChild,a=r.nextSibling,n=a.firstChild.nextSibling;n.nextSibling,s.style.setProperty("margin-left","50px");return"function"==typeof e?lt(e,r):e=r,r.style.setProperty("border-radius","5px 5px 0px 0px"),ht(a,i,n),ht(a,(()=>t.message.name),null),ht(s,U(X,{get when(){return t.showAvatar},get children(){return U(Wt,{get initialAvatarSrc(){return t.avatarSrc}})}}),null),A((e=>{var i=t.backgroundColor??"#3B81F6",s=t.textColor??"#ffffff";return i!==e._v$&&(null!=(e._v$=i)?a.style.setProperty("background-color",i):a.style.removeProperty("background-color")),s!==e._v$2&&(null!=(e._v$2=s)?a.style.setProperty("color",s):a.style.removeProperty("color")),e}),{_v$:void 0,_v$2:void 0}),s}}),Ts=st('<svg width="55" height="54" viewBox="0 0 55 54" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="uiw:loading" clip-path="url(#clip0_5250_254)"><path id="Vector" fill-rule="evenodd" clip-rule="evenodd" d="M30.175 42.8C31.5939 42.8 32.9547 43.3637 33.958 44.367C34.9613 45.3703 35.525 46.7311 35.525 48.15C35.525 49.5689 34.9613 50.9297 33.958 51.933C32.9547 52.9363 31.5939 53.5 30.175 53.5C28.7561 53.5 27.3953 52.9363 26.392 51.933C25.3887 50.9297 24.825 49.5689 24.825 48.15C24.825 46.7311 25.3887 45.3703 26.392 44.367C27.3953 43.3637 28.7561 42.8 30.175 42.8ZM13.4322 34.775C15.2058 34.775 16.9068 35.4796 18.161 36.7337C19.4151 37.9879 20.1197 39.6889 20.1197 41.4625C20.1197 43.2361 19.4151 44.9371 18.161 46.1913C16.9068 47.4454 15.2058 48.15 13.4322 48.15C11.6585 48.15 9.95755 47.4454 8.7034 46.1913C7.44925 44.9371 6.74467 43.2361 6.74467 41.4625C6.74467 39.6889 7.44925 37.9879 8.7034 36.7337C9.95755 35.4796 11.6585 34.775 13.4322 34.775ZM44.4033 36.1125C45.8222 36.1125 47.183 36.6762 48.1863 37.6795C49.1897 38.6828 49.7533 40.0436 49.7533 41.4625C49.7533 42.8814 49.1897 44.2422 48.1863 45.2455C47.183 46.2488 45.8222 46.8125 44.4033 46.8125C42.9844 46.8125 41.6236 46.2488 40.6203 45.2455C39.617 44.2422 39.0533 42.8814 39.0533 41.4625C39.0533 40.0436 39.617 38.6828 40.6203 37.6795C41.6236 36.6762 42.9844 36.1125 44.4033 36.1125ZM50.2375 24.9283C51.3017 24.9283 52.3223 25.3511 53.0748 26.1036C53.8273 26.856 54.25 27.8766 54.25 28.9408C54.25 30.005 53.8273 31.0256 53.0748 31.7781C52.3223 32.5306 51.3017 32.9533 50.2375 32.9533C49.1733 32.9533 48.1527 32.5306 47.4002 31.7781C46.6477 31.0256 46.225 30.005 46.225 28.9408C46.225 27.8766 46.6477 26.856 47.4002 26.1036C48.1527 25.3511 49.1733 24.9283 50.2375 24.9283ZM7.4375 16.05C9.21113 16.05 10.9121 16.7546 12.1663 18.0087C13.4204 19.2629 14.125 20.9639 14.125 22.7375C14.125 24.5111 13.4204 26.2121 12.1663 27.4663C10.9121 28.7204 9.21113 29.425 7.4375 29.425C5.66386 29.425 3.96287 28.7204 2.70872 27.4663C1.45457 26.2121 0.75 24.5111 0.75 22.7375C0.75 20.9639 1.45457 19.2629 2.70872 18.0087C3.96287 16.7546 5.66386 16.05 7.4375 16.05ZM48.3275 13.9287C49.037 13.9287 49.7174 14.2106 50.2191 14.7122C50.7207 15.2139 51.0025 15.8943 51.0025 16.6037C51.0025 17.3132 50.7207 17.9936 50.2191 18.4952C49.7174 18.9969 49.037 19.2787 48.3275 19.2787C47.6181 19.2787 46.9377 18.9969 46.436 18.4952C45.9344 17.9936 45.6525 17.3132 45.6525 16.6037C45.6525 15.8943 45.9344 15.2139 46.436 14.7122C46.9377 14.2106 47.6181 13.9287 48.3275 13.9287ZM22.15 0C24.2784 0 26.3196 0.845489 27.8245 2.35047C29.3295 3.85545 30.175 5.89664 30.175 8.025C30.175 10.1534 29.3295 12.1946 27.8245 13.6995C26.3196 15.2045 24.2784 16.05 22.15 16.05C20.0216 16.05 17.9804 15.2045 16.4755 13.6995C14.9705 12.1946 14.125 10.1534 14.125 8.025C14.125 5.89664 14.9705 3.85545 16.4755 2.35047C17.9804 0.845489 20.0216 0 22.15 0ZM42.2125 8.025C42.5672 8.025 42.9074 8.16591 43.1583 8.41675C43.4091 8.66757 43.55 9.00777 43.55 9.3625C43.55 9.71723 43.4091 10.0574 43.1583 10.3083C42.9074 10.5591 42.5672 10.7 42.2125 10.7C41.8578 10.7 41.5176 10.5591 41.2667 10.3083C41.0159 10.0574 40.875 9.71723 40.875 9.3625C40.875 9.00777 41.0159 8.66757 41.2667 8.41675C41.5176 8.16591 41.8578 8.025 42.2125 8.025Z" fill="#2A767E"></path></g><defs><clipPath id="clip0_5250_254"><rect width="53.5" height="53.5" fill="white" transform="translate(0.75)">'),Ps=()=>Ts(),Ms=st('<div class="flex justify-start mb-2 items-start host-container"><span class="px-4 py-4 ml-2 whitespace-pre-wrap max-w-full chatbot-host-bubble flex flex-col gap-2 items-center justify-center text-center" data-testid="host-bubble"><div class="chatbot-loading-icon-animation"></div>Estamos quase l! Por favor, aguarde enquanto preparamos o resumo do seu laudo mdico...'),Rs=t=>{{const e=Ms(),i=e.firstChild,s=i.firstChild;return e.style.setProperty("margin-right","50px"),ht(e,U(X,{get when(){return t.showAvatar},get children(){return U(Wt,{get initialAvatarSrc(){return t.avatarSrc}})}}),i),i.style.setProperty("border-radius","6px"),ht(s,U(Ps,{})),A((e=>{var s=t.backgroundColor??"#f7f8ff",r=t.textColor??"#303235";return s!==e._v$&&(null!=(e._v$=s)?i.style.setProperty("background-color",s):i.style.removeProperty("background-color")),r!==e._v$2&&(null!=(e._v$2=r)?i.style.setProperty("color",r):i.style.removeProperty("color")),e}),{_v$:void 0,_v$2:void 0}),e}},Ls=["png","jpg","jpeg","gif"],Is=t=>(t=t.split(".").reverse()[0],Ls.includes(t)),Ds=st('<div><div class="flex w-full h-[calc(100vh-117px)] justify-center"><div class="overflow-y-scroll min-w-full w-full min-h-[calc(100vh-117px)] px-3 pt-20 relative scrollable-container chatbot-chat-view scroll-smooth">'),Fs=st('<div class="chatbot-container p-4">'),Os=st('<button class="header-button">+ Novo Laudo mdico'),Bs=st("<div>"),Ns=st('<div class="w-full h-32">'),zs="Hi there! How can I help?",js=t=>{let e,i,s;const[r,a]=x(),[n,o]=x(!1),[l,h]=x(!1),[d,c]=x(""),[u,p]=x(!1),[g,f]=x(!1),[m,v]=x(!1),[b,y]=x({}),[w,S]=x([{message:t.welcomeMessage??zs,type:"apiMessage"}],{equals:!1}),[T,P]=x(""),[M,R]=x(!1),L=(k((()=>{i&&setTimeout((()=>{e?.scrollTo(0,e.scrollHeight)}),50)})),()=>{setTimeout((()=>{e?.scrollTo(0,e.scrollHeight)}),50)}),I=t=>{S((e=>[...e.map(((i,s)=>s===e.length-1?{...i,message:i.message+t}:i))]))},D=t=>{S((e=>[...e.map(((i,s)=>s===e.length-1?{...i,sourceDocuments:t}:i))]))},F=async(e,i=!1)=>{if(c(e),""!==e.trim()){p(!0),L();const n=t.welcomeMessage??zs;var s,a=w().filter((t=>t.message!==n));i=(i||S((t=>[...t,{message:e,type:"userMessage"}])),{question:e,history:a,overrideConfig:{text:r()}});if((a=(t.chatflowConfig&&(i.overrideConfig=t.chatflowConfig),M()&&(i.socketIOClientId=T()),await Mt({chatflowid:t.chatflowid,apiHost:t.apiHost,body:i}))).data){const t=B(a.data);"object"==typeof t&&t.text&&t.sourceDocuments?M()||S((e=>[...e,{message:t.text,sourceDocuments:t.sourceDocuments,type:"apiMessage"}])):M()||S((e=>[...e,{message:t,type:"apiMessage"}])),p(!1),c(""),L()}a.error&&(i=a.error,console.error(i),a="string"==typeof i?i:i.response.data||i.response.status+": "+i.response.statusText,[s="Oops! There seems to be an error. Please try again."]=[a],S((t=>[...t,{message:s,type:"apiMessage"}])),p(!1),c(""),L())}},O=(_((()=>{w()&&L()})),_((()=>{t.fontSize&&s&&(s.style.fontSize=t.fontSize+"px")})),_(function(t,e,i){const s=Array.isArray(t);let r,a=i&&i.defer;return i=>{let n;if(s){n=Array(t.length);for(let e=0;e<t.length;e++)n[e]=t[e]()}else n=t();var o;if(!a)return o=E((()=>e(n,r,i))),r=n,o;a=!1}}(r,(t=>{n()&&void 0!==t&&F("resuma este laudo mdico",!0)}))),_((async()=>{var e=(await(({chatflowid:t,apiHost:e="http://localhost:3000"})=>Et({method:"GET",url:e+"/api/v1/chatflows-streaming/"+t}))({chatflowid:t.chatflowid,apiHost:t.apiHost})).data;e&&R(e?.isStreaming??!1);const i=Gi(t.apiHost);return i.on("connect",(()=>{P(i.id)})),i.on("start",(()=>{f(!0),S((t=>[...t,{message:"",type:"apiMessage"}]))})),i.on("end",(()=>{f(!1)})),i.on("sourceDocuments",D),i.on("token",I),()=>{c(""),p(!1),S([{message:t.welcomeMessage??zs,type:"apiMessage"}]),i&&(i.disconnect(),P(""))}})),t=>{try{return new URL(t)}catch(t){}}),B=t=>(t.sourceDocuments&&t.sourceDocuments[0].metadata.length&&(t.sourceDocuments=t.sourceDocuments.map((t=>{var e=t.metadata.reduce(((t,e)=>(t[e.name]=e.value,t)),{});return{pageContent:t.pageContent,metadata:e}}))),t),N=async e=>{o(!0),p(!0),h(!1),S([{message:t.welcomeMessage??zs,type:"apiMessage"},{message:e[0],type:"userFile"}]),e=(await(async({extractUrl:t="http://localhost:3000",body:e})=>{var i=new FormData;return i.append("files",e.files.file,e.files.name),i.append("question",""),(await fetch(t,{method:"POST",body:i})).json()})({extractUrl:Is(e[0].name)?t.fileTextExtractionUrl.image:t.fileTextExtractionUrl.default,body:{files:e[0]}})).text,e&&a(e)},z=()=>{h(!0)};return[C((()=>{const t=C((()=>!!n()));return()=>{return t()&&((e=Os()).$$click=z,e);var e}})()),(()=>{const r=Ds(),a=r.firstChild,n=a.firstChild;var o;return"function"==typeof(o=("function"==typeof(o=s)?lt(o,r):s=r,e))?lt(o,n):e=n,ht(n,U(K,{get each(){return[...w()]},children:(e,i)=>[C((()=>{const i=C((()=>"userMessage"===e.type));return()=>i()&&U(de,{get message(){return e.message},get backgroundColor(){return t.userMessage?.backgroundColor},get textColor(){return t.userMessage?.textColor},get showAvatar(){return t.userMessage?.showAvatar},get avatarSrc(){return t.userMessage?.avatarSrc}})})()),C((()=>{const i=C((()=>"apiMessage"===e.type));return()=>i()&&U(ue,{get message(){return e.message},get backgroundColor(){return t.botMessage?.backgroundColor},get textColor(){return t.botMessage?.textColor},get showAvatar(){return t.botMessage?.showAvatar},get avatarSrc(){return t.botMessage?.avatarSrc}})})()),C((()=>{const i=C((()=>"userFile"===e.type));return()=>i()&&U(Ss,{get message(){return e.message},get backgroundColor(){return t.userMessage?.backgroundColor},get textColor(){return t.userMessage?.textColor},get showAvatar(){return t.userMessage?.showAvatar},get avatarSrc(){return t.userMessage?.avatarSrc}})})()),C((()=>{const t=C((()=>!("userMessage"!==e.type||!u()||i()!==w().length-1)));return()=>t()&&U(me,{})})()),C((()=>{const s=C((()=>!("userFile"!==e.type||!u()||i()!==w().length-1)));return()=>s()&&U(Rs,{get backgroundColor(){return t.botMessage?.backgroundColor},get textColor(){return t.botMessage?.textColor},get showAvatar(){return t.botMessage?.showAvatar},get avatarSrc(){return t.botMessage?.avatarSrc}})})()),C((()=>{const t=C((()=>!(!e.sourceDocuments||!e.sourceDocuments.length)));return()=>{return t()&&((i=Bs()).style.setProperty("display","flex"),i.style.setProperty("flex-direction","row"),i.style.setProperty("width","100%"),ht(i,U(K,{get each(){return[...(t=>{const e=[],i=[];return(t=B(t)).sourceDocuments.forEach((t=>{O(t.metadata.source)&&!e.includes(t.metadata.source)?(e.push(t.metadata.source),i.push(t)):O(t.metadata.source)||i.push(t)})),i})(e)]},children:t=>{const e=O(t.metadata.source);return U(be,{get pageContent(){return e?e.pathname:t.pageContent},get metadata(){return t.metadata},onSourceClick:()=>{e?window.open(t.metadata.source,"_blank"):(y(t),v(!0))}})}})),i);var i}})())]})),ht(a,U(Hs,{ref(t){"function"==typeof i?i(t):i=t}}),null),A((()=>nt(r,"relative flex w-full h-[calc(100vh-117px)] text-base overflow-hidden bg-cover bg-center flex-col items-center chatbot-container "+t.class))),r})(),(ht(j=Fs(),(()=>{const e=C((()=>!!n()));return()=>e()?U(qt,{get disabled(){return g()||u()},get backgroundColor(){return t.textInput?.backgroundColor},get textColor(){return t.textInput?.textColor},get placeholder(){return u()?"Gerando resposta...":t.textInput?.placeholder},get sendButtonColor(){return t.textInput?.sendButtonColor},get fontSize(){return t.fontSize},get defaultValue(){return d()},onSubmit:F}):U(Qi,{get backgroundColor(){return t.buttonInput?.backgroundColor},get textColor(){return t.buttonInput?.textColor},onSubmit:()=>{h(!0)},children:"Enviar Laudo Mdico"})})(),null),ht(j,U(Ce,{get badgeBackgroundColor(){return t.badgeBackgroundColor},get poweredByTextColor(){return t.poweredByTextColor},botContainer:s}),null),j),C((()=>{const t=C((()=>!!m()));return()=>t()&&U(Yi,{get isOpen(){return m()},get value(){return b()},onClose:()=>v(!1)})})()),C((()=>{const e=C((()=>!!l()));return()=>e()&&U(ts,{get isOpen(){return l()},onClose:()=>h(!1),get children(){return U(cs,{onSubmit:N,get buttonInput(){return t.buttonInput}})}})})())];var j},Hs=t=>{return e=Ns(),"function"==typeof(i=t.ref)?lt(i,e):t.ref=e,e;var e,i},Us=(rt(["click"]),st("<style>")),qs=st('<div part="bot">'),Vs=t=>{const[e]=W(t,["theme"]),[i,s]=x(!1),[r,a]=x(!1);var n;return[(ht(n=Us(),At),n),U(Pt,G((()=>e.theme?.button),{toggleBot:()=>{i()?s(!1):(r()||a(!0),s(!0))},get isBotOpened(){return i()}})),(()=>{const s=qs();return s.style.setProperty("transition","transform 200ms cubic-bezier(0, 1.2, 1, 1), opacity 150ms ease-out"),s.style.setProperty("transform-origin","bottom right"),s.style.setProperty("box-shadow","rgb(0 0 0 / 16%) 0px 5px 40px"),s.style.setProperty("z-index","42424242"),ht(s,U(X,{get when(){return r()},get children(){return U(js,{get badgeBackgroundColor(){return e.theme?.chatWindow?.backgroundColor},get welcomeMessage(){return e.theme?.chatWindow?.welcomeMessage},get poweredByTextColor(){return e.theme?.chatWindow?.poweredByTextColor},get textInput(){return e.theme?.chatWindow?.textInput},get botMessage(){return e.theme?.chatWindow?.botMessage},get userMessage(){return e.theme?.chatWindow?.userMessage},get fontSize(){return e.theme?.chatWindow?.fontSize},get chatflowid(){return t.chatflowid},get chatflowConfig(){return t.chatflowConfig},get apiHost(){return t.apiHost},get fileTextExtractionUrl(){return t.fileTextExtractionUrl}})}})),A((r=>{var a=e.theme?.chatWindow?.height?e.theme?.chatWindow?.height.toString()+"px":"calc(100% - 100px)",n=i()?"scale3d(1, 1, 1)":"scale3d(0, 0, 1)",o=e.theme?.chatWindow?.backgroundColor||"#ffffff",l="fixed sm:right-5 rounded-lg w-full sm:w-[400px] max-h-[704px]"+(i()?" opacity-1":" opacity-0 pointer-events-none")+("large"===t.theme?.button?.size?" bottom-24":" bottom-20");return a!==r._v$&&(null!=(r._v$=a)?s.style.setProperty("height",a):s.style.removeProperty("height")),n!==r._v$2&&(null!=(r._v$2=n)?s.style.setProperty("transform",n):s.style.removeProperty("transform")),o!==r._v$3&&(null!=(r._v$3=o)?s.style.setProperty("background-color",o):s.style.removeProperty("background-color")),l!==r._v$4&&nt(s,r._v$4=l),r}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),s})()]},$s=st("<style>"),Gs=st("<div>"),Ws=(t,{element:e})=>{const[i,s]=x(!1),r=new IntersectionObserver((t=>{t.some((t=>t.isIntersecting))&&s(!0)}));return k((()=>{r.observe(e)})),S((()=>{r.disconnect()})),[(ht(a=$s(),At),a),U(X,{get when(){return i()},get children(){const e=Gs();return e.style.setProperty("margin","0px"),ht(e,U(js,{get badgeBackgroundColor(){return t.theme?.chatWindow?.backgroundColor},get welcomeMessage(){return t.theme?.chatWindow?.welcomeMessage},get poweredByTextColor(){return t.theme?.chatWindow?.poweredByTextColor},get textInput(){return t.theme?.chatWindow?.textInput},get buttonInput(){return t.theme?.chatWindow?.buttonInput},get botMessage(){return t.theme?.chatWindow?.botMessage},get userMessage(){return t.theme?.chatWindow?.userMessage},get fontSize(){return t.theme?.chatWindow?.fontSize},get chatflowid(){return t.chatflowid},get chatflowConfig(){return t.chatflowConfig},get apiHost(){return t.apiHost},get fileTextExtractionUrl(){return t.fileTextExtractionUrl}})),A((i=>{var s=t.theme?.chatWindow?.backgroundColor||"#ffffff",r=t.theme?.chatWindow?.height?t.theme?.chatWindow?.height.toString()+"px":"100vh",a=t.theme?.chatWindow?.width?t.theme?.chatWindow?.width.toString()+"px":"100%";return s!==i._v$&&(null!=(i._v$=s)?e.style.setProperty("background-color",s):e.style.removeProperty("background-color")),r!==i._v$2&&(null!=(i._v$2=r)?e.style.setProperty("height",r):e.style.removeProperty("height")),a!==i._v$3&&(null!=(i._v$3=a)?e.style.setProperty("width",a):e.style.removeProperty("width")),i}),{_v$:void 0,_v$2:void 0,_v$3:void 0}),e}})];var a},Ks=t=>{var e=t.id?document.getElementById(t.id):document.querySelector("flowise-fullchatbot");if(!e)throw new Error("<flowise-fullchatbot> element not found.");Object.assign(e,t)},Xs=t=>{var e=document.createElement("flowise-chatbot");Object.assign(e,t),document.body.appendChild(e)},Ys=("undefined"!=typeof window&&(bt("flowise-fullchatbot",yt,Ws),bt("flowise-chatbot",yt,Vs)),{initFull:Ks,init:Xs});(t=>{"undefined"!=typeof window&&(window.Chatbot={...t})})(Ys);var Js=Object.freeze({__proto__:null,default:{}});function Qs(t,e,i){if(i||2===arguments.length)for(var s,r=0,a=e.length;r<a;r++)!s&&r in e||((s=s||Array.prototype.slice.call(e,0,r))[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var Zs={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},tr=/([astvzqmhlc])([^astvzqmhlc]*)/gi,er=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function ir(t){var e=[];return"M"!==(t=String(t).trim())[0]&&"m"!==t[0]||t.replace(tr,(function(t,i,s){var r=function(t){return(t=t.match(er))?t.map(Number):[]}(s),a=i.toLowerCase(),n=i;if("m"===a&&2<r.length&&(e.push(Qs([n],r.splice(0,2),!0)),a="l",n="m"===n?"l":"L"),!(r.length<Zs[a]))for(e.push(Qs([n],r.splice(0,Zs[a]),!0));r.length>=Zs[a]&&r.length&&Zs[a];)e.push(Qs([n],r.splice(0,Zs[a]),!0));return""})),e}function sr(t,e){var i=t.x*Math.cos(e)-t.y*Math.sin(e);e=t.y*Math.cos(e)+t.x*Math.sin(e);t.x=i,t.y=e}function rr(t,e,i){t.x+=e,t.y+=i}function ar(t,e){t.x*=e,t.y*=e}var nr=function(){function t(e){var i;this.commands=[],e&&e instanceof t?(i=this.commands).push.apply(i,e.commands):e&&(this.commands=ir(e))}return t.prototype.addPath=function(e){var i;e&&e instanceof t&&(i=this.commands).push.apply(i,e.commands)},t.prototype.moveTo=function(t,e){this.commands.push(["M",t,e])},t.prototype.lineTo=function(t,e){this.commands.push(["L",t,e])},t.prototype.arc=function(t,e,i,s,r,a){this.commands.push(["AC",t,e,i,s,r,!!a])},t.prototype.arcTo=function(t,e,i,s,r){this.commands.push(["AT",t,e,i,s,r])},t.prototype.ellipse=function(t,e,i,s,r,a,n,o){this.commands.push(["E",t,e,i,s,r,a,n,!!o])},t.prototype.closePath=function(){this.commands.push(["Z"])},t.prototype.bezierCurveTo=function(t,e,i,s,r,a){this.commands.push(["C",t,e,i,s,r,a])},t.prototype.quadraticCurveTo=function(t,e,i,s){this.commands.push(["Q",t,e,i,s])},t.prototype.rect=function(t,e,i,s){this.commands.push(["R",t,e,i,s])},t.prototype.roundRect=function(t,e,i,s,r){void 0===r?this.commands.push(["RR",t,e,i,s,0]):this.commands.push(["RR",t,e,i,s,r])},t}();function or(t,e){var i,s,r,a,n,o,l,h,d,c,u,p,g,f,m,v=0,b=0,y=null,w=null,x=null,A=null,_=null,C=null;t.beginPath();for(var E=0;E<e.length;++E){"S"!==(p=e[E][0])&&"s"!==p&&"C"!==p&&"c"!==p&&(w=y=null),"T"!==p&&"t"!==p&&"Q"!==p&&"q"!==p&&(A=x=null);var k=void 0;switch(p){case"m":case"M":k=e[E],"m"===p?(v+=k[1],b+=k[2]):(v=k[1],b=k[2]),"M"!==p&&_||(_={x:v,y:b}),t.moveTo(v,b);break;case"l":v+=(k=e[E])[1],b+=k[2],t.lineTo(v,b);break;case"L":v=(k=e[E])[1],b=k[2],t.lineTo(v,b);break;case"H":v=(k=e[E])[1],t.lineTo(v,b);break;case"h":v+=(k=e[E])[1],t.lineTo(v,b);break;case"V":b=(k=e[E])[1],t.lineTo(v,b);break;case"v":b+=(k=e[E])[1],t.lineTo(v,b);break;case"a":case"A":if(k=e[E],null===C)throw new Error("This should never happen");"a"===p?(v+=k[6],b+=k[7]):(v=k[6],b=k[7]),h=k[1],d=k[2],r=k[3]*Math.PI/180,i=!!k[4],s=!!k[5],sr(o={x:(C.x-(m={x:v,y:b}).x)/2,y:(C.y-m.y)/2},-r),1<(a=o.x*o.x/(h*h)+o.y*o.y/(d*d))&&(h*=a=Math.sqrt(a),d*=a),a=h*h*d*d,n=h*h*o.y*o.y+d*d*o.x*o.x,ar(g={x:h*o.y/d,y:-d*o.x/h},s!=i?Math.sqrt((a-n)/n)||0:-Math.sqrt((a-n)/n)||0),i=Math.atan2((o.y-g.y)/d,(o.x-g.x)/h),a=Math.atan2(-(o.y+g.y)/d,-(o.x+g.x)/h),sr(g,r),rr(g,(m.x+C.x)/2,(m.y+C.y)/2),t.save(),t.translate(g.x,g.y),t.rotate(r),t.scale(h,d),t.arc(0,0,1,i,a,!s),t.restore();break;case"C":y=(k=e[E])[3],w=k[4],v=k[5],b=k[6],t.bezierCurveTo(k[1],k[2],y,w,v,b);break;case"c":k=e[E],t.bezierCurveTo(k[1]+v,k[2]+b,k[3]+v,k[4]+b,k[5]+v,k[6]+b),y=k[3]+v,w=k[4]+b,v+=k[5],b+=k[6];break;case"S":k=e[E],null!==y&&null!==w||(y=v,w=b),t.bezierCurveTo(2*v-y,2*b-w,k[1],k[2],k[3],k[4]),y=k[1],w=k[2],v=k[3],b=k[4];break;case"s":k=e[E],null!==y&&null!==w||(y=v,w=b),t.bezierCurveTo(2*v-y,2*b-w,k[1]+v,k[2]+b,k[3]+v,k[4]+b),y=k[1]+v,w=k[2]+b,v+=k[3],b+=k[4];break;case"Q":x=(k=e[E])[1],A=k[2],v=k[3],b=k[4],t.quadraticCurveTo(x,A,v,b);break;case"q":x=(k=e[E])[1]+v,A=k[2]+b,v+=k[3],b+=k[4],t.quadraticCurveTo(x,A,v,b);break;case"T":null!==x&&null!==A||(x=v,A=b),x=2*v-x,A=2*b-A,v=(k=e[E])[1],b=k[2],t.quadraticCurveTo(x,A,v,b);break;case"t":null!==x&&null!==A||(x=v,A=b),x=2*v-x,A=2*b-A,v+=(k=e[E])[1],b+=k[2],t.quadraticCurveTo(x,A,v,b);break;case"z":case"Z":_&&(v=_.x,b=_.y),_=null,t.closePath();break;case"AC":v=(k=e[E])[1],b=k[2],l=k[3],i=k[4],a=k[5],f=k[6],t.arc(v,b,l,i,a,f);break;case"AT":n=(k=e[E])[1],o=k[2],v=k[3],b=k[4],l=k[5],t.arcTo(n,o,v,b,l);break;case"E":v=(k=e[E])[1],b=k[2],h=k[3],d=k[4],r=k[5],i=k[6],a=k[7],f=k[8],t.save(),t.translate(v,b),t.rotate(r),t.scale(h,d),t.arc(0,0,1,i,a,f),t.restore();break;case"R":v=(k=e[E])[1],b=k[2],c=k[3],u=k[4],_={x:v,y:b},t.rect(v,b,c,u);break;case"RR":v=(k=e[E])[1],b=k[2],c=k[3],u=k[4],m=k[5],_={x:v,y:b},t.roundRect(v,b,c,u,m)}C?(C.x=v,C.y=b):C={x:v,y:b}}}function lr(t,e,i,s,r){var a=this;if("number"==typeof(r=void 0===r?0:r)&&(r=[r]),Array.isArray(r)){if(0===r.length||4<r.length)throw new RangeError("Failed to execute 'roundRect' on '".concat(this.constructor.name,"': ").concat(r.length," radii provided. Between one and four radii are necessary."));if(r.forEach((function(t){if(t<0)throw new RangeError("Failed to execute 'roundRect' on '".concat(a.constructor.name,"': Radius value ").concat(t," is negative."))})),1===r.length&&0===r[0])return this.rect(t,e,i,s);var n,o,l,h=Math.min(i,s)/2,d=n=o=l=Math.min(h,r[0]);2===r.length&&(n=l=Math.min(h,r[1])),3===r.length&&(n=l=Math.min(h,r[1]),o=Math.min(h,r[2])),4===r.length&&(n=Math.min(h,r[1]),o=Math.min(h,r[2]),l=Math.min(h,r[3])),this.moveTo(t,e+s-l),this.arcTo(t,e,t+d,e,d),this.arcTo(t+i,e,t+i,e+n,n),this.arcTo(t+i,e+s,t+i-o,e+s,o),this.arcTo(t,e+s,t,e+s-l,l),this.moveTo(t,e)}}(function(t){var e,i,s,r;t&&t.CanvasRenderingContext2D&&!t.Path2D&&(e=t.CanvasRenderingContext2D,i=e.prototype.fill,s=e.prototype.stroke,r=e.prototype.isPointInPath,e.prototype.fill=function(){for(var t,e=[],s=0;s<arguments.length;s++)e[s]=arguments[s];if(!(e[0]instanceof nr))return i.apply(this,[t=e[0]||"nonzero"]);t=e[1]||"nonzero",or(this,e[0].commands),i.apply(this,[t])},e.prototype.stroke=function(t){t&&or(this,t.commands),s.apply(this)},e.prototype.isPointInPath=function(){for(var t,e,i,s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return s[0]instanceof nr?(t=s[1],e=s[2],i=s[3]||"nonzero",or(this,s[0].commands),r.apply(this,[t,e,i])):r.apply(this,s)},t.Path2D=nr)})(window),function(t){var e;t&&t.CanvasRenderingContext2D&&(e=t.CanvasRenderingContext2D,t=t.Path2D,e&&!e.prototype.roundRect&&(e.prototype.roundRect=lr),t)&&!t.prototype.roundRect&&(t.prototype.roundRect=lr)}(window);var hr=Object.freeze({__proto__:null});export{Ys as default};
