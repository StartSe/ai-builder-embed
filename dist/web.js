function t(t){return Object.keys(t).reduce(((e,s)=>{var r=t[s];return e[s]=Object.assign({},r),!i(r.value)||function(t){return"[object Function]"===Object.prototype.toString.call(t)}(r.value)||Array.isArray(r.value)||(e[s].value=Object.assign({},r.value)),Array.isArray(r.value)&&(e[s].value=r.value.slice(0)),e}),{})}function e(t){if(t)try{return JSON.parse(t)}catch(e){return t}}function s(t,e,s){if(null==s||!1===s)return t.removeAttribute(e);let i=JSON.stringify(s);t.__updating[e]=!0,"true"===i&&(i=""),t.setAttribute(e,i),Promise.resolve().then((()=>delete t.__updating[e]))}function i(t){return null!=t&&("object"==typeof t||"function"==typeof t)}let r;function n(i,n){const a=Object.keys(n);return class extends i{static get observedAttributes(){return a.map((t=>n[t].attribute))}constructor(){super(),this.__initialized=!1,this.__released=!1,this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props={}}connectedCallback(){if(!this.__initialized){this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props=function(i,r){const n=t(r);return Object.keys(r).forEach((t=>{const r=n[t],a=i.getAttribute(r.attribute),o=i[t];a&&(r.value=r.parse?e(a):a),null!=o&&(r.value=Array.isArray(o)?o.slice(0):o),r.reflect&&s(i,r.attribute,r.value),Object.defineProperty(i,t,{get:()=>r.value,set(e){var i=r.value;r.value=e,r.reflect&&s(this,r.attribute,r.value);for(let s=0,r=this.__propertyChangedCallbacks.length;s<r;s++)this.__propertyChangedCallbacks[s](t,e,i)},enumerable:!0,configurable:!0})})),n}(this,n);var i=function(t){return Object.keys(t).reduce(((e,s)=>(e[s]=t[s].value,e)),{})}(this.props),a=this.Component,o=r;try{(r=this).__initialized=!0,function(t){return"function"==typeof t&&0===t.toString().indexOf("class")}(a)?new a(i,{element:this}):a(i,{element:this})}finally{r=o}}}async disconnectedCallback(){if(await Promise.resolve(),!this.isConnected){this.__propertyChangedCallbacks.length=0;for(var t=null;t=this.__releaseCallbacks.pop();)t(this);delete this.__initialized,this.__released=!0}}attributeChangedCallback(t,s,i){!this.__initialized||this.__updating[t]||(t=this.lookupProp(t))in n&&(null==i&&!this[t]||(this[t]=n[t].parse?e(i):i))}lookupProp(t){if(n)return a.find((e=>t===e||t===n[e].attribute))}get renderRoot(){return this.shadowRoot||this.attachShadow({mode:"open"})}addReleaseCallback(t){this.__releaseCallbacks.push(t)}addPropertyChangedCallback(t){this.__propertyChangedCallbacks.push(t)}}}function a(t,e={},s={}){const{BaseElement:r=HTMLElement,extension:a}=s;return s=>{if(!t)throw new Error("tag is required to register a Component");let o=customElements.get(t);return o?o.prototype.Component=s:((o=n(r,function(t){return t?Object.keys(t).reduce(((e,s)=>{var r=t[s];return e[s]=i(r)&&"value"in r?r:{value:r},e[s].attribute||(e[s].attribute=function(t){return t.replace(/\.?([A-Z]+)/g,((t,e)=>"-"+e.toLowerCase())).replace("_","-").replace(/^-/,"")}(s)),e[s].parse="parse"in e[s]?e[s].parse:"string"!=typeof e[s].value,e}),{}):{}}(e))).prototype.Component=s,o.prototype.registeredTag=t,customElements.define(t,o,a)),o}}const o=Symbol("solid-proxy"),l=Symbol("solid-track"),h={equals:(t,e)=>t===e};let d=D;const c=1,u=2,p={owned:null,cleanups:null,context:null,owner:null};var g=null;let f=null,m=null,v=null,b=null,y=0;function w(t,e){const s=m,i=g,r=0===t.length,n=r?p:{owned:null,cleanups:null,context:null,owner:void 0===e?i:e},a=r?t:()=>t((()=>E((()=>N(n)))));g=n,m=null;try{return I(a,!0)}finally{m=s,g=i}}function x(t,e){const s={value:t,observers:null,observerSlots:null,comparator:(e=e?Object.assign({},h,e):h).equals||void 0};return[T.bind(s),t=>("function"==typeof t&&(t=t(s.value)),P(s,t))]}function A(t,e,s){M(R(t,e,!1,c))}function _(t,e,s){d=F,(t=R(t,e,!1,c)).user=!0,b?b.push(t):M(t)}function C(t,e,s){return s=s?Object.assign({},h,s):h,(t=R(t,e,!0,0)).observers=null,t.observerSlots=null,t.comparator=s.equals||void 0,M(t),T.bind(t)}function E(t){if(null===m)return t();var e=m;m=null;try{return t()}finally{m=e}}function k(t){_((()=>E(t)))}function S(t){return null!==g&&(null===g.cleanups?g.cleanups=[t]:g.cleanups.push(t)),t}function T(){var t;return this.sources&&this.state&&(this.state===c?M(this):(t=v,v=null,I((()=>O(this)),!1),v=t)),m&&(t=this.observers?this.observers.length:0,m.sources?(m.sources.push(this),m.sourceSlots.push(t)):(m.sources=[this],m.sourceSlots=[t]),this.observers?(this.observers.push(m),this.observerSlots.push(m.sources.length-1)):(this.observers=[m],this.observerSlots=[m.sources.length-1])),this.value}function P(t,e,s){var i=t.value;return t.comparator&&t.comparator(i,e)||(t.value=e,t.observers&&t.observers.length&&I((()=>{for(let i=0;i<t.observers.length;i+=1){var e=t.observers[i],s=f&&f.running;s&&f.disposed.has(e),(s?e.tState:e.state)||((e.pure?v:b).push(e),e.observers&&B(e)),s||(e.state=c)}if(1e6<v.length)throw v=[],new Error}),!1)),e}function M(t){var e,s,i;t.fn&&(N(t),e=g,s=m,i=y,function(t,e,s){let i;try{i=t.fn(e)}catch(e){return t.pure&&(t.state=c,t.owned&&t.owned.forEach(N),t.owned=null),t.updatedAt=s+1,z(e)}(!t.updatedAt||t.updatedAt<=s)&&(null!=t.updatedAt&&"observers"in t?P(t,i):t.value=i,t.updatedAt=s)}(m=g=t,t.value,i),m=s,g=e)}function R(t,e,s,i=c,r){return t={fn:t,state:i,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:g,context:null,pure:s},null!==g&&g!==p&&(g.owned?g.owned.push(t):g.owned=[t]),t}function L(t){if(0!==t.state){if(t.state===u)return O(t);if(t.suspense&&E(t.suspense.inFallback))return t.suspense.effects.push(t);const s=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<y);)t.state&&s.push(t);for(let i=s.length-1;0<=i;i--){var e;(t=s[i]).state===c?M(t):t.state===u&&(e=v,v=null,I((()=>O(t,s[0])),!1),v=e)}}}function I(t,e){if(v)return t();let s=!1;e||(v=[]),b?s=!0:b=[],y++;try{var i=t();return function(t){if(v&&(D(v),v=null),!t){const t=b;b=null,t.length&&I((()=>d(t)),!1)}}(s),i}catch(t){s||(b=null),v=null,z(t)}}function D(t){for(let e=0;e<t.length;e++)L(t[e])}function F(t){let e,s=0;for(e=0;e<t.length;e++){var i=t[e];i.user?t[s++]=i:L(i)}for(e=0;e<s;e++)L(t[e])}function O(t,e){for(let r=t.state=0;r<t.sources.length;r+=1){var s,i=t.sources[r];i.sources&&((s=i.state)===c?i!==e&&(!i.updatedAt||i.updatedAt<y)&&L(i):s===u&&O(i,e))}}function B(t){for(let s=0;s<t.observers.length;s+=1){var e=t.observers[s];e.state||(e.state=u,(e.pure?v:b).push(e),e.observers&&B(e))}}function N(t){let e;if(t.sources)for(;t.sources.length;){var s,i,r=t.sources.pop(),n=t.sourceSlots.pop(),a=r.observers;a&&a.length&&(s=a.pop(),i=r.observerSlots.pop(),n<a.length)&&(a[s.sourceSlots[i]=n]=s,r.observerSlots[n]=i)}if(t.owned){for(e=t.owned.length-1;0<=e;e--)N(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;0<=e;e--)t.cleanups[e]();t.cleanups=null}t.state=0,t.context=null}function z(t){throw t}const j=Symbol("fallback");function U(t){for(let e=0;e<t.length;e++)t[e]()}function H(t,e){return E((()=>t(e||{})))}function q(){return!0}const $={get:(t,e,s)=>e===o?s:t.get(e),has:(t,e)=>e===o||t.has(e),set:q,deleteProperty:q,getOwnPropertyDescriptor:(t,e)=>({configurable:!0,enumerable:!0,get:()=>t.get(e),set:q,deleteProperty:q}),ownKeys:t=>t.keys()};function V(t){return(t="function"==typeof t?t():t)||{}}function G(...t){let e=!1;for(let i=0;i<t.length;i++){var s=t[i];e=e||!!s&&o in s,t[i]="function"==typeof s?(e=!0,C(s)):s}if(e)return new Proxy({get(e){for(let i=t.length-1;0<=i;i--){var s=V(t[i])[e];if(void 0!==s)return s}},has(e){for(let s=t.length-1;0<=s;s--)if(e in V(t[s]))return!0;return!1},keys(){var e=[];for(let s=0;s<t.length;s++)e.push(...Object.keys(V(t[s])));return[...new Set(e)]}},$);var i={};for(let e=t.length-1;0<=e;e--)if(t[e])for(const s in Object.getOwnPropertyDescriptors(t[e]))s in i||Object.defineProperty(i,s,{enumerable:!0,get(){for(let i=t.length-1;0<=i;i--){var e=(t[i]||{})[s];if(void 0!==e)return e}}});return i}function W(t,...e){const s=new Set(e.flat());var i;if(o in t)return(i=e.map((e=>new Proxy({get:s=>e.includes(s)?t[s]:void 0,has:s=>e.includes(s)&&s in t,keys:()=>e.filter((e=>e in t))},$)))).push(new Proxy({get:e=>s.has(e)?void 0:t[e],has:e=>!s.has(e)&&e in t,keys:()=>Object.keys(t).filter((t=>!s.has(t)))},$)),i;const r=Object.getOwnPropertyDescriptors(t);return e.push(Object.keys(r).filter((t=>!s.has(t)))),e.map((e=>{var s={};for(let i=0;i<e.length;i++){const n=e[i];n in t&&Object.defineProperty(s,n,r[n]||{get:()=>t[n],set:()=>!0,enumerable:!0})}return s}))}function K(t){var e="fallback"in t&&{fallback:()=>t.fallback};return C(function(t,e,s={}){let i=[],r=[],n=[],a=0,o=1<e.length?[]:null;return S((()=>U(n))),()=>{let h,d,c=t()||[];return c[l],E((()=>{let t,e,l,p,g,f,m,v,b,y=c.length;if(0===y)0!==a&&(U(n),n=[],i=[],r=[],a=0,o=o&&[]),s.fallback&&(i=[j],r[0]=w((t=>(n[0]=t,s.fallback()))),a=1);else if(0===a){for(r=new Array(y),d=0;d<y;d++)i[d]=c[d],r[d]=w(u);a=y}else{for(l=new Array(y),p=new Array(y),o&&(g=new Array(y)),f=0,m=Math.min(a,y);f<m&&i[f]===c[f];f++);for(m=a-1,v=y-1;m>=f&&v>=f&&i[m]===c[v];m--,v--)l[v]=r[m],p[v]=n[m],o&&(g[v]=o[m]);for(t=new Map,e=new Array(v+1),d=v;d>=f;d--)b=c[d],h=t.get(b),e[d]=void 0===h?-1:h,t.set(b,d);for(h=f;h<=m;h++)b=i[h],void 0!==(d=t.get(b))&&-1!==d?(l[d]=r[h],p[d]=n[h],o&&(g[d]=o[h]),d=e[d],t.set(b,d)):n[h]();for(d=f;d<y;d++)d in l?(r[d]=l[d],n[d]=p[d],o&&(o[d]=g[d],o[d](d))):r[d]=w(u);r=r.slice(0,a=y),i=c.slice(0)}return r}));function u(t){var s;return n[d]=t,o?([t,s]=x(d),o[d]=s,e(c[d],t)):e(c[d])}}}((()=>t.each),t.children,e||void 0))}function X(t){const e=t.keyed,s=C((()=>t.when),void 0,{equals:(t,s)=>e?t===s:!t==!s});return C((()=>{const i=s();if(i){const r=t.children;return"function"==typeof r&&0<r.length?E((()=>r(e?i:()=>{if(E(s))return t.when;throw(t=>`Stale read from <${t}>.`)("Show")}))):r}return t.fallback}),void 0,void 0)}const Y=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline","allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"]),J=new Set(["innerHTML","textContent","innerText","children"]),Q=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Z=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});const tt=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),et={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};const st="_$DX_DELEGATE";function it(t,e,s){let i;const r=()=>{var e=document.createElement("template");return e.innerHTML=t,(s?e.content.firstChild:e.content).firstChild};return(e=e?()=>(i=i||r()).cloneNode(!0):()=>E((()=>document.importNode(i=i||r(),!0)))).cloneNode=e}function rt(t,e=window.document){var s=e[st]||(e[st]=new Set);for(let r=0,n=t.length;r<n;r++){var i=t[r];s.has(i)||(s.add(i),e.addEventListener(i,ut))}}function nt(t,e,s){null==s?t.removeAttribute(e):t.setAttribute(e,s)}function at(t,e){null==e?t.removeAttribute("class"):t.className=e}function ot(t,e={},s,i){const r={};return i||A((()=>r.children=pt(t,e.children,r.children))),A((()=>e.ref&&e.ref(t))),A((()=>function(t,e,s,i,r={},n=!1){e=e||{};for(const i in r)i in e||"children"!==i&&(r[i]=ct(t,i,null,r[i],s,n));for(const o in e){var a;"children"===o?i||pt(t,e.children):(a=e[o],r[o]=ct(t,o,a,r[o],s,n))}}(t,e,s,!0,r,!0))),r}function lt(t,e,s){return E((()=>t(e,s)))}function ht(t,e,s,i){if(void 0!==s&&(i=i||[]),"function"!=typeof e)return pt(t,e,i,s);A((i=>pt(t,e(),i,s)),i)}function dt(t,e,s){var i=e.trim().split(/\s+/);for(let e=0,r=i.length;e<r;e++)t.classList.toggle(i[e],s)}function ct(t,e,s,i,r,n){let a,o,l,h,d;var c;return"style"===e?function(t,e,s){if(!e)return s?nt(t,"style"):e;var i=t.style;if("string"==typeof e)return i.cssText=e;let r,n;for(n in"string"==typeof s&&(i.cssText=s=void 0),e=e||{},s=s||{})null==e[n]&&i.removeProperty(n),delete s[n];for(n in e)(r=e[n])!==s[n]&&(i.setProperty(n,r),s[n]=r);return s}(t,s,i):"classList"===e?function(t,e,s={}){var i=Object.keys(e||{}),r=Object.keys(s);let n,a;for(n=0,a=r.length;n<a;n++){var o=r[n];o&&"undefined"!==o&&!e[o]&&(dt(t,o,!1),delete s[o])}for(n=0,a=i.length;n<a;n++){var l=i[n],h=!!e[l];l&&"undefined"!==l&&s[l]!==h&&h&&(dt(t,l,!0),s[l]=h)}return s}(t,s,i):s===i?i:("ref"===e?n||s(t):"on:"===e.slice(0,3)?(n=e.slice(3),i&&t.removeEventListener(n,i),s&&t.addEventListener(n,s)):"oncapture:"===e.slice(0,10)?(n=e.slice(10),i&&t.removeEventListener(n,i,!0),s&&t.addEventListener(n,s,!0)):"on"===e.slice(0,2)?(n=e.slice(2).toLowerCase(),!(c=tt.has(n))&&i&&(i=Array.isArray(i)?i[0]:i,t.removeEventListener(n,i)),(c||s)&&(function(t,e,s,i){if(i)Array.isArray(s)?(t["$$"+e]=s[0],t[`$$${e}Data`]=s[1]):t["$$"+e]=s;else if(Array.isArray(s)){const i=s[0];t.addEventListener(e,s[0]=e=>i.call(t,s[1],e))}else t.addEventListener(e,s)}(t,n,s,c),c)&&rt([n])):"attr:"===e.slice(0,5)?nt(t,e.slice(5),s):(d="prop:"===e.slice(0,5))||(l=J.has(e))||!r&&((h=function(t,e){return"object"==typeof(t=Z[t])?t[e]?t.$:void 0:t}(e,t.tagName))||(o=Y.has(e)))||(a=t.nodeName.includes("-"))?(d&&(e=e.slice(5),o=!0),"class"===e||"className"===e?at(t,s):!a||o||l?t[h||e]=s:t[function(t){return t.toLowerCase().replace(/-([a-z])/g,((t,e)=>e.toUpperCase()))}(e)]=s):(i=r&&-1<e.indexOf(":")&&et[e.split(":")[0]])?function(t,e,s,i){null==i?t.removeAttributeNS(e,s):t.setAttributeNS(e,s,i)}(t,i,e,s):nt(t,Q[e]||e,s),s)}function ut(t){var e="$$"+t.type;let s=t.composedPath&&t.composedPath()[0]||t.target;for(t.target!==s&&Object.defineProperty(t,"target",{configurable:!0,value:s}),Object.defineProperty(t,"currentTarget",{configurable:!0,get:()=>s||document});s;){var i=s[e];if(i&&!s.disabled){var r=s[e+"Data"];if(void 0!==r?i.call(s,r,t):i.call(s,t),t.cancelBubble)return}s=s._$host||s.parentNode||s.host}}function pt(t,e,s,i,r){for(;"function"==typeof s;)s=s();if(e!==s){var n=typeof e,a=void 0!==i;if(t=a&&s[0]&&s[0].parentNode||t,"string"==n||"number"==n)if("number"==n&&(e=e.toString()),a){let r=s[0];r&&3===r.nodeType?r.data=e:r=document.createTextNode(e),s=mt(t,s,i,r)}else s=""!==s&&"string"==typeof s?t.firstChild.data=e:t.textContent=e;else if(null==e||"boolean"==n)s=mt(t,s,i);else{if("function"==n)return A((()=>{let r=e();for(;"function"==typeof r;)r=r();s=pt(t,r,s,i)})),()=>s;if(Array.isArray(e)){const o=[];if(n=s&&Array.isArray(s),gt(o,e,s,r))return A((()=>s=pt(t,o,s,i,!0))),()=>s;if(0===o.length){if(s=mt(t,s,i),a)return s}else n?0===s.length?ft(t,o,i):function(t,e,s){let i=s.length,r=e.length,n=i,a=0,o=0,l=e[r-1].nextSibling,h=null;for(;a<r||o<n;)if(e[a]===s[o])a++,o++;else{for(;e[r-1]===s[n-1];)r--,n--;if(r===a)for(var d=n<i?o?s[o-1].nextSibling:s[n-o]:l;o<n;)t.insertBefore(s[o++],d);else if(n===o)for(;a<r;)h&&h.has(e[a])||e[a].remove(),a++;else if(e[a]===s[n-1]&&s[o]===e[r-1]){var c=e[--r].nextSibling;t.insertBefore(s[o++],e[a++].nextSibling),t.insertBefore(s[--n],c),e[r]=s[n]}else{if(!h){h=new Map;let t=o;for(;t<n;)h.set(s[t],t++)}var u=h.get(e[a]);if(null!=u)if(o<u&&u<n){let i,l=a,d=1;for(;++l<r&&l<n&&null!=(i=h.get(e[l]))&&i===u+d;)d++;if(d>u-o)for(var p=e[a];o<u;)t.insertBefore(s[o++],p);else t.replaceChild(s[o++],e[a++])}else a++;else e[a++].remove()}}}(t,s,o):(s&&mt(t),ft(t,o));s=o}else if(e instanceof Node){if(Array.isArray(s)){if(a)return s=mt(t,s,i,e);mt(t,s,null,e)}else null!=s&&""!==s&&t.firstChild?t.replaceChild(e,t.firstChild):t.appendChild(e);s=e}else console.warn("Unrecognized value. Skipped inserting",e)}}return s}function gt(t,e,s,i){let r=!1;for(let a=0,o=e.length;a<o;a++){let o=e[a],l=s&&s[a];if(o instanceof Node)t.push(o);else if(null!=o&&!0!==o&&!1!==o)if(Array.isArray(o))r=gt(t,o,l)||r;else if("function"==typeof o)if(i){for(;"function"==typeof o;)o=o();r=gt(t,Array.isArray(o)?o:[o],Array.isArray(l)?l:[l])||r}else t.push(o),r=!0;else{var n=String(o);l&&3===l.nodeType?(l.data=n,t.push(l)):t.push(document.createTextNode(n))}}return r}function ft(t,e,s=null){for(let i=0,r=e.length;i<r;i++)t.insertBefore(e[i],s)}function mt(t,e,s,i){if(void 0===s)return t.textContent="";var r=i||document.createTextNode("");if(e.length){let i=!1;for(let o=e.length-1;0<=o;o--){var n,a=e[o];r!==a?(n=a.parentNode===t,i||o?n&&a.remove():n?t.replaceChild(r,a):t.insertBefore(r,s)):i=!0}}else t.insertBefore(r,s);return[r]}function vt(t){return(e,s)=>{const i=s.element;return w((r=>{const n=function(t){var e=Object.keys(t),s={};for(let i=0;i<e.length;i++){const[r,n]=x(t[e[i]]);Object.defineProperty(s,e[i],{get:r,set(t){n((()=>t))}})}return s}(e);i.addPropertyChangedCallback(((t,e)=>n[t]=e)),i.addReleaseCallback((()=>{i.renderRoot.textContent="",r()}));var a=t(n,s);return ht(i.renderRoot,a)}),function(t){if(t.assignedSlot&&t.assignedSlot._$owner)return t.assignedSlot._$owner;let e=t.parentNode;for(;e&&!e._$owner&&(!e.assignedSlot||!e.assignedSlot._$owner);)e=e.parentNode;return(e&&e.assignedSlot?e.assignedSlot:t)._$owner}(i))}}function bt(t,e,s){return 2===arguments.length&&(s=e,e={}),a(t,e)(vt(s))}const yt={chatflowid:"",apiHost:void 0,fileTextExtractionUrl:{default:"",image:""},chatflowConfig:void 0,theme:void 0};var wt='/*! tailwindcss v3.3.1 | MIT License | https://tailwindcss.com*/*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}html{-webkit-text-size-adjust:100%;font-feature-settings:normal;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-variation-settings:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{color:inherit;font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af;opacity:1}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]{display:none}*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.prose{color:var(--tw-prose-body);max-width:65ch}.prose :where(p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em;margin-top:1.25em}.prose :where([class~=lead]):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-lead);font-size:1.25em;line-height:1.6;margin-bottom:1.2em;margin-top:1.2em}.prose :where(a):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-links);font-weight:500;text-decoration:underline}.prose :where(strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-bold);font-weight:600}.prose :where(a strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(blockquote strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(thead th strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(ol):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:decimal;margin-bottom:1.25em;margin-top:1.25em;padding-left:1.625em}.prose :where(ol[type=A]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-alpha}.prose :where(ol[type=a]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-alpha}.prose :where(ol[type=A s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-alpha}.prose :where(ol[type=a s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-alpha}.prose :where(ol[type=I]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-roman}.prose :where(ol[type=i]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-roman}.prose :where(ol[type=I s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-roman}.prose :where(ol[type=i s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-roman}.prose :where(ol[type="1"]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:decimal}.prose :where(ul):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:disc;margin-bottom:1.25em;margin-top:1.25em;padding-left:1.625em}.prose :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *))::marker{color:var(--tw-prose-counters);font-weight:400}.prose :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *))::marker{color:var(--tw-prose-bullets)}.prose :where(dt):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;margin-top:1.25em}.prose :where(hr):not(:where([class~=not-prose],[class~=not-prose] *)){border-color:var(--tw-prose-hr);border-top-width:1px;margin-bottom:3em;margin-top:3em}.prose :where(blockquote):not(:where([class~=not-prose],[class~=not-prose] *)){border-left-color:var(--tw-prose-quote-borders);border-left-width:.25rem;color:var(--tw-prose-quotes);font-style:italic;font-weight:500;margin-bottom:1.6em;margin-top:1.6em;padding-left:1em;quotes:"\\201C""\\201D""\\2018""\\2019"}.prose :where(blockquote p:first-of-type):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:open-quote}.prose :where(blockquote p:last-of-type):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:close-quote}.prose :where(h1):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-size:2.25em;font-weight:800;line-height:1.1111111;margin-bottom:.8888889em;margin-top:0}.prose :where(h1 strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-weight:900}.prose :where(h2):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-size:1.5em;font-weight:700;line-height:1.3333333;margin-bottom:1em;margin-top:2em}.prose :where(h2 strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-weight:800}.prose :where(h3):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-size:1.25em;font-weight:600;line-height:1.6;margin-bottom:.6em;margin-top:1.6em}.prose :where(h3 strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-weight:700}.prose :where(h4):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;line-height:1.5;margin-bottom:.5em;margin-top:1.5em}.prose :where(h4 strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-weight:700}.prose :where(img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:2em;margin-top:2em}.prose :where(picture):not(:where([class~=not-prose],[class~=not-prose] *)){display:block;margin-bottom:2em;margin-top:2em}.prose :where(kbd):not(:where([class~=not-prose],[class~=not-prose] *)){border-radius:.3125rem;box-shadow:0 0 0 1px rgb(var(--tw-prose-kbd-shadows)/10%),0 3px 0 rgb(var(--tw-prose-kbd-shadows)/10%);color:var(--tw-prose-kbd);font-family:inherit;font-size:.875em;font-weight:500;padding:.1875em .375em}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-code);font-size:.875em;font-weight:600}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:"`"}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:"`"}.prose :where(a code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(h1 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(h2 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-size:.875em}.prose :where(h3 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-size:.9em}.prose :where(h4 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(blockquote code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(thead th code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(pre):not(:where([class~=not-prose],[class~=not-prose] *)){background-color:var(--tw-prose-pre-bg);border-radius:.375rem;color:var(--tw-prose-pre-code);font-size:.875em;font-weight:400;line-height:1.7142857;margin-bottom:1.7142857em;margin-top:1.7142857em;overflow-x:auto;padding:.8571429em 1.1428571em}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)){background-color:transparent;border-radius:0;border-width:0;color:inherit;font-family:inherit;font-size:inherit;font-weight:inherit;line-height:inherit;padding:0}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:none}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:none}.prose :where(table):not(:where([class~=not-prose],[class~=not-prose] *)){font-size:.875em;line-height:1.7142857;margin-bottom:2em;margin-top:2em;table-layout:auto;text-align:left;width:100%}.prose :where(thead):not(:where([class~=not-prose],[class~=not-prose] *)){border-bottom-color:var(--tw-prose-th-borders);border-bottom-width:1px}.prose :where(thead th):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;padding-bottom:.5714286em;padding-left:.5714286em;padding-right:.5714286em;vertical-align:bottom}.prose :where(tbody tr):not(:where([class~=not-prose],[class~=not-prose] *)){border-bottom-color:var(--tw-prose-td-borders);border-bottom-width:1px}.prose :where(tbody tr:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){border-bottom-width:0}.prose :where(tbody td):not(:where([class~=not-prose],[class~=not-prose] *)){vertical-align:baseline}.prose :where(tfoot):not(:where([class~=not-prose],[class~=not-prose] *)){border-top-color:var(--tw-prose-th-borders);border-top-width:1px}.prose :where(tfoot td):not(:where([class~=not-prose],[class~=not-prose] *)){vertical-align:top}.prose :where(figure>*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0;margin-top:0}.prose :where(figcaption):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-captions);font-size:.875em;line-height:1.4285714;margin-top:.8571429em}.prose{--tw-prose-body:#374151;--tw-prose-headings:#111827;--tw-prose-lead:#4b5563;--tw-prose-links:#111827;--tw-prose-bold:#111827;--tw-prose-counters:#6b7280;--tw-prose-bullets:#d1d5db;--tw-prose-hr:#e5e7eb;--tw-prose-quotes:#111827;--tw-prose-quote-borders:#e5e7eb;--tw-prose-captions:#6b7280;--tw-prose-kbd:#111827;--tw-prose-kbd-shadows:17 24 39;--tw-prose-code:#111827;--tw-prose-pre-code:#e5e7eb;--tw-prose-pre-bg:#1f2937;--tw-prose-th-borders:#d1d5db;--tw-prose-td-borders:#e5e7eb;--tw-prose-invert-body:#d1d5db;--tw-prose-invert-headings:#fff;--tw-prose-invert-lead:#9ca3af;--tw-prose-invert-links:#fff;--tw-prose-invert-bold:#fff;--tw-prose-invert-counters:#9ca3af;--tw-prose-invert-bullets:#4b5563;--tw-prose-invert-hr:#374151;--tw-prose-invert-quotes:#f3f4f6;--tw-prose-invert-quote-borders:#374151;--tw-prose-invert-captions:#9ca3af;--tw-prose-invert-kbd:#fff;--tw-prose-invert-kbd-shadows:255 255 255;--tw-prose-invert-code:#fff;--tw-prose-invert-pre-code:#d1d5db;--tw-prose-invert-pre-bg:rgba(0,0,0,.5);--tw-prose-invert-th-borders:#4b5563;--tw-prose-invert-td-borders:#374151;font-size:1rem;line-height:1.75}.prose :where(picture>img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0;margin-top:0}.prose :where(video):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:2em;margin-top:2em}.prose :where(li):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:.5em;margin-top:.5em}.prose :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-left:.375em}.prose :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-left:.375em}.prose :where(.prose>ul>li p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:.75em;margin-top:.75em}.prose :where(.prose>ul>li>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em}.prose :where(.prose>ul>li>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em}.prose :where(.prose>ol>li>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em}.prose :where(.prose>ol>li>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em}.prose :where(ul ul,ul ol,ol ul,ol ol):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:.75em;margin-top:.75em}.prose :where(dl):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em;margin-top:1.25em}.prose :where(dd):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.5em;padding-left:1.625em}.prose :where(hr+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(h2+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(h3+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(h4+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(thead th:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-left:0}.prose :where(thead th:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-right:0}.prose :where(tbody td,tfoot td):not(:where([class~=not-prose],[class~=not-prose] *)){padding:.5714286em}.prose :where(tbody td:first-child,tfoot td:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-left:0}.prose :where(tbody td:last-child,tfoot td:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-right:0}.prose :where(figure):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:2em;margin-top:2em}.prose :where(.prose>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(.prose>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0}.pointer-events-none{pointer-events:none}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{inset:0}.bottom-20{bottom:80px}.bottom-24{bottom:96px}.left-0{left:0}.top-0{top:0}.z-10{z-index:10}.my-2{margin-bottom:8px;margin-top:8px}.-ml-1{margin-left:-4px}.mb-2{margin-bottom:8px}.ml-1{margin-left:4px}.ml-2{margin-left:8px}.mr-1{margin-right:4px}.mr-2{margin-right:8px}.mr-3{margin-right:12px}.flex{display:flex}.\\!hidden{display:none!important}.hidden{display:none}.h-10{height:40px}.h-12{height:48px}.h-16{height:64px}.h-2{height:8px}.h-32{height:128px}.h-5{height:20px}.h-6{height:24px}.h-7{height:28px}.h-9{height:36px}.h-\\[calc\\(100vh-117px\\)\\]{height:calc(100vh - 117px)}.h-full{height:100%}.max-h-\\[704px\\]{max-height:704px}.min-h-\\[calc\\(100vh-117px\\)\\]{min-height:calc(100vh - 117px)}.min-h-full{min-height:100%}.w-10{width:40px}.w-12{width:48px}.w-16{width:64px}.w-2{width:8px}.w-5{width:20px}.w-6{width:24px}.w-7{width:28px}.w-9{width:36px}.w-full{width:100%}.min-w-full{min-width:100%}.max-w-full{max-width:100%}.flex-1{flex:1 1 0%}.flex-shrink-0{flex-shrink:0}.-rotate-180{--tw-rotate:-180deg}.-rotate-180,.rotate-0{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-0{--tw-rotate:0deg}.scale-0{--tw-scale-x:0;--tw-scale-y:0}.scale-0,.scale-100{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-100{--tw-scale-x:1;--tw-scale-y:1}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.animate-fade-in{animation:fade-in .3s ease-out}@keyframes spin{to{transform:rotate(1turn)}}.animate-spin{animation:spin 1s linear infinite}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-end{align-items:flex-end}.items-center{align-items:center}.justify-start{justify-content:flex-start}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-2{gap:8px}.gap-6{gap:24px}.gap-8{gap:32px}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.overflow-y-scroll{overflow-y:scroll}.scroll-smooth{scroll-behavior:smooth}.whitespace-pre-wrap{white-space:pre-wrap}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:8px}.border{border-width:1px}.bg-black{--tw-bg-opacity:1;background-color:rgb(0 0 0/var(--tw-bg-opacity))}.bg-transparent{background-color:transparent}.bg-opacity-50{--tw-bg-opacity:0.5}.bg-cover{background-size:cover}.bg-center{background-position:50%}.fill-transparent{fill:transparent}.stroke-2{stroke-width:2}.object-cover{-o-object-fit:cover;object-fit:cover}.p-4{padding:16px}.px-2{padding-left:8px;padding-right:8px}.px-3{padding-left:12px;padding-right:12px}.px-4{padding-left:16px;padding-right:16px}.py-1{padding-bottom:4px;padding-top:4px}.py-2{padding-bottom:8px;padding-top:8px}.py-4{padding-bottom:16px;padding-top:16px}.pt-20{padding-top:80px}.text-left{text-align:left}.text-center{text-align:center}.text-base{font-size:16px;line-height:24px}.text-sm{font-size:14px;line-height:20px}.text-xl{font-size:20px;line-height:28px}.font-semibold{font-weight:600}.text-white{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.opacity-0{opacity:0}.opacity-100{opacity:1}.opacity-25{opacity:.25}.opacity-75{opacity:.75}.shadow-md{--tw-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1);--tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color),0 2px 4px -2px var(--tw-shadow-color)}.shadow-md,.shadow-xl{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.shadow-xl{--tw-shadow:0 20px 25px -5px rgba(0,0,0,.1),0 8px 10px -6px rgba(0,0,0,.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color),0 8px 10px -6px var(--tw-shadow-color)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition{transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-all{transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-opacity{transition-duration:.15s;transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1)}.transition-transform{transition-duration:.15s;transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1)}.duration-200{transition-duration:.2s}.ease-out{transition-timing-function:cubic-bezier(0,0,.2,1)}@import url("https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@100;300;400;500;600;700&family=Inter:wght@100;300;400;500;600;700&display=swap");:host{--chatbot-container-bg-image:none;--chatbot-container-bg-color:transparent;--chatbot-container-font-family:"Open Sans";--chatbot-button-bg-color:#0042da;--chatbot-button-color:#fff;--chatbot-host-bubble-bg-color:#f7f8ff;--chatbot-host-bubble-color:#303235;--chatbot-guest-bubble-bg-color:#3b81f6;--chatbot-guest-bubble-color:#fff;--chatbot-input-bg-color:#fff;--chatbot-input-color:#303235;--chatbot-input-placeholder-color:#9095a0;--chatbot-header-bg-color:#fff;--chatbot-header-color:#303235;--chatbot-border-radius:6px;--PhoneInputCountryFlag-borderColor:transparent;--PhoneInput-color--focus:transparent}a{color:#16bed7;font-weight:500}a:hover{text-decoration:underline}pre{word-wrap:break-word;font-size:13px;margin:5px;overflow:auto;padding:5px;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;width:auto}.string{color:green}.number{color:#ff8c00}.boolean{color:blue}.null{color:#f0f}.key{color:#002b36}.scrollable-container::-webkit-scrollbar{display:none}.scrollable-container{-ms-overflow-style:none;scrollbar-width:none}.text-fade-in{transition:opacity .4s ease-in .2s}.bubble-typing{transition:width .4s ease-out,height .4s ease-out}.bubble1,.bubble2,.bubble3{background-color:var(--chatbot-host-bubble-color);opacity:.5}.bubble1,.bubble2{animation:chatBubbles 1s ease-in-out infinite}.bubble2{animation-delay:.3s}.bubble3{animation:chatBubbles 1s ease-in-out infinite;animation-delay:.5s}@keyframes chatBubbles{0%{transform:translateY(0)}50%{transform:translateY(-5px)}to{transform:translateY(0)}}button,input,textarea{font-weight:300}.slate-a{text-decoration:underline}.slate-html-container>div{min-height:24px}.slate-bold{font-weight:700}.slate-italic{font-style:oblique}.slate-underline{text-decoration:underline}.text-input::-moz-placeholder{color:#9095a0!important;opacity:1!important}.text-input::placeholder{color:#9095a0!important;opacity:1!important}.chatbot-container{background-color:var(--chatbot-container-bg-color);background-image:var(--chatbot-container-bg-image);font-family:Open Sans,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}.file-annotation-button{background-color:#02a0a0c2;border:1px solid #02a0a0c2;border-radius:var(--chatbot-border-radius);color:var(--chatbot-button-color)}.chatbot-button{background-color:#0042da;border:1px solid #0042da;border-radius:var(--chatbot-border-radius);color:var(--chatbot-button-color)}.chatbot-button.selectable{border:1px solid #0042da}.chatbot-button.selectable,.chatbot-host-bubble{background-color:#f7f8ff;color:var(--chatbot-host-bubble-color)}.chatbot-host-bubble>.bubble-typing{background-color:#f7f8ff;border:var(--chatbot-host-bubble-border);border-radius:6px}.chatbot-host-bubble iframe,.chatbot-host-bubble img,.chatbot-host-bubble video{border-radius:var(--chatbot-border-radius)}.chatbot-guest-bubble{background-color:#3b81f6;border-radius:6px;color:var(--chatbot-guest-bubble-color)}.chatbot-input{box-shadow:0 2px 6px -1px rgba(0,0,0,.1)}.chatbot-input-error-message{color:#303235}.chatbot-button>.send-icon{fill:var(--chatbot-button-color)}.chatbot-chat-view{max-width:800px}.ping span{background-color:#0042da}.rating-icon-container svg{stroke:#0042da;fill:#f7f8ff;height:42px;transition:fill .1s ease-out;width:42px}.rating-icon-container.selected svg{fill:#0042da}.rating-icon-container:hover svg{filter:brightness(.9)}.rating-icon-container:active svg{filter:brightness(.75)}.upload-progress-bar{background-color:#0042da;border-radius:var(--chatbot-border-radius)}.total-files-indicator{background-color:#0042da;color:var(--chatbot-button-color);font-size:10px}.chatbot-upload-input{transition:border-color .1s ease-out}.chatbot-upload-input.dragging-over{border-color:#0042da}.secondary-button{background-color:#f7f8ff;border-radius:var(--chatbot-border-radius);color:var(--chatbot-host-bubble-color)}.chatbot-country-select{color:#303235}.chatbot-country-select,.chatbot-date-input{background-color:#fff;border-radius:var(--chatbot-border-radius)}.chatbot-date-input{color:#303235;color-scheme:light}.chatbot-popup-blocked-toast{border-radius:var(--chatbot-border-radius)}.chatbot-file-bubble{border-radius:0 0 5px 5px;font-family:IBM Plex Sans;font-size:12px;font-style:normal;font-weight:500;gap:6px;letter-spacing:.5px;line-height:120%;max-width:304px;min-width:304px}.chatbot-loading-icon-animation{animation:spin 1.75s linear infinite}.chatbot-input{background-color:#fff;border:1px solid #d3d3d3;border-radius:var(--chatbot-border-radius);color:#303235;filter:drop-shadow(0 4px 4px rgba(42,118,126,.05))}.upload-file-button{border-radius:4px;font-family:Inter;font-size:14px;font-style:normal;font-weight:700;line-height:18px;padding:16px 14px;text-transform:uppercase}.upload-file-button:disabled{opacity:.5}.modal-backdrop{background-color:rgba(0,0,0,.7);height:100vh;left:0;position:fixed;top:0;width:100%;z-index:1001}.modal,.modal-backdrop{align-items:center;display:flex;justify-content:center}.modal{background-color:#fff;border-radius:16px;flex-direction:column;min-height:332px;min-width:300px;padding:32px 16px}.modal-title{color:#3c3c3b;font-family:Inter;font-size:16px;font-style:normal;font-weight:700;line-height:normal;text-align:center}.messagelist{border-radius:.5rem;height:100%;overflow-y:scroll;width:100%}.messagelistloading{display:flex;justify-content:center;margin-top:1rem;width:100%}.usermessage{padding:1rem 1.5rem}.usermessagewaiting-light{background:linear-gradient(270deg,#ede7f6,#e3f2fd,#ede7f6);background-position:-100% 0;background-size:200% 200%}.usermessagewaiting-dark,.usermessagewaiting-light{animation:loading-gradient 2s ease-in-out infinite;animation-direction:alternate;animation-name:loading-gradient;padding:1rem 1.5rem}.usermessagewaiting-dark{background:linear-gradient(270deg,#2e2352,#1d3d60,#2e2352);background-position:-100% 0;background-size:200% 200%;color:#ececf1}@keyframes loading-gradient{0%{background-position:-100% 0}to{background-position:100% 0}}.apimessage{animation:fadein .5s;padding:1rem 1.5rem}@keyframes fadein{0%{opacity:0}to{opacity:1}}.apimessage,.usermessage,.usermessagewaiting{display:flex}.markdownanswer{line-height:1.75}.markdownanswer a:hover{opacity:.8}.markdownanswer a{color:#16bed7;font-weight:500}.markdownanswer code{color:#15cb19;font-weight:500;white-space:pre-wrap!important}.markdownanswer ol,.markdownanswer ul{margin:1rem}.boticon,.usericon{border-radius:1rem;margin-right:1rem}.markdownanswer h1,.markdownanswer h2,.markdownanswer h3{font-size:inherit}.center{flex-direction:column;padding:10px;position:relative}.center,.cloud{align-items:center;display:flex;justify-content:center}.cloud{border-radius:.5rem;height:calc(100% - 50px);width:400px}input{background-color:transparent;border:none;font-family:Poppins,sans-serif;padding:10px}.header-button{align-items:center;background:#2a767e;border:1px solid #fafafa;border-radius:4px;color:#fff;display:flex;flex-shrink:0;font-family:Inter;font-size:12px;font-style:normal;font-weight:700;gap:10px;height:34px;justify-content:center;line-height:18px;padding:9px 14px;position:fixed;right:7px;text-transform:uppercase;top:16px;width:174px;z-index:10}.dropzone{background:#f8f8ff;border:.787px dashed rgba(42,118,126,.3);border-radius:5px;flex-shrink:0;height:216.939px;width:100%}.dropzone h3{color:#3c3c3b;padding:4px;text-align:center}.dropzone h3,.dropzone h3>a{font-family:Inter;font-size:12.59px;font-style:normal;font-weight:600;line-height:18.885px}.dropzone h3>a{color:#2a767e;cursor:pointer;text-decoration-line:underline}.dropzone p{color:#676767;font-family:IBM Plex Sans;font-size:9.443px;font-style:normal;font-weight:400;line-height:14.164px;padding:4px;text-align:center}.upload-message{color:#3c3c3b;font-family:Inter;font-size:14px;font-style:normal;font-weight:600;line-height:normal}.upload-file-item{background:#fff;border:1px solid #11af22;border-radius:4px;flex-shrink:0;height:36px;max-width:300px;min-width:300px;padding:0 10px}.upload-file-item p{color:#3c3c3b;font-family:IBM Plex Sans;font-size:12px;font-style:normal;font-weight:400;line-height:18px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%}.hover\\:scale-110:hover{--tw-scale-x:1.1;--tw-scale-y:1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\\:brightness-90:hover{--tw-brightness:brightness(.9);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.focus\\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.active\\:scale-95:active{--tw-scale-x:.95;--tw-scale-y:.95;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.active\\:brightness-75:active{--tw-brightness:brightness(.75);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.disabled\\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\\:opacity-50:disabled{opacity:.5}.disabled\\:brightness-100:disabled{--tw-brightness:brightness(1);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}@media (min-width:640px){.sm\\:right-5{right:20px}.sm\\:my-8{margin-bottom:32px;margin-top:32px}.sm\\:w-\\[400px\\]{width:400px}.sm\\:w-full{width:100%}.sm\\:max-w-lg{max-width:512px}.sm\\:p-0{padding:0}}';const xt=t=>null==t,At=t=>null!=t,_t=async t=>{try{var e="string"==typeof t?t:t.url,s=await fetch(e,{method:"string"==typeof t?"GET":t.method,mode:"cors",headers:"string"!=typeof t&&At(t.body)?{"Content-Type":"application/json"}:void 0,body:"string"!=typeof t&&At(t.body)?JSON.stringify(t.body):void 0});let r;var i=s.headers.get("Content-Type");if(r=i&&i.includes("application/json")?await s.json():"string"!=typeof t&&"blob"===t.type?await s.blob():await s.text(),s.ok)return{data:r};{let t;throw t="object"==typeof r&&"error"in r?r.error:r||s.statusText}}catch(t){return console.error(t),{error:t}}},Ct=it('<svg viewBox="0 0 24 24"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z">'),Et=it('<img alt="Bubble button icon">'),kt=it('<button part="button"><svg viewBox="0 0 24 24"><path fill-rule="evenodd" clip-rule="evenodd" d="M18.601 8.39897C18.269 8.06702 17.7309 8.06702 17.3989 8.39897L12 13.7979L6.60099 8.39897C6.26904 8.06702 5.73086 8.06702 5.39891 8.39897C5.06696 8.73091 5.06696 9.2691 5.39891 9.60105L11.3989 15.601C11.7309 15.933 12.269 15.933 12.601 15.601L18.601 9.60105C18.9329 9.2691 18.9329 8.73091 18.601 8.39897Z">'),St=t=>{{const e=kt(),s=e.firstChild;return e.$$click=()=>t.toggleBot(),e.style.setProperty("z-index","42424242"),ht(e,H(X,{get when(){return xt(t.customIconSrc)},keyed:!0,get children(){const e=Ct();return A((s=>{var i=t.iconColor??"white",r="stroke-2 fill-transparent absolute duration-200 transition "+(t.isBotOpened?"scale-0 opacity-0":"scale-100 opacity-100")+("large"===t.size?" w-9":" w-7");return i!==s._v$&&(null!=(s._v$=i)?e.style.setProperty("stroke",i):e.style.removeProperty("stroke")),r!==s._v$2&&nt(e,"class",s._v$2=r),s}),{_v$:void 0,_v$2:void 0}),e}}),s),ht(e,H(X,{get when(){return t.customIconSrc},get children(){const e=Et();return A((s=>{var i=t.customIconSrc,r="rounded-full object-cover"+(t.isBotOpened?"scale-0 opacity-0":"scale-100 opacity-100")+("large"===t.size?" w-9 h-9":" w-7 h-7");return i!==s._v$3&&nt(e,"src",s._v$3=i),r!==s._v$4&&at(e,s._v$4=r),s}),{_v$3:void 0,_v$4:void 0}),e}}),s),A((i=>{var r="fixed shadow-md rounded-full hover:scale-110 active:scale-95 transition-transform duration-200 flex justify-center items-center animate-fade-in"+("large"===t.size?" w-16 h-16":" w-12 h-12"),n=t.backgroundColor??"#3B81F6",a=t.right?t.right.toString()+"px":"20px",o=t.bottom?t.bottom.toString()+"px":"20px",l=t.iconColor??"white",h="absolute duration-200 transition "+(t.isBotOpened?"scale-100 rotate-0 opacity-100":"scale-0 -rotate-180 opacity-0")+("large"===t.size?" w-9":" w-7");return r!==i._v$5&&at(e,i._v$5=r),n!==i._v$6&&(null!=(i._v$6=n)?e.style.setProperty("background-color",n):e.style.removeProperty("background-color")),a!==i._v$7&&(null!=(i._v$7=a)?e.style.setProperty("right",a):e.style.removeProperty("right")),o!==i._v$8&&(null!=(i._v$8=o)?e.style.setProperty("bottom",o):e.style.removeProperty("bottom")),l!==i._v$9&&(null!=(i._v$9=l)?s.style.setProperty("fill",l):s.style.removeProperty("fill")),h!==i._v$10&&nt(s,"class",i._v$10=h),i}),{_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0,_v$10:void 0}),e}},Tt=(rt(["click"]),({chatflowid:t,apiHost:e="http://localhost:3000",body:s})=>_t({method:"POST",url:e+"/api/v1/prediction/"+t,body:s})),Pt=({apiHost:t="http://localhost:3000",body:e})=>_t({method:"POST",url:t+"/api/v1/openai-assistants-file",body:e,type:"blob"});let Mt;const Rt=new Uint8Array(16);function Lt(){if(Mt=Mt||"undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto))return Mt(Rt);throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported")}const It=[];for(let t=0;t<256;++t)It.push((t+256).toString(16).slice(1));var Dt,Ft,Ot={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Bt(t,e,s){if(Ot.randomUUID&&!e&&!t)return Ot.randomUUID();var i=(t=t||{}).random||(t.rng||Lt)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){s=s||0;for(let t=0;t<16;++t)e[s+t]=i[t];return e}return function(t,e=0){return It[t[e+0]]+It[t[e+1]]+It[t[e+2]]+It[t[e+3]]+"-"+It[t[e+4]]+It[t[e+5]]+"-"+It[t[e+6]]+It[t[e+7]]+"-"+It[t[e+8]]+It[t[e+9]]+"-"+It[t[e+10]]+It[t[e+11]]+It[t[e+12]]+It[t[e+13]]+It[t[e+14]]+It[t[e+15]]}(i)}const Nt=it('<input class="focus:outline-none bg-transparent px-4 py-4 flex-1 w-full text-input disabled:opacity-50 disabled:cursor-not-allowed disabled:brightness-100" type="text">'),zt=t=>{const[e,s]=W(t,["ref","onInput"]);return(i=Nt()).$$input=t=>e.onInput(t.currentTarget.value),"function"==typeof(r=t.ref)?lt(r,i):t.ref=i,ot(i,G({get disabled(){return t.disabled},get style(){return{"font-size":t.fontSize?t.fontSize+"px":"16px"}}},s),!1,!1),i;var i,r},[jt,Ut]=(rt(["input"]),x()),Ht=it('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="19px"><path d="M476.59 227.05l-.16-.07L49.35 49.84A23.56 23.56 0 0027.14 52 24.65 24.65 0 0016 72.59v113.29a24 24 0 0019.52 23.57l232.93 43.07a4 4 0 010 7.86L35.53 303.45A24 24 0 0016 327v113.31A23.57 23.57 0 0026.59 460a23.94 23.94 0 0013.22 4 24.55 24.55 0 009.52-1.93L476.4 285.94l.19-.09a32 32 0 000-58.8z">'),qt=t=>{return ot(e=Ht(),G({get style(){return{fill:t.color??"#3B81F6"}}},t),!0,!0),e;var e},$t=it('<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-refresh" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4"></path><path d="M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4">'),Vt=t=>{{const e=$t();return A((()=>nt(e,"stroke",t.color??"#3B81F6"))),e}},Gt=it('<button type="submit">'),Wt=it('<svg><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">'),Kt=t=>{return ot(e=Gt(),G({get disabled(){return t.isDisabled||t.isLoading}},t,{get class(){return"py-2 px-4 justify-center font-semibold text-white focus:outline-none flex items-center disabled:opacity-50 disabled:cursor-not-allowed disabled:brightness-100 transition-all filter hover:brightness-90 active:brightness-75 chatbot-button "+t.class},style:{background:"transparent",border:"none"}}),!1,!0),ht(e,H(X,{get when(){return!t.isLoading},get fallback(){return H(Yt,{class:"text-white"})},get children(){return H(qt,{get color(){return t.sendButtonColor},get class(){return"send-icon flex "+(t.disableIcon?"hidden":"")}})}})),e;var e},Xt=t=>{return ot(e=Gt(),G({get disabled(){return t.isDisabled||t.isLoading}},t,{get class(){return"py-2 px-4 justify-center font-semibold text-white focus:outline-none flex items-center disabled:opacity-50 disabled:cursor-not-allowed disabled:brightness-100 transition-all filter hover:brightness-90 active:brightness-75 chatbot-button "+t.class},style:{background:"transparent",border:"none"},title:"New Chat"}),!1,!0),ht(e,H(X,{get when(){return!t.isLoading},get fallback(){return H(Yt,{class:"text-white"})},get children(){return H(Vt,{get color(){return t.sendButtonColor},get class(){return"send-icon flex "+(t.disableIcon?"hidden":"")}})}})),e;var e},Yt=t=>{return ot(e=Wt(),G(t,{get class(){return"animate-spin -ml-1 mr-3 h-5 w-5 "+t.class},xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","data-testid":"loading-spinner"}),!0,!0),e;var e},Jt=it("<span>Send"),Qt=it('<div class="flex items-end justify-between chatbot-input" data-testid="input">'),Zt=t=>{const[e,s]=x(t.defaultValue??"");let i;const r=t=>s(t),n=()=>{""!==e()&&i?.reportValidity()&&t.onSubmit(e()),s("")},a=t=>{var e=t.isComposing||229===t.keyCode;"Enter"!==t.key||e||n()};_((()=>{t.disabled||jt()||!i||i.focus()})),k((()=>{!jt()&&i&&i.focus()}));{const s=Qt();return s.$$keydown=a,s.style.setProperty("border-top","1px solid #eeeeee"),s.style.setProperty("position","absolute"),s.style.setProperty("left","20px"),s.style.setProperty("right","20px"),s.style.setProperty("bottom","62px"),s.style.setProperty("margin","auto"),s.style.setProperty("z-index","1000"),ht(s,H(zt,{ref(t){"function"==typeof i?i(t):i=t},onInput:r,get value(){return e()},get fontSize(){return t.fontSize},get disabled(){return t.disabled},get placeholder(){return t.placeholder??"Type your question"}}),null),ht(s,H(Kt,{get sendButtonColor(){return t.sendButtonColor},type:"button",get isDisabled(){return t.disabled||""===e()},class:"my-2 ml-2","on:click":n,get children(){var t=Jt();return t.style.setProperty("font-family","Poppins, sans-serif"),t}}),null),A((e=>{var i=t.backgroundColor??"#ffffff",r=t.textColor??"#303235";return i!==e._v$&&(null!=(e._v$=i)?s.style.setProperty("background-color",i):s.style.removeProperty("background-color")),r!==e._v$2&&(null!=(e._v$2=r)?s.style.setProperty("color",r):s.style.removeProperty("color")),e}),{_v$:void 0,_v$2:void 0}),s}},te=(rt(["keydown"]),it('<figure data-testid="default-avatar"><svg width="75" height="75" viewBox="0 0 75 75" fill="none" xmlns="http://www.w3.org/2000/svg"><mask id="mask0" x="0" y="0" mask-type="alpha"><circle cx="37.5" cy="37.5" r="37.5" fill="#0042DA"></circle></mask><g mask="url(#mask0)"><rect x="-30" y="-43" width="131" height="154" fill="#0042DA"></rect><rect x="2.50413" y="120.333" width="81.5597" height="86.4577" rx="2.5" transform="rotate(-52.6423 2.50413 120.333)" stroke="#FED23D" stroke-width="5"></rect><circle cx="76.5" cy="-1.5" r="29" stroke="#FF8E20" stroke-width="5"></circle><path d="M-49.8224 22L-15.5 -40.7879L18.8224 22H-49.8224Z" stroke="#F7F8FF" stroke-width="5">')),ee=()=>{{const t=te(),e=t.firstChild;return A((s=>{var i="flex justify-center items-center rounded-full text-white relative "+(jt()?"w-6 h-6 text-sm":"w-10 h-10 text-xl"),r="absolute top-0 left-0 "+(jt()?" w-6 h-6 text-sm":"w-full h-full text-xl");return i!==s._v$&&at(t,s._v$=i),r!==s._v$2&&nt(e,"class",s._v$2=r),s}),{_v$:void 0,_v$2:void 0}),t}},se=it('<figure><img alt="Bot avatar" class="rounded-full object-cover w-full h-full">'),ie=t=>{const[e,s]=x(t.initialAvatarSrc);return _((()=>{e()?.startsWith("{{")&&t.initialAvatarSrc?.startsWith("http")&&s(t.initialAvatarSrc)})),H(X,{get when(){return(t=>null!=t&&""!==t)(e())},keyed:!0,get fallback(){return H(ee,{})},get children(){const t=se(),s=t.firstChild;return A((i=>{var r="flex justify-center items-center rounded-full text-white relative flex-shrink-0 "+(jt()?"w-6 h-6 text-sm":"w-10 h-10 text-xl"),n=e();return r!==i._v$&&at(t,i._v$=r),n!==i._v$2&&nt(s,"src",i._v$2=n),i}),{_v$:void 0,_v$2:void 0}),t}})};class re{source;flags;constructor(t,e=""){this.source=t.source,this.flags=e}setGroup(t,e){let s="string"==typeof e?e:e.source;return s=s.replace(/(^|[^\[])\^/g,"$1"),this.source=this.source.replace(t,s),this}getRegexp(){return new RegExp(this.source,this.flags)}}const ne=/[&<>"']/,ae=/[&<>"']/g,oe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},le=/[<>"']|&(?!#?\w+;)/,he=/[<>"']|&(?!#?\w+;)/g;function de(t,e){if(e){if(ne.test(t))return t.replace(ae,(t=>oe[t]))}else if(le.test(t))return t.replace(he,(t=>oe[t]));return t}function ce(t){return t.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,(function(t,e){return"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""}))}var ue;(ue=Dt=Dt||{})[ue.space=1]="space",ue[ue.text=2]="text",ue[ue.paragraph=3]="paragraph",ue[ue.heading=4]="heading",ue[ue.listStart=5]="listStart",ue[ue.listEnd=6]="listEnd",ue[ue.looseItemStart=7]="looseItemStart",ue[ue.looseItemEnd=8]="looseItemEnd",ue[ue.listItemStart=9]="listItemStart",ue[ue.listItemEnd=10]="listItemEnd",ue[ue.blockquoteStart=11]="blockquoteStart",ue[ue.blockquoteEnd=12]="blockquoteEnd",ue[ue.code=13]="code",ue[ue.table=14]="table",ue[ue.html=15]="html",ue[ue.hr=16]="hr";class pe{gfm=!0;tables=!0;breaks=!1;pedantic=!1;sanitize=!1;sanitizer;mangle=!0;smartLists=!1;silent=!1;highlight;langPrefix="lang-";smartypants=!1;headerPrefix="";renderer;xhtml=!1;escape=de;unescape=ce;isNoP}class ge{options;constructor(t){this.options=t||ve.options}code(t,e,s,i){this.options.highlight&&null!=(r=this.options.highlight(t,e))&&r!==t&&(s=!0,t=r);var r=s?t:this.options.escape(t,!0);return e?`\n<pre><code class="${this.options.langPrefix+this.options.escape(e,!0)}">${r}\n</code></pre>\n`:`\n<pre><code>${r}\n</code></pre>\n`}blockquote(t){return`<blockquote>\n${t}</blockquote>\n`}html(t){return t}heading(t,e,s){return`<h${e} id="${this.options.headerPrefix+s.toLowerCase().replace(/[^\w]+/g,"-")}">${t}</h${e}>\n`}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(t,e){return`\n<${e=e?"ol":"ul"}>\n${t}</${e}>\n`}listitem(t){return"<li>"+t+"</li>\n"}paragraph(t){return"<p>"+t+"</p>\n"}table(t,e){return`\n<table>\n<thead>\n${t}</thead>\n<tbody>\n${e}</tbody>\n</table>\n`}tablerow(t){return"<tr>\n"+t+"</tr>\n"}tablecell(t,e){var s=e.header?"th":"td";return(e.align?"<"+s+' style="text-align:'+e.align+'">':"<"+s+">")+t+"</"+s+">\n"}strong(t){return"<strong>"+t+"</strong>"}em(t){return"<em>"+t+"</em>"}codespan(t){return"<code>"+t+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(t){return"<del>"+t+"</del>"}link(t,e,s){if(this.options.sanitize){let i;try{i=decodeURIComponent(this.options.unescape(t)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return s}if(0===i.indexOf("javascript:")||0===i.indexOf("vbscript:")||0===i.indexOf("data:"))return s}let i='<a href="'+t+'"';return e&&(i+=' title="'+e+'"'),i+">"+s+"</a>"}image(t,e,s){let i='<img src="'+t+'" alt="'+s+'"';return e&&(i+=' title="'+e+'"'),i+(this.options.xhtml?"/>":">")}text(t){return t}}class fe{staticThis;links;options;static rulesBase=null;static rulesPedantic=null;static rulesGfm=null;static rulesBreaks=null;rules;renderer;inLink;hasRulesGfm;ruleCallbacks;constructor(t,e,s=ve.options,i){if(this.staticThis=t,this.links=e,this.options=s,this.renderer=i||this.options.renderer||new ge(this.options),!this.links)throw new Error("InlineLexer requires 'links' parameter.");this.setRules()}static output(t,e,s){return new this(this,e,s).output(t)}static getRulesBase(){var t;return this.rulesBase||((t={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ <>]+(@|:\/)[^ <>]+)>/,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^<'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)([\s\S]*?[^`])\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/,_inside:/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,_href:/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/}).link=new re(t.link).setGroup("inside",t._inside).setGroup("href",t._href).getRegexp(),t.reflink=new re(t.reflink).setGroup("inside",t._inside).getRegexp(),this.rulesBase=t)}static getRulesPedantic(){return this.rulesPedantic||(this.rulesPedantic={...this.getRulesBase(),strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/})}static getRulesGfm(){var t,e,s;return this.rulesGfm||(t=this.getRulesBase(),e=new re(t.escape).setGroup("])","~|])").getRegexp(),s=new re(t.text).setGroup("]|","~]|").setGroup("|","|https?://|").getRegexp(),this.rulesGfm={...t,escape:e,url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:s})}static getRulesBreaks(){var t,e;return this.rulesBreaks||(t=this.getRulesGfm(),e=this.getRulesGfm(),this.rulesBreaks={...e,br:new re(t.br).setGroup("{2,}","*").getRegexp(),text:new re(e.text).setGroup("{2,}","*").getRegexp()})}setRules(){this.options.gfm?this.options.breaks?this.rules=this.staticThis.getRulesBreaks():this.rules=this.staticThis.getRulesGfm():this.options.pedantic?this.rules=this.staticThis.getRulesPedantic():this.rules=this.staticThis.getRulesBase(),this.hasRulesGfm=void 0!==this.rules.url}output(t){let e,s="";for(;t;)if(e=this.rules.escape.exec(t))t=t.substring(e[0].length),s+=e[1];else if(e=this.rules.autolink.exec(t)){let i,r;t=t.substring(e[0].length),r="@"===e[2]?(i=this.options.escape(":"===e[1].charAt(6)?this.mangle(e[1].substring(7)):this.mangle(e[1])),this.mangle("mailto:")+i):i=this.options.escape(e[1]),s+=this.renderer.link(r,null,i)}else if(!this.inLink&&this.hasRulesGfm&&(e=this.rules.url.exec(t))){t=t.substring(e[0].length);var i=this.options.escape(e[1]);s+=this.renderer.link(i,null,i)}else if(e=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(e[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(e[0])&&(this.inLink=!1),t=t.substring(e[0].length),s+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(e[0]):this.options.escape(e[0]):e[0];else if(e=this.rules.link.exec(t))t=t.substring(e[0].length),this.inLink=!0,s+=this.outputLink(e,{href:e[2],title:e[3]}),this.inLink=!1;else if(e=(e=this.rules.reflink.exec(t))||this.rules.nolink.exec(t)){t=t.substring(e[0].length);i=(e[2]||e[1]).replace(/\s+/g," ");var r=this.links[i.toLowerCase()];r&&r.href?(this.inLink=!0,s+=this.outputLink(e,r),this.inLink=!1):(s+=e[0].charAt(0),t=e[0].substring(1)+t)}else if(e=this.rules.strong.exec(t))t=t.substring(e[0].length),s+=this.renderer.strong(this.output(e[2]||e[1]));else if(e=this.rules.em.exec(t))t=t.substring(e[0].length),s+=this.renderer.em(this.output(e[2]||e[1]));else if(e=this.rules.code.exec(t))t=t.substring(e[0].length),s+=this.renderer.codespan(this.options.escape(e[2].trim(),!0));else if(e=this.rules.br.exec(t))t=t.substring(e[0].length),s+=this.renderer.br();else if(this.hasRulesGfm&&(e=this.rules.del.exec(t)))t=t.substring(e[0].length),s+=this.renderer.del(this.output(e[1]));else if(e=this.rules.text.exec(t))t=t.substring(e[0].length),s+=this.renderer.text(this.options.escape(this.smartypants(e[0])));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return s}outputLink(t,e){var s=this.options.escape(e.href);e=e.title?this.options.escape(e.title):null;return"!"!==t[0].charAt(0)?this.renderer.link(s,e,this.output(t[1])):this.renderer.image(s,e,this.options.escape(t[1]))}smartypants(t){return this.options.smartypants?t.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/([{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/([{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):t}mangle(t){if(!this.options.mangle)return t;let e="";var s=t.length;for(let i=0;i<s;i++){let s;.5<Math.random()&&(s="x"+t.charCodeAt(i).toString(16)),e+="&#"+s+";"}return e}}class me{simpleRenderers=[];tokens;token;inlineLexer;options;renderer;line=0;constructor(t){this.tokens=[],this.token=null,this.options=t||ve.options,this.renderer=this.options.renderer||new ge(this.options)}static parse(t,e,s){return new this(s).parse(e,t)}parse(t,e){this.inlineLexer=new fe(fe,t,this.options,this.renderer),this.tokens=e.reverse();let s="";for(;this.next();)s+=this.tok();return s}debug(t,e){this.inlineLexer=new fe(fe,t,this.options,this.renderer),this.tokens=e.reverse();let s="";for(;this.next();){var i=this.tok();this.token.line=this.line+=i.split("\n").length-1,s+=i}return s}next(){return this.token=this.tokens.pop()}getNextElement(){return this.tokens[this.tokens.length-1]}parseText(){let t=this.token.text;for(var e;(e=this.getNextElement())&&e.type==Dt.text;)t+="\n"+this.next().text;return this.inlineLexer.output(t)}tok(){switch(this.token.type){case Dt.space:return"";case Dt.paragraph:return this.renderer.paragraph(this.inlineLexer.output(this.token.text));case Dt.text:return this.options.isNoP?this.parseText():this.renderer.paragraph(this.parseText());case Dt.heading:return this.renderer.heading(this.inlineLexer.output(this.token.text),this.token.depth,this.token.text);case Dt.listStart:{let e="";for(var t=this.token.ordered;this.next().type!=Dt.listEnd;)e+=this.tok();return this.renderer.list(e,t)}case Dt.listItemStart:{let t="";for(;this.next().type!=Dt.listItemEnd;)t+=this.token.type==Dt.text?this.parseText():this.tok();return this.renderer.listitem(t)}case Dt.looseItemStart:{let t="";for(;this.next().type!=Dt.listItemEnd;)t+=this.tok();return this.renderer.listitem(t)}case Dt.code:return this.renderer.code(this.token.text,this.token.lang,this.token.escaped,this.token.meta);case Dt.table:{t="";let i,r="";i="";for(let t=0;t<this.token.header.length;t++){var e={header:!0,align:this.token.align[t]},s=this.inlineLexer.output(this.token.header[t]);i+=this.renderer.tablecell(s,e)}t+=this.renderer.tablerow(i);for(const t of this.token.cells){i="";for(let e=0;e<t.length;e++)i+=this.renderer.tablecell(this.inlineLexer.output(t[e]),{header:!1,align:this.token.align[e]});r+=this.renderer.tablerow(i)}return this.renderer.table(t,r)}case Dt.blockquoteStart:{let t="";for(;this.next().type!=Dt.blockquoteEnd;)t+=this.tok();return this.renderer.blockquote(t)}case Dt.hr:return this.renderer.hr();case Dt.html:return t=this.token.pre||this.options.pedantic?this.token.text:this.inlineLexer.output(this.token.text),this.renderer.html(t);default:if(this.simpleRenderers.length)for(let t=0;t<this.simpleRenderers.length;t++)if(this.token.type=="simpleRule"+(t+1))return this.simpleRenderers[t].call(this.renderer,this.token.execArr);if(t=`Token with "${this.token.type}" type was not found.`,!this.options.silent)throw new Error(t);console.log(t)}}}class ve{static options=new pe;static simpleRenderers=[];static setOptions(t){return Object.assign(this.options,t),this}static setBlockRule(t,e=(()=>"")){return be.simpleRules.push(t),this.simpleRenderers.push(e),this}static parse(t,e){try{e={...this.options,...e};var{tokens:s,links:i}=this.callBlockLexer(t,e);return this.callParser(s,i,e)}catch(t){return this.callMe(t)}}static debug(t,e=this.options){var{tokens:t,links:s}=this.callBlockLexer(t,e);let i=t.slice();return(e=new me(e)).simpleRenderers=this.simpleRenderers,e=e.debug(s,t),{tokens:i=i.map((t=>{t.type=Dt[t.type]||t.type;var e=t.line;return delete t.line,e?{line:e,...t}:t})),links:s,result:e}}static callBlockLexer(t="",e){if("string"!=typeof t)throw new Error(`Expected that the 'src' parameter would have a 'string' type, got '${typeof t}'`);return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n").replace(/^ +$/gm,""),be.lex(t,e,!0)}static callParser(t,e,s){var i;return this.simpleRenderers.length?((i=new me(s)).simpleRenderers=this.simpleRenderers,i.parse(e,t)):me.parse(t,e,s)}static callMe(t){if(t.message+="\nPlease report this to https://github.com/ts-stack/markdown",this.options.silent)return"<p>An error occured:</p><pre>"+this.options.escape(t.message+"",!0)+"</pre>";throw t}}class be{staticThis;static simpleRules=[];static rulesBase=null;static rulesGfm=null;static rulesTables=null;rules;options;links={};tokens=[];hasRulesGfm;hasRulesTables;constructor(t,e){this.staticThis=t,this.options=e||ve.options,this.setRules()}static lex(t,e,s,i){return new this(this,e).getTokens(t,s,i)}static getRulesBase(){var t,e;return this.rulesBase||((t={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/,bullet:/(?:[*+-]|\d+\.)/,item:/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/}).item=new re(t.item,"gm").setGroup(/bull/g,t.bullet).getRegexp(),t.list=new re(t.list).setGroup(/bull/g,t.bullet).setGroup("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))").setGroup("def","\\n+(?="+t.def.source+")").getRegexp(),e="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",t.html=new re(t.html).setGroup("comment",/<!--[\s\S]*?-->/).setGroup("closed",/<(tag)[\s\S]+?<\/\1>/).setGroup("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/).setGroup(/tag/g,e).getRegexp(),t.paragraph=new re(t.paragraph).setGroup("hr",t.hr).setGroup("heading",t.heading).setGroup("lheading",t.lheading).setGroup("blockquote",t.blockquote).setGroup("tag","<"+e).setGroup("def",t.def).getRegexp(),this.rulesBase=t)}static getRulesGfm(){var t,e,s,i;return this.rulesGfm||(s=(e={...t=this.getRulesBase(),fences:/^ *(`{3,}|~{3,})[ \.]*((\S+)? *[^\n]*)\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}).fences.source.replace("\\1","\\2"),i=t.list.source.replace("\\1","\\3"),e.paragraph=new re(t.paragraph).setGroup("(?!",`(?!${s}|${i}|`).getRegexp(),this.rulesGfm=e)}static getRulesTable(){return this.rulesTables||(this.rulesTables={...this.getRulesGfm(),nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/})}setRules(){this.options.gfm?this.options.tables?this.rules=this.staticThis.getRulesTable():this.rules=this.staticThis.getRulesGfm():this.rules=this.staticThis.getRulesBase(),this.hasRulesGfm=void 0!==this.rules.fences,this.hasRulesTables=void 0!==this.rules.table}getTokens(t,e,s){let i,r=t;t:for(;r;)if((i=this.rules.newline.exec(r))&&(r=r.substring(i[0].length),1<i[0].length)&&this.tokens.push({type:Dt.space}),i=this.rules.code.exec(r)){r=r.substring(i[0].length);var n=i[0].replace(/^ {4}/gm,"");this.tokens.push({type:Dt.code,text:this.options.pedantic?n:n.replace(/\n+$/,"")})}else if(this.hasRulesGfm&&(i=this.rules.fences.exec(r)))r=r.substring(i[0].length),this.tokens.push({type:Dt.code,meta:i[2],lang:i[3],text:i[4]||""});else if(i=this.rules.heading.exec(r))r=r.substring(i[0].length),this.tokens.push({type:Dt.heading,depth:i[1].length,text:i[2]});else if(e&&this.hasRulesTables&&(i=this.rules.nptable.exec(r))){r=r.substring(i[0].length);var a={type:Dt.table,header:i[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:[]};for(let t=0;t<a.align.length;t++)/^ *-+: *$/.test(a.align[t])?a.align[t]="right":/^ *:-+: *$/.test(a.align[t])?a.align[t]="center":/^ *:-+ *$/.test(a.align[t])?a.align[t]="left":a.align[t]=null;var o=i[3].replace(/\n$/,"").split("\n");for(let t=0;t<o.length;t++)a.cells[t]=o[t].split(/ *\| */);this.tokens.push(a)}else if(i=this.rules.lheading.exec(r))r=r.substring(i[0].length),this.tokens.push({type:Dt.heading,depth:"="===i[2]?1:2,text:i[1]});else if(i=this.rules.hr.exec(r))r=r.substring(i[0].length),this.tokens.push({type:Dt.hr});else if(i=this.rules.blockquote.exec(r))r=r.substring(i[0].length),this.tokens.push({type:Dt.blockquoteStart}),n=i[0].replace(/^ *> ?/gm,""),this.getTokens(n),this.tokens.push({type:Dt.blockquoteEnd});else if(i=this.rules.list.exec(r)){r=r.substring(i[0].length);var l,h=i[2],d=(this.tokens.push({type:Dt.listStart,ordered:1<h.length}),i[0].match(this.rules.item)),c=d.length;let t,e=!1;for(let i=0;i<c;i++){let n=d[i];l=n.length,-1!==(n=n.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(l-=n.length,n=this.options.pedantic?n.replace(/^ {1,4}/gm,""):n.replace(new RegExp("^ {1,"+l+"}","gm"),"")),!this.options.smartLists||i===c-1||h===(l=this.staticThis.getRulesBase().bullet.exec(d[i+1])[0])||1<h.length&&1<l.length||(r=d.slice(i+1).join("\n")+r,i=c-1),t=e||/\n\n(?!\s*$)/.test(n),i!==c-1&&(e="\n"===n.charAt(n.length-1),t=t||e),this.tokens.push({type:t?Dt.looseItemStart:Dt.listItemStart}),this.getTokens(n,!1,s),this.tokens.push({type:Dt.listItemEnd})}this.tokens.push({type:Dt.listEnd})}else if(i=this.rules.html.exec(r)){r=r.substring(i[0].length);var u=i[1];this.tokens.push({type:this.options.sanitize?Dt.paragraph:Dt.html,pre:!this.options.sanitizer&&("pre"===u||"script"===u||"style"===u),text:i[0]})}else if(e&&(i=this.rules.def.exec(r)))r=r.substring(i[0].length),this.links[i[1].toLowerCase()]={href:i[2],title:i[3]};else if(e&&this.hasRulesTables&&(i=this.rules.table.exec(r))){r=r.substring(i[0].length);var p={type:Dt.table,header:i[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:[]};for(let t=0;t<p.align.length;t++)/^ *-+: *$/.test(p.align[t])?p.align[t]="right":/^ *:-+: *$/.test(p.align[t])?p.align[t]="center":/^ *:-+ *$/.test(p.align[t])?p.align[t]="left":p.align[t]=null;var g=i[3].replace(/(?: *\| *)?\n$/,"").split("\n");for(let t=0;t<g.length;t++)p.cells[t]=g[t].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(p)}else{if(this.staticThis.simpleRules.length){var f=this.staticThis.simpleRules;for(let t=0;t<f.length;t++)if(i=f[t].exec(r)){r=r.substring(i[0].length);var m="simpleRule"+(t+1);this.tokens.push({type:m,execArr:i});continue t}}if(e&&(i=this.rules.paragraph.exec(r)))r=r.substring(i[0].length),"\n"===i[1].slice(-1)?this.tokens.push({type:Dt.paragraph,text:i[1].slice(0,-1)}):this.tokens.push({type:0<this.tokens.length?Dt.paragraph:Dt.text,text:i[1]});else if(i=this.rules.text.exec(r))r=r.substring(i[0].length),this.tokens.push({type:Dt.text,text:i[0]});else if(r)throw new Error("Infinite loop on byte: "+r.charCodeAt(0)+`, near text '${r.slice(0,30)}...'`)}return{tokens:this.tokens,links:this.links}}}const ye=it('<div class="flex justify-end mb-2 items-end guest-container"><span class="px-4 py-2 mr-2 whitespace-pre-wrap max-w-full chatbot-guest-bubble" data-testid="guest-bubble">'),we=(ve.setOptions({isNoP:!0}),t=>{let e;k((()=>{e&&(e.innerHTML=ve.parse(t.message))}));{const s=ye(),i=s.firstChild;s.style.setProperty("margin-left","50px");return"function"==typeof e?lt(e,i):e=i,i.style.setProperty("border-radius","6px"),ht(s,H(X,{get when(){return t.showAvatar},get children(){return H(ie,{get initialAvatarSrc(){return t.avatarSrc}})}}),null),A((e=>{var s=t.backgroundColor??"#3B81F6",r=t.textColor??"#ffffff";return s!==e._v$&&(null!=(e._v$=s)?i.style.setProperty("background-color",s):i.style.removeProperty("background-color")),r!==e._v$2&&(null!=(e._v$2=r)?i.style.setProperty("color",r):i.style.removeProperty("color")),e}),{_v$:void 0,_v$2:void 0}),s}}),xe=it('<div class="flex justify-start mb-2 items-start host-container"><span class="px-4 py-2 ml-2 max-w-full chatbot-host-bubble prose" data-testid="host-bubble">'),Ae=(ve.setOptions({isNoP:!0}),t=>{let e;k((()=>{if(e&&(e.innerHTML=ve.parse(t.message),t.fileAnnotations)&&t.fileAnnotations.length)for(const r of t.fileAnnotations){var s=document.createElement("button"),i=(s.textContent=r.fileName,s.className="py-2 px-4 mb-2 justify-center font-semibold text-white focus:outline-none flex items-center disabled:opacity-50 disabled:cursor-not-allowed disabled:brightness-100 transition-all filter hover:brightness-90 active:brightness-75 file-annotation-button",s.addEventListener("click",(function(){(async e=>{try{var s=await Pt({apiHost:t.apiHost,body:{question:"",history:[],fileName:e.fileName}}),i=new Blob([s.data]),r=window.URL.createObjectURL(i),n=document.createElement("a");n.href=r,n.download=e.fileName,document.body.appendChild(n),n.click(),n.remove()}catch(e){console.error("Download failed:",e)}})(r)})),document.createElement("div"));i.className="ml-2",i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-download" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2" /><path d="M7 11l5 5l5 -5" /><path d="M12 4l0 12" /></svg>',s.appendChild(i),e.appendChild(s)}}));{const s=xe(),i=s.firstChild;s.style.setProperty("margin-right","50px"),ht(s,H(X,{get when(){return t.showAvatar},get children(){return H(ie,{get initialAvatarSrc(){return t.avatarSrc}})}}),i);return"function"==typeof e?lt(e,i):e=i,i.style.setProperty("border-radius","6px"),A((e=>{var s=t.backgroundColor??"#f7f8ff",r=t.textColor??"#303235";return s!==e._v$&&(null!=(e._v$=s)?i.style.setProperty("background-color",s):i.style.removeProperty("background-color")),r!==e._v$2&&(null!=(e._v$2=r)?i.style.setProperty("color",r):i.style.removeProperty("color")),e}),{_v$:void 0,_v$2:void 0}),s}}),_e=it('<div class="flex items-center"><div class="w-2 h-2 mr-1 rounded-full bubble1"></div><div class="w-2 h-2 mr-1 rounded-full bubble2"></div><div class="w-2 h-2 rounded-full bubble3">'),Ce=()=>_e(),Ee=it('<div class="flex justify-start mb-2 items-start animate-fade-in host-container"><span class="px-4 py-4 ml-2 whitespace-pre-wrap max-w-full chatbot-host-bubble" data-testid="host-bubble">'),ke=()=>{return ht((t=Ee()).firstChild,H(Ce,{})),t;var t},Se=it('<div data-modal-target="defaultModal" data-modal-toggle="defaultModal" class="flex justify-start mb-2 items-start animate-fade-in host-container hover:brightness-90 active:brightness-75"><span class="px-2 py-1 ml-1 whitespace-pre-wrap max-w-full chatbot-host-bubble" data-testid="host-bubble">'),Te=t=>{return s=(e=Se()).firstChild,e.$$click=()=>t.onSourceClick?.(),s.style.setProperty("width","max-content"),s.style.setProperty("max-width","80px"),s.style.setProperty("font-size","13px"),s.style.setProperty("border-radius","15px"),s.style.setProperty("cursor","pointer"),s.style.setProperty("text-overflow","ellipsis"),s.style.setProperty("overflow","hidden"),s.style.setProperty("white-space","nowrap"),ht(s,(()=>t.pageContent)),e;var e,s},Pe=(rt(["click"]),it('<svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.49989 3.26L9.87989 6.05L10.1099 6.55L10.6099 6.625L13.6899 7.07L11.4999 9.22L11.1249 9.585L11.2149 10.085L11.7399 13.15L8.98489 11.705L8.49989 11.5L8.03489 11.745L5.27989 13.17L5.77989 10.105L5.86989 9.605L5.49989 9.22L3.28989 7.045L6.36989 6.6L6.86989 6.525L7.09989 6.025L8.49989 3.26ZM8.49989 1L6.22489 5.61L1.13989 6.345L4.81989 9.935L3.94989 15L8.49989 12.61L13.0499 15L12.1799 9.935L15.8599 6.35L10.7749 5.61L8.49989 1Z" fill="#3C3C3B">')),Me=()=>Pe(),Re=it('<span><span>Powered by<a href="https://www.startse.com/" target="_blank" rel="noopener noreferrer" class="lite-badge" id="lite-badge"><span>StartSe'),Le=it("<button><span>"),Ie="#303235",De=t=>{let e;const s=t=>{t.forEach((t=>{t.removedNodes.forEach((t=>{}))}))};k((()=>{document&&t.botContainer&&(e=new MutationObserver(s)).observe(t.botContainer,{subtree:!1,childList:!0})})),S((()=>{e&&e.disconnect()}));{const e=Re(),s=e.firstChild,i=s.firstChild.nextSibling;return e.style.setProperty("position","absolute"),e.style.setProperty("font-size","13px"),e.style.setProperty("bottom","8px"),e.style.setProperty("padding","10px 12px"),e.style.setProperty("margin","auto"),e.style.setProperty("width","96%"),e.style.setProperty("text-align","center"),e.style.setProperty("display","flex"),s.style.setProperty("display","flex"),s.style.setProperty("align-items","center"),i.style.setProperty("font-weight","bold"),i.style.setProperty("margin-left","3px"),ht(e,(()=>{const e=C((()=>!!t.showButton));return()=>e()&&(()=>{const e=Le(),s=e.firstChild;return e.$$click=()=>{window.open(t.buttonLink,"_blank")},e.style.setProperty("border-radius","5px"),e.style.setProperty("padding","12.5px"),e.style.setProperty("cursor","pointer"),ht(e,H(Me,{}),s),s.style.setProperty("margin-left","5px"),ht(s,(()=>t.buttonText)),A((i=>{var r="2px solid "+(t.buttonColor||"#303235"),n=t.buttonColor||"#303235";return r!==i._v$5&&(null!=(i._v$5=r)?e.style.setProperty("border",r):e.style.removeProperty("border")),n!==i._v$6&&(null!=(i._v$6=n)?s.style.setProperty("color",n):s.style.removeProperty("color")),i}),{_v$5:void 0,_v$6:void 0}),e})()})(),null),A((s=>{var r=t.poweredByTextColor??Ie,n=t.badgeBackgroundColor??"#ffffff",a=t.showButton?"space-between":"center",o=t.poweredByTextColor??Ie;return r!==s._v$&&(null!=(s._v$=r)?e.style.setProperty("color",r):e.style.removeProperty("color")),n!==s._v$2&&(null!=(s._v$2=n)?e.style.setProperty("background-color",n):e.style.removeProperty("background-color")),a!==s._v$3&&(null!=(s._v$3=a)?e.style.setProperty("justify-content",a):e.style.removeProperty("justify-content")),o!==s._v$4&&(null!=(s._v$4=o)?i.style.setProperty("color",o):i.style.removeProperty("color")),s}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),e}},Fe=(rt(["click"]),Object.create(null)),Oe=(Fe.open="0",Fe.close="1",Fe.ping="2",Fe.pong="3",Fe.message="4",Fe.upgrade="5",Fe.noop="6",Object.create(null)),Be=(Object.keys(Fe).forEach((t=>{Oe[Fe[t]]=t})),{type:"error",data:"parser error"}),Ne="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),ze="function"==typeof ArrayBuffer,je=t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Ue=({type:t,data:e},s,i)=>Ne&&e instanceof Blob?s?i(e):He(e,i):ze&&(e instanceof ArrayBuffer||je(e))?s?i(e):He(new Blob([e]),i):i(Fe[t]+(e||"")),He=(t,e)=>{const s=new FileReader;return s.onload=function(){var t=s.result.split(",")[1];e("b"+(t||""))},s.readAsDataURL(t)};function qe(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let $e;const Ve="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ge="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let t=0;t<64;t++)Ge[Ve.charCodeAt(t)]=t;const We="function"==typeof ArrayBuffer,Ke=(t,e)=>{var s;return"string"!=typeof t?{type:"message",data:Ye(t,e)}:"b"===(s=t.charAt(0))?{type:"message",data:Xe(t.substring(1),e)}:Oe[s]?1<t.length?{type:Oe[s],data:t.substring(1)}:{type:Oe[s]}:Be},Xe=(t,e)=>{var s;return We?(s=(t=>{let e,s,i,r,n,a=.75*t.length,o=t.length,l=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2])&&a--;var h=new ArrayBuffer(a),d=new Uint8Array(h);for(e=0;e<o;e+=4)s=Ge[t.charCodeAt(e)],i=Ge[t.charCodeAt(e+1)],r=Ge[t.charCodeAt(e+2)],n=Ge[t.charCodeAt(e+3)],d[l++]=s<<2|i>>4,d[l++]=(15&i)<<4|r>>2,d[l++]=(3&r)<<6|63&n;return h})(t),Ye(s,e)):{base64:!0,data:t}},Ye=(t,e)=>"blob"!==e?t instanceof ArrayBuffer?t:t.buffer:t instanceof Blob?t:new Blob([t]),Je=String.fromCharCode(30);function Qe(){return new TransformStream({transform(t,e){!function(t,e){Ne&&t.data instanceof Blob?t.data.arrayBuffer().then(qe).then(e):ze&&(t.data instanceof ArrayBuffer||je(t.data))?e(qe(t.data)):Ue(t,!1,(t=>{$e=$e||new TextEncoder,e($e.encode(t))}))}(t,(s=>{var i,r=s.length;let n;r<126?(n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,r)):r<65536?(n=new Uint8Array(3),(i=new DataView(n.buffer)).setUint8(0,126),i.setUint16(1,r)):(n=new Uint8Array(9),(i=new DataView(n.buffer)).setUint8(0,127),i.setBigUint64(1,BigInt(r))),t.data&&"string"!=typeof t.data&&(n[0]|=128),e.enqueue(n),e.enqueue(s)}))}})}let Ze;function ts(t){return t.reduce(((t,e)=>t+e.length),0)}function es(t,e){if(t[0].length===e)return t.shift();var s=new Uint8Array(e);let i=0;for(let r=0;r<e;r++)s[r]=t[0][i++],i===t[0].length&&(t.shift(),i=0);return t.length&&i<t[0].length&&(t[0]=t[0].slice(i)),s}function ss(t){if(t)return function(t){for(var e in ss.prototype)t[e]=ss.prototype[e];return t}(t)}ss.prototype.on=ss.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},ss.prototype.once=function(t,e){function s(){this.off(t,s),e.apply(this,arguments)}return s.fn=e,this.on(t,s),this},ss.prototype.off=ss.prototype.removeListener=ss.prototype.removeAllListeners=ss.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)this._callbacks={};else{var s=this._callbacks["$"+t];if(s)if(1==arguments.length)delete this._callbacks["$"+t];else{for(var i,r=0;r<s.length;r++)if((i=s[r])===e||i.fn===e){s.splice(r,1);break}0===s.length&&delete this._callbacks["$"+t]}}return this},ss.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),s=this._callbacks["$"+t],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(s){i=0;for(var r=(s=s.slice(0)).length;i<r;++i)s[i].apply(this,e)}return this},ss.prototype.emitReserved=ss.prototype.emit,ss.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},ss.prototype.hasListeners=function(t){return!!this.listeners(t).length};const is="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function rs(t,...e){return e.reduce(((e,s)=>(t.hasOwnProperty(s)&&(e[s]=t[s]),e)),{})}const ns=is.setTimeout,as=is.clearTimeout;function os(t,e){e.useNativeTimers?(t.setTimeoutFn=ns.bind(is),t.clearTimeoutFn=as.bind(is)):(t.setTimeoutFn=is.setTimeout.bind(is),t.clearTimeoutFn=is.clearTimeout.bind(is))}function ls(t){return"string"==typeof t?function(t){let e,s=0;for(let i=0,r=t.length;i<r;i++)(e=t.charCodeAt(i))<128?s+=1:e<2048?s+=2:e<55296||57344<=e?s+=3:(i++,s+=4);return s}(t):Math.ceil(1.33*(t.byteLength||t.size))}class hs extends Error{constructor(t,e,s){super(t),this.description=e,this.context=s,this.type="TransportError"}}class ds extends ss{constructor(t){super(),this.writable=!1,os(this,t),this.opts=t,this.query=t.query,this.socket=t.socket}onError(t,e,s){return super.emitReserved("error",new hs(t,e,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(t){"open"===this.readyState&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){t=Ke(t,this.socket.binaryType),this.onPacket(t)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,e={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(e)}_hostname(){var t=this.opts.hostname;return-1===t.indexOf(":")?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(t){return(t=function(t){let e="";for(var s in t)t.hasOwnProperty(s)&&(e.length&&(e+="&"),e+=encodeURIComponent(s)+"="+encodeURIComponent(t[s]));return e}(t)).length?"?"+t:""}}const cs="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),us=64,ps={};let gs,fs=0,ms=0;function vs(t){let e="";for(;e=cs[t%us]+e,0<(t=Math.floor(t/us)););return e}function bs(){var t=vs(+new Date);return t!==gs?(fs=0,gs=t):t+"."+vs(fs++)}for(;ms<us;ms++)ps[cs[ms]]=ms;let ys=!1;try{ys="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(ue){}const ws=ys;function xs(t){t=t.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||ws))return new XMLHttpRequest}catch(t){}if(!t)try{return new(is[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}function As(){}const _s=null!=new xs({xdomain:!1}).responseType;class Cs extends ss{constructor(t,e){super(),os(this,e),this.opts=e,this.method=e.method||"GET",this.uri=t,this.data=void 0!==e.data?e.data:null,this.create()}create(){var t,e=rs(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd;const s=this.xhr=new xs(e);try{s.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders)for(var i in s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&s.setRequestHeader(i,this.opts.extraHeaders[i])}catch(t){}if("POST"===this.method)try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{s.setRequestHeader("Accept","*/*")}catch(t){}null!=(t=this.opts.cookieJar)&&t.addCookies(s),"withCredentials"in s&&(s.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(s.timeout=this.opts.requestTimeout),s.onreadystatechange=()=>{var t;3===s.readyState&&null!=(t=this.opts.cookieJar)&&t.parseCookies(s),4===s.readyState&&(200===s.status||1223===s.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"==typeof s.status?s.status:0)}),0))},s.send(this.data)}catch(t){return void this.setTimeoutFn((()=>{this.onError(t)}),0)}"undefined"!=typeof document&&(this.index=Cs.requestsCount++,Cs.requests[this.index]=this)}onError(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}cleanup(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=As,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete Cs.requests[this.index],this.xhr=null}}onLoad(){var t=this.xhr.responseText;null!==t&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}if(Cs.requestsCount=0,Cs.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",Es);else if("function"==typeof addEventListener){addEventListener("onpagehide"in is?"pagehide":"unload",Es,!1)}function Es(){for(var t in Cs.requests)Cs.requests.hasOwnProperty(t)&&Cs.requests[t].abort()}const ks="function"==typeof Promise&&"function"==typeof Promise.resolve?t=>Promise.resolve().then(t):(t,e)=>e(t,0),Ss=is.WebSocket||is.MozWebSocket,Ts="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();const Ps={websocket:class extends ds{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(this.check()){var t=this.uri(),e=this.opts.protocols,s=Ts?{}:rs(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=Ts?new Ss(t,e,s):e?new Ss(t,e):new Ss(t)}catch(t){return this.emitReserved("error",t)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let s=0;s<t.length;s++){var e=t[s];const i=s===t.length-1;Ue(e,this.supportsBinary,(t=>{try{this.ws.send(t)}catch(t){}i&&ks((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){var t=this.opts.secure?"wss":"ws",e=this.query||{};return this.opts.timestampRequests&&(e[this.opts.timestampParam]=bs()),this.supportsBinary||(e.b64=1),this.createUri(t,e)}check(){return!!Ss}},webtransport:class extends ds{get name(){return"webtransport"}doOpen(){"function"==typeof WebTransport&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then((()=>{this.onClose()})).catch((t=>{this.onError("webtransport error",t)})),this.transport.ready.then((()=>{this.transport.createBidirectionalStream().then((t=>{var e=function(t,e){Ze=Ze||new TextDecoder;const s=[];let i=0,r=-1,n=!1;return new TransformStream({transform(a,o){for(s.push(a);;){if(0===i){if(ts(s)<1)break;var l=es(s,1);n=128==(128&l[0]),r=127&l[0],i=r<126?3:126===r?1:2}else if(1===i){if(ts(s)<2)break;l=es(s,2),r=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),i=3}else if(2===i){if(ts(s)<8)break;var h=es(s,8),d=(h=new DataView(h.buffer,h.byteOffset,h.length)).getUint32(0);if(d>Math.pow(2,21)-1){o.enqueue(Be);break}r=d*Math.pow(2,32)+h.getUint32(4),i=3}else{if(ts(s)<r)break;d=es(s,r),o.enqueue(Ke(n?d:Ze.decode(d),e)),i=0}if(0===r||r>t){o.enqueue(Be);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType);const s=t.readable.pipeThrough(e).getReader();(e=Qe()).readable.pipeTo(t.writable),this.writer=e.writable.getWriter();const i=()=>{s.read().then((({done:t,value:e})=>{t||(this.onPacket(e),i())})).catch((t=>{}))};i(),t={type:"open"},this.query.sid&&(t.data=`{"sid":"${this.query.sid}"}`),this.writer.write(t).then((()=>this.onOpen()))}))})))}write(t){this.writable=!1;for(let s=0;s<t.length;s++){var e=t[s];const i=s===t.length-1;this.writer.write(e).then((()=>{i&&ks((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){var t;null!=(t=this.transport)&&t.close()}},polling:class extends ds{constructor(t){if(super(t),this.polling=!1,"undefined"!=typeof location){var e="https:"===location.protocol;let s=location.port;s=s||(e?"443":"80"),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||s!==t.port}e=t&&t.forceBase64,this.supportsBinary=_s&&!e,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const e=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let t=0;this.polling&&(t++,this.once("pollComplete",(function(){--t||e()}))),this.writable||(t++,this.once("drain",(function(){--t||e()})))}else e()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){((t,e)=>{var s=t.split(Je),i=[];for(let t=0;t<s.length;t++){var r=Ke(s[t],e);if(i.push(r),"error"===r.type)break}return i})(t,this.socket.binaryType).forEach((t=>{if("opening"===this.readyState&&"open"===t.type&&this.onOpen(),"close"===t.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(t)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState)&&this.poll()}doClose(){var t=()=>{this.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}write(t){this.writable=!1,((t,e)=>{const s=t.length,i=new Array(s);let r=0;t.forEach(((t,n)=>{Ue(t,!1,(t=>{i[n]=t,++r===s&&e(i.join(Je))}))}))})(t,(t=>{this.doWrite(t,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){var t=this.opts.secure?"https":"http",e=this.query||{};return!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=bs()),this.supportsBinary||e.sid||(e.b64=1),this.createUri(t,e)}request(t={}){return Object.assign(t,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Cs(this.uri(),t)}doWrite(t,e){(t=this.request({method:"POST",data:t})).on("success",e),t.on("error",((t,e)=>{this.onError("xhr post error",t,e)}))}doPoll(){var t=this.request();t.on("data",this.onData.bind(this)),t.on("error",((t,e)=>{this.onError("xhr poll error",t,e)})),this.pollXhr=t}}},Ms=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Rs=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ls(t){var e=t,s=t.indexOf("["),i=t.indexOf("]");-1!=s&&-1!=i&&(t=t.substring(0,s)+t.substring(s,i).replace(/:/g,";")+t.substring(i,t.length));let r=Ms.exec(t||""),n={},a=14;for(;a--;)n[Rs[a]]=r[a]||"";return-1!=s&&-1!=i&&(n.source=e,n.host=n.host.substring(1,n.host.length-1).replace(/;/g,":"),n.authority=n.authority.replace("[","").replace("]","").replace(/;/g,":"),n.ipv6uri=!0),n.pathNames=function(t,e){var s=e.replace(/\/{2,9}/g,"/").split("/");return"/"!=e.slice(0,1)&&0!==e.length||s.splice(0,1),"/"==e.slice(-1)&&s.splice(s.length-1,1),s}(0,n.path),n.queryKey=function(t,e){const s={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,i){e&&(s[e]=i)})),s}(0,n.query),n}let Is=class t extends ss{constructor(t,e={}){super(),this.binaryType="arraybuffer",this.writeBuffer=[],t&&"object"==typeof t&&(e=t,t=null),t?(t=Ls(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=Ls(e.host).host),os(this,e),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=e.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},e),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(t){var e={},s=t.split("&");for(let t=0,r=s.length;t<r;t++){var i=s[t].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),"localhost"!==this.hostname)&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1)),this.open()}createTransport(t){var e=((e=Object.assign({},this.opts.query)).EIO=4,e.transport=t,this.id&&(e.sid=this.id),Object.assign({},this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]));return new Ps[t](e)}open(){let e;if(this.opts.rememberUpgrade&&t.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}setTransport(t){this.transport&&this.transport.removeAllListeners(),(this.transport=t).on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(t=>this.onClose("transport close",t)))}probe(e){let s=this.createTransport(e),i=!1;t.priorWebsocketSuccess=!1;const r=()=>{i||(s.send([{type:"ping",data:"probe"}]),s.once("packet",(e=>{i||("pong"===e.type&&"probe"===e.data?(this.upgrading=!0,this.emitReserved("upgrading",s),s&&(t.priorWebsocketSuccess="websocket"===s.name,this.transport.pause((()=>{i||"closed"!==this.readyState&&(d(),this.setTransport(s),s.send([{type:"upgrade"}]),this.emitReserved("upgrade",s),s=null,this.upgrading=!1,this.flush())})))):((e=new Error("probe error")).transport=s.name,this.emitReserved("upgradeError",e)))})))};function n(){i||(i=!0,d(),s.close(),s=null)}const a=t=>{(t=new Error("probe error: "+t)).transport=s.name,n(),this.emitReserved("upgradeError",t)};function o(){a("transport closed")}function l(){a("socket closed")}function h(t){s&&t.name!==s.name&&n()}const d=()=>{s.removeListener("open",r),s.removeListener("error",a),s.removeListener("close",o),this.off("close",l),this.off("upgrading",h)};s.once("open",r),s.once("error",a),s.once("close",o),this.once("close",l),this.once("upgrading",h),-1!==this.upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn((()=>{i||s.open()}),200):s.open()}onOpen(){if(this.readyState="open",t.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade){let t=0;for(var e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),this.resetPingTimeout(),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),(this.prevBufferLen=0)===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){var t;"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(t=this.getWritablePackets(),this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush"))}getWritablePackets(){if(this.maxPayload&&"polling"===this.transport.name&&1<this.writeBuffer.length){let e=1;for(let s=0;s<this.writeBuffer.length;s++){var t=this.writeBuffer[s].data;if(t&&(e+=ls(t)),0<s&&e>this.maxPayload)return this.writeBuffer.slice(0,s);e+=2}}return this.writeBuffer}write(t,e,s){return this.sendPacket("message",t,e,s),this}send(t,e,s){return this.sendPacket("message",t,e,s),this}sendPacket(t,e,s,i){"function"==typeof e&&(i=e,e=void 0),"function"==typeof s&&(i=s,s=null),"closing"!==this.readyState&&"closed"!==this.readyState&&((s=s||{}).compress=!1!==s.compress,this.emitReserved("packetCreate",t={type:t,data:e,options:s}),this.writeBuffer.push(t),i&&this.once("flush",i),this.flush())}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},s=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{(this.upgrading?s:t)()})):(this.upgrading?s:t)()),this}onError(e){t.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){var e=[];let s=0;for(var i=t.length;s<i;s++)~this.transports.indexOf(t[s])&&e.push(t[s]);return e}};Is.protocol=4;const Ds="function"==typeof ArrayBuffer,Fs=t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Os=Object.prototype.toString,Bs="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Os.call(Blob),Ns="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===Os.call(File);function zs(t){return Ds&&(t instanceof ArrayBuffer||Fs(t))||Bs&&t instanceof Blob||Ns&&t instanceof File}function js(t,e){if(t&&"object"==typeof t)if(Array.isArray(t)){for(let e=0,s=t.length;e<s;e++)if(js(t[e]))return!0}else{if(zs(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return js(t.toJSON(),!0);for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&js(t[e]))return!0}return!1}function Us(t){var e=[],s=t.data;return t.data=Hs(s,e),t.attachments=e.length,{packet:t,buffers:e}}function Hs(t,e){if(!t)return t;var s;if(zs(t))return s={_placeholder:!0,num:e.length},e.push(t),s;if(Array.isArray(t)){var i=new Array(t.length);for(let s=0;s<t.length;s++)i[s]=Hs(t[s],e);return i}if("object"!=typeof t||t instanceof Date)return t;var r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=Hs(t[s],e));return r}function qs(t,e){return t.data=$s(t.data,e),delete t.attachments,t}function $s(t,e){if(t){if(t&&!0===t._placeholder){if("number"==typeof t.num&&0<=t.num&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}if(Array.isArray(t))for(let s=0;s<t.length;s++)t[s]=$s(t[s],e);else if("object"==typeof t)for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=$s(t[s],e))}return t}const Vs=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];!function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(Ft=Ft||{});function Gs(t){return"[object Object]"===Object.prototype.toString.call(t)}class Ws extends ss{constructor(t){super(),this.reviver=t}add(t){let e;if("string"==typeof t){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");var s=(e=this.decodeString(t)).type===Ft.BINARY_EVENT;(!s&&e.type!==Ft.BINARY_ACK||(e.type=s?Ft.EVENT:Ft.ACK,this.reconstructor=new Ks(e),0===e.attachments))&&super.emitReserved("decoded",e)}else{if(!zs(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(e=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,super.emitReserved("decoded",e))}}decodeString(t){let e=0;var s={type:Number(t.charAt(0))};if(void 0===Ft[s.type])throw new Error("unknown packet type "+s.type);if(s.type===Ft.BINARY_EVENT||s.type===Ft.BINARY_ACK){for(var i=e+1;"-"!==t.charAt(++e)&&e!=t.length;);if((i=t.substring(i,e))!=Number(i)||"-"!==t.charAt(e))throw new Error("Illegal attachments");s.attachments=Number(i)}if("/"===t.charAt(e+1)){for(i=e+1;++e&&","!==t.charAt(e)&&e!==t.length;);s.nsp=t.substring(i,e)}else s.nsp="/";if(""!==(i=t.charAt(e+1))&&Number(i)==i){for(i=e+1;++e;){var r=t.charAt(e);if(null==r||Number(r)!=r){--e;break}if(e===t.length)break}s.id=Number(t.substring(i,e+1))}if(t.charAt(++e)){if(i=this.tryParse(t.substr(e)),!Ws.isPayloadValid(s.type,i))throw new Error("invalid payload");s.data=i}return s}tryParse(t){try{return JSON.parse(t,this.reviver)}catch(t){return!1}}static isPayloadValid(t,e){switch(t){case Ft.CONNECT:return Gs(e);case Ft.DISCONNECT:return void 0===e;case Ft.CONNECT_ERROR:return"string"==typeof e||Gs(e);case Ft.EVENT:case Ft.BINARY_EVENT:return Array.isArray(e)&&("number"==typeof e[0]||"string"==typeof e[0]&&-1===Vs.indexOf(e[0]));case Ft.ACK:case Ft.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Ks{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){return this.buffers.push(t),this.buffers.length===this.reconPack.attachments?(t=qs(this.reconPack,this.buffers),this.finishedReconstruction(),t):null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}var Xs=Object.freeze({__proto__:null,Decoder:Ws,Encoder:class{constructor(t){this.replacer=t}encode(t){return t.type!==Ft.EVENT&&t.type!==Ft.ACK||!js(t)?[this.encodeAsString(t)]:this.encodeAsBinary({type:t.type===Ft.EVENT?Ft.BINARY_EVENT:Ft.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id})}encodeAsString(t){let e=""+t.type;return t.type!==Ft.BINARY_EVENT&&t.type!==Ft.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data,this.replacer)),e}encodeAsBinary(t){t=Us(t);var e=this.encodeAsString(t.packet);return(t=t.buffers).unshift(e),t}},get PacketType(){return Ft},protocol:5});function Ys(t,e,s){return t.on(e,s),function(){t.off(e,s)}}const Js=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Qs extends ss{constructor(t,e,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){var t;this.subs||(t=this.io,this.subs=[Ys(t,"open",this.onopen.bind(this)),Ys(t,"packet",this.onpacket.bind(this)),Ys(t,"error",this.onerror.bind(this)),Ys(t,"close",this.onclose.bind(this))])}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(Js.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');var s,i;return e.unshift(t),!this._opts.retries||this.flags.fromQueue||this.flags.volatile?((t={type:Ft.EVENT,data:e,options:{}}).options.compress=!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(s=this.ids++,i=e.pop(),this._registerAckCallback(s,i),t.id=s),i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable,(!this.flags.volatile||i&&this.connected)&&(this.connected?(this.notifyOutgoingListeners(t),this.packet(t)):this.sendBuffer.push(t)),this.flags={}):this._addToQueue(e),this}_registerAckCallback(t,e){var s=null!=(s=this.flags.timeout)?s:this._opts.ackTimeout;if(void 0===s)this.acks[t]=e;else{const i=this.io.setTimeoutFn((()=>{delete this.acks[t];for(let e=0;e<this.sendBuffer.length;e++)this.sendBuffer[e].id===t&&this.sendBuffer.splice(e,1);e.call(this,new Error("operation has timed out"))}),s);this.acks[t]=(...t)=>{this.io.clearTimeoutFn(i),e.apply(this,[null,...t])}}}emitWithAck(t,...e){const s=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise(((i,r)=>{e.push(((t,e)=>s?t?r(t):i(e):i(t))),this.emit(t,...e)}))}_addToQueue(t){let e;"function"==typeof t[t.length-1]&&(e=t.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push(((t,...i)=>{if(s===this._queue[0])return null!==t?s.tryCount>this._opts.retries&&(this._queue.shift(),e)&&e(t):(this._queue.shift(),e&&e(null,...i)),s.pending=!1,this._drainQueue()})),this._queue.push(s),this._drainQueue()}_drainQueue(t=!1){var e;!this.connected||0===this._queue.length||(e=this._queue[0]).pending&&!t||(e.pending=!0,e.tryCount++,this.flags=e.flags,this.emit.apply(this,e.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){"function"==typeof this.auth?this.auth((t=>{this._sendConnectPacket(t)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Ft.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Ft.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ft.EVENT:case Ft.BINARY_EVENT:this.onevent(t);break;case Ft.ACK:case Ft.BINARY_ACK:this.onack(t);break;case Ft.DISCONNECT:this.ondisconnect();break;case Ft.CONNECT_ERROR:this.destroy();var e=new Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e)}}onevent(t){var e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length)for(const e of this._anyListeners.slice())e.apply(this,t);super.emit.apply(this,t),this._pid&&t.length&&"string"==typeof t[t.length-1]&&(this._lastOffset=t[t.length-1])}ack(t){const e=this;let s=!1;return function(...i){s||(s=!0,e.packet({type:Ft.ACK,id:t,data:i}))}}onack(t){var e=this.acks[t.id];"function"==typeof e&&(e.apply(this,t.data),delete this.acks[t.id])}onconnect(t,e){this.id=t,this.recovered=e&&this._pid===e,this._pid=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((t=>this.emitEvent(t))),this.receiveBuffer=[],this.sendBuffer.forEach((t=>{this.notifyOutgoingListeners(t),this.packet(t)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((t=>t())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ft.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(this._anyListeners)if(t){var e=this._anyListeners;for(let s=0;s<e.length;s++)if(t===e[s])return e.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(this._anyOutgoingListeners)if(t){var e=this._anyOutgoingListeners;for(let s=0;s<e.length;s++)if(t===e[s])return e.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length)for(const e of this._anyOutgoingListeners.slice())e.apply(this,t.data)}}function Zs(t){this.ms=(t=t||{}).min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=0<t.jitter&&t.jitter<=1?t.jitter:0,this.attempts=0}Zs.prototype.duration=function(){var t,e,s=this.ms*Math.pow(this.factor,this.attempts++);return this.jitter&&(t=Math.random(),e=Math.floor(t*this.jitter*s),s=0==(1&Math.floor(10*t))?s-e:s+e),0|Math.min(s,this.max)},Zs.prototype.reset=function(){this.attempts=0},Zs.prototype.setMin=function(t){this.ms=t},Zs.prototype.setMax=function(t){this.max=t},Zs.prototype.setJitter=function(t){this.jitter=t};class ti extends ss{constructor(t,e){super(),this.nsps={},this.subs=[],t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.opts=e,os(this,e),this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(null!=(s=e.randomizationFactor)?s:.5),this.backoff=new Zs({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this._readyState="closed",this.uri=t;var s=e.parser||Xs;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=!1!==e.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null!=(e=this.backoff)&&e.setMin(t),this)}randomizationFactor(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null!=(e=this.backoff)&&e.setJitter(t),this)}reconnectionDelayMax(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null!=(e=this.backoff)&&e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(!~this._readyState.indexOf("open")){this.engine=new Is(this.uri,this.opts);const i=this.engine,r=this,n=(this._readyState="opening",this.skipReconnect=!1,Ys(i,"open",(function(){r.onopen(),t&&t()}))),a=e=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",e),t?t(e):this.maybeReconnectOnOpen()};var e=Ys(i,"error",a);if(!1!==this._timeout){var s=this._timeout;const t=this.setTimeoutFn((()=>{n(),a(new Error("timeout")),i.close()}),s);this.opts.autoUnref&&t.unref(),this.subs.push((()=>{this.clearTimeoutFn(t)}))}this.subs.push(n),this.subs.push(e)}return this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");var t=this.engine;this.subs.push(Ys(t,"ping",this.onping.bind(this)),Ys(t,"data",this.ondata.bind(this)),Ys(t,"error",this.onerror.bind(this)),Ys(t,"close",this.onclose.bind(this)),Ys(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(t){this.onclose("parse error",t)}}ondecoded(t){ks((()=>{this.emitReserved("packet",t)}),this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,e){let s=this.nsps[t];return s?this._autoConnect&&!s.active&&s.connect():(s=new Qs(this,t,e),this.nsps[t]=s),s}_destroy(t){for(const t of Object.keys(this.nsps)){if(this.nsps[t].active)return}this._close()}_packet(t){var e=this.encoder.encode(t);for(let s=0;s<e.length;s++)this.engine.write(e[s],t.options)}cleanup(){this.subs.forEach((t=>t())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t,e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var e=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn((()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect)||t.open((e=>{e?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",e)):t.onreconnect()}))}),e);this.opts.autoUnref&&s.unref(),this.subs.push((()=>{this.clearTimeoutFn(s)}))}}onreconnect(){var t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const ei={};function si(t,e){"object"==typeof t&&(e=t,t=void 0);t=function(t,e="",s){let i=t;return s=s||"undefined"!=typeof location&&location,"string"==typeof(t=null==t?s.protocol+"//"+s.host:t)&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?s.protocol+t:s.host+t),/^(https?|wss?):\/\//.test(t)||(t=void 0!==s?s.protocol+"//"+t:"https://"+t),i=Ls(t)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/",t=-1!==i.host.indexOf(":")?"["+i.host+"]":i.host,i.id=i.protocol+"://"+t+":"+i.port+e,i.href=i.protocol+"://"+t+(s&&s.port===i.port?"":":"+i.port),i}(t,(e=e||{}).path||"/socket.io");var s=t.source,i=t.id,r=t.path;r=ei[i]&&r in ei[i].nsps;let n;return n=(r=e.forceNew||e["force new connection"]||!1===e.multiplex||r)?new ti(s,e):(ei[i]||(ei[i]=new ti(s,e)),ei[i]),t.query&&!e.query&&(e.query=t.queryKey),n.socket(t.path,e)}Object.assign(si,{Manager:ti,Socket:Qs,io:si,connect:si});const ii=it("<style>"),ri=it('<div class="relative z-10" aria-labelledby="modal-title" role="dialog" aria-modal="true"><style></style><div class="fixed inset-0 bg-black bg-opacity-50 transition-opacity animate-fade-in"></div><div class="fixed inset-0 z-10 overflow-y-auto"><div class="flex min-h-full items-center justify-center p-4 text-center sm:p-0"><div class="relative transform overflow-hidden rounded-lg text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg">'),ni=it("<div><pre>");const ai=t=>{let e;const[s]=W(t,["onOpen","onClose","isOpen","value"]),[i,r]=(k((()=>{e&&(e.innerHTML=function(t){return(t=(t="string"!=typeof t?JSON.stringify(t,void 0,2):t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?)/g,(function(t){let e="number";return/^"/.test(t)?e=/:$/.test(t)?"key":"string":/true|false/.test(t)?e="boolean":/null/.test(t)&&(e="null"),'<span class="'+e+'">'+t+"</span>"}))}(JSON.stringify(t?.value,void 0,2)))})),x(s.isOpen??!1)),n=(_((()=>{xt(t.isOpen)||t.isOpen===i()||o()})),t=>{t.stopPropagation()}),a=()=>{r(!1),s.onClose?.(),document.body.style.overflow="auto"},o=()=>{i()?a():(r(!0),s.onOpen?.(),document.body.style.overflow="hidden")};return H(X,{get when(){return i()},get children(){return[(ht(r=ii(),wt),r),(r=ri(),s=r.firstChild,i=s.nextSibling.nextSibling.firstChild.firstChild,r.style.setProperty("z-index","1100"),r.addEventListener("click",a),ht(s,wt),i.style.setProperty("background-color","transparent"),i.style.setProperty("margin-left","20px"),i.style.setProperty("margin-right","20px"),i.addEventListener("click",n),i.addEventListener("pointerdown",n),ht(i,(()=>{const s=C((()=>!!t.value));return()=>{return s()&&(i=(t=ni()).firstChild,t.style.setProperty("background","white"),t.style.setProperty("margin","auto"),t.style.setProperty("padding","7px"),"function"==typeof(r=e)?lt(r,i):e=i,t);var t,i,r}})()),r)];var s,i,r}})},oi=it('<button class="flex justify-center items-center upload-file-button">'),li=t=>{{const e=oi();return e.$$click=e=>t.onSubmit(e),e.style.setProperty("width","100%"),e.style.setProperty("left","20px"),e.style.setProperty("right","20px"),e.style.setProperty("bottom","75px"),e.style.setProperty("margin","auto"),e.style.setProperty("z-index","1000"),ht(e,(()=>t.children)),A((s=>{var i=t.backgroundColor??"#ffffff",r=t.textColor??"#303235",n=t.disabled;return i!==s._v$&&(null!=(s._v$=i)?e.style.setProperty("background-color",i):e.style.removeProperty("background-color")),r!==s._v$2&&(null!=(s._v$2=r)?e.style.setProperty("color",r):e.style.removeProperty("color")),n!==s._v$3&&(e.disabled=s._v$3=n),s}),{_v$:void 0,_v$2:void 0,_v$3:void 0}),e}},hi=(rt(["click"]),it('<div class="modal-backdrop"><div class="fixed modal">')),di=t=>{let e;const s=s=>{e.contains(s.target)||t.onClose()};return C((()=>{const i=C((()=>!!t.isOpen));return()=>{return i()?(n=(r=hi()).firstChild,r.$$click=s,"function"==typeof(a=e)?lt(a,n):e=n,ht(n,(()=>t.children)),r):[];var r,n,a}})())};function ci(t){var e=[];if(t)for(const i in t){var s=+i;isNaN(s)||(s=t[s])&&(s={source:URL.createObjectURL(s),name:s.name,size:s.size,file:s},e.push(s))}return e}function ui(t){const[e,s]=x([]);let i=()=>{};const r=async t=>{t.preventDefault(),t.stopPropagation();let e=[];(t=t.currentTarget).files&&(e=ci(t.files)),t.removeEventListener("change",r),t.remove(),s(e);try{await i(e)}catch(t){console.error(t)}};return{files:e,selectFiles:e=>{e&&(i=e),e=function({multiple:t=!1,accept:e=""}){var s=document.createElement("input");return s.type="file",s.accept=e,s.multiple=t,s}(t||{}),e.addEventListener("change",r),e.click()},removeFile:t=>{s((e=>e.filter((e=>e.name!==t))))},clearFiles:()=>{s([])}}}rt(["click"]);const pi=it('<svg width="49" height="43" viewBox="0 0 49 43" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="Upload icon"><path id="Vector" d="M25.6402 10.6774L25.5755 10.6581C25.2503 10.5611 25.0648 10.2191 25.1619 9.89358L25.6402 10.6774ZM25.6402 10.6774L25.643 10.6741M25.6402 10.6774L25.643 10.6741M25.643 10.6741C25.948 10.7292 26.2505 10.5465 26.3401 10.244C27.157 7.49922 29.7306 5.58174 32.5978 5.58174C32.9373 5.58174 33.2126 5.30642 33.2126 4.96697C33.2126 4.62751 32.9373 4.3522 32.5978 4.3522C29.074 4.3522 26.1127 6.69839 25.1619 9.89351L25.643 10.6741Z" fill="#2A767E" stroke="#F9FFF9" stroke-width="0.209167"></path><path id="Vector_2" d="M39.74 29.966H36.6789C36.3972 29.966 36.1688 29.7375 36.1688 29.4558C36.1688 29.1741 36.3972 28.9456 36.6789 28.9456H39.74C43.9595 28.9456 47.3927 25.5125 47.3927 21.2929C47.3927 17.0734 43.9595 13.6403 39.74 13.6403H39.6664C39.5184 13.6403 39.3777 13.5761 39.2808 13.4642C39.1839 13.3524 39.1402 13.2041 39.1613 13.0576C39.2068 12.7398 39.2298 12.4206 39.2298 12.1097C39.2298 8.45285 36.2543 5.47736 32.5974 5.47736C31.1748 5.47736 29.818 5.92194 28.6737 6.76336C28.4223 6.94812 28.0652 6.86613 27.9198 6.58954C24.6791 0.418577 16.2146 -0.41012 11.8263 4.95808C9.97764 7.21962 9.25128 10.1615 9.83332 13.0288C9.89746 13.3455 9.65512 13.6406 9.33334 13.6406H9.12891C4.90939 13.6406 1.47622 17.0738 1.47622 21.2933C1.47622 25.5129 4.90939 28.946 9.12891 28.946H12.1899C12.4716 28.946 12.7001 29.1745 12.7001 29.4562C12.7001 29.7379 12.4716 29.9664 12.1899 29.9664H9.12891C4.34666 29.9664 0.455811 26.0755 0.455811 21.2933C0.455811 16.6452 4.13126 12.8393 8.72841 12.6293C8.29658 9.6546 9.12235 6.65402 11.0362 4.31234C15.7346 -1.43555 24.7387 -0.791285 28.5449 5.61803C29.7592 4.85676 31.1486 4.45741 32.5973 4.45741C37.0278 4.45741 40.5386 8.22838 40.2314 12.6341C44.7862 12.8896 48.4128 16.6754 48.4128 21.2929C48.4128 26.0755 44.522 29.966 39.7397 29.966L39.74 29.966Z" fill="#2A767E"></path><path id="Vector_3" d="M11.5067 29.1677C11.5067 36.2584 17.2753 42.0269 24.366 42.0269C31.4567 42.0269 37.2252 36.2583 37.2252 29.1677C37.2252 22.077 31.4567 16.3085 24.366 16.3085C17.2752 16.3085 11.5067 22.0771 11.5067 29.1677ZM12.7365 29.1677C12.7365 22.7554 17.9536 17.5383 24.366 17.5383C30.7783 17.5383 35.9954 22.7553 35.9954 29.1677C35.9954 35.58 30.7783 40.7972 24.366 40.7972C17.9537 40.7972 12.7365 35.5801 12.7365 29.1677Z" fill="#2A767E" stroke="#F9FFF9" stroke-width="0.209167"></path><g id="arrow"><path id="Vector_4" d="M24.1212 34.3021C24.1212 34.5661 24.3354 34.7802 24.5993 34.7802C24.8633 34.7802 25.0774 34.5664 25.0774 34.3021V24.5908C25.0774 24.3268 24.8633 24.1127 24.5993 24.1127C24.3353 24.1127 24.1212 24.3268 24.1212 24.5908V34.3021Z" fill="#2A767E" stroke="#2A767E" stroke-width="0.209167"></path><path id="Vector_5" d="M24.5992 25.268L21.9493 27.9179L21.9492 27.918L24.5992 25.268ZM24.5992 25.268L27.2492 27.918C27.3424 28.0112 27.4651 28.058 27.5872 28.058L24.5992 25.268ZM24.9372 24.2538C24.7505 24.067 24.4477 24.0669 24.2611 24.2538L27.5872 28.058C27.7091 28.058 27.832 28.0116 27.9254 27.9179C28.1121 27.7311 28.112 27.4286 27.9253 27.2418L24.9372 24.2538Z" fill="#2A767E" stroke="#2A767E" stroke-width="0.209167">'),gi=()=>pi(),fi=it('<svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="Delete"><circle id="Ellipse 5" cx="8.47168" cy="8" r="8" fill="black" fill-opacity="0.6"></circle><g id="Bin icon"><path id="Vector" d="M11.9488 5.14517H10.9493C10.9359 5.14054 10.922 5.13753 10.9079 5.13614H9.84366V4.25348C9.84372 4.18714 9.81772 4.12346 9.77137 4.07608C9.72496 4.02871 9.66188 4.00138 9.59561 4H7.07864C7.0114 4 6.94694 4.02667 6.89944 4.07422C6.85189 4.12177 6.82517 4.18624 6.82517 4.25348V5.13614H5.76631C5.75222 5.13753 5.73832 5.14054 5.72496 5.14517H4.72539C4.6348 5.14517 4.55113 5.19345 4.50587 5.27188C4.46061 5.35031 4.46061 5.44691 4.50587 5.52535C4.55114 5.60378 4.63481 5.65211 4.72539 5.65211H5.53975L6.19778 11.7735C6.20482 11.8358 6.23456 11.8933 6.28133 11.9351C6.32804 11.9769 6.38853 11.9999 6.45125 12H10.2265C10.2886 11.9991 10.3482 11.9756 10.3942 11.9339C10.4402 11.8922 10.4694 11.8352 10.4764 11.7735L11.1344 5.66105H11.9488C12.0394 5.66105 12.1231 5.61277 12.1683 5.53434C12.2136 5.45591 12.2136 5.35924 12.1683 5.28087C12.1231 5.20244 12.0394 5.1541 11.9488 5.1541L11.9488 5.14517ZM7.33758 4.50695H9.33664V5.13614H7.33758V4.50695ZM9.99647 11.4894H6.67775L6.04855 5.66111H10.6256L9.99647 11.4894Z" fill="white"></path><path id="Vector_2" d="M8.3377 10.8962C8.40493 10.8962 8.4694 10.8695 8.51696 10.822C8.56451 10.7744 8.59117 10.71 8.59117 10.6427V6.50791C8.59117 6.41732 8.5429 6.33365 8.46447 6.28839C8.38604 6.24306 8.28937 6.24306 8.21094 6.28839C8.1325 6.33365 8.08423 6.41732 8.08423 6.50791V10.6427C8.08423 10.71 8.11089 10.7744 8.15845 10.822C8.206 10.8695 8.27046 10.8962 8.3377 10.8962H8.3377Z" fill="white"></path><path id="Vector_3" d="M7.33981 10.8944H7.35058C7.41752 10.8917 7.4806 10.8625 7.52611 10.8133C7.57156 10.7641 7.59576 10.6989 7.59329 10.632L7.44046 6.49719L7.44052 6.49713C7.43913 6.42941 7.41018 6.36512 7.36028 6.31926C7.31032 6.27345 7.24387 6.25004 7.17622 6.25443C7.10928 6.25726 7.0462 6.28645 7.00075 6.33563C6.95524 6.38481 6.93111 6.45 6.93351 6.51694L7.08634 10.6517C7.08953 10.7169 7.11758 10.7784 7.16477 10.8236C7.21191 10.8687 7.27457 10.8941 7.33981 10.8944L7.33981 10.8944Z" fill="white"></path><path id="Vector_4" d="M9.32638 10.8946H9.33534C9.40216 10.8961 9.46687 10.8713 9.51562 10.8256C9.56431 10.7798 9.59321 10.7168 9.59604 10.6501L9.74887 6.51526H9.74881C9.75128 6.44832 9.72708 6.38313 9.68163 6.33395C9.63613 6.28477 9.57304 6.25558 9.5061 6.25275C9.43766 6.24571 9.3694 6.2678 9.31806 6.31367C9.26672 6.35947 9.2371 6.42484 9.23644 6.49371L9.08181 10.6285H9.08187C9.07844 10.6964 9.10239 10.7627 9.14838 10.8128C9.19431 10.8628 9.25847 10.8923 9.32637 10.8946L9.32638 10.8946Z" fill="white">'),mi=()=>fi(),vi=it('<div class="flex items-center justify-between upload-file-item"><p></p><div>'),bi=t=>{return i=(s=(e=vi()).firstChild).nextSibling,ht(s,(()=>t.file.name)),i.$$click=()=>t.onDelete(),i.style.setProperty("cursor","pointer"),ht(i,H(mi,{})),e;var e,s,i},yi=(rt(["click"]),it('<form class="flex flex-col justify-center items-center gap-8"><div class="flex flex-col justify-center items-center gap-6"><h2 class="modal-title">Faça o upload do seu Laudo Médico</h2><div class="dropzone flex justify-center items-center"><div class="flex flex-col justify-center items-center gap-2"><div><h3>Arraste & solte arquivos ou <a>Escolha</a></h3><p>Formatos suportados: JPEG, PNG, PDF</p></div></div></div><div class="flex flex-col gap-2">')),wi=it('<h4 class="upload-message">Fazendo upload do documento'),xi=t=>{const[e,s]=x([]),{selectFiles:i,clearFiles:r}=ui({accept:"image/jpeg,image/gif,image/png,application/pdf,image/x-eps"}),{setRef:n,clearFiles:a}=function(t){const[e,s]=x([]),[i,r]=x(!1);let n;const a=e=>{r(!0),Promise.resolve(t?.onDragStart?.(ci(e.dataTransfer?.files||null)))},o=e=>{r(!1),Promise.resolve(t?.onDragEnd?.(ci(e.dataTransfer?.files||null)))},l=e=>{Promise.resolve(t?.onDragEnter?.(ci(e.dataTransfer?.files||null)))},h=e=>{Promise.resolve(t?.onDragLeave?.(ci(e.dataTransfer?.files||null)))},d=e=>{e.preventDefault(),Promise.resolve(t?.onDragOver?.(ci(e.dataTransfer?.files||null)))},c=e=>{Promise.resolve(t?.onDrag?.(ci(e.dataTransfer?.files||null)))},u=e=>{e.preventDefault(),e=ci(e.dataTransfer?.files||null),s(e),Promise.resolve(t?.onDrop?.(e))};return k((()=>{n&&(n.addEventListener("dragstart",a),n.addEventListener("dragenter",l),n.addEventListener("dragend",o),n.addEventListener("dragleave",h),n.addEventListener("dragover",d),n.addEventListener("drag",c),n.addEventListener("drop",u),S((()=>{n?.removeEventListener("dragstart",a),n?.removeEventListener("dragenter",l),n?.removeEventListener("dragend",o),n?.removeEventListener("dragleave",h),n?.removeEventListener("dragover",d),n?.removeEventListener("drag",c),n?.removeEventListener("drop",u)})))})),{setRef:t=>{n=t},files:e,isDragging:i,removeFile:t=>{s((e=>e.filter((e=>e.name!==t))))},clearFiles:()=>{s([])}}}({onDrop:t=>{s(t)}}),o=()=>{r(),a(),s([])};return u=(c=(d=(h=(l=yi()).firstChild.firstChild.nextSibling).firstChild).firstChild).firstChild.firstChild.nextSibling,p=h.nextSibling,lt(n,h),ht(d,H(gi,{}),c),u.$$click=t=>{t.preventDefault(),i((t=>{s(t)}))},ht(p,(()=>{const t=C((()=>0<e().length));return()=>t()&&wi()})(),null),ht(p,H(K,{get each(){return e()},children:t=>H(bi,{file:t,onDelete:o})}),null),ht(l,H(li,{onSubmit:s=>{s.preventDefault(),t.onSubmit(e())},get backgroundColor(){return t.buttonInput?.backgroundColor},get textColor(){return t.buttonInput?.textColor},get disabled(){return 0===e()?.length},children:"Enviar Arquivos"}),null),l;var l,h,d,c,u,p},Ai=(rt(["click"]),it('<svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.06686 13.8666H5.2002V12.1333H6.06686C6.29672 12.1333 6.51716 12.2246 6.67969 12.3871C6.84222 12.5497 6.93353 12.7701 6.93353 13C6.93353 13.2298 6.84222 13.4503 6.67969 13.6128C6.51716 13.7753 6.29672 13.8666 6.06686 13.8666ZM12.1335 17.3333V12.1333H13.0002C13.2301 12.1333 13.4505 12.2246 13.613 12.3871C13.7756 12.5497 13.8669 12.7701 13.8669 13V16.4666C13.8669 16.6965 13.7756 16.9169 13.613 17.0795C13.4505 17.242 13.2301 17.3333 13.0002 17.3333H12.1335Z" fill="#F34646"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M1.7334 2.6C1.7334 1.91044 2.00733 1.24912 2.49492 0.761522C2.98252 0.273928 3.64384 0 4.3334 0L18.5589 0L24.2667 5.70787V23.4C24.2667 24.0896 23.9928 24.7509 23.5052 25.2385C23.0176 25.7261 22.3563 26 21.6667 26H4.3334C3.64384 26 2.98252 25.7261 2.49492 25.2385C2.00733 24.7509 1.7334 24.0896 1.7334 23.4V2.6ZM6.06673 10.4H3.46673V19.0667H5.20007V15.6H6.06673C6.75629 15.6 7.41762 15.3261 7.90521 14.8385C8.3928 14.3509 8.66673 13.6896 8.66673 13C8.66673 12.3104 8.3928 11.6491 7.90521 11.1615C7.41762 10.6739 6.75629 10.4 6.06673 10.4ZM13.0001 10.4H10.4001V19.0667H13.0001C13.6896 19.0667 14.3509 18.7927 14.8385 18.3051C15.3261 17.8176 15.6001 17.1562 15.6001 16.4667V13C15.6001 12.3104 15.3261 11.6491 14.8385 11.1615C14.3509 10.6739 13.6896 10.4 13.0001 10.4ZM17.3334 19.0667V10.4H22.5334V12.1333H19.0667V13.8667H20.8001V15.6H19.0667V19.0667H17.3334Z" fill="#F34646"></path><rect x="2" y="8" width="21" height="13" fill="#F34646"></rect><path d="M4.6456 18V11.4545H7.10014C7.60298 11.4545 8.02486 11.5483 8.36577 11.7358C8.70881 11.9233 8.96768 12.1811 9.1424 12.5092C9.31925 12.8352 9.40767 13.206 9.40767 13.6214C9.40767 14.0412 9.31925 14.4141 9.1424 14.7401C8.96555 15.0661 8.70455 15.3228 8.35938 15.5103C8.0142 15.6957 7.58913 15.7884 7.08416 15.7884H5.45739V14.8136H6.92436C7.21839 14.8136 7.45916 14.7624 7.64666 14.6602C7.83416 14.5579 7.97266 14.4173 8.06214 14.2383C8.15376 14.0593 8.19957 13.8537 8.19957 13.6214C8.19957 13.3892 8.15376 13.1847 8.06214 13.0078C7.97266 12.831 7.8331 12.6935 7.64347 12.5955C7.45597 12.4954 7.21413 12.4453 6.91797 12.4453H5.83132V18H4.6456ZM12.6556 18H10.4376V11.4545H12.7004C13.3502 11.4545 13.9085 11.5856 14.3751 11.8477C14.8438 12.1076 15.2039 12.4815 15.4553 12.9695C15.7068 13.4574 15.8325 14.0412 15.8325 14.7209C15.8325 15.4027 15.7057 15.9886 15.4521 16.4787C15.2007 16.9687 14.8374 17.3448 14.3623 17.6069C13.8893 17.869 13.3204 18 12.6556 18ZM11.6233 16.9741H12.5981C13.0541 16.9741 13.4344 16.891 13.7391 16.7248C14.0438 16.5565 14.2728 16.3061 14.4262 15.9737C14.5796 15.6392 14.6563 15.2216 14.6563 14.7209C14.6563 14.2202 14.5796 13.8047 14.4262 13.4744C14.2728 13.142 14.0459 12.8938 13.7455 12.7298C13.4472 12.5636 13.0764 12.4805 12.6333 12.4805H11.6233V16.9741ZM16.9591 18V11.4545H21.1523V12.4485H18.1448V14.2255H20.8646V15.2195H18.1448V18H16.9591Z" fill="white">')),_i=()=>Ai();var Ci,Ei,ki,Si,Ti={640:(t,e,s)=>{s.d(e,{AnnotationLayer:()=>z,FreeTextAnnotationElement:()=>E,InkAnnotationElement:()=>L,StampAnnotationElement:()=>B});var i=s(266),r=s(473),n=s(780);function a(t){return Math.floor(255*Math.max(0,Math.min(1,t))).toString(16).padStart(2,"0")}function o(t){return Math.max(0,Math.min(255,255*t))}class l{static CMYK_G([t,e,s,i]){return["G",1-Math.min(1,.3*t+.59*s+.11*e+i)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return[t=o(t),t,t]}static G_HTML([t]){return"#"+(t=a(t))+t+t}static RGB_G([t,e,s]){return["G",.3*t+.59*e+.11*s]}static RGB_rgb(t){return t.map(o)}static RGB_HTML(t){return"#"+t.map(a).join("")}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,s,i]){return["RGB",1-Math.min(1,t+i),1-Math.min(1,s+i),1-Math.min(1,e+i)]}static CMYK_rgb([t,e,s,i]){return[o(1-Math.min(1,t+i)),o(1-Math.min(1,s+i)),o(1-Math.min(1,e+i))]}static CMYK_HTML(t){return t=this.CMYK_RGB(t).slice(1),this.RGB_HTML(t)}static RGB_CMYK([t,e,s]){return["CMYK",t=1-t,e=1-e,s=1-s,Math.min(t,e,s)]}}var h=s(160);const d=new WeakSet;function c(t){return{width:t[2]-t[0],height:t[3]-t[1]}}class u{static create(t){switch(t.data.annotationType){case i.AnnotationType.LINK:return new g(t);case i.AnnotationType.TEXT:return new f(t);case i.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new v(t);case"Btn":return t.data.radioButton?new w(t):new(t.data.checkBox?y:x)(t);case"Ch":return new A(t);case"Sig":return new b(t)}return new m(t);case i.AnnotationType.POPUP:return new _(t);case i.AnnotationType.FREETEXT:return new E(t);case i.AnnotationType.LINE:return new k(t);case i.AnnotationType.SQUARE:return new S(t);case i.AnnotationType.CIRCLE:return new T(t);case i.AnnotationType.POLYLINE:return new P(t);case i.AnnotationType.CARET:return new R(t);case i.AnnotationType.INK:return new L(t);case i.AnnotationType.POLYGON:return new M(t);case i.AnnotationType.HIGHLIGHT:return new I(t);case i.AnnotationType.UNDERLINE:return new D(t);case i.AnnotationType.SQUIGGLY:return new F(t);case i.AnnotationType.STRIKEOUT:return new O(t);case i.AnnotationType.STAMP:return new B(t);case i.AnnotationType.FILEATTACHMENT:return new N(t);default:return new p(t)}}}class p{#t=!1;constructor(t,{isRenderable:e=!1,ignoreBorder:s=!1,createQuadrilaterals:i=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(s)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:s}){return!!(t?.str||e?.str||s?.str)}get hasPopupData(){return p._hasPopupData(this.data)}_createContainer(t){var{data:e,parent:{page:s,viewport:r}}=this,n=document.createElement("section"),{pageWidth:r,pageHeight:a,pageX:o,pageY:l}=(n.setAttribute("data-annotation-id",e.id),this instanceof m||(n.tabIndex=1e3),n.style.zIndex=this.parent.zIndex++,this.data.popupRef&&n.setAttribute("aria-haspopup","dialog"),e.noRotate&&n.classList.add("norotate"),r.rawDims);if(!e.rect||this instanceof _){const t=e.rotation;e.hasOwnCanvas||0===t||this.setRotation(t,n)}else{var{width:h,height:d}=c(e.rect),s=i.Util.normalizeRect([e.rect[0],s.view[3]-e.rect[1]+s.view[1],e.rect[2],s.view[3]-e.rect[3]+s.view[1]]);if(!t&&0<e.borderStyle.width){n.style.borderWidth=e.borderStyle.width+"px";t=e.borderStyle.horizontalCornerRadius;var u=e.borderStyle.verticalCornerRadius;switch(0<t||0<u?n.style.borderRadius=`calc(${t}px * var(--scale-factor)) / calc(${u}px * var(--scale-factor))`:this instanceof w&&(n.style.borderRadius=`calc(${h}px * var(--scale-factor)) / calc(${d}px * var(--scale-factor))`),e.borderStyle.style){case i.AnnotationBorderStyleType.SOLID:n.style.borderStyle="solid";break;case i.AnnotationBorderStyleType.DASHED:n.style.borderStyle="dashed";break;case i.AnnotationBorderStyleType.BEVELED:(0,i.warn)("Unimplemented border style: beveled");break;case i.AnnotationBorderStyleType.INSET:(0,i.warn)("Unimplemented border style: inset");break;case i.AnnotationBorderStyleType.UNDERLINE:n.style.borderBottomStyle="solid"}(t=e.borderColor||null)?(this.#t=!0,n.style.borderColor=i.Util.makeHexColor(0|t[0],0|t[1],0|t[2])):n.style.borderWidth=0}n.style.left=100*(s[0]-o)/r+"%",n.style.top=100*(s[1]-l)/a+"%";const p=e.rotation;e.hasOwnCanvas||0===p?(n.style.width=100*h/r+"%",n.style.height=100*d/a+"%"):this.setRotation(p,n)}return n}setRotation(t,e=this.container){if(this.data.rect){var{pageWidth:s,pageHeight:i}=this.parent.viewport.rawDims,{width:r,height:n}=c(this.data.rect);let a,o;o=t%180==0?(a=100*r/s,100*n/i):(a=100*n/s,100*r/i),e.style.width=a+"%",e.style.height=o+"%",e.setAttribute("data-main-rotation",(360-t)%360)}}get _commonActions(){const t=(t,e,s)=>{var i=(t=s.detail[t])[0];t=t.slice(1);s.target.style[e]=l[i+"_HTML"](t),this.annotationStorage.setValue(this.data.id,{[e]:l[i+"_rgb"](t)})};return(0,i.shadow)(this,"_commonActions",{display:t=>{var e=(t=t.detail.display)%2==1;this.container.style.visibility=e?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:e,noPrint:1===t||2===t})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{t=t.detail.hidden,this.container.style.visibility=t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:t,noView:t})},focus:t=>{setTimeout((()=>t.target.focus({preventScroll:!1})),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:t=>{t=t.detail.rotation,this.setRotation(t),this.annotationStorage.setValue(this.data.id,{rotation:t})}})}_dispatchEventFromSandbox(t,e){var s=this._commonActions;for(const i of Object.keys(e.detail))(t[i]||s[i])?.(e)}_setDefaultPropertiesFromJS(t){if(this.enableScripting){var e=this.annotationStorage.getRawValue(this.data.id);if(e){var s,i,r=this._commonActions;for([s,i]of Object.entries(e)){var n=r[s];n&&(n({detail:{[s]:i},target:t}),delete e[s])}}}}_createQuadrilaterals(){if(this.container){var t=this.data.quadPoints;if(t){var[e,s,i,r]=this.data.rect;if(1===t.length){var[,{x:n,y:a},{x:o,y:l}]=t[0];if(i===n&&r===a&&e===o&&s===l)return}let A;n=this.container.style,this.#t&&(({borderColor:a,borderWidth:o}=n),n.borderWidth=0,A=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${a}" stroke-width="${o}">`],this.container.classList.add("hasBorder"));var h,d,c,u,l,p=i-e,g=r-s,f=this.svgFactory,a=((l=f.createElement("svg")).classList.add("quadrilateralsContainer"),l.setAttribute("width",0),l.setAttribute("height",0),f.createElement("defs")),m=(l.append(a),f.createElement("clipPath")),o="clippath_"+this.data.id;for([,{x:h,y:d},{x:c,y:u}]of(m.setAttribute("id",o),m.setAttribute("clipPathUnits","objectBoundingBox"),a.append(m),t)){var v=f.createElement("rect"),b=(c-e)/p,y=(r-d)/g,w=(h-c)/p,x=(d-u)/g;v.setAttribute("x",b),v.setAttribute("y",y),v.setAttribute("width",w),v.setAttribute("height",x),m.append(v),A?.push(`<rect vector-effect="non-scaling-stroke" x="${b}" y="${y}" width="${w}" height="${x}"/>`)}this.#t&&(A.push("</g></svg>')"),n.backgroundImage=A.join("")),this.container.append(l),this.container.style.clipPath=`url(#${o})`}}}_createPopup(){var{container:t,data:e}=this,t=(t.setAttribute("aria-haspopup","dialog"),new _({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:"popup_"+e.id,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){(0,i.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){var s=[];if(this._fieldObjects){var r=this._fieldObjects[t];if(r)for(var{page:n,id:a,exportValues:o}of r)-1!==n&&a!==e&&(n="string"==typeof o?o:null,(o=document.querySelector(`[data-element-id="${a}"]`))&&!d.has(o)?(0,i.warn)("_getElementsByName - element not allowed: "+a):s.push({id:a,exportValue:n,domElement:o}))}else for(const i of document.getElementsByName(t)){var l=i.exportValue,h=i.getAttribute("data-element-id");h!==e&&d.has(i)&&s.push({id:h,exportValue:l,domElement:i})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){var t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(this._isEditable){const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",(()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})}))}}}class g extends p{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){var{data:t,linkService:e}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let i=!1;return t.url?(e.addLinkAttributes(s,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(s,t.action),i=!0):t.attachment?(this.#e(s,t.attachment,t.attachmentDest),i=!0):t.setOCGState?(this.#s(s,t.setOCGState),i=!0):t.dest?(this._bindLink(s,t.dest),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),i=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(s,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(s),this.container}#i(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),!e&&""!==e||this.#i()}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),this.#i()}#e(t,e,s=null){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,s),!1),this.#i()}#s(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),this.#i()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");var s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(e.actions)){var i=s.get(r);i&&(t[i]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:r}}),!1))}t.onclick||(t.onclick=()=>!1),this.#i()}_bindResetFormAction(t,e){const s=t.onclick;s||(t.href=this.linkService.getAnchorUrl("")),this.#i(),this._fieldObjects?t.onclick=()=>{s?.();var{fields:t,refs:r,include:n}=e,a=[];if(0!==t.length||0!==r.length){var o,l=new Set(r);for(const e of t)for({id:o}of this._fieldObjects[e]||[])l.add(o);for(const t of Object.values(this._fieldObjects))for(const e of t)l.has(e.id)===n&&a.push(e)}else for(const t of Object.values(this._fieldObjects))a.push(...t);var h=this.annotationStorage,c=[];for(const t of a){var u=t.id;switch(c.push(u),t.type){case"text":var p=t.defaultValue||"";h.setValue(u,{value:p});break;case"checkbox":case"radiobutton":p=t.defaultValue===t.exportValues,h.setValue(u,{value:p});break;case"combobox":case"listbox":var g=t.defaultValue||"";h.setValue(u,{value:g});break;default:continue}var f=document.querySelector(`[data-element-id="${u}"]`);f&&(d.has(f)?f.dispatchEvent(new Event("resetform")):(0,i.warn)("_bindResetFormAction - element not allowed: "+u))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}}),!1}:((0,i.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1))}}class f extends p{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");var t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class m extends p{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&("CANVAS"===t.previousSibling?.nodeName&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return i.FeatureTest.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,s,i,r){s.includes("mouse")?t.addEventListener(s,(t=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(t),shift:t.shiftKey,modifier:this._getKeyModifier(t)}})})):t.addEventListener(s,(t=>{if("blur"===s){if(!e.focused||!t.relatedTarget)return;e.focused=!1}else if("focus"===s){if(e.focused)return;e.focused=!0}r&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(t)}})}))}_setEventListeners(t,e,s,i){for(var[r,n]of s)"Action"!==n&&!this.data.actions?.[n]||("Focus"!==n&&"Blur"!==n||(e||={focused:!1}),this._setEventListener(t,e,r,n,i),"Focus"!==n||this.data.actions?.Blur?"Blur"!==n||this.data.actions?.Focus||this._setEventListener(t,e,"focus","Focus",null):this._setEventListener(t,e,"blur","Blur",null))}_setBackgroundColor(t){var e=this.data.backgroundColor||null;t.style.backgroundColor=null===e?"transparent":i.Util.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){var e=this.data.defaultAppearanceData.fontColor,s=this.data.defaultAppearanceData.fontSize||9;t=t.style;let r;var n,a,o=t=>Math.round(10*t)/10;r=this.data.multiLine?(a=Math.abs(this.data.rect[3]-this.data.rect[1]-2),n=Math.round(a/(i.LINE_FACTOR*s))||1,Math.min(s,o(a/n/i.LINE_FACTOR))):(a=Math.abs(this.data.rect[3]-this.data.rect[1]-2),Math.min(s,o(a/i.LINE_FACTOR))),t.fontSize=`calc(${r}px * var(--scale-factor))`,t.color=i.Util.makeHexColor(e[0],e[1],e[2]),null!==this.data.textAlignment&&(t.textAlign=["left","center","right"][this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class v extends m{constructor(t){super(t,{isRenderable:t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue})}setPropertyOnSiblings(t,e,s,i){var r=this.annotationStorage;for(const n of this._getElementsByName(t.name,t.id))n.domElement&&(n.domElement[e]=s),r.setValue(n.id,{[i]:s})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){var i=t.getValue(e,{value:this.data.fieldValue});let n=i.value||"";var r=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;r&&n.length>r&&(n=n.slice(0,r));let a=i.formattedValue||this.data.textContent?.join("\n")||null;a&&this.data.comb&&(a=a.replaceAll(/\s+/g,""));const o={userValue:n,formattedValue:a,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?((s=document.createElement("textarea")).textContent=a??n,this.data.doNotScroll&&(s.style.overflowY="hidden")):((s=document.createElement("input")).type="text",s.setAttribute("value",a??n),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),d.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=1e3,this._setRequired(s,this.data.required),r&&(s.maxLength=r),s.addEventListener("input",(i=>{t.setValue(e,{value:i.target.value}),this.setPropertyOnSiblings(s,"value",i.target.value,"value"),o.formattedValue=null})),s.addEventListener("resetform",(t=>{var e=this.data.defaultFieldValue??"";s.value=o.userValue=e,o.formattedValue=null}));let l=t=>{var e=o.formattedValue;null!=e&&(t.target.value=e),t.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",(t=>{o.focused||(t=t.target,o.userValue&&(t.value=o.userValue),o.lastCommittedValue=t.value,o.commitKey=1,this.data.actions?.Focus)||(o.focused=!0)})),s.addEventListener("updatefromsandbox",(s=>{this.showElementAndHideCanvas(s.target),this._dispatchEventFromSandbox({value(s){o.userValue=s.detail.value??"",t.setValue(e,{value:o.userValue.toString()}),s.target.value=o.userValue},formattedValue(s){var i=s.detail.formattedValue;null!=(o.formattedValue=i)&&s.target!==document.activeElement&&(s.target.value=i),t.setValue(e,{formattedValue:i})},selRange(t){t.target.setSelectionRange(...t.detail.selRange)},charLimit:s=>{var i=s.detail.charLimit;s=s.target;if(0===i)s.removeAttribute("maxLength");else{s.setAttribute("maxLength",i);let r=o.userValue;!r||r.length<=i||(r=r.slice(0,i),s.value=o.userValue=r,t.setValue(e,{value:r}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:r,willCommit:!0,commitKey:1,selStart:s.selectionStart,selEnd:s.selectionEnd}}))}}},s)})),s.addEventListener("keydown",(t=>{let s=-(o.commitKey=1);var i;"Escape"===t.key?s=0:"Enter"!==t.key||this.data.multiLine?"Tab"===t.key&&(o.commitKey=3):s=2,-1!==s&&(i=t.target.value,o.lastCommittedValue!==i)&&(o.lastCommittedValue=i,o.userValue=i,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:i,willCommit:!0,commitKey:s,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}))}));const i=l;l=null,s.addEventListener("blur",(t=>{var s;o.focused&&t.relatedTarget&&(this.data.actions?.Blur||(o.focused=!1),s=t.target.value,o.userValue=s,o.lastCommittedValue!==s&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:s,willCommit:!0,commitKey:o.commitKey,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}),i(t))})),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",(t=>{o.lastCommittedValue=null;var{data:s,target:i}=t,{value:r,selectionStart:n,selectionEnd:a}=i;let l=n,h=a;switch(t.inputType){case"deleteWordBackward":var d=r.substring(0,n).match(/\w*[^\w]*$/);d&&(l-=d[0].length);break;case"deleteWordForward":(d=r.substring(n).match(/^[^\w]*\w*/))&&(h+=d[0].length);break;case"deleteContentBackward":n===a&&--l;break;case"deleteContentForward":n===a&&(h+=1)}t.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:r,change:s||"",willCommit:!1,selStart:l,selEnd:h}})})),this._setEventListeners(s,o,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.value))}l&&s.addEventListener("blur",l),this.data.comb&&(i=(this.data.rect[2]-this.data.rect[0])/r,s.classList.add("comb"),s.style.letterSpacing=`calc(${i}px * var(--scale-factor) - 1ch)`)}else(s=document.createElement("div")).textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class b extends m{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class y extends m{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,s=e.id;let i=t.getValue(s,{value:e.exportValue===e.fieldValue}).value;"string"==typeof i&&(i="Off"!==i,t.setValue(s,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");var r=document.createElement("input");return d.add(r),r.setAttribute("data-element-id",s),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=1e3,r.addEventListener("change",(i=>{var{name:i,checked:r}=i.target;for(const a of this._getElementsByName(i,s)){var n=r&&a.exportValue===e.exportValue;a.domElement&&(a.domElement.checked=n),t.setValue(a.id,{value:n})}t.setValue(s,{value:r})})),r.addEventListener("resetform",(t=>{var s=e.defaultFieldValue||"Off";t.target.checked=s===e.exportValue})),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",(e=>{this._dispatchEventFromSandbox({value(e){e.target.checked="Off"!==e.detail.value,t.setValue(s,{value:e.target.checked})}},e)})),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.checked))),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class w extends m{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,s=e.id;let i=t.getValue(s,{value:e.fieldValue===e.buttonValue}).value;if("string"==typeof i&&(i=i!==e.buttonValue,t.setValue(s,{value:i})),i)for(const i of this._getElementsByName(e.fieldName,s))t.setValue(i.id,{value:!1});var r=document.createElement("input");if(d.add(r),r.setAttribute("data-element-id",s),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=1e3,r.addEventListener("change",(e=>{var{name:e,checked:i}=e.target;for(const i of this._getElementsByName(e,s))t.setValue(i.id,{value:!1});t.setValue(s,{value:i})})),r.addEventListener("resetform",(t=>{var s=e.defaultFieldValue;t.target.checked=null!=s&&s===e.buttonValue})),this.enableScripting&&this.hasJSActions){const i=e.buttonValue;r.addEventListener("updatefromsandbox",(e=>{this._dispatchEventFromSandbox({value:e=>{var r=i===e.detail.value;for(const i of this._getElementsByName(e.target.name)){var n=r&&i.id===s;i.domElement&&(i.domElement.checked=n),t.setValue(i.id,{value:n})}}},e)})),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.checked))}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class x extends g{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){var t=super.render(),e=(t.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(t.title=this.data.alternativeText),t.lastChild);return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",(t=>{this._dispatchEventFromSandbox({},t)}))),t}}class A extends m{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id;var s=t.getValue(e,{value:this.data.fieldValue});const i=document.createElement("select");d.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=1e3;let r=this.data.combo&&0<this.data.options.length;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",(t=>{var e=this.data.defaultFieldValue;for(const t of i.options)t.selected=t.value===e}));for(const t of this.data.options){var n=document.createElement("option");n.textContent=t.displayValue,n.value=t.exportValue,s.value.includes(t.exportValue)&&(n.setAttribute("selected",!0),r=!1),i.append(n)}let a=null;if(r){const t=document.createElement("option");t.value=" ",t.setAttribute("hidden",!0),t.setAttribute("selected",!0),i.prepend(t),a=()=>{t.remove(),i.removeEventListener("input",a),a=null},i.addEventListener("input",a)}const o=t=>{const e=t?"value":"textContent";var{options:t,multiple:s}=i;return s?Array.prototype.filter.call(t,(t=>t.selected)).map((t=>t[e])):-1===t.selectedIndex?null:t[t.selectedIndex][e]};let l=o(!1);const h=t=>(t=t.target.options,Array.prototype.map.call(t,(t=>({displayValue:t.textContent,exportValue:t.value}))));return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",(s=>{this._dispatchEventFromSandbox({value(s){a?.();s=s.detail.value;var r=new Set(Array.isArray(s)?s:[s]);for(const t of i.options)t.selected=r.has(t.value);t.setValue(e,{value:o(!0)}),l=o(!1)},multipleSelection(t){i.multiple=!0},remove(s){var r=i.options,n=s.detail.remove;r[n].selected=!1,i.remove(n),0<r.length&&-1===Array.prototype.findIndex.call(r,(t=>t.selected))&&(r[0].selected=!0),t.setValue(e,{value:o(!0),items:h(s)}),l=o(!1)},clear(s){for(;0!==i.length;)i.remove(0);t.setValue(e,{value:null,items:[]}),l=o(!1)},insert(s){var{index:r,displayValue:n,exportValue:a}=s.detail.insert,r=i.children[r],d=document.createElement("option");d.textContent=n,d.value=a,r?r.before(d):i.append(d),t.setValue(e,{value:o(!0),items:h(s)}),l=o(!1)},items(s){for(var r=s.detail.items;0!==i.length;)i.remove(0);for(const t of r){var{displayValue:n,exportValue:a}=t,d=document.createElement("option");d.textContent=n,d.value=a,i.append(d)}0<i.options.length&&(i.options[0].selected=!0),t.setValue(e,{value:o(!0),items:h(s)}),l=o(!1)},indices(s){var i=new Set(s.detail.indices);for(const t of s.target.options)t.selected=i.has(t.index);t.setValue(e,{value:o(!0)}),l=o(!1)},editable(t){t.target.disabled=!t.detail.editable}},s)})),i.addEventListener("input",(s=>{var i=o(!0);t.setValue(e,{value:i}),s.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:l,changeEx:i,willCommit:!1,commitKey:1,keyDown:!1}})})),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],(t=>t.target.value))):i.addEventListener("input",(function(s){t.setValue(e,{value:o(!0)})})),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class _ extends p{constructor(t){var{data:e,elements:s}=t;super(t,{isRenderable:p._hasPopupData(e)}),this.elements=s}render(){this.container.classList.add("popupAnnotation");var t=new C({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const s of this.elements)s.popup=t,e.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",e.map((t=>""+i.AnnotationPrefix+t)).join(",")),this.container}}class C{#r=this.#n.bind(this);#a=this.#o.bind(this);#l=this.#h.bind(this);#d=this.#c.bind(this);#u=null;#p=null;#g=null;#f=null;#m=null;#v=null;#b=null;#y=!1;#w=null;#x=null;#A=null;#_=null;#C=!1;constructor({container:t,color:e,elements:s,titleObj:i,modificationDate:n,contentsObj:a,richText:o,parent:l,rect:h,parentRect:d,open:c}){this.#p=t,this.#_=i,this.#g=a,this.#A=o,this.#v=l,this.#u=e,this.#x=h,this.#b=d,this.#m=s,this.#f=r.PDFDateString.toDateObject(n),this.trigger=s.flatMap((t=>t.getElementsToTriggerPopup()));for(const t of this.trigger)t.addEventListener("click",this.#d),t.addEventListener("mouseenter",this.#l),t.addEventListener("mouseleave",this.#a),t.classList.add("popupTriggerArea");for(const t of s)t.container?.addEventListener("keydown",this.#r);this.#p.hidden=!0,c&&this.#c()}render(){if(!this.#w){var{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:s,pageX:r,pageY:n}}}=this.#v,a=this.#w=document.createElement("div");if(a.className="popup",this.#u){var o=a.style.outlineColor=i.Util.makeHexColor(...this.#u);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?a.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`:a.style.backgroundColor=i.Util.makeHexColor(...this.#u.map((t=>Math.floor(.7*(255-t)+t))))}var l=((o=document.createElement("span")).className="header",document.createElement("h1"));o=(o.append(l),({dir:l.dir,str:l.textContent}=this.#_),a.append(o),this.#f&&((l=document.createElement("span")).classList.add("popupDate"),l.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),l.setAttribute("data-l10n-args",JSON.stringify({date:this.#f.toLocaleDateString(),time:this.#f.toLocaleTimeString()})),o.append(l)),this.#g),l=this.#A;!l?.str||o?.str&&o.str!==l.str?(o=this._formatContents(o),a.append(o)):(h.XfaLayer.render({xfaHtml:l.html,intent:"richText",div:a}),a.lastChild.classList.add("richText","popupContent"));let d=!!this.#b,c=d?this.#b:this.#x;for(const t of this.#m)if(!c||null!==i.Util.intersect(t.data.rect,c)){c=t.data.rect,d=!0;break}o=i.Util.normalizeRect([c[0],t[3]-c[1]+t[1],c[2],t[3]-c[3]+t[1]]),l=d?c[2]-c[0]+5:0,t=o[0]+l,l=o[1],(o=this.#p.style).left=100*(t-r)/e+"%",o.top=100*(l-n)/s+"%",this.#p.append(a)}}_formatContents({str:t,dir:e}){var s=document.createElement("p"),i=(s.classList.add("popupContent"),s.dir=e,t.split(/(?:\r\n?|\n)/));for(let t=0,e=i.length;t<e;++t){var r=i[t];s.append(document.createTextNode(r)),t<e-1&&s.append(document.createElement("br"))}return s}#n(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||("Enter"===t.key||"Escape"===t.key&&this.#y)&&this.#c()}#c(){this.#y=!this.#y,this.#y?(this.#h(),this.#p.addEventListener("click",this.#d),this.#p.addEventListener("keydown",this.#r)):(this.#o(),this.#p.removeEventListener("click",this.#d),this.#p.removeEventListener("keydown",this.#r))}#h(){this.#w||this.render(),this.isVisible?this.#y&&this.#p.classList.add("focused"):(this.#p.hidden=!1,this.#p.style.zIndex=parseInt(this.#p.style.zIndex)+1e3)}#o(){this.#p.classList.remove("focused"),!this.#y&&this.isVisible&&(this.#p.hidden=!0,this.#p.style.zIndex=parseInt(this.#p.style.zIndex)-1e3)}forceHide(){this.#C=this.isVisible,this.#C&&(this.#p.hidden=!0)}maybeShow(){this.#C&&(this.#C=!1,this.#p.hidden=!1)}get isVisible(){return!1===this.#p.hidden}}class E extends p{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=i.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){var t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const s of this.textContent){var e=document.createElement("span");e.textContent=s,t.append(e)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}class k extends p{#E=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");var t,e=this.data,{width:s,height:t}=c(e.rect),s=this.svgFactory.create(s,t,!0);return(t=this.#E=this.svgFactory.createElement("svg:line")).setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),t.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),t.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),t.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),t.setAttribute("stroke-width",e.borderStyle.width||1),t.setAttribute("stroke","transparent"),t.setAttribute("fill","transparent"),s.append(t),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#E}addHighlightArea(){this.container.classList.add("highlightArea")}}class S extends p{#k=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");var t=this.data,{width:e,height:s}=c(t.rect),i=this.svgFactory.create(e,s,!0),r=t.borderStyle.width,n=this.#k=this.svgFactory.createElement("svg:rect");return n.setAttribute("x",r/2),n.setAttribute("y",r/2),n.setAttribute("width",e-r),n.setAttribute("height",s-r),n.setAttribute("stroke-width",r||1),n.setAttribute("stroke","transparent"),n.setAttribute("fill","transparent"),i.append(n),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#k}addHighlightArea(){this.container.classList.add("highlightArea")}}class T extends p{#S=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");var t=this.data,{width:e,height:s}=c(t.rect),i=this.svgFactory.create(e,s,!0),r=t.borderStyle.width,n=this.#S=this.svgFactory.createElement("svg:ellipse");return n.setAttribute("cx",e/2),n.setAttribute("cy",s/2),n.setAttribute("rx",e/2-r/2),n.setAttribute("ry",s/2-r/2),n.setAttribute("stroke-width",r||1),n.setAttribute("stroke","transparent"),n.setAttribute("fill","transparent"),i.append(n),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#S}addHighlightArea(){this.container.classList.add("highlightArea")}}class P extends p{#T=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);var t=this.data,{width:e,height:s}=c(t.rect),e=this.svgFactory.create(e,s,!0);let i=[];for(const e of t.vertices){var r=e.x-t.rect[0],n=t.rect[3]-e.y;i.push(r+","+n)}return i=i.join(" "),(s=this.#T=this.svgFactory.createElement(this.svgElementName)).setAttribute("points",i),s.setAttribute("stroke-width",t.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),e.append(s),this.container.append(e),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#T}addHighlightArea(){this.container.classList.add("highlightArea")}}class M extends P{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class R extends p{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class L extends p{#P=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=i.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);var t=this.data,{width:e,height:s}=c(t.rect),i=this.svgFactory.create(e,s,!0);for(const e of t.inkLists){let s=[];for(const i of e){var r=i.x-t.rect[0],n=t.rect[3]-i.y;s.push(r+","+n)}s=s.join(" ");var a=this.svgFactory.createElement(this.svgElementName);this.#P.push(a),a.setAttribute("points",s),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),!t.popupRef&&this.hasPopupData&&this._createPopup(),i.append(a)}return this.container.append(i),this.container}getElementsToTriggerPopup(){return this.#P}addHighlightArea(){this.container.classList.add("highlightArea")}}class I extends p{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class D extends p{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class F extends p{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class O extends p{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class B extends p{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class N extends p{#M=null;constructor(t){super(t,{isRenderable:!0});var{filename:t,content:e}=this.data.file;this.filename=(0,r.getFilenameFromUrl)(t,!0),this.content=e,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:t,content:e})}render(){this.container.classList.add("fileAttachmentAnnotation");var{container:t,data:e}=this;let s;e.hasAppearance||0===e.fillAlpha?s=document.createElement("div"):((s=document.createElement("img")).src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(100*e.fillAlpha)}%);`)),s.addEventListener("dblclick",this.#R.bind(this)),this.#M=s;const r=i.FeatureTest.platform.isMac;return t.addEventListener("keydown",(t=>{"Enter"===t.key&&(r?t.metaKey:t.ctrlKey)&&this.#R()})),!e.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return this.#M}addHighlightArea(){this.container.classList.add("highlightArea")}#R(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class z{#L=null;#I=null;#D=new Map;constructor({div:t,accessibilityManager:e,annotationCanvasMap:s,page:i,viewport:r}){this.div=t,this.#L=e,this.#I=s,this.page=i,this.viewport=r,this.zIndex=0}#F(t,e){var s=t.firstChild||t;s.id=""+i.AnnotationPrefix+e,this.div.append(t),this.#L?.moveElementInDOM(this.div,t,s,!1)}async render(t){var e=t.annotations,s=this.div,a=((0,r.setLayerDimensions)(s,this.viewport),new Map),o={data:null,layer:s,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:!1!==t.renderForms,svgFactory:new r.DOMSVGFactory,annotationStorage:t.annotationStorage||new n.AnnotationStorage,enableScripting:!0===t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const t of e)if(!t.noHTML){var l=t.annotationType===i.AnnotationType.POPUP;if(l){var h;if(!(h=a.get(t.id)))continue;o.elements=h}else{var{width:h,height:d}=c(t.rect);if(h<=0||d<=0)continue}o.data=t,(d=u.create(o)).isRenderable&&(!l&&t.popupRef&&((l=a.get(t.popupRef))?l.push(d):a.set(t.popupRef,[d])),0<d.annotationEditorType&&this.#D.set(d.data.id,d),l=d.render(),t.hidden&&(l.style.visibility="hidden"),this.#F(l,t.id))}this.#O()}update({viewport:t}){var e=this.div;this.viewport=t,(0,r.setLayerDimensions)(e,{rotation:t.rotation}),this.#O(),e.hidden=!1}#O(){if(this.#I){var t,e,s=this.div;for([t,e]of this.#I){var i,r=s.querySelector(`[data-annotation-id="${t}"]`);r&&((i=r.firstChild)?"CANVAS"===i.nodeName?i.replaceWith(e):i.before(e):r.append(e))}this.#I.clear()}}getEditableAnnotations(){return Array.from(this.#D.values())}getEditableAnnotation(t){return this.#D.get(t)}}},780:(t,e,s)=>{s.d(e,{AnnotationStorage:()=>o,PrintAnnotationStorage:()=>l,SerializableEmpty:()=>a});var i=s(266),r=s(115),n=s(825);const a=Object.freeze({map:null,hash:"",transfer:void 0});class o{#B=!1;#N=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){return void 0===(t=this.#N.get(t))?e:Object.assign(e,t)}getRawValue(t){return this.#N.get(t)}remove(t){if(this.#N.delete(t),0===this.#N.size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(const t of this.#N.values())if(t instanceof r.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(t,e){var s=this.#N.get(t);let i=!1;if(void 0!==s)for(var[n,a]of Object.entries(e))s[n]!==a&&(i=!0,s[n]=a);else i=!0,this.#N.set(t,e);i&&this.#z(),e instanceof r.AnnotationEditor&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(e.constructor._type)}has(t){return this.#N.has(t)}getAll(){return 0<this.#N.size?(0,i.objectFromMap)(this.#N):null}setAll(t){for(var[e,s]of Object.entries(t))this.setValue(e,s)}get size(){return this.#N.size}#z(){this.#B||(this.#B=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this.#B&&(this.#B=!1,"function"==typeof this.onResetModified)&&this.onResetModified()}get print(){return new l(this)}get serializable(){if(0===this.#N.size)return a;var t,e,s=new Map,i=new n.MurmurHash3_64,o=[],l=Object.create(null);let h=!1;for([t,e]of this.#N){var d=e instanceof r.AnnotationEditor?e.serialize(!1,l):e;d&&(s.set(t,d),i.update(t+":"+JSON.stringify(d)),h||=!!d.bitmap)}if(h)for(const t of s.values())t.bitmap&&o.push(t.bitmap);return 0<s.size?{map:s,hash:i.hexdigest(),transfer:o}:a}}class l extends o{#j;constructor(t){super();var{map:t,hash:e,transfer:s}=t.serializable;t=structuredClone(t,s?{transfer:s}:null);this.#j={map:t,hash:e,transfer:s}}get print(){(0,i.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#j}}},406:(t,e,s)=>{s.a(t,(async(t,i)=>{try{s.d(e,{PDFDataRangeTransport:()=>k,PDFWorker:()=>R,build:()=>B,getDocument:()=>function(t){if("string"==typeof t||t instanceof URL?t={url:t}:(0,r.isArrayBuffer)(t)&&(t={data:t}),"object"!=typeof t)throw new Error("Invalid parameter in getDocument, need parameter object.");if(!t.url&&!t.data&&!t.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const e=new E,s=e.docId,i=t.url?function(t){if(t instanceof URL)return t.href;try{return new URL(t,window.location).href}catch{if(r.isNodeJS&&"string"==typeof t)return t}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(t.url):null,n=t.data?function(t){if(r.isNodeJS&&"undefined"!=typeof Buffer&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if("string"==typeof t)return(0,r.stringToBytes)(t);if("object"==typeof t&&!isNaN(t?.length)||(0,r.isArrayBuffer)(t))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(t.data):null,o=t.httpHeaders||null,l=!0===t.withCredentials,h=t.password??null,u=t.range instanceof k?t.range:null,p=Number.isInteger(t.rangeChunkSize)&&0<t.rangeChunkSize?t.rangeChunkSize:w;let b=t.worker instanceof R?t.worker:null;const y=t.verbosity,S="string"!=typeof t.docBaseUrl||(0,a.isDataScheme)(t.docBaseUrl)?null:t.docBaseUrl,T="string"==typeof t.cMapUrl?t.cMapUrl:null,P=!1!==t.cMapPacked,M=t.CMapReaderFactory||A,I="string"==typeof t.standardFontDataUrl?t.standardFontDataUrl:null,D=t.StandardFontDataFactory||C,F=!0!==t.stopAtErrors,O=Number.isInteger(t.maxImageSize)&&-1<t.maxImageSize?t.maxImageSize:-1,B=!1!==t.isEvalSupported,N="boolean"==typeof t.isOffscreenCanvasSupported?t.isOffscreenCanvasSupported:!r.isNodeJS,z=Number.isInteger(t.canvasMaxAreaInBytes)?t.canvasMaxAreaInBytes:-1,j="boolean"==typeof t.disableFontFace?t.disableFontFace:r.isNodeJS,U=!0===t.fontExtraProperties,H=!0===t.enableXfa,q=t.ownerDocument||globalThis.document,$=!0===t.disableRange,V=!0===t.disableStream,G=!0===t.disableAutoFetch,W=!0===t.pdfBug,K=u?u.length:t.length??NaN,X="boolean"==typeof t.useSystemFonts?t.useSystemFonts:!r.isNodeJS&&!j,Y="boolean"==typeof t.useWorkerFetch?t.useWorkerFetch:M===a.DOMCMapReaderFactory&&D===a.DOMStandardFontDataFactory&&T&&I&&(0,a.isValidFetchUrl)(T,document.baseURI)&&(0,a.isValidFetchUrl)(I,document.baseURI),J=t.canvasFactory||new x({ownerDocument:q}),Q=t.filterFactory||new _({docId:s,ownerDocument:q}),Z=((0,r.setVerbosityLevel)(y),{canvasFactory:J,filterFactory:Q});Y||(Z.cMapReaderFactory=new M({baseUrl:T,isCompressed:P}),Z.standardFontDataFactory=new D({baseUrl:I})),b||(t={verbosity:y,port:d.GlobalWorkerOptions.workerPort},b=t.port?R.fromPort(t):new R(t),e._worker=b);const tt={docId:s,apiVersion:"4.0.379",data:n,password:h,disableAutoFetch:G,rangeChunkSize:p,length:K,docBaseUrl:S,enableXfa:H,evaluatorOptions:{maxImageSize:O,disableFontFace:j,ignoreErrors:F,isEvalSupported:B,isOffscreenCanvasSupported:N,canvasMaxAreaInBytes:z,fontExtraProperties:U,useSystemFonts:X,cMapUrl:Y?T:null,standardFontDataUrl:Y?I:null}},et={ignoreErrors:F,isEvalSupported:B,disableFontFace:j,fontExtraProperties:U,enableXfa:H,ownerDocument:q,disableAutoFetch:G,pdfBug:W,styleElement:null};return b.promise.then((function(){if(e.destroyed)throw new Error("Loading aborted");var t=async function(t,e){if(t.destroyed)throw new Error("Worker was destroyed");if(e=await t.messageHandler.sendWithPromise("GetDocRequest",e,e.data?[e.data.buffer]:null),t.destroyed)throw new Error("Worker was destroyed");return e}(b,tt),h=new Promise((function(t){let e;var s;u?e=new g.PDFDataTransportStream({length:K,initialData:u.initialData,progressiveDone:u.progressiveDone,contentDispositionFilename:u.contentDispositionFilename,disableRange:$,disableStream:V},u):n||(s={url:i,length:K,httpHeaders:o,withCredentials:l,rangeChunkSize:p,disableRange:$,disableStream:V},e=new(r.isNodeJS?v.PDFNodeStream:(0,a.isValidFetchUrl)(s.url)?f.PDFFetchStream:m.PDFNetworkStream)(s)),t(e)}));return Promise.all([t,h]).then((function([t,i]){if(e.destroyed)throw new Error("Loading aborted");t=new c.MessageHandler(s,t,b.port),i=new L(t,e,i,et,Z),e._transport=i,t.send("Ready",null)}))})).catch(e._capability.reject),e},version:()=>O});var r=s(266),n=s(780),a=s(473),o=s(742),l=s(738),h=s(250),d=s(368),c=s(694),u=s(472),p=s(890),g=s(92),f=s(171),m=s(474),v=s(498),b=s(521),y=t([l,v]);[l,v]=y.then?(await y)():y;const w=65536,x=r.isNodeJS?l.NodeCanvasFactory:a.DOMCanvasFactory,A=r.isNodeJS?l.NodeCMapReaderFactory:a.DOMCMapReaderFactory,_=r.isNodeJS?l.NodeFilterFactory:a.DOMFilterFactory,C=r.isNodeJS?l.NodeStandardFontDataFactory:a.DOMStandardFontDataFactory;class E{static#U=0;constructor(){this._capability=new r.PromiseCapability,this._transport=null,this._worker=null,this.docId="d"+E.#U++,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await(this._transport?.destroy())}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}class k{constructor(t,e,s=!1,i=null){this.length=t,this.initialData=e,this.progressiveDone=s,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new r.PromiseCapability}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const s of this._rangeListeners)s(t,e)}onDataProgress(t,e){this._readyCapability.promise.then((()=>{for(const s of this._progressListeners)s(t,e)}))}onDataProgressiveRead(t){this._readyCapability.promise.then((()=>{for(const e of this._progressiveReadListeners)e(t)}))}onDataProgressiveDone(){this._readyCapability.promise.then((()=>{for(const t of this._progressiveDoneListeners)t()}))}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){(0,r.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class S{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,r.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class T{#H=null;#q=!1;constructor(t,e,s,i=!1){this._pageIndex=t,this._pageInfo=e,this._transport=s,this._stats=i?new a.StatTimer:null,this._pdfBug=i,this.commonObjs=s.commonObjs,this.objs=new I,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:s=0,offsetY:i=0,dontFlip:r=!1}={}){return new a.PageViewport({viewBox:this.view,scale:t,rotation:e,offsetX:s,offsetY:i,dontFlip:r})}getAnnotations({intent:t="display"}={}){return t=this._transport.getRenderingIntent(t),this._transport.getAnnotations(this._pageIndex,t.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,r.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,viewport:e,intent:s="display",annotationMode:i=r.AnnotationMode.ENABLE,transform:n=null,background:a=null,optionalContentConfigPromise:o=null,annotationCanvasMap:l=null,pageColors:h=null,printAnnotationStorage:d=null}){this._stats?.time("Overall"),s=this._transport.getRenderingIntent(s,i,d),this.#q=!1,this.#$(),o=o||this._transport.getOptionalContentConfig();let c=this._intentStates.get(s.cacheKey);c||(c=Object.create(null),this._intentStates.set(s.cacheKey,c)),c.streamReaderCancelTimeout&&(clearTimeout(c.streamReaderCancelTimeout),c.streamReaderCancelTimeout=null);const u=!!(s.renderingIntent&r.RenderingIntentFlag.PRINT),p=(c.displayReadyCapability||(c.displayReadyCapability=new r.PromiseCapability,c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(s)),t=>{c.renderTasks.delete(g),(this._maybeCleanupAfterRender||u)&&(this.#q=!0),this.#V(!u),t?(g.capability.reject(t),this._abortOperatorList({intentState:c,reason:t instanceof Error?t:new Error(t)})):g.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")}),g=new F({callback:p,params:{canvasContext:t,viewport:e,transform:n,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:c.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!u,pdfBug:this._pdfBug,pageColors:h});return(c.renderTasks||=new Set).add(g),i=g.task,Promise.all([c.displayReadyCapability.promise,o]).then((([t,e])=>{this.destroyed?p():(this._stats?.time("Rendering"),g.initializeGraphics({transparency:t,optionalContentConfig:e}),g.operatorListChanged())})).catch(p),i}getOperatorList({intent:t="display",annotationMode:e=r.AnnotationMode.ENABLE,printAnnotationStorage:s=null}={}){t=this._transport.getRenderingIntent(t,e,s,!0);let i,n=this._intentStates.get(t.cacheKey);return n||(n=Object.create(null),this._intentStates.set(t.cacheKey,n)),n.opListReadCapability||((i=Object.create(null)).operatorListChanged=function(){n.operatorList.lastChunk&&(n.opListReadCapability.resolve(n.operatorList),n.renderTasks.delete(i))},n.opListReadCapability=new r.PromiseCapability,(n.renderTasks||=new Set).add(i),n.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(t)),n.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===t,disableNormalization:!0===e},{highWaterMark:100,size:t=>t.items.length})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then((t=>b.XfaText.textContent(t)));const e=this.streamTextContent(t);return new Promise((function(t,s){const i=e.getReader(),r={items:[],styles:Object.create(null)};!function e(){i.read().then((function({value:s,done:i}){i?t(r):(Object.assign(r.styles,s.styles),r.items.push(...s.items),e())}),s)}()}))}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;var t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const s of e.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),this.#q=!1,this.#$(),Promise.all(t)}cleanup(t=!1){this.#q=!0;var e=this.#V(!1);return t&&e&&(this._stats&&=new a.StatTimer),e}#V(t=!1){if(this.#$(),!this.#q||this.destroyed)return!1;if(t)return this.#H=setTimeout((()=>{this.#H=null,this.#V(!1)}),5e3),!1;for(var{renderTasks:e,operatorList:s}of this._intentStates.values())if(0<e.size||!s.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),!(this.#q=!1)}#$(){this.#H&&(clearTimeout(this.#H),this.#H=null)}_startRenderPage(t,e){(e=this._intentStates.get(e))&&(this._stats?.timeEnd("Page Request"),e.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let s=0,i=t.length;s<i;s++)e.operatorList.fnArray.push(t.fnArray[s]),e.operatorList.argsArray.push(t.argsArray[s]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const t of e.renderTasks)t.operatorListChanged();t.lastChunk&&this.#V(!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:s}){var{map:s,transfer:i}=s;const r=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:s},i).getReader(),n=this._intentStates.get(e),a=(n.streamReader=r,()=>{r.read().then((({value:t,done:e})=>{e?n.streamReader=null:this._transport.destroyed||(this._renderPageChunk(t,n),a())}),(t=>{if(n.streamReader=null,!this._transport.destroyed){if(n.operatorList){n.operatorList.lastChunk=!0;for(const t of n.renderTasks)t.operatorListChanged();this.#V(!0)}if(n.displayReadyCapability)n.displayReadyCapability.reject(t);else{if(!n.opListReadCapability)throw t;n.opListReadCapability.reject(t)}}}))});a()}_abortOperatorList({intentState:t,reason:e,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(0<t.renderTasks.size)return;if(e instanceof a.RenderingCancelledException){let s=100;return 0<e.extraDelay&&e.extraDelay<1e3&&(s+=e.extraDelay),void(t.streamReaderCancelTimeout=setTimeout((()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})}),s))}}if(t.streamReader.cancel(new r.AbortException(e.message)).catch((()=>{})),t.streamReader=null,!this._transport.destroyed){for(var[i,n]of this._intentStates)if(n===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}class P{#G=new Set;#W=Promise.resolve();postMessage(t,e){const s={data:structuredClone(t,e?{transfer:e}:null)};this.#W.then((()=>{for(const t of this.#G)t.call(this,s)}))}addEventListener(t,e){this.#G.add(e)}removeEventListener(t,e){this.#G.delete(e)}terminate(){this.#G.clear()}}const M={isWorkerDisabled:!1,fakeWorkerId:0};r.isNodeJS&&(M.isWorkerDisabled=!0,d.GlobalWorkerOptions.workerSrc||="./pdf.worker.mjs"),M.isSameOrigin=function(t,e){let s;try{if(!(s=new URL(t)).origin||"null"===s.origin)return!1}catch{return!1}return t=new URL(e,s),s.origin===t.origin},M.createCDNWrapper=function(t){return URL.createObjectURL(new Blob([`await import("${t}");`],{type:"text/javascript"}))};class R{static#K;constructor({name:t=null,port:e=null,verbosity:s=(0,r.getVerbosityLevel)()}={}){if(this.name=t,this.destroyed=!1,this.verbosity=s,this._readyCapability=new r.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,e){if(R.#K?.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(R.#K||=new WeakMap).set(e,this),this._initializeFromPort(e)}else this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new c.MessageHandler("main","worker",t),this._messageHandler.on("ready",(function(){})),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!M.isWorkerDisabled&&!R.#X){let t=R.workerSrc;try{M.isSameOrigin(window.location.href,t)||(t=M.createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),s=new c.MessageHandler("main","worker",e),i=()=>{e.removeEventListener("error",r),s.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=()=>{this._webWorker||i()},n=(e.addEventListener("error",r),s.on("test",(t=>{e.removeEventListener("error",r),this.destroyed?i():t?(this._messageHandler=s,this._port=e,this._webWorker=e,this._readyCapability.resolve(),s.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),s.destroy(),e.terminate())})),s.on("ready",(t=>{if(e.removeEventListener("error",r),this.destroyed)i();else try{n()}catch{this._setupFakeWorker()}})),()=>{var t=new Uint8Array;s.send("test",t,[t.buffer])});return void n()}catch{(0,r.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){M.isWorkerDisabled||((0,r.warn)("Setting up fake worker."),M.isWorkerDisabled=!0),R._setupFakeWorkerGlobal.then((t=>{var e,s,i;this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):(e=new P,this._port=e,s="fake"+M.fakeWorkerId++,i=new c.MessageHandler(s+"_worker",s,e),t.setup(i,e),t=new c.MessageHandler(s,s+"_worker",e),this._messageHandler=t,this._readyCapability.resolve(),t.send("configure",{verbosity:this.verbosity}))})).catch((t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))}))}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),R.#K?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){if(!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");var e=this.#K?.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new R(t)}static get workerSrc(){if(d.GlobalWorkerOptions.workerSrc)return d.GlobalWorkerOptions.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#X(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){return(0,r.shadow)(this,"_setupFakeWorkerGlobal",(async()=>this.#X||(await import(this.workerSrc)).WorkerMessageHandler)())}}class L{#Y=new Map;#J=new Map;#Q=new Map;#Z=null;constructor(t,e,s,i,n){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new I,this.fontLoader=new o.FontLoader({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this._params=i,this.canvasFactory=n.canvasFactory,this.filterFactory=n.filterFactory,this.cMapReaderFactory=n.cMapReaderFactory,this.standardFontDataFactory=n.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new r.PromiseCapability,this.setupMessageHandler()}#tt(t,e=null){var s=this.#Y.get(t);return s||(s=this.messageHandler.sendWithPromise(t,e),this.#Y.set(t,s),s)}get annotationStorage(){return(0,r.shadow)(this,"annotationStorage",new n.AnnotationStorage)}getRenderingIntent(t,e=r.AnnotationMode.ENABLE,s=null,i=!1){let a=r.RenderingIntentFlag.DISPLAY,o=n.SerializableEmpty;switch(t){case"any":a=r.RenderingIntentFlag.ANY;break;case"display":break;case"print":a=r.RenderingIntentFlag.PRINT;break;default:(0,r.warn)("getRenderingIntent - invalid intent: "+t)}switch(e){case r.AnnotationMode.DISABLE:a+=r.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case r.AnnotationMode.ENABLE:break;case r.AnnotationMode.ENABLE_FORMS:a+=r.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case r.AnnotationMode.ENABLE_STORAGE:o=((a+=r.RenderingIntentFlag.ANNOTATIONS_STORAGE)&r.RenderingIntentFlag.PRINT&&s instanceof n.PrintAnnotationStorage?s:this.annotationStorage).serializable;break;default:(0,r.warn)("getRenderingIntent - invalid annotationMode: "+e)}return i&&(a+=r.RenderingIntentFlag.OPLIST),{renderingIntent:a,cacheKey:a+"_"+o.hash,annotationStorageSerializable:o}}destroy(){if(!this.destroyCapability){this.destroyed=!0,this.destroyCapability=new r.PromiseCapability,this.#Z?.reject(new Error("Worker was destroyed during onPassword callback"));var t=[];for(const e of this.#J.values())t.push(e._destroy());this.#J.clear(),this.#Q.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();var e=this.messageHandler.sendWithPromise("Terminate",null);t.push(e),Promise.all(t).then((()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#Y.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new r.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()}),this.destroyCapability.reject)}return this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",((t,e)=>{(0,r.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=t=>{this._lastProgress={loaded:t.loaded,total:t.total}},e.onPull=()=>{this._fullReader.read().then((function({value:t,done:s}){s?e.close():((0,r.assert)(t instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(t),1,[t]))})).catch((t=>{e.error(t)}))},e.onCancel=t=>{this._fullReader.cancel(t),e.ready.catch((t=>{if(!this.destroyed)throw t}))}})),t.on("ReaderHeadersReady",(t=>{const s=new r.PromiseCapability,i=this._fullReader;return i.headersReady.then((()=>{i.isStreamingSupported&&i.isRangeSupported||(this._lastProgress&&e.onProgress?.(this._lastProgress),i.onProgress=t=>{e.onProgress?.({loaded:t.loaded,total:t.total})}),s.resolve({isStreamingSupported:i.isStreamingSupported,isRangeSupported:i.isRangeSupported,contentLength:i.contentLength})}),s.reject),s.promise})),t.on("GetRangeReader",((t,e)=>{(0,r.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(t.begin,t.end);s?(e.onPull=()=>{s.read().then((function({value:t,done:s}){s?e.close():((0,r.assert)(t instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(t),1,[t]))})).catch((t=>{e.error(t)}))},e.onCancel=t=>{s.cancel(t),e.ready.catch((t=>{if(!this.destroyed)throw t}))}):e.close()})),t.on("GetDoc",(({pdfInfo:t})=>{this._numPages=t.numPages,this._htmlForXfa=t.htmlForXfa,delete t.htmlForXfa,e._capability.resolve(new S(t,this))})),t.on("DocException",(function(t){let s;switch(t.name){case"PasswordException":s=new r.PasswordException(t.message,t.code);break;case"InvalidPDFException":s=new r.InvalidPDFException(t.message);break;case"MissingPDFException":s=new r.MissingPDFException(t.message);break;case"UnexpectedResponseException":s=new r.UnexpectedResponseException(t.message,t.status);break;case"UnknownErrorException":s=new r.UnknownErrorException(t.message,t.details);break;default:(0,r.unreachable)("DocException - expected a valid Error.")}e._capability.reject(s)})),t.on("PasswordRequest",(t=>{if(this.#Z=new r.PromiseCapability,e.onPassword){try{e.onPassword((t=>{t instanceof Error?this.#Z.reject(t):this.#Z.resolve({password:t})}),t.code)}catch(t){this.#Z.reject(t)}}else this.#Z.reject(new r.PasswordException(t.message,t.code));return this.#Z.promise})),t.on("DataLoaded",(t=>{e.onProgress?.({loaded:t.length,total:t.length}),this.downloadInfoCapability.resolve(t)})),t.on("StartRenderPage",(t=>{this.destroyed||this.#J.get(t.pageIndex)._startRenderPage(t.transparency,t.cacheKey)})),t.on("commonobj",(([e,s,i])=>{if(!this.destroyed&&!this.commonObjs.has(e))switch(s){case"Font":const h=this._params;if("error"in i){var n=i.error;(0,r.warn)("Error during font loading: "+n),this.commonObjs.resolve(e,n)}else{n=h.pdfBug&&globalThis.FontInspector?.enabled?(t,e)=>globalThis.FontInspector.fontAdded(t,e):null;const s=new o.FontFaceObject(i,{isEvalSupported:h.isEvalSupported,disableFontFace:h.disableFontFace,ignoreErrors:h.ignoreErrors,inspectFont:n});this.fontLoader.bind(s).catch((s=>t.sendWithPromise("FontFallback",{id:e}))).finally((()=>{!h.fontExtraProperties&&s.data&&(s.data=null),this.commonObjs.resolve(e,s)}))}break;case"CopyLocalImage":var a=i.imageRef;(0,r.assert)(a,"The imageRef must be defined.");for(const t of this.#J.values())for(var[,l]of t.objs)if(l.ref===a)return l.dataLen?(this.commonObjs.resolve(e,structuredClone(l)),l.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(e,i);break;default:throw new Error("Got unknown common object type "+s)}return null})),t.on("obj",(([t,e,s,i])=>{if(!this.destroyed){var n=this.#J.get(e);if(!n.objs.has(t))if(0===n._intentStates.size)i?.bitmap?.close();else switch(s){case"Image":n.objs.resolve(t,i),i?.dataLen>r.MAX_IMAGE_SIZE_TO_CACHE&&(n._maybeCleanupAfterRender=!0);break;case"Pattern":n.objs.resolve(t,i);break;default:throw new Error("Got unknown object type "+s)}}})),t.on("DocProgress",(t=>{this.destroyed||e.onProgress?.({loaded:t.loaded,total:t.total})})),t.on("FetchBuiltInCMap",(t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(t):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.")))),t.on("FetchStandardFontData",(t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(t):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,r.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");var{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally((()=>{this.annotationStorage.resetModified()}))}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1;return this.#Q.get(e)||(t=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then((t=>{if(this.destroyed)throw new Error("Transport destroyed");return t=new T(e,t,this,this._params.pdfBug),this.#J.set(e,t),t})),this.#Q.set(e,t),t)}getPageIndex(t){return"object"!=typeof t||null===t||!Number.isInteger(t.num)||t.num<0||!Number.isInteger(t.gen)||t.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen})}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#tt("GetFieldObjects")}hasJSActions(){return this.#tt("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return"string"!=typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#tt("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then((t=>new p.OptionalContentConfig(t)))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){var t="GetMetadata",e=this.#Y.get(t);return e||(e=this.messageHandler.sendWithPromise(t,null).then((t=>({info:t[0],metadata:t[1]?new u.Metadata(t[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}))),this.#Y.set(t,e),e)}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#J.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#Y.clear(),this.filterFactory.destroy(!0)}}get loadingParams(){var{disableAutoFetch:t,enableXfa:e}=this._params;return(0,r.shadow)(this,"loadingParams",{disableAutoFetch:t,enableXfa:e})}}class I{#et=Object.create(null);#st(t){return this.#et[t]||={capability:new r.PromiseCapability,data:null}}get(t,e=null){if(e){const s=this.#st(t);return s.capability.promise.then((()=>e(s.data))),null}const s=this.#et[t];if(s?.capability.settled)return s.data;throw new Error(`Requesting object that isn't resolved yet ${t}.`)}has(t){return this.#et[t]?.capability.settled??!1}resolve(t,e=null){(t=this.#st(t)).data=e,t.capability.resolve()}clear(){for(const e in this.#et){var t=this.#et[e].data;t?.bitmap?.close()}this.#et=Object.create(null)}*[Symbol.iterator](){for(const s in this.#et){var{capability:t,data:e}=this.#et[s];t.settled&&(yield[s,e])}}}class D{#it=null;constructor(t){this.#it=t,this.onContinue=null}get promise(){return this.#it.capability.promise}cancel(t=0){this.#it.cancel(null,t)}get separateAnnots(){var t,e=this.#it.operatorList.separateAnnots;return!!e&&(t=this.#it.annotationCanvasMap,e.form||e.canvas&&0<t?.size)}}class F{static#rt=new WeakSet;constructor({callback:t,params:e,objs:s,commonObjs:i,annotationCanvasMap:n,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:h,useRequestAnimationFrame:d=!1,pdfBug:c=!1,pageColors:u=null}){this.callback=t,this.params=e,this.objs=s,this.commonObjs=i,this.annotationCanvasMap=n,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=h,this._pdfBug=c,this.pageColors=u,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===d&&"undefined"!=typeof window,this.cancelled=!1,this.capability=new r.PromiseCapability,this.task=new D(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch((function(){}))}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(!this.cancelled){if(this._canvas){if(F.#rt.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");F.#rt.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var{canvasContext:s,viewport:i,transform:r,background:n}=this.params;this.gfx=new h.CanvasGraphics(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:i,transparency:t,background:n}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),F.#rt.delete(this._canvas),this.callback(t||new a.RenderingCancelledException("Rendering cancelled, page "+(this._pageIndex+1),e))}operatorListChanged(){this.graphicsReady?(this.stepper?.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||=this._continueBound}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame((()=>{this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk)&&(this.gfx.endDrawing(),F.#rt.delete(this._canvas),this.callback()))}}const O="4.0.379",B="9e14d04fd";i()}catch(t){i(t)}}))},822:(t,e,s)=>{s.d(e,{BaseCMapReaderFactory:()=>a,BaseCanvasFactory:()=>n,BaseFilterFactory:()=>r,BaseSVGFactory:()=>l,BaseStandardFontDataFactory:()=>o});var i=s(266);class r{constructor(){this.constructor===r&&(0,i.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addHighlightHCMFilter(t,e,s,i){return"none"}destroy(t=0){}}class n{constructor(){this.constructor===n&&(0,i.unreachable)("Cannot initialize BaseCanvasFactory.")}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");return{canvas:t=this._createCanvas(t,e),context:t.getContext("2d")}}reset(t,e,s){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){(0,i.unreachable)("Abstract method `_createCanvas` called.")}}class a{constructor({baseUrl:t=null,isCompressed:e=!0}){this.constructor===a&&(0,i.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return t=this.isCompressed?i.CMapCompressionType.BINARY:i.CMapCompressionType.NONE,this._fetchData(e,t).catch((t=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: `+e)}))}_fetchData(t,e){(0,i.unreachable)("Abstract method `_fetchData` called.")}}class o{constructor({baseUrl:t=null}){this.constructor===o&&(0,i.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const e=""+this.baseUrl+t;return this._fetchData(e).catch((t=>{throw new Error("Unable to load font data at: "+e)}))}_fetchData(t){(0,i.unreachable)("Abstract method `_fetchData` called.")}}class l{constructor(){this.constructor===l&&(0,i.unreachable)("Cannot initialize BaseSVGFactory.")}create(t,e,s=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");var i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),s||(i.setAttribute("width",t+"px"),i.setAttribute("height",e+"px")),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${t} `+e),i}createElement(t){if("string"!=typeof t)throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){(0,i.unreachable)("Abstract method `_createSVG` called.")}}},250:(t,e,s)=>{s.d(e,{CanvasGraphics:()=>I});var i=s(266),r=s(473);const n="Fill",a="Stroke",o="Shading";function l(t,e){var s,i,r;e&&(s=e[2]-e[0],i=e[3]-e[1],(r=new Path2D).rect(e[0],e[1],s,i),t.clip(r))}class h{constructor(){this.constructor===h&&(0,i.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,i.unreachable)("Abstract method `getPattern` called.")}}class d extends h{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;"axial"===this._type?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const t of this._colorStops)e.addColorStop(t[0],t[1]);return e}getPattern(t,e,s,o){let h;var d,c;return o===a||o===n?(o=e.current.getClippedPathBoundingBox(o,(0,r.getCurrentTransform)(t))||[0,0,0,0],d=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,(c=(d=e.cachedCanvases.getCanvas("pattern",d,c,!0)).context).clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-o[0],-o[1]),s=i.Util.transform(s,[1,0,0,1,o[0],o[1]]),c.transform(...e.baseTransform),this.matrix&&c.transform(...this.matrix),l(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),h=t.createPattern(d.canvas,"no-repeat"),o=new DOMMatrix(s),h.setTransform(o)):(l(t,this._bbox),h=this._createGradient(t)),h}}function c(t,e,s,i,r,n,a,o){var l=e.coords,h=e.colors,d=t.data,c=4*t.width;let u;l[s+1]>l[i+1]&&(u=s,s=i,i=u,u=n,n=a,a=u),l[i+1]>l[r+1]&&(u=i,i=r,r=u,u=a,a=o,o=u),l[s+1]>l[i+1]&&(u=s,s=i,i=u,u=n,n=a,a=u);var p=(l[s]+e.offsetX)*e.scaleX,g=(l[s+1]+e.offsetY)*e.scaleY,f=(l[i]+e.offsetX)*e.scaleX,m=(l[i+1]+e.offsetY)*e.scaleY,v=(l[r]+e.offsetX)*e.scaleX,b=(l[r+1]+e.offsetY)*e.scaleY;if(!(b<=g)){var y=h[n],w=h[n+1],x=h[n+2],A=h[a],_=h[a+1],C=h[a+2],E=h[o],k=h[o+1],S=h[o+2],T=(t=Math.round(g),Math.round(b));let e,s,i,r;for(let n=t;n<=T;n++){if(n<m){e=p-(p-f)*(I=n<g?0:(g-n)/(g-m)),s=y-(y-A)*I,i=w-(w-_)*I,r=x-(x-C)*I}else{let t;t=n>b?1:m==b?0:(m-n)/(m-b),e=f-(f-v)*t,s=A-(A-E)*t,i=_-(_-k)*t,r=C-(C-S)*t}let t;var P=p-(p-v)*(t=n<g?0:n>b?1:(g-n)/(g-b)),M=y-(y-E)*t,R=w-(w-k)*t,L=x-(x-S)*t,I=Math.round(Math.min(e,P)),D=Math.round(Math.max(e,P));let a=c*n+4*I;for(let n=I;n<=D;n++)(t=(e-n)/(e-P))<0?t=0:1<t&&(t=1),d[a++]=s-(s-M)*t|0,d[a++]=i-(i-R)*t|0,d[a++]=r-(r-L)*t|0,d[a++]=255}}}function u(t,e,s){var i=e.coords,r=e.colors;let n,a;switch(e.type){case"lattice":var o=e.verticesPerRow,l=Math.floor(i.length/o)-1,h=o-1;for(n=0;n<l;n++){let e=n*o;for(let n=0;n<h;n++,e++)c(t,s,i[e],i[e+1],i[e+o],r[e],r[e+1],r[e+o]),c(t,s,i[e+o+1],i[e+1],i[e+o],r[e+o+1],r[e+1],r[e+o])}break;case"triangles":for(n=0,a=i.length;n<a;n+=3)c(t,s,i[n],i[n+1],i[n+2],r[n],r[n+1],r[n+2]);break;default:throw new Error("illegal figure")}}class p extends h{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,s){var i=Math.floor(this._bounds[0]),r=Math.floor(this._bounds[1]),n=Math.ceil(this._bounds[2])-i,a=Math.ceil(this._bounds[3])-r,o=Math.min(Math.ceil(Math.abs(n*t[0]*1.1)),3e3),l=(n=n/o,a=a/(t=Math.min(Math.ceil(Math.abs(a*t[1]*1.1)),3e3)),{coords:this._coords,colors:this._colors,offsetX:-i,offsetY:-r,scaleX:1/n,scaleY:1/a}),h=(s=s.getCanvas("mesh",o+4,t+4,!1)).context,d=h.createImageData(o,t);if(e){var c=d.data;for(let t=0,s=c.length;t<s;t+=4)c[t]=e[0],c[t+1]=e[1],c[t+2]=e[2],c[t+3]=255}for(const t of this._figures)u(d,t,l);return h.putImageData(d,2,2),{canvas:s.canvas,offsetX:i-2*n,offsetY:r-2*a,scaleX:n,scaleY:a}}getPattern(t,e,s,n){let a;l(t,this._bbox),n===o?a=i.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(t)):(a=i.Util.singularValueDecompose2dScale(e.baseTransform),this.matrix&&(h=i.Util.singularValueDecompose2dScale(this.matrix),a=[a[0]*h[0],a[1]*h[1]]));var h=this._createMeshCanvas(a,n===o?null:this._background,e.cachedCanvases);return n!==o&&(t.setTransform(...e.baseTransform),this.matrix)&&t.transform(...this.matrix),t.translate(h.offsetX,h.offsetY),t.scale(h.scaleX,h.scaleY),t.createPattern(h.canvas,"no-repeat")}}class g extends h{getPattern(){return"hotpink"}}const f=1,m=2;class v{static MAX_PATTERN_SIZE=3e3;constructor(t,e,s,i,r){this.operatorList=t[2],this.matrix=t[3]||[1,0,0,1,0,0],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=s,this.canvasGraphicsFactory=i,this.baseTransform=r}createPatternCanvas(t){var e=this.operatorList,s=this.bbox,n=this.xstep,a=this.ystep,o=this.paintType,l=this.tilingType,h=this.color,d=this.canvasGraphicsFactory,c=(l=((0,i.info)("TilingType: "+l),s[0]),s[1]),u=s[2],p=(s=s[3],i.Util.singularValueDecompose2dScale(this.matrix)),g=i.Util.singularValueDecompose2dScale(this.baseTransform);p=[p[0]*g[0],p[1]*g[1]],g=this.getSizeAndScale(n,this.ctx.canvas.width,p[0]),n=this.getSizeAndScale(a,this.ctx.canvas.height,p[1]),p=(a=t.cachedCanvases.getCanvas("pattern",g.size,n.size,!0)).context;(d=d.createCanvasGraphics(p)).groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(d,o,h);let f=l,m=c,v=u,b=s;return l<0&&(f=0,v+=Math.abs(l)),c<0&&(m=0,b+=Math.abs(c)),p.translate(-g.scale*f,-n.scale*m),d.transform(g.scale,0,0,n.scale,0,0),p.save(),this.clipBbox(d,f,m,v,b),d.baseTransform=(0,r.getCurrentTransform)(d.ctx),d.executeOperatorList(e),d.endDrawing(),{canvas:a.canvas,scaleX:g.scale,scaleY:n.scale,offsetX:f,offsetY:m}}getSizeAndScale(t,e,s){t=Math.abs(t),e=Math.max(v.MAX_PATTERN_SIZE,e);let i=Math.ceil(t*s);return i>=e?i=e:s=i/t,{scale:s,size:i}}clipBbox(t,e,s,i,n){t.ctx.rect(e,s,i-e,n-s),t.current.updateRectMinMax((0,r.getCurrentTransform)(t.ctx),[e,s,i,n]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,s){var r=t.ctx,n=t.current;switch(e){case f:var a=this.ctx;r.fillStyle=a.fillStyle,r.strokeStyle=a.strokeStyle,n.fillColor=a.fillStyle,n.strokeColor=a.strokeStyle;break;case m:a=i.Util.makeHexColor(s[0],s[1],s[2]),r.fillStyle=a,r.strokeStyle=a,n.fillColor=a,n.strokeColor=a;break;default:throw new i.FormatError("Unsupported paint type: "+e)}}getPattern(t,e,s,r){let n=s;r!==o&&(n=i.Util.transform(n,e.baseTransform),this.matrix)&&(n=i.Util.transform(n,this.matrix)),s=this.createPatternCanvas(e);let a=new DOMMatrix(n);return a=(a=a.translate(s.offsetX,s.offsetY)).scale(1/s.scaleX,1/s.scaleY),(r=t.createPattern(s.canvas,"repeat")).setTransform(a),r}}const b=4096;class y{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,s){let i;return void 0!==this.cache[t]?(i=this.cache[t],this.canvasFactory.reset(i,e,s)):(i=this.canvasFactory.create(e,s),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(const e in this.cache){var t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function w(t,e,s,i,n,a,o,l,h,d){var c,u,p,g,[f,m,v,b,y,w]=(0,r.getCurrentTransform)(t);0===m&&0===v?(c=Math.round(o*f+y),u=Math.round(l*b+w),p=Math.abs(Math.round((o+h)*f+y)-c)||1,g=Math.abs(Math.round((l+d)*b+w)-u)||1,t.setTransform(Math.sign(f),0,0,Math.sign(b),c,u),t.drawImage(e,s,i,n,a,0,0,p,g),t.setTransform(f,m,v,b,y,w)):0===f&&0===b?(c=Math.round(l*v+y),u=Math.round(o*m+w),p=Math.abs(Math.round((l+d)*v+y)-c)||1,g=Math.abs(Math.round((o+h)*m+w)-u)||1,t.setTransform(0,Math.sign(m),Math.sign(v),0,c,u),t.drawImage(e,s,i,n,a,0,0,g,p),t.setTransform(f,m,v,b,y,w)):(t.drawImage(e,s,i,n,a,o,l,h,d),Math.hypot(f,m),Math.hypot(v,b))}class x{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=i.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=i.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){var t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,s){[e,s]=i.Util.applyTransform([e,s],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,s),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,s)}updateRectMinMax(t,e){var s=i.Util.applyTransform(e,t),r=i.Util.applyTransform(e.slice(2),t),n=i.Util.applyTransform([e[0],e[3]],t);e=i.Util.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,s[0],r[0],n[0],e[0]),this.minY=Math.min(this.minY,s[1],r[1],n[1],e[1]),this.maxX=Math.max(this.maxX,s[0],r[0],n[0],e[0]),this.maxY=Math.max(this.maxY,s[1],r[1],n[1],e[1])}updateScalingPathMinMax(t,e){i.Util.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.maxX=Math.max(this.maxX,e[1]),this.minY=Math.min(this.minY,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,s,r,n,a,o,l,h,d){e=i.Util.bezierBoundingBox(e,s,r,n,a,o,l,h),d?(d[0]=Math.min(d[0],e[0],e[2]),d[1]=Math.max(d[1],e[0],e[2]),d[2]=Math.min(d[2],e[1],e[3]),d[3]=Math.max(d[3],e[1],e[3])):this.updateRectMinMax(t,e)}getPathBoundingBox(t=n,e=null){var s=[this.minX,this.minY,this.maxX,this.maxY];return t===a&&(e||(0,i.unreachable)("Stroke bounding box must include transform."),e=(t=i.Util.singularValueDecompose2dScale(e))[0]*this.lineWidth/2,t=t[1]*this.lineWidth/2,s[0]-=e,s[1]-=t,s[2]+=e,s[3]+=t),s}updateClipFromPath(){var t=i.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=n,e=null){return i.Util.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function A(t,e){if("undefined"!=typeof ImageData&&e instanceof ImageData)t.putImageData(e,0,0);else{var s=e.height,r=e.width,n=s%16,a=(s-n)/16,o=0==n?a:1+a,l=t.createImageData(r,16);let w,x=0;var h=e.data,d=l.data;let A,_,C,E;if(e.kind===i.ImageKind.GRAYSCALE_1BPP){var c=h.byteLength,u=new Uint32Array(d.buffer,0,d.byteLength>>2),p=u.length,g=r+7>>3,f=4294967295,m=i.FeatureTest.isLittleEndian?4278190080:255;for(A=0;A<o;A++){for(C=A<a?16:n,w=0,_=0;_<C;_++){var v=c-x;let t=0;var b=g<v?r:8*v-7,y=-8&b;let e=0,s=0;for(;t<y;t+=8)s=h[x++],u[w++]=128&s?f:m,u[w++]=64&s?f:m,u[w++]=32&s?f:m,u[w++]=16&s?f:m,u[w++]=8&s?f:m,u[w++]=4&s?f:m,u[w++]=2&s?f:m,u[w++]=1&s?f:m;for(;t<b;t++)0===e&&(s=h[x++],e=128),u[w++]=s&e?f:m,e>>=1}for(;w<p;)u[w++]=0;t.putImageData(l,0,16*A)}}else if(e.kind===i.ImageKind.RGBA_32BPP){for(_=0,E=16*r*4,A=0;A<a;A++)d.set(h.subarray(x,x+E)),x+=E,t.putImageData(l,0,_),_+=16;A<o&&(E=r*n*4,d.set(h.subarray(x,x+E)),t.putImageData(l,0,_))}else{if(e.kind!==i.ImageKind.RGB_24BPP)throw new Error("bad image kind: "+e.kind);for(C=16,E=r*C,A=0;A<o;A++){for(A>=a&&(C=n,E=r*C),w=0,_=E;_--;)d[w++]=h[x++],d[w++]=h[x++],d[w++]=h[x++],d[w++]=255;t.putImageData(l,0,16*A)}}}}function _(t,e){if(e.bitmap)t.drawImage(e.bitmap,0,0);else{var s=e.height,r=e.width,n=s%16,a=(s-n)/16,o=0==n?a:1+a,l=t.createImageData(r,16);let u=0;var h=e.data,d=l.data;for(let e=0;e<o;e++){var c=e<a?16:n;({srcPos:u}=function({src:t,srcPos:e=0,dest:s,width:r,height:n,nonBlackColor:a,inverseDecode:o=!1}){var l=i.FeatureTest.isLittleEndian?4278190080:255,[h,d]=o?[a,l]:[l,a],c=r>>3,u=7&r,p=t.length;s=new Uint32Array(s.buffer);let g=0;for(let i=0;i<n;i++){for(var f=e+c;e<f;e++){var m=e<p?t[e]:255;s[g++]=128&m?d:h,s[g++]=64&m?d:h,s[g++]=32&m?d:h,s[g++]=16&m?d:h,s[g++]=8&m?d:h,s[g++]=4&m?d:h,s[g++]=2&m?d:h,s[g++]=1&m?d:h}if(0!=u){var v=e<p?t[e++]:255;for(let t=0;t<u;t++)s[g++]=v&1<<7-t?d:h}}return{srcPos:e,destPos:g}}({src:h,srcPos:u,dest:d,width:r,height:c,nonBlackColor:0})),t.putImageData(l,0,16*e)}}}function C(t,e){for(const s of["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"])void 0!==t[s]&&(e[s]=t[s]);void 0!==t.setLineDash&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function E(t){var e;t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",void 0!==t.setLineDash&&(t.setLineDash([]),t.lineDashOffset=0),i.isNodeJS||"none"!==(e=t.filter)&&""!==e&&(t.filter="none")}function k(t,e,s){var i=t.length;for(let n=3;n<i;n+=4){var r=s?s[t[n]]:t[n];e[n]=e[n]*r*(1/255)|0}}function S(t,e,s){var i=t.length;for(let n=3;n<i;n+=4){var r=77*t[n-3]+152*t[n-2]+28*t[n-1];e[n]=s?e[n]*s[r>>8]>>8:e[n]*r>>16}}function T(t,e){var s=((t=i.Util.singularValueDecompose2dScale(t))[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]),Math.fround((globalThis.devicePixelRatio||1)*r.PixelsPerInch.PDF_TO_CSS_UNITS));return void 0!==e?e:t[0]<=s||t[1]<=s}const P=["butt","round","square"],M=["miter","round","bevel"],R={},L={};class I{constructor(t,e,s,i,r,{optionalContentConfig:n,markedContentStack:a=null},o,l){this.ctx=t,this.current=new x(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=s,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=n,this.cachedCanvases=new y(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=o,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=l,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return"string"==typeof t?(t.startsWith("g_")?this.commonObjs:this.objs).get(t):e}beginDrawing({transform:t,viewport:e,transparency:s=!1,background:i=null}){var n=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,n,a),this.ctx.fillStyle=o,s&&(i=this.cachedCanvases.getCanvas("transparent",n,a),this.compositeCtx=this.ctx,this.transparentCanvas=i.canvas,this.ctx=i.context,this.ctx.save(),this.ctx.transform(...(0,r.getCurrentTransform)(this.compositeCtx))),this.ctx.save(),E(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=(0,r.getCurrentTransform)(this.ctx)}executeOperatorList(t,e,s,r){var n=t.argsArray,a=t.fnArray;let o=e||0;var l=n.length;if(l===o)return o;var h=10<l-o&&"function"==typeof s,d=h?Date.now()+15:0;let c=0;for(var u,p=this.commonObjs,g=this.objs;;){if(void 0!==r&&o===r.nextBreakPoint)return r.breakIt(o,s),o;if((u=a[o])!==i.OPS.dependency)this[u].apply(this,n[o]);else for(const t of n[o]){var f=t.startsWith("g_")?p:g;if(!f.has(t))return f.get(t,s),o}if(++o===l)return o;if(h&&10<++c){if(Date.now()>d)return s(),o;c=0}}}#nt(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#nt(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#at()}#at(){var t,e;this.pageColors&&"none"!==(t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background))&&(e=this.ctx.filter,this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e)}_scaleImage(t,e){var s,i,r=t.width,n=t.height;let a=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),l=r,h=n,d="prescale1";for(;2<a&&1<l||2<o&&1<h;){let e=l,r=h;2<a&&1<l&&(e=16384<=l?Math.floor(l/2)-1||1:Math.ceil(l/2),a/=l/e),2<o&&1<h&&(r=16384<=h?Math.floor(h/2)-1||1:Math.ceil(h)/2,o/=h/r),(i=(s=this.cachedCanvases.getCanvas(d,e,r)).context).clearRect(0,0,e,r),i.drawImage(t,0,0,l,h,0,0,e,r),t=s.canvas,l=e,h=r,d="prescale1"===d?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:h}}_createMaskCanvas(t){var e=this.ctx,{width:s,height:a}=t,o=this.current.fillColor,l=this.current.patternFill,h=(0,r.getCurrentTransform)(e);let d,c,u,p;if((t.bitmap||t.data)&&1<t.count){var g=t.bitmap||t.data.buffer;if((g=(c=JSON.stringify(l?h:[h.slice(0,4),o]),(d=this._cachedBitmapsMap.get(g))||(d=new Map,this._cachedBitmapsMap.set(g,d)),d.get(c)))&&!l){return{canvas:g,offsetX:Math.round(Math.min(h[0],h[2])+h[4]),offsetY:Math.round(Math.min(h[1],h[3])+h[5])}}u=g}u||_((p=this.cachedCanvases.getCanvas("maskCanvas",s,a)).context,t);g=i.Util.transform(h,[1/s,0,0,-1/a,0,0]),g=i.Util.transform(g,[1,0,0,1,0,-a]);var f,m,[h,v,f,m]=i.Util.getAxialAlignedBoundingBox([0,0,s,a],g);f=Math.round(f-h)||1,m=Math.round(m-v)||1;const b=h,y=v;return(m=(f=this.cachedCanvases.getCanvas("fillCanvas",f,m)).context).translate(-b,-y),m.transform(...g),u||(u=(u=this._scaleImage(p.canvas,(0,r.getCurrentTransformInverse)(m))).img,d&&l&&d.set(c,u)),m.imageSmoothingEnabled=T((0,r.getCurrentTransform)(m),t.interpolate),w(m,u,0,0,u.width,u.height,0,0,s,a),m.globalCompositeOperation="source-in",h=i.Util.transform((0,r.getCurrentTransformInverse)(m),[1,0,0,1,-b,-y]),m.fillStyle=l?o.getPattern(e,this,h,n):o,m.fillRect(0,0,s,a),d&&!l&&(this.cachedCanvases.delete("fillCanvas"),d.set(c,f.canvas)),{canvas:f.canvas,offsetX:Math.round(b),offsetY:Math.round(y)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=P[t]}setLineJoin(t){this.ctx.lineJoin=M[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){var s=this.ctx;void 0!==s.setLineDash&&(s.setLineDash(t),s.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(var[e,s]of t)switch(e){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.current.fillAlpha=s,this.ctx.globalAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){var t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");var t=this.ctx.canvas.width,e=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel;s=this.cachedCanvases.getCanvas(s,t,e);(t=(this.suspendedCtx=this.ctx,this.ctx=s.context,this.ctx)).setTransform(...(0,r.getCurrentTransform)(this.suspendedCtx)),C(this.suspendedCtx,t),function(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(t,s){e.translate(t,s),this.__originalTranslate(t,s)},t.scale=function(t,s){e.scale(t,s),this.__originalScale(t,s)},t.transform=function(t,s,i,r,n,a){e.transform(t,s,i,r,n,a),this.__originalTransform(t,s,i,r,n,a)},t.setTransform=function(t,s,i,r,n,a){e.setTransform(t,s,i,r,n,a),this.__originalSetTransform(t,s,i,r,n,a)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(t){e.rotate(t),this.__originalRotate(t)},t.clip=function(t){e.clip(t),this.__originalClip(t)},t.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},t.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},t.bezierCurveTo=function(t,s,i,r,n,a){e.bezierCurveTo(t,s,i,r,n,a),this.__originalBezierCurveTo(t,s,i,r,n,a)},t.rect=function(t,s,i,r){e.rect(t,s,i,r),this.__originalRect(t,s,i,r)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}(t,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),C(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){var e;this.current.activeSMask&&(t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height],e=this.current.activeSMask,function(t,e,s,i){var r=i[0],n=i[1],a=i[2]-r;if(i=i[3]-n,0!=a&&0!=i){var o=e.context,l=s,h=a,d=i,c=(a=e.subtype,i=e.backdrop,e.transferMap),u=r,p=n,g=e.offsetX,f=e.offsetY,m=!!i,v=m?i[0]:0,b=m?i[1]:0,y=m?i[2]:0,w="Luminosity"===a?S:k,x=Math.min(d,Math.ceil(1048576/h));for(let t=0;t<d;t+=x){var A=Math.min(x,d-t),_=o.getImageData(u-g,t+(p-f),h,A);if(A=l.getImageData(u,t+p,h,A),m){R=L=C=void 0;var C=_.data,E=v,T=b,P=y,M=C.length;for(let t=3;t<M;t+=4){var R,L=C[t];0===L?(C[t-3]=E,C[t-2]=T,C[t-1]=P):L<255&&(R=255-L,C[t-3]=C[t-3]*L+E*R>>8,C[t-2]=C[t-2]*L+T*R>>8,C[t-1]=C[t-1]*L+P*R>>8)}}w(_.data,A.data,c),l.putImageData(A,u,t+p)}t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore()}}(this.suspendedCtx,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore())}save(){(this.inSMaskMode?(C(this.ctx,this.suspendedCtx),this.suspendedCtx):this.ctx).save();var t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),C(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,s,i,r,n){this.ctx.transform(t,e,s,i,r,n),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,s){var n=this.ctx,a=this.current;let o,l,h=a.x,d=a.y;var c=(0,r.getCurrentTransform)(n),u=0===c[0]&&0===c[3]||0===c[1]&&0===c[2],p=u?s.slice(0):null;for(let s=0,r=0,b=t.length;s<b;s++)switch(0|t[s]){case i.OPS.rectangle:h=e[r++],d=e[r++];var g=e[r++],f=e[r++],m=h+g,v=d+f;n.moveTo(h,d),0===g||0===f?n.lineTo(m,v):(n.lineTo(m,d),n.lineTo(m,v),n.lineTo(h,v)),u||a.updateRectMinMax(c,[h,d,m,v]),n.closePath();break;case i.OPS.moveTo:h=e[r++],d=e[r++],n.moveTo(h,d),u||a.updatePathMinMax(c,h,d);break;case i.OPS.lineTo:h=e[r++],d=e[r++],n.lineTo(h,d),u||a.updatePathMinMax(c,h,d);break;case i.OPS.curveTo:o=h,l=d,h=e[r+4],d=e[r+5],n.bezierCurveTo(e[r],e[r+1],e[r+2],e[r+3],h,d),a.updateCurvePathMinMax(c,o,l,e[r],e[r+1],e[r+2],e[r+3],h,d,p),r+=6;break;case i.OPS.curveTo2:o=h,l=d,n.bezierCurveTo(h,d,e[r],e[r+1],e[r+2],e[r+3]),a.updateCurvePathMinMax(c,o,l,h,d,e[r],e[r+1],e[r+2],e[r+3],p),h=e[r+2],d=e[r+3],r+=4;break;case i.OPS.curveTo3:o=h,l=d,h=e[r+2],d=e[r+3],n.bezierCurveTo(e[r],e[r+1],h,d,h,d),a.updateCurvePathMinMax(c,o,l,e[r],e[r+1],h,d,h,d,p),r+=4;break;case i.OPS.closePath:n.closePath()}u&&a.updateScalingPathMinMax(c,p),a.setCurrentPoint(h,d)}closePath(){this.ctx.closePath()}stroke(t=!0){var e=this.ctx,s=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof s&&s?.getPattern?(e.save(),e.strokeStyle=s.getPattern(e,this,(0,r.getCurrentTransformInverse)(e),a),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){var e=this.ctx,s=this.current.fillColor;let i=!1;this.current.patternFill&&(e.save(),e.fillStyle=s.getPattern(e,this,(0,r.getCurrentTransformInverse)(e),n),i=!0),s=this.current.getClippedPathBoundingBox(),this.contentVisible&&null!==s&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),i&&e.restore(),t&&this.consumePath(s)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=R}eoClip(){this.pendingClip=L}beginText(){this.current.textMatrix=i.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){var t=this.pendingTextPaths,e=this.ctx;if(void 0===t)e.beginPath();else{e.save(),e.beginPath();for(const s of t)e.setTransform(...s.transform),e.translate(s.x,s.y),s.addToPath(e,s.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var s=this.commonObjs.get(t),r=this.current;if(!s)throw new Error("Can't find font for "+t);if(r.fontMatrix=s.fontMatrix||i.FONT_IDENTITY_MATRIX,0!==r.fontMatrix[0]&&0!==r.fontMatrix[3]||(0,i.warn)("Invalid font matrix for font "+t),e<0?(e=-e,r.fontDirection=-1):r.fontDirection=1,this.current.font=s,this.current.fontSize=e,!s.isType3Font){t=s.loadedName||"sans-serif",r=s.systemFontInfo?.css||`"${t}", `+s.fallbackName;let i="normal";s.black?i="900":s.bold&&(i="bold"),t=s.italic?"italic":"normal";let n=e;e<16?n=16:100<e&&(n=100),this.current.fontSizeScale=e/n,this.ctx.font=t+` ${i} ${n}px `+r}}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,s,i,r,n){this.current.textMatrix=[t,e,s,i,r,n],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,s,n){var a=this.ctx,o=(c=this.current).font,l=c.textRenderingMode,h=c.fontSize/c.fontSizeScale,d=l&i.TextRenderingMode.FILL_STROKE_MASK,c=(l=!!(l&i.TextRenderingMode.ADD_TO_PATH_FLAG),c.patternFill&&!o.missingFile);let u;(o.disableFontFace||l||c)&&(u=o.getPathGenerator(this.commonObjs,t)),o.disableFontFace||c?(a.save(),a.translate(e,s),a.beginPath(),u(a,h),n&&a.setTransform(...n),d!==i.TextRenderingMode.FILL&&d!==i.TextRenderingMode.FILL_STROKE||a.fill(),d!==i.TextRenderingMode.STROKE&&d!==i.TextRenderingMode.FILL_STROKE||a.stroke(),a.restore()):(d!==i.TextRenderingMode.FILL&&d!==i.TextRenderingMode.FILL_STROKE||a.fillText(t,e,s),d!==i.TextRenderingMode.STROKE&&d!==i.TextRenderingMode.FILL_STROKE||a.strokeText(t,e,s)),l&&(this.pendingTextPaths||=[]).push({transform:(0,r.getCurrentTransform)(a),x:e,y:s,fontSize:h,addToPath:u})}get isFontSubpixelAAEnabled(){var t=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10).context,e=(t.scale(1.5,1),t.fillText("I",0,10),t.getImageData(0,0,10,10).data);let s=!1;for(let t=3;t<e.length;t+=4)if(0<e[t]&&e[t]<255){s=!0;break}return(0,i.shadow)(this,"isFontSubpixelAAEnabled",s)}showText(t){var e=this.current,s=e.font;if(s.isType3Font)return this.showType3Text(t);var a=e.fontSize;if(0!==a){var o=this.ctx,l=e.fontSizeScale,h=e.charSpacing,d=e.wordSpacing,c=e.fontDirection,u=e.textHScale*c,p=t.length,g=s.vertical,f=g?1:-1,m=s.defaultVMetrics,v=a*e.fontMatrix[0],b=e.textRenderingMode===i.TextRenderingMode.FILL&&!s.disableFontFace&&!e.patternFill;o.save(),o.transform(...e.textMatrix),o.translate(e.x,e.y+e.textRise),0<c?o.scale(u,-1):o.scale(u,1);let P,M=(e.patternFill&&(o.save(),w=e.fillColor.getPattern(o,this,(0,r.getCurrentTransformInverse)(o),n),P=(0,r.getCurrentTransform)(o),o.restore(),o.fillStyle=w),e.lineWidth);var y,w=e.textMatrixScale;if(0===w||0===M?(y=e.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK)!==i.TextRenderingMode.STROKE&&y!==i.TextRenderingMode.FILL_STROKE||(M=this.getSinglePixelWidth()):M/=w,1!==l&&(o.scale(l,l),M/=l),o.lineWidth=M,s.isInvalidPDFjsFont){var x=[];let s=0;for(const e of t)x.push(e.unicode),s+=e.width;o.fillText(x.join(""),0,0),e.x+=s*v*u,o.restore(),this.compose()}else{let i,r=0;for(i=0;i<p;++i){var A=t[i];if("number"==typeof A)r+=f*A*a/1e3;else{let t=!1;var _,C,E,k=(A.isSpace?d:0)+h,S=A.fontChar,T=A.accent;let e,i,n=A.width;i=g?(_=A.vmetric||m,C=-(A.vmetric?_[1]:.5*n)*v,E=_[2]*v,n=_?-_[0]:n,e=C/l,(r+E)/l):(e=r/l,0),s.remeasure&&0<n&&(n<(_=1e3*o.measureText(S).width/a*l)&&this.isFontSubpixelAAEnabled?(C=n/_,t=!0,o.save(),o.scale(C,1),e/=C):n!==_&&(e+=(n-_)/2e3*a/l)),this.contentVisible&&(A.isInFont||s.missingFile)&&(b&&!T?o.fillText(S,e,i):(this.paintChar(S,e,i,P),T&&(E=e+a*T.offset.x/l,A=i-a*T.offset.y/l,this.paintChar(T.fontChar,E,A,P)))),r+=S=g?n*v-k*c:n*v+k*c,t&&o.restore()}}g?e.y-=r:e.x+=r*u,o.restore(),this.compose()}}}showType3Text(t){var e,s,r=this.ctx,n=this.current,a=n.font,o=n.fontSize,l=n.fontDirection,h=a.vertical?1:-1,d=n.charSpacing,c=n.wordSpacing,u=n.textHScale*l,p=n.fontMatrix||i.FONT_IDENTITY_MATRIX,g=t.length;let f,m,v,b;if(!(n.textRenderingMode===i.TextRenderingMode.INVISIBLE)&&0!==o){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,r.save(),r.transform(...n.textMatrix),r.translate(n.x,n.y),r.scale(u,l),f=0;f<g;++f)"number"==typeof(m=t[f])?(this.ctx.translate(b=h*m*o/1e3,0),n.x+=b*u):(e=(m.isSpace?c:0)+d,(s=a.charProcOperatorList[m.operatorListId])?(this.contentVisible&&(this.processingType3=m,this.save(),r.scale(o,o),r.transform(...p),this.executeOperatorList(s),this.restore()),v=i.Util.applyTransform([m.width,0],p)[0]*o+e,r.translate(v,0),n.x+=v*u):(0,i.warn)(`Type3 character "${m.operatorListId}" is not available.`));r.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,s,i,r,n){this.ctx.rect(s,i,r-s,n-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){var e,s,i;return"TilingPattern"===t[0]?(e=t[1],s=this.baseTransform||(0,r.getCurrentTransform)(this.ctx),i={createCanvasGraphics:t=>new I(t,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})},new v(t,e,this.ctx,i,s)):this._getPattern(t[1],t[2])}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,s){t=i.Util.makeHexColor(t,e,s),this.ctx.strokeStyle=t,this.current.strokeColor=t}setFillRGBColor(t,e,s){t=i.Util.makeHexColor(t,e,s),this.ctx.fillStyle=t,this.current.fillColor=t,this.current.patternFill=!1}_getPattern(t,e=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=function(t){switch(t[0]){case"RadialAxial":return new d(t);case"Mesh":return new p(t);case"Dummy":return new g}throw new Error("Unknown IR type: "+t[0])}(this.getObject(t)),this.cachedPatterns.set(t,s)),e&&(s.matrix=e),s}shadingFill(t){var e,s,n;this.contentVisible&&(e=this.ctx,this.save(),t=this._getPattern(t),e.fillStyle=t.getPattern(e,this,(0,r.getCurrentTransformInverse)(e),o),(t=(0,r.getCurrentTransformInverse)(e))?(({width:e,height:s}=e.canvas),[e,s,t,n]=i.Util.getAxialAlignedBoundingBox([0,0,e,s],t),this.ctx.fillRect(e,s,t-e,n-s)):this.ctx.fillRect(-1e10,-1e10,2e10,2e10),this.compose(this.current.getClippedPathBoundingBox()),this.restore())}beginInlineImage(){(0,i.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,i.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(t,e){var s;this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(t)&&6===t.length&&this.transform(...t),this.baseTransform=(0,r.getCurrentTransform)(this.ctx),e)&&(t=e[2]-e[0],s=e[3]-e[1],this.ctx.rect(e[0],e[1],t,s),this.current.updateRectMinMax((0,r.getCurrentTransform)(this.ctx),e),this.clip(),this.endPath())}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(this.contentVisible){this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);var e=this.ctx,s=(t.isolated||(0,i.info)("TODO: Support non-isolated groups."),t.knockout&&(0,i.warn)("Knockout groups not supported."),(0,r.getCurrentTransform)(e));if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");var n=i.Util.getAxialAlignedBoundingBox(t.bbox,(0,r.getCurrentTransform)(e)),a=[0,0,e.canvas.width,e.canvas.height],o=(n=i.Util.intersect(n,a)||[0,0,0,0],a=Math.floor(n[0]),Math.floor(n[1]));let h=Math.max(Math.ceil(n[2])-a,1),d=Math.max(Math.ceil(n[3])-o,1),c=1,u=1,p=(h>b&&(c=h/b,h=b),d>b&&(u=d/b,d=b),this.current.startNewPathAndClipBox([0,0,h,d]),"groupAt"+this.groupLevel);t.smask&&(p+="_smask_"+this.smaskCounter++%2);var l=(n=this.cachedCanvases.getCanvas(p,h,d)).context;l.scale(1/c,1/u),l.translate(-a,-o),l.transform(...s),t.smask?this.smaskStack.push({canvas:n.canvas,context:l,offsetX:a,offsetY:o,scaleX:c,scaleY:u,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(a,o),e.scale(c,u),e.save()),C(e,l),this.ctx=l,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}}endGroup(t){var e,s;this.contentVisible&&(this.groupLevel--,e=this.ctx,s=this.groupStack.pop(),this.ctx=s,this.ctx.imageSmoothingEnabled=!1,t.smask?(this.tempSMask=this.smaskStack.pop(),this.restore()):(this.ctx.restore(),s=(0,r.getCurrentTransform)(this.ctx),this.restore(),this.ctx.save(),this.ctx.setTransform(...s),t=i.Util.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],s),this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(t)))}beginAnnotation(t,e,s,n,a){var o,l,h,d,c;this.#nt(),E(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(e)&&4===e.length&&(o=e[2]-e[0],l=e[3]-e[1],a&&this.annotationCanvasMap?((s=s.slice())[4]-=e[0],s[5]-=e[1],(e=e.slice())[0]=e[1]=0,e[2]=o,e[3]=l,[a,h]=i.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(this.ctx)),c=this.viewportScale,d=Math.ceil(o*this.outputScaleX*c),c=Math.ceil(l*this.outputScaleY*c),({canvas:d,context:c}=(this.annotationCanvas=this.canvasFactory.create(d,c),this.annotationCanvas)),this.annotationCanvasMap.set(t,d),this.annotationCanvas.savedCtx=this.ctx,this.ctx=c,this.ctx.save(),this.ctx.setTransform(a,0,0,-h,0,l*h),E(this.ctx)):(E(this.ctx),this.ctx.rect(e[0],e[1],o,l),this.ctx.clip(),this.endPath())),this.current=new x(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...n)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#at(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){var e,s;this.contentVisible&&(e=t.count,(t=this.getObject(t.data,t)).count=e,e=this.ctx,(s=this.processingType3)&&(void 0===s.compiled&&(s.compiled=function(t){const{width:e,height:s}=t;if(1e3<e||1e3<s)return null;var i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=e+1;let n,a,o,l=new Uint8Array(r*(s+1));var h=e+7&-8;let d=new Uint8Array(h*s),c=0;for(const e of t.data){let t=128;for(;0<t;)d[c++]=e&t?0:255,t>>=1}let u=0;for((c=0)!==d[c]&&(l[0]=1,++u),a=1;a<e;a++)d[c]!==d[c+1]&&(l[a]=d[c]?2:1,++u),c++;for(0!==d[c]&&(l[a]=2,++u),n=1;n<s;n++){c=n*h,o=n*r,d[c-h]!==d[c]&&(l[o]=d[c]?1:8,++u);let t=(d[c]?4:0)+(d[c-h]?8:0);for(a=1;a<e;a++)i[t=(t>>2)+(d[c+1]?4:0)+(d[c-h+1]?8:0)]&&(l[o+a]=i[t],++u),c++;if(d[c-h]!==d[c]&&(l[o+a]=d[c]?2:4,++u),1e3<u)return null}for(c=h*(s-1),o=n*r,0!==d[c]&&(l[o]=8,++u),a=1;a<e;a++)d[c]!==d[c+1]&&(l[o+a]=d[c]?4:8,++u),c++;if(0!==d[c]&&(l[o+a]=4,++u),1e3<u)return null;var p=new Int32Array([0,r,-1,0,-r,0,0,0,1]);const g=new Path2D;for(n=0;u&&n<=s;n++){let t=n*r;for(var f=t+e;t<f&&!l[t];)t++;if(t!==f){g.moveTo(t%r,n);var m=t;let e=l[t];do{for(var v=p[e];t+=v,!l[t];);var b=l[t];5!==b&&10!==b?(e=b,l[t]=0):(e=b&51*e>>4,l[t]&=e>>2|e<<2),g.lineTo(t%r,t/r|0),l[t]||--u}while(m!==t);--n}}return d=null,l=null,function(t){t.save(),t.scale(1/e,-1/s),t.translate(0,-s),t.fill(g),t.beginPath(),t.restore()}}(t)),s.compiled)?s.compiled(e):(t=(s=this._createMaskCanvas(t)).canvas,e.save(),e.setTransform(1,0,0,1,0,0),e.drawImage(t,s.offsetX,s.offsetY),e.restore(),this.compose()))}paintImageMaskXObjectRepeat(t,e,s=0,n=0,a,o){if(this.contentVisible){t=this.getObject(t.data,t);var l=this.ctx,h=(l.save(),(0,r.getCurrentTransform)(l)),d=(l.transform(e,s,n,a,0,0),this._createMaskCanvas(t));l.setTransform(1,0,0,1,d.offsetX-h[4],d.offsetY-h[5]);for(let t=0,r=o.length;t<r;t+=2){var c=i.Util.transform(h,[e,s,n,a,o[t],o[t+1]]),[c,u]=i.Util.applyTransform([0,0],c);l.drawImage(d.canvas,c,u)}l.restore(),this.compose()}}paintImageMaskXObjectGroup(t){if(this.contentVisible){var e=this.ctx,s=this.current.fillColor,i=this.current.patternFill;for(const u of t){var{data:a,width:o,height:l,transform:h}=u,d=this.cachedCanvases.getCanvas("maskCanvas",o,l),c=d.context,a=(c.save(),this.getObject(a,u));_(c,a),c.globalCompositeOperation="source-in",c.fillStyle=i?s.getPattern(c,this,(0,r.getCurrentTransformInverse)(e),n):s,c.fillRect(0,0,o,l),c.restore(),e.save(),e.transform(...h),e.scale(1,-1),w(e,d.canvas,0,0,o,l,0,-1,1,1),e.restore()}this.compose()}}paintImageXObject(t){this.contentVisible&&((t=this.getObject(t))?this.paintInlineImageXObject(t):(0,i.warn)("Dependent image isn't ready yet"))}paintImageXObjectRepeat(t,e,s,r){if(this.contentVisible)if(t=this.getObject(t)){var n=t.width,a=t.height,o=[];for(let t=0,i=r.length;t<i;t+=2)o.push({transform:[e,0,0,s,r[t],r[t+1]],x:0,y:0,w:n,h:a});this.paintInlineImageXObjectGroup(t,o)}else(0,i.warn)("Dependent image isn't ready yet")}applyTransferMapsToCanvas(t){return"none"!==this.current.transferMaps&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){var e,s;return"none"===this.current.transferMaps?t.bitmap:(({bitmap:t,width:e,height:s}=t),(s=(e=this.cachedCanvases.getCanvas("inlineImage",e,s)).context).filter=this.current.transferMaps,s.drawImage(t,0,0),s.filter="none",e.canvas)}paintInlineImageXObject(t){if(this.contentVisible){var e=t.width,s=t.height,n=this.ctx;let o;this.save(),i.isNodeJS||"none"!==(a=n.filter)&&""!==a&&(n.filter="none"),n.scale(1/e,-1/s),o=t.bitmap?this.applyTransferMapsToBitmap(t):"function"==typeof HTMLElement&&t instanceof HTMLElement||!t.data?t:(A(a=this.cachedCanvases.getCanvas("inlineImage",e,s).context,t),this.applyTransferMapsToCanvas(a));var a=this._scaleImage(o,(0,r.getCurrentTransformInverse)(n));n.imageSmoothingEnabled=T((0,r.getCurrentTransform)(n),t.interpolate),w(n,a.img,0,0,a.paintWidth,a.paintHeight,0,-s,e,s),this.compose(),this.restore()}}paintInlineImageXObjectGroup(t,e){if(this.contentVisible){var s,i,r=this.ctx;let n;n=t.bitmap||(i=t.width,s=t.height,A(i=this.cachedCanvases.getCanvas("inlineImage",i,s).context,t),this.applyTransferMapsToCanvas(i));for(const t of e)r.save(),r.transform(...t.transform),r.scale(1,-1),w(r,n,t.x,t.y,t.w,t.h,0,-1,1,1),r.restore();this.compose()}}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){var e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t),t=this.ctx;this.pendingClip&&(e||(this.pendingClip===L?t.clip("evenodd"):t.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),t.beginPath()}getSinglePixelWidth(){var t,e,s;return this._cachedGetSinglePixelWidth||(0===(s=(0,r.getCurrentTransform)(this.ctx))[1]&&0===s[2]?this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(s[0]),Math.abs(s[3])):(t=Math.abs(s[0]*s[3]-s[2]*s[1]),e=Math.hypot(s[0],s[2]),s=Math.hypot(s[1],s[3]),this._cachedGetSinglePixelWidth=Math.max(e,s)/t)),this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){var t,e,s,i=this.current.lineWidth,{a:r,b:n,c:a,d:o}=this.ctx.getTransform();let l,h;0===n&&0===a?(s=Math.abs(r))===(t=Math.abs(o))?l=h=0===i?1/s:(e=s*i)<1?1/e:1:h=0===i?(l=1/s,1/t):(l=(e=s*i)<1?1/e:1,(s=t*i)<1?1/s:1):(t=Math.abs(r*o-n*a),e=Math.hypot(r,n),s=Math.hypot(a,o),h=0===i?(l=s/t,e/t):(l=(r=i*t)<s?s/r:1,r<e?e/r:1)),this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=h}return this._cachedScaleForStroking}rescaleAndStroke(t){var e=this.ctx,s=this.current.lineWidth,[i,r]=this.getScaleForStroking();if(e.lineWidth=s||1,1===i&&1===r)e.stroke();else{if(s=e.getLineDash(),t&&e.save(),e.scale(i,r),0<s.length){const t=Math.max(i,r);e.setLineDash(s.map((e=>e/t))),e.lineDashOffset/=t}e.stroke(),t&&e.restore()}}isContentVisible(){for(let t=this.markedContentStack.length-1;0<=t;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const t in i.OPS)void 0!==I.prototype[t]&&(I.prototype[i.OPS[t]]=I.prototype[t])},473:(t,e,s)=>{s.d(e,{DOMCMapReaderFactory:()=>h,DOMCanvasFactory:()=>o,DOMFilterFactory:()=>a,DOMSVGFactory:()=>c,DOMStandardFontDataFactory:()=>d,PDFDateString:()=>b,PageViewport:()=>u,PixelsPerInch:()=>n,RenderingCancelledException:()=>p,StatTimer:()=>f,fetchData:()=>l,getColorValues:()=>function(t){var e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const i of t.keys()){e.style.color=i;var s=window.getComputedStyle(e).color;t.set(i,y(s))}e.remove()},getCurrentTransform:()=>function(t){var{a:t,b:e,c:s,d:i,e:r,f:n}=t.getTransform();return[t,e,s,i,r,n]},getCurrentTransformInverse:()=>function(t){var{a:t,b:e,c:s,d:i,e:r,f:n}=t.getTransform().invertSelf();return[t,e,s,i,r,n]},getFilenameFromUrl:()=>function(t,e=!1){return e||([t]=t.split(/[#?]/,1)),t.substring(t.lastIndexOf("/")+1)},getPdfFilenameFromUrl:()=>function(t,e="document.pdf"){if("string"!=typeof t)return e;if(g(t))return(0,i.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;var s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i;t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(t);let r=s.exec(t[1])||s.exec(t[2])||s.exec(t[3]);if(r&&(r=r[0]).includes("%"))try{r=s.exec(decodeURIComponent(r))[0]}catch{}return r||e},getRGB:()=>y,getXfaPageViewport:()=>function(t,{scale:e=1,rotation:s=0}){var{width:t,height:i}=t.attributes.style;t=[0,0,parseInt(t),parseInt(i)];return new u({viewBox:t,scale:e,rotation:s})},isDataScheme:()=>g,isPdfFile:()=>function(t){return"string"==typeof t&&/\.pdf$/i.test(t)},isValidFetchUrl:()=>m,noContextMenu:()=>function(t){t.preventDefault()},setLayerDimensions:()=>function(t,e,s=!1,r=!0){var n,a,o,l;e instanceof u&&(({pageWidth:o,pageHeight:a}=e.rawDims),n=t.style,o=`var(--scale-factor) * ${o}px`,a=`var(--scale-factor) * ${a}px`,o=(l=i.FeatureTest.isCSSRoundSupported)?`round(${o}, 1px)`:`calc(${o})`,l=l?`round(${a}, 1px)`:`calc(${a})`,s&&e.rotation%180!=0?(n.width=l,n.height=o):(n.width=o,n.height=l)),r&&t.setAttribute("data-main-rotation",e.rotation)}});e=s(822);var i=s(266);const r="http://www.w3.org/2000/svg";class n{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}class a extends e.BaseFilterFactory{#ot;#lt;#U;#ht;#dt;#ct;#ut;#pt;#gt;#ft;#mt=0;constructor({docId:t,ownerDocument:e=globalThis.document}={}){super(),this.#U=t,this.#ht=e}get#vt(){return this.#ot||=new Map}get#bt(){var t,e;return this.#lt||((e=(t=this.#ht.createElement("div")).style).visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1,(e=this.#ht.createElementNS(r,"svg")).setAttribute("width",0),e.setAttribute("height",0),this.#lt=this.#ht.createElementNS(r,"defs"),t.append(e),e.append(this.#lt),this.#ht.body.append(t)),this.#lt}addFilter(t){if(!t)return"none";var e=this.#vt.get(t);if(e)return e;let s,i,r,n;if(1===t.length){var a=t[0],o=new Array(256);for(let t=0;t<256;t++)o[t]=a[t]/255;n=s=i=r=o.join(",")}else{var[l,h,d]=t,c=new Array(256),u=new Array(256),p=new Array(256);for(let t=0;t<256;t++)c[t]=l[t]/255,u[t]=h[t]/255,p[t]=d[t]/255;s=c.join(","),i=u.join(","),r=p.join(","),n=""+s+i+r}return(e=this.#vt.get(n))?(this.#vt.set(t,e),e):(e=`g_${this.#U}_transfer_map_`+this.#mt++,this.#vt.set(t,t=`url(#${e})`),this.#vt.set(n,t),e=this.#yt(e),this.#wt(s,i,r,e),t)}addHCMFilter(t,e){var s=t+"-"+e;if(this.#ct!==s&&(this.#ct=s,this.#ut="none",this.#dt?.remove(),t)&&e){const a=this.#xt(t),o=(t=i.Util.makeHexColor(...a),this.#xt(e));if(e=i.Util.makeHexColor(...o),this.#bt.style.color="",("#000000"!==t||"#ffffff"!==e)&&t!==e){var r=new Array(256);for(let t=0;t<=255;t++){var n=t/255;r[t]=n<=.03928?n/12.92:((.055+n)/1.055)**2.4}s=r.join(","),t=`g_${this.#U}_hcm_filter`,e=this.#pt=this.#yt(t),this.#wt(s,s,s,e),this.#At(e),s=(t,e)=>{var s=a[t]/255,i=o[t]/255,r=new Array(e+1);for(let t=0;t<=e;t++)r[t]=s+t/e*(i-s);return r.join(",")},this.#wt(s(0,5),s(1,5),s(2,5),e),this.#ut=`url(#${t})`}}return this.#ut}addHighlightHCMFilter(t,e,s,i){var r=t+`-${e}-${s}-`+i;if(this.#gt!==r&&(this.#gt=r,this.#ft="none",this.#pt?.remove(),t)&&e){var[r,t]=[t,e].map(this.#xt.bind(this));let n=Math.round(.2126*r[0]+.7152*r[1]+.0722*r[2]),a=Math.round(.2126*t[0]+.7152*t[1]+.0722*t[2]),[o,l]=[s,i].map(this.#xt.bind(this));a<n&&([n,a,o,l]=[a,n,l,o]),this.#bt.style.color="",e=(t,e,s)=>{var i=new Array(256),r=(a-n)/s,o=t/255,l=(e-t)/(255*s);let h=0;for(let t=0;t<=s;t++){var d=Math.round(n+t*r),c=o+t*l;for(let t=h;t<=d;t++)i[t]=c;h=d+1}for(let t=h;t<256;t++)i[t]=i[h-1];return i.join(",")},r=`g_${this.#U}_hcm_highlight_filter`,t=this.#pt=this.#yt(r),this.#At(t),this.#wt(e(o[0],l[0],5),e(o[1],l[1],5),e(o[2],l[2],5),t),this.#ft=`url(#${r})`}return this.#ft}destroy(t=!1){t&&(this.#ut||this.#ft)||(this.#lt&&(this.#lt.parentNode.parentNode.remove(),this.#lt=null),this.#ot&&(this.#ot.clear(),this.#ot=null),this.#mt=0)}#At(t){var e=this.#ht.createElementNS(r,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#yt(t){var e=this.#ht.createElementNS(r,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#bt.append(e),e}#_t(t,e,s){(e=this.#ht.createElementNS(r,e)).setAttribute("type","discrete"),e.setAttribute("tableValues",s),t.append(e)}#wt(t,e,s,i){var n=this.#ht.createElementNS(r,"feComponentTransfer");i.append(n),this.#_t(n,"feFuncR",t),this.#_t(n,"feFuncG",e),this.#_t(n,"feFuncB",s)}#xt(t){return this.#bt.style.color=t,y(getComputedStyle(this.#bt).getPropertyValue("color"))}}class o extends e.BaseCanvasFactory{constructor({ownerDocument:t=globalThis.document}={}){super(),this._document=t}_createCanvas(t,e){var s=this._document.createElement("canvas");return s.width=t,s.height=e,s}}async function l(t,e="text"){if(m(t,document.baseURI)){var s=await fetch(t);if(!s.ok)throw new Error(s.statusText);switch(e){case"arraybuffer":return s.arrayBuffer();case"blob":return s.blob();case"json":return s.json()}return s.text()}return new Promise(((s,i)=>{const r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(200===r.status||0===r.status){let t;switch(e){case"arraybuffer":case"blob":case"json":t=r.response;break;default:t=r.responseText}if(t)return void s(t)}i(new Error(r.statusText))}},r.send(null)}))}class h extends e.BaseCMapReaderFactory{_fetchData(t,e){return l(t,this.isCompressed?"arraybuffer":"text").then((t=>({cMapData:t instanceof ArrayBuffer?new Uint8Array(t):(0,i.stringToBytes)(t),compressionType:e})))}}class d extends e.BaseStandardFontDataFactory{_fetchData(t){return l(t,"arraybuffer").then((t=>new Uint8Array(t)))}}class c extends e.BaseSVGFactory{_createSVG(t){return document.createElementNS(r,t)}}class u{constructor({viewBox:t,scale:e,rotation:s,offsetX:i=0,offsetY:r=0,dontFlip:n=!1}){this.viewBox=t,this.scale=e,this.rotation=s,this.offsetX=i,this.offsetY=r;var a=(t[2]+t[0])/2,o=(t[3]+t[1])/2;let l,h,d,c,u,p,g,f;switch((s%=360)<0&&(s+=360),s){case 180:l=-1,h=0,d=0,c=1;break;case 90:l=0,h=1,d=1,c=0;break;case 270:l=0,h=-1,d=-1,c=0;break;case 0:l=1,h=0,d=0,c=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}n&&(d=-d,c=-c),f=0===l?(u=Math.abs(o-t[1])*e+i,p=Math.abs(a-t[0])*e+r,g=(t[3]-t[1])*e,(t[2]-t[0])*e):(u=Math.abs(a-t[0])*e+i,p=Math.abs(o-t[1])*e+r,g=(t[2]-t[0])*e,(t[3]-t[1])*e),this.transform=[l*e,h*e,d*e,c*e,u-l*e*a-d*e*o,p-h*e*a-c*e*o],this.width=g,this.height=f}get rawDims(){var t=this.viewBox;return(0,i.shadow)(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:s=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new u({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:s,offsetY:i,dontFlip:r})}convertToViewportPoint(t,e){return i.Util.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){var e=i.Util.applyTransform([t[0],t[1]],this.transform);t=i.Util.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],t[0],t[1]]}convertToPdfPoint(t,e){return i.Util.applyInverseTransform([t,e],this.transform)}}class p extends i.BaseException{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function g(t){var e=t.length;let s=0;for(;s<e&&""===t[s].trim();)s++;return"data:"===t.substring(s,s+5).toLowerCase()}class f{started=Object.create(null);times=[];time(t){t in this.started&&(0,i.warn)("Timer is already running for "+t),this.started[t]=Date.now()}timeEnd(t){t in this.started||(0,i.warn)("Timer has not been started for "+t),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){var t,e,s,i,r=[];let n=0;for({name:t}of this.times)n=Math.max(t.length,n);for({name:e,start:s,end:i}of this.times)r.push(`${e.padEnd(n)} ${i-s}ms\n`);return r.join("")}}function m(t,e){try{var s=(e?new URL(t,e):new URL(t)).protocol;return"http:"===s||"https:"===s}catch{return!1}}let v;class b{static toDateObject(t){if(!t||"string"!=typeof t)return null;if(!(t=(v||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?")).exec(t)))return null;var e=parseInt(t[1],10),s=1<=(s=parseInt(t[2],10))&&s<=12?s-1:0,i=1<=(i=parseInt(t[3],10))&&i<=31?i:1;let r=parseInt(t[4],10),n=(r=0<=r&&r<=23?r:0,parseInt(t[5],10));n=0<=n&&n<=59?n:0;var a=0<=(a=parseInt(t[6],10))&&a<=59?a:0,o=t[7]||"Z",l=0<=(l=parseInt(t[8],10))&&l<=23?l:0;t=0<=(t=parseInt(t[9],10)||0)&&t<=59?t:0;return"-"===o?(r+=l,n+=t):"+"===o&&(r-=l,n-=t),new Date(Date.UTC(e,s,i,r,n,a))}}function y(t){var e;return t.startsWith("#")?[(16711680&(e=parseInt(t.slice(1),16)))>>16,(65280&e)>>8,255&e]:t.startsWith("rgb(")?t.slice(4,-1).split(",").map((t=>parseInt(t))):t.startsWith("rgba(")?t.slice(5,-1).split(",").map((t=>parseInt(t))).slice(0,3):((0,i.warn)(`Not a valid color format: "${t}"`),[0,0,0])}},423:(t,e,s)=>{s.d(e,{DrawLayer:()=>n});var i=s(473),r=s(266);class n{#v=null;#mt=0;#Ct=new Map;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(this.#v){if(this.#v!==t){if(0<this.#Ct.size)for(const e of this.#Ct.values())e.remove(),t.append(e);this.#v=t}}else this.#v=t}static get _svgFactory(){return(0,r.shadow)(this,"_svgFactory",new i.DOMSVGFactory)}static#Et(t,{x:e,y:s,width:i,height:r}){(t=t.style).top=100*s+"%",t.left=100*e+"%",t.width=100*i+"%",t.height=100*r+"%"}#kt(t){var e=n._svgFactory.create(1,1,!0);return this.#v.append(e),n.#Et(e,t),e}highlight({outlines:t,box:e},s,i){var r=this.#mt++,a=((e=this.#kt(e)).classList.add("highlight"),n._svgFactory.createElement("defs")),o=(e.append(a),n._svgFactory.createElement("path")),l=(a.append(o),`path_p${this.pageIndex}_`+r);o.setAttribute("id",l),o.setAttribute("d",n.#St(t)),o=n._svgFactory.createElement("clipPath"),a.append(o),t="clip_"+l,o.setAttribute("id",t),o.setAttribute("clipPathUnits","objectBoundingBox"),a=n._svgFactory.createElement("use"),o.append(a),a.setAttribute("href","#"+l),a.classList.add("clip"),o=n._svgFactory.createElement("use");return e.append(o),e.setAttribute("fill",s),e.setAttribute("fill-opacity",i),o.setAttribute("href","#"+l),this.#Ct.set(r,e),{id:r,clipPathId:`url(#${t})`}}highlightOutline({outlines:t,box:e}){var s=this.#mt++,i=((e=this.#kt(e)).classList.add("highlightOutline"),n._svgFactory.createElement("defs")),r=(e.append(i),n._svgFactory.createElement("path"));i.append(r),i=`path_p${this.pageIndex}_`+s,r.setAttribute("id",i),r.setAttribute("d",n.#St(t)),r.setAttribute("vector-effect","non-scaling-stroke"),t=n._svgFactory.createElement("use"),e.append(t),t.setAttribute("href","#"+i),r=t.cloneNode();return e.append(r),t.classList.add("mainOutline"),r.classList.add("secondaryOutline"),this.#Ct.set(s,e),s}static#St(t){var e=[];for(const r of t){let[t,n]=r;e.push(`M${t} `+n);for(let a=2;a<r.length;a+=2){var s=r[a],i=r[a+1];s===t?(e.push("V"+i),n=i):i===n&&(e.push("H"+s),t=s)}e.push("Z")}return e.join(" ")}updateBox(t,e){n.#Et(this.#Ct.get(t),e)}rotate(t,e){this.#Ct.get(t).setAttribute("data-main-rotation",e)}changeColor(t,e){this.#Ct.get(t).setAttribute("fill",e)}changeOpacity(t,e){this.#Ct.get(t).setAttribute("fill-opacity",e)}addClass(t,e){this.#Ct.get(t).classList.add(e)}removeClass(t,e){this.#Ct.get(t).classList.remove(e)}remove(t){null!==this.#v&&(this.#Ct.get(t).remove(),this.#Ct.delete(t))}destroy(){this.#v=null;for(const t of this.#Ct.values())t.remove();this.#Ct.clear()}}},629:(t,e,s)=>{s.d(e,{AnnotationEditorLayer:()=>g});var i=s(266),r=s(115),n=s(812),a=s(640);class o extends r.AnnotationEditor{#Tt=this.editorDivBlur.bind(this);#Pt=this.editorDivFocus.bind(this);#Mt=this.editorDivInput.bind(this);#Rt=this.editorDivKeydown.bind(this);#u;#Lt="";#It=this.id+"-editor";#Dt;#Ft=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){var t=o.prototype,e=t=>t.isEmpty(),s=n.AnnotationEditorUIManager.TRANSLATE_SMALL,r=n.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,i.shadow)(this,"_keyboardManager",new n.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:e}]]))}static _type="freetext";static _editorType=i.AnnotationEditorType.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.#u=t.color||o._defaultColor||r.AnnotationEditor._defaultLineColor,this.#Dt=t.fontSize||o._defaultFontSize}static initialize(t){r.AnnotationEditor.initialize(t,{strings:["pdfjs-free-text-default-content"]}),t=getComputedStyle(document.documentElement),this._internalPadding=parseFloat(t.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case i.AnnotationEditorParamsType.FREETEXT_SIZE:o._defaultFontSize=e;break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:o._defaultColor=e}}updateParams(t,e){switch(t){case i.AnnotationEditorParamsType.FREETEXT_SIZE:this.#Ot(e);break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:this.#Bt(e)}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,o._defaultFontSize],[i.AnnotationEditorParamsType.FREETEXT_COLOR,o._defaultColor||r.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,this.#Dt],[i.AnnotationEditorParamsType.FREETEXT_COLOR,this.#u]]}#Ot(t){const e=t=>{this.editorDiv.style.fontSize=`calc(${t}px * var(--scale-factor))`,this.translate(0,-(t-this.#Dt)*this.parentScale),this.#Dt=t,this.#Nt()},s=this.#Dt;this.addCommands({cmd:()=>{e(t)},undo:()=>{e(s)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#Bt(t){const e=this.#u;this.addCommands({cmd:()=>{this.#u=this.editorDiv.style.color=t},undo:()=>{this.#u=this.editorDiv.style.color=e},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){var t=this.parentScale;return[-o._internalPadding*t,-(o._internalPadding+this.#Dt)*t]}rebuild(){this.parent&&(super.rebuild(),null===this.div||this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(i.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#Rt),this.editorDiv.addEventListener("focus",this.#Pt),this.editorDiv.addEventListener("blur",this.#Tt),this.editorDiv.addEventListener("input",this.#Mt))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#It),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#Rt),this.editorDiv.removeEventListener("focus",this.#Pt),this.editorDiv.removeEventListener("blur",this.#Tt),this.editorDiv.removeEventListener("input",this.#Mt),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv)&&this.editorDiv.focus()}onceAdded(){this.width?this.#zt():(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#jt(){var t=this.editorDiv.getElementsByTagName("div");if(0===t.length)return this.editorDiv.innerText;var e=[];for(const s of t)e.push(s.innerText.replace(/\r\n?|\n/,""));return e.join("\n")}#Nt(){var t,e,s,[i,r]=this.parentDimensions;let n;this.isAttachedToDOM?n=this.div.getBoundingClientRect():(({currentLayer:t,div:e}=this),s=e.style.display,e.style.display="hidden",t.div.append(this.div),n=e.getBoundingClientRect(),e.remove(),e.style.display=s),this.rotation%180==this.parentRotation%180?(this.width=n.width/i,this.height=n.height/r):(this.width=n.height/i,this.height=n.width/r),this.fixAndSetPosition()}commit(){if(this.isInEditMode()){super.commit(),this.disableEditMode();const t=this.#Lt,e=this.#Lt=this.#jt().trimEnd();if(t!==e){const s=t=>{(this.#Lt=t)?(this.#Ut(),this._uiManager.rebuild(this),this.#Nt()):this.remove()};this.addCommands({cmd:()=>{s(e)},undo:()=>{s(t)},mustExec:!1}),this.#Nt()}}}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&"Enter"===t.key&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){o._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(!this.div){let h,d;var t;if(this.width&&(h=this.x,d=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#It),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),r.AnnotationEditor._l10nPromise.get("pdfjs-free-text-default-content").then((t=>this.editorDiv?.setAttribute("default-content",t))),this.editorDiv.contentEditable=!0,(t=this.editorDiv.style).fontSize=`calc(${this.#Dt}px * var(--scale-factor))`,t.color=this.#u,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,n.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){var[t,e]=this.parentDimensions;if(this.annotationElementId){var s=this.#Ft.position;let[r,n]=this.getInitialTranslation();[r,n]=this.pageTranslationToScreen(r,n);var[i,a]=this.pageDimensions,[o,l]=this.pageTranslation;let c,u;switch(this.rotation){case 0:c=h+(s[0]-o)/i,u=d+this.height-(s[1]-l)/a;break;case 90:c=h+(s[0]-o)/i,u=d-(s[1]-l)/a,[r,n]=[n,-r];break;case 180:c=h-this.width+(s[0]-o)/i,u=d-(s[1]-l)/a,[r,n]=[-r,-n];break;case 270:c=h+(s[0]-o-this.height*a)/i,u=d+(s[1]-l-this.width*i)/a,[r,n]=[-n,r]}this.setAt(c*t,u*e,r,n)}else this.setAt(h*t,d*e,this.width*t,this.height*e);this.#Ut(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0}return this.div}#Ut(){if(this.editorDiv.replaceChildren(),this.#Lt)for(const e of this.#Lt.split("\n")){var t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}get contentDiv(){return this.editorDiv}static deserialize(t,e,s){let r=null;if(t instanceof a.FreeTextAnnotationElement){var{data:{defaultAppearanceData:{fontSize:n,fontColor:o},rect:l,rotation:h,id:d},textContent:c,textPosition:u,parent:{page:{pageNumber:p}}}=t;if(!c||0===c.length)return null;r=t={annotationType:i.AnnotationEditorType.FREETEXT,color:Array.from(o),fontSize:n,value:c.join("\n"),position:u,pageIndex:p-1,rect:l,rotation:h,id:d,deleted:!1}}return(o=super.deserialize(t,e,s)).#Dt=t.fontSize,o.#u=i.Util.makeHexColor(...t.color),o.#Lt=t.value,o.annotationElementId=t.id||null,o.#Ft=r,o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};var e=o._internalPadding*this.parentScale,s=(e=this.getRect(e,e),r.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#u));s={annotationType:i.AnnotationEditorType.FREETEXT,color:s,fontSize:this.#Dt,value:this.#Lt,pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId};if(!t){if(this.annotationElementId&&!this.#Ht(s))return null;s.id=this.annotationElementId}return s}#Ht(t){const{value:e,fontSize:s,color:i,rect:r,pageIndex:n}=this.#Ft;return t.value!==e||t.fontSize!==s||t.rect.some(((t,e)=>1<=Math.abs(t-r[e])))||t.color.some(((t,e)=>t!==i[e]))||t.pageIndex!==n}#zt(t=!1){this.annotationElementId&&(this.#Nt(),t||0!==this.width&&0!==this.height?(t=o._internalPadding*this.parentScale,this.#Ft.rect=this.getRect(t,t)):setTimeout((()=>this.#zt(!0)),0))}}var l=s(97),h=s(405);class d extends r.AnnotationEditor{#qt;#$t=null;#Vt=null;#Gt=null;#Wt=null;#Kt=null;#mt=null;#Xt=null;#Yt;#Jt=null;static _defaultColor=null;static _defaultOpacity=1;static _l10nPromise;static _type="highlight";static _editorType=i.AnnotationEditorType.HIGHLIGHT;constructor(t){super({...t,name:"highlightEditor"}),d._defaultColor||=this._uiManager.highlightColors?.values().next().value||"#fff066",this.color=t.color||d._defaultColor,this.#Yt=t.opacity||d._defaultOpacity,this.#qt=t.boxes||null,this._isDraggable=!1,this.#Qt(),this.#Zt(),this.rotate(this.rotation)}#Qt(){var t=new h.Outliner(this.#qt,.001);this.#Kt=t.getOutlines(),({x:this.x,y:this.y,width:this.width,height:this.height}=this.#Kt.box),t=new h.Outliner(this.#qt,.0025,.001,"ltr"===this._uiManager.direction),t=(this.#Gt=t.getOutlines(),this.#Gt.box).lastPoint;this.#Xt=[(t[0]-this.x)/this.width,(t[1]-this.y)/this.height]}static initialize(t){r.AnnotationEditor.initialize(t)}static updateDefaultParams(t,e){t===i.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR&&(d._defaultColor=e)}get toolbarPosition(){return this.#Xt}updateParams(t,e){t===i.AnnotationEditorParamsType.HIGHLIGHT_COLOR&&this.#Bt(e)}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR,d._defaultColor]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||d._defaultColor]]}#Bt(t){const e=this.color;this.addCommands({cmd:()=>{this.color=t,this.parent.drawLayer.changeColor(this.#mt,t),this.#Vt?.updateColor(t)},undo:()=>{this.color=e,this.parent.drawLayer.changeColor(this.#mt,e),this.#Vt?.updateColor(e)},mustExec:!0,type:i.AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}async addEditToolbar(){var t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(this.#Vt=new l.ColorPicker({editor:this}),t.addColorPicker(this.#Vt)),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(0)}getRect(t,e){return super.getRect(t,e,0)}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){super.remove(),this.#te()}rebuild(){this.parent&&(super.rebuild(),null===this.div||(this.#Zt(),this.isAttachedToDOM)||this.parent.add(this))}setParent(t){let e=!1;this.parent&&!t?this.#te():t&&(this.#Zt(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#te(){null!==this.#mt&&this.parent&&(this.parent.drawLayer.remove(this.#mt),this.#mt=null,this.parent.drawLayer.remove(this.#Jt),this.#Jt=null)}#Zt(t=this.parent){null===this.#mt&&(({id:this.#mt,clipPathId:this.#$t}=t.drawLayer.highlight(this.#Kt,this.color,this.#Yt)),this.#Wt&&(this.#Wt.style.clipPath=this.#$t),this.#Jt=t.drawLayer.highlightOutline(this.#Gt))}static#ee({x:t,y:e,width:s,height:i},r){switch(r){case 90:return{x:1-e-i,y:t,width:i,height:s};case 180:return{x:1-t-s,y:1-e-i,width:s,height:i};case 270:return{x:e,y:1-t-s,width:i,height:s}}return{x:t,y:e,width:s,height:i}}rotate(t){var e=this.parent.drawLayer;e.rotate(this.#mt,t),e.rotate(this.#Jt,t),e.updateBox(this.#mt,d.#ee(this,t)),e.updateBox(this.#Jt,d.#ee(this.#Gt.box,t))}render(){var t,e,s;return this.div||(t=super.render(),e=this.#Wt=document.createElement("div"),[e,s]=(t.append(e),e.className="internal",e.style.clipPath=this.#$t,this.parentDimensions),this.setDims(this.width*e,this.height*s),(0,n.bindEvents)(this,this.#Wt,["pointerover","pointerleave"]),this.enableEditing(),t)}pointerover(){this.parent.drawLayer.addClass(this.#Jt,"hovered")}pointerleave(){this.parent.drawLayer.removeClass(this.#Jt,"hovered")}select(){super.select(),this.parent?.drawLayer.removeClass(this.#Jt,"hovered"),this.parent?.drawLayer.addClass(this.#Jt,"selected")}unselect(){super.unselect(),this.parent?.drawLayer.removeClass(this.#Jt,"selected")}#se(){var t,e,s,i,[r,n]=this.pageDimensions,a=this.#qt,o=new Array(8*a.length);let l=0;for({x:t,y:e,width:s,height:i}of a){var h=t*r,d=(1-e-i)*n;o[l]=o[l+4]=h,o[l+1]=o[l+3]=d,o[l+2]=o[l+6]=h+s*r,o[l+5]=o[l+7]=d+i*n,l+=8}return o}#ie(){var[t,e]=this.pageDimensions,s=this.width*t,i=this.height*e,r=this.x*t,n=(1-this.y-this.height)*e,a=[];for(const t of this.#Kt.outlines){var o=new Array(t.length);for(let e=0;e<t.length;e+=2)o[e]=r+t[e]*s,o[e+1]=n+(1-t[e+1])*i;a.push(o)}return a}static deserialize(t,e,s){e=super.deserialize(t,e,s);var{rect:s,color:r,quadPoints:n}=t,[a,o]=(e.color=i.Util.makeHexColor(...r),e.#Yt=t.opacity,e.pageDimensions),l=(e.width=(s[2]-s[0])/a,e.height=(s[3]-s[1])/o,e.#qt=[]);for(let t=0;t<n.length;t+=8)l.push({x:n[4]/a,y:1-n[t+5]/o,width:(n[t+2]-n[t])/a,height:(n[t+5]-n[t+1])/o});return e.#Qt(),e}serialize(t=!1){var e;return this.isEmpty()||t?null:(t=this.getRect(0,0),e=r.AnnotationEditor._colorManager.convert(this.color),{annotationType:i.AnnotationEditorType.HIGHLIGHT,color:e,opacity:this.#Yt,quadPoints:this.#se(),outlines:this.#ie(),pageIndex:this.pageIndex,rect:t,rotation:0,structTreeParentId:this._structTreeParentId})}static canCreateNewEmptyEditor(){return!1}}var c=s(473);class u extends r.AnnotationEditor{#re=0;#ne=0;#ae=this.canvasPointermove.bind(this);#oe=this.canvasPointerleave.bind(this);#le=this.canvasPointerup.bind(this);#he=this.canvasPointerdown.bind(this);#de=null;#ce=new Path2D;#ue=!1;#pe=!1;#ge=!1;#fe=null;#me=0;#ve=0;#be=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";static _editorType=i.AnnotationEditorType.INK;constructor(t){super({...t,name:"inkEditor"}),this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t){r.AnnotationEditor.initialize(t)}static updateDefaultParams(t,e){switch(t){case i.AnnotationEditorParamsType.INK_THICKNESS:u._defaultThickness=e;break;case i.AnnotationEditorParamsType.INK_COLOR:u._defaultColor=e;break;case i.AnnotationEditorParamsType.INK_OPACITY:u._defaultOpacity=e/100}}updateParams(t,e){switch(t){case i.AnnotationEditorParamsType.INK_THICKNESS:this.#ye(e);break;case i.AnnotationEditorParamsType.INK_COLOR:this.#Bt(e);break;case i.AnnotationEditorParamsType.INK_OPACITY:this.#we(e)}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,u._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,u._defaultColor||r.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*u._defaultOpacity)]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||u._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,this.color||u._defaultColor||r.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??u._defaultOpacity))]]}#ye(t){const e=this.thickness;this.addCommands({cmd:()=>{this.thickness=t,this.#xe()},undo:()=>{this.thickness=e,this.#xe()},mustExec:!0,type:i.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#Bt(t){const e=this.color;this.addCommands({cmd:()=>{this.color=t,this.#Ae()},undo:()=>{this.color=e,this.#Ae()},mustExec:!0,type:i.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#we(t){t/=100;const e=this.opacity;this.addCommands({cmd:()=>{this.opacity=t,this.#Ae()},undo:()=>{this.opacity=e,this.#Ae()},mustExec:!0,type:i.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),null!==this.div)&&(this.canvas||(this.#_e(),this.#Ce()),this.isAttachedToDOM||(this.parent.add(this),this.#Ee()),this.#xe())}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#de&&(clearTimeout(this.#de),this.#de=null),this.#fe.disconnect(),this.#fe=null,super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&null===t&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){var[t,e]=this.parentDimensions,t=this.width*t,e=this.height*e;this.setDimensions(t,e)}enableEditMode(){this.#ue||null===this.canvas||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#he))}disableEditMode(){this.isInEditMode()&&null!==this.canvas&&(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#he))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}#ke(){var{parentRotation:t,parentDimensions:[e,s]}=this;switch(t){case 90:return[0,s,s,e];case 180:return[e,s,e,s];case 270:return[e,0,s,e];default:return[0,0,e,s]}}#Se(){var{ctx:t,color:e,opacity:s,thickness:i,parentScale:r,scaleFactor:a}=this;t.lineWidth=i*r/a,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=""+e+(0,n.opacityToHex)(s)}#Te(t,e){this.canvas.addEventListener("contextmenu",c.noContextMenu),this.canvas.addEventListener("pointerleave",this.#oe),this.canvas.addEventListener("pointermove",this.#ae),this.canvas.addEventListener("pointerup",this.#le),this.canvas.removeEventListener("pointerdown",this.#he),this.isEditing=!0,this.#ge||(this.#ge=!0,this.#Ee(),this.thickness||=u._defaultThickness,this.color||=u._defaultColor||r.AnnotationEditor._defaultLineColor,this.opacity??=u._defaultOpacity),this.currentPath.push([t,e]),this.#pe=!1,this.#Se(),this.#be=()=>{this.#Pe(),this.#be&&window.requestAnimationFrame(this.#be)},window.requestAnimationFrame(this.#be)}#Me(t,e){var[s,i]=this.currentPath.at(-1);if(!(1<this.currentPath.length&&t===s&&e===i)){s=this.currentPath;let i=this.#ce;s.push([t,e]),this.#pe=!0,s.length<=2?(i.moveTo(...s[0]),i.lineTo(t,e)):(3===s.length&&(this.#ce=i=new Path2D,i.moveTo(...s[0])),this.#Re(i,...s.at(-3),...s.at(-2),t,e))}}#Le(){var t;0!==this.currentPath.length&&(t=this.currentPath.at(-1),this.#ce.lineTo(...t))}#Ie(t,e){let s;this.#be=null,t=Math.min(Math.max(t,0),this.canvas.width),e=Math.min(Math.max(e,0),this.canvas.height),this.#Me(t,e),this.#Le(),s=1!==this.currentPath.length?this.#De():[[t=[t,e],t.slice(),t.slice(),t]];const i=this.#ce,r=this.currentPath;this.currentPath=[],this.#ce=new Path2D,this.addCommands({cmd:()=>{this.allRawPaths.push(r),this.paths.push(s),this.bezierPath2D.push(i),this.rebuild()},undo:()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(this.#_e(),this.#Ce()),this.#xe())},mustExec:!0})}#Pe(){if(this.#pe){this.#pe=!1,Math.ceil(this.thickness*this.parentScale);var t=(e=this.currentPath.slice(-3)).map((t=>t[0])),e=e.map((t=>t[1])),s=(Math.min(...t),Math.max(...t),Math.min(...e),Math.max(...e),this).ctx;s.save(),s.clearRect(0,0,this.canvas.width,this.canvas.height);for(const t of this.bezierPath2D)s.stroke(t);s.stroke(this.#ce),s.restore()}}#Re(t,e,s,i,r,n,a){e=(e+i)/2,s=(s+r)/2,n=(i+n)/2,a=(r+a)/2,t.bezierCurveTo(e+2*(i-e)/3,s+2*(r-s)/3,n+2*(i-n)/3,a+2*(r-a)/3,n,a)}#De(){var t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];var e=[];let s,[i,r]=t[0];for(s=1;s<t.length-2;s++){const[o,l]=t[s],[h,d]=t[s+1];var n=(o+h)/2,a=(l+d)/2;const c=[i+2*(o-i)/3,r+2*(l-r)/3],u=[n+2*(o-n)/3,a+2*(l-a)/3];e.push([[i,r],c,u,[n,a]]),[i,r]=[n,a]}const[o,l]=t[s],[h,d]=t[s+1],c=[i+2*(o-i)/3,r+2*(l-r)/3],u=[h+2*(o-h)/3,d+2*(l-d)/3];return e.push([[i,r],c,u,[h,d]]),e}#Ae(){if(this.isEmpty())this.#Fe();else{this.#Se();var{canvas:t,ctx:e}=this;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height),this.#Fe();for(const t of this.bezierPath2D)e.stroke(t)}}commit(){this.#ue||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#ue=!0,this.div.classList.add("disabled"),this.#xe(!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){0===t.button&&this.isInEditMode()&&!this.#ue&&(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),this.#Te(t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),this.#Me(t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),this.#Oe(t)}canvasPointerleave(t){this.#Oe(t)}#Oe(t){this.canvas.removeEventListener("pointerleave",this.#oe),this.canvas.removeEventListener("pointermove",this.#ae),this.canvas.removeEventListener("pointerup",this.#le),this.canvas.addEventListener("pointerdown",this.#he),this.#de&&clearTimeout(this.#de),this.#de=setTimeout((()=>{this.#de=null,this.canvas.removeEventListener("contextmenu",c.noContextMenu)}),10),this.#Ie(t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#_e(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#Ce(){this.#fe=new ResizeObserver((t=>{(t=t[0].contentRect).width&&t.height&&this.setDimensions(t.width,t.height)})),this.#fe.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#ue}render(){if(!this.div){let r,n;this.width&&(r=this.x,n=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");var[t,e,s,i]=this.#ke();this.setAt(t,e,0,0),this.setDims(s,i),this.#_e(),this.width?([t,e]=this.parentDimensions,this.setAspectRatio(this.width*t,this.height*e),this.setAt(r*t,n*e,this.width*t,this.height*e),this.#ge=!0,this.#Ee(),this.setDims(this.width*t,this.height*e),this.#Ae(),this.div.classList.add("disabled")):(this.div.classList.add("editing"),this.enableEditMode()),this.#Ce()}return this.div}#Ee(){var t,e;this.#ge&&([t,e]=this.parentDimensions,this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*e),this.#Fe())}setDimensions(t,e){var s=Math.round(t),i=Math.round(e);this.#me===s&&this.#ve===i||(this.#me=s,this.#ve=i,this.canvas.style.visibility="hidden",[s,i]=this.parentDimensions,this.width=t/s,this.height=e/i,this.fixAndSetPosition(),this.#ue&&this.#Be(t,e),this.#Ee(),this.#Ae(),this.canvas.style.visibility="visible",this.fixDims())}#Be(t,e){var s=this.#Ne();t=(t-s)/this.#ne,e=(e-s)/this.#re;this.scaleFactor=Math.min(t,e)}#Fe(){var t=this.#Ne()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)}static#ze(t){var e=new Path2D;for(let a=0,o=t.length;a<o;a++){var[s,i,r,n]=t[a];0===a&&e.moveTo(...s),e.bezierCurveTo(i[0],i[1],r[0],r[1],n[0],n[1])}return e}static#je(t,e,s){var[i,r,n,a]=e;switch(s){case 0:for(let e=0,s=t.length;e<s;e+=2)t[e]+=i,t[e+1]=a-t[e+1];break;case 90:for(let e=0,s=t.length;e<s;e+=2){var o=t[e];t[e]=t[e+1]+i,t[e+1]=o+r}break;case 180:for(let e=0,s=t.length;e<s;e+=2)t[e]=n-t[e],t[e+1]+=r;break;case 270:for(let e=0,s=t.length;e<s;e+=2){var l=t[e];t[e]=n-t[e+1],t[e+1]=a-l}break;default:throw new Error("Invalid rotation")}return t}static#Ue(t,e,s){var[i,r,n,a]=e;switch(s){case 0:for(let e=0,s=t.length;e<s;e+=2)t[e]-=i,t[e+1]=a-t[e+1];break;case 90:for(let e=0,s=t.length;e<s;e+=2){var o=t[e];t[e]=t[e+1]-r,t[e+1]=o-i}break;case 180:for(let e=0,s=t.length;e<s;e+=2)t[e]=n-t[e],t[e+1]-=r;break;case 270:for(let e=0,s=t.length;e<s;e+=2){var l=t[e];t[e]=a-t[e+1],t[e+1]=n-l}break;default:throw new Error("Invalid rotation")}return t}#He(t,e,s,i){var r=[],n=this.thickness/2,a=t*e+n,o=t*s+n;for(const e of this.paths){var l=[],h=[];for(let s=0,i=e.length;s<i;s++){var[d,c,p,g]=e[s],f=t*d[0]+a,d=t*d[1]+o,m=t*c[0]+a,c=t*c[1]+o,v=t*p[0]+a,p=t*p[1]+o,b=t*g[0]+a,g=t*g[1]+o;0===s&&(l.push(f,d),h.push(f,d)),l.push(m,c,v,p,b,g),h.push(m,c),s===i-1&&h.push(b,g)}r.push({bezier:u.#je(l,i,this.rotation),points:u.#je(h,i,this.rotation)})}return r}#qe(){let t=1/0,e=-1/0,s=1/0,r=-1/0;for(const h of this.paths)for(var[n,a,o,l]of h)n=i.Util.bezierBoundingBox(...n,...a,...o,...l),t=Math.min(t,n[0]),s=Math.min(s,n[1]),e=Math.max(e,n[2]),r=Math.max(r,n[3]);return[t,s,e,r]}#Ne(){return this.#ue?Math.ceil(this.thickness*this.parentScale):0}#xe(t=!1){var e,s,i,n,a,o;this.isEmpty()||(this.#ue?(o=this.#qe(),e=this.#Ne(),this.#ne=Math.max(r.AnnotationEditor.MIN_SIZE,o[2]-o[0]),this.#re=Math.max(r.AnnotationEditor.MIN_SIZE,o[3]-o[1]),s=Math.ceil(e+this.#ne*this.scaleFactor),i=Math.ceil(e+this.#re*this.scaleFactor),[n,a]=this.parentDimensions,this.width=s/n,this.height=i/a,this.setAspectRatio(s,i),n=this.translationX,a=this.translationY,this.translationX=-o[0],this.translationY=-o[1],this.#Ee(),this.#Ae(),this.#me=s,this.#ve=i,this.setDims(s,i),o=t?e/this.scaleFactor/2:0,this.translate(n-this.translationX-o,a-this.translationY-o)):this.#Ae())}static deserialize(t,e,s){if(t instanceof a.InkAnnotationElement)return null;var n,o=super.deserialize(t,e,s),[e,s]=(o.thickness=t.thickness,o.color=i.Util.makeHexColor(...t.color),o.opacity=t.opacity,o.pageDimensions),l=(e=o.width*e,s=o.height*s,o.parentScale),h=t.thickness/2,{paths:t,rect:d,rotation:c}=(o.#ue=!0,o.#me=Math.round(e),o.#ve=Math.round(s),t);for({bezier:n}of t){n=u.#Ue(n,d,c);var p=[];o.paths.push(p);let t=l*(n[0]-h),e=l*(n[1]-h);for(let s=2,i=n.length;s<i;s+=6){var g=l*(n[s]-h),f=l*(n[s+1]-h),m=l*(n[s+2]-h),v=l*(n[s+3]-h),b=l*(n[s+4]-h),y=l*(n[s+5]-h);p.push([[t,e],[g,f],[m,v],[b,y]]),t=b,e=y}var w=this.#ze(p);o.bezierPath2D.push(w)}return t=o.#qe(),o.#ne=Math.max(r.AnnotationEditor.MIN_SIZE,t[2]-t[0]),o.#re=Math.max(r.AnnotationEditor.MIN_SIZE,t[3]-t[1]),o.#Be(e,s),o}serialize(){var t,e;return this.isEmpty()?null:(t=this.getRect(0,0),e=r.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle),{annotationType:i.AnnotationEditorType.INK,color:e,thickness:this.thickness,opacity:this.opacity,paths:this.#He(this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId})}}class p extends r.AnnotationEditor{#$e=null;#Ve=null;#Ge=null;#We=null;#Ke=null;#Xe="";#Ye=null;#fe=null;#Je=null;#Qe=!1;#Ze=!1;static _type="stamp";static _editorType=i.AnnotationEditorType.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#We=t.bitmapUrl,this.#Ke=t.bitmapFile}static initialize(t){r.AnnotationEditor.initialize(t)}static get supportedTypes(){return(0,i.shadow)(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map((t=>"image/"+t)))}static get supportedTypesStr(){return(0,i.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,e){e.pasteEditor(i.AnnotationEditorType.STAMP,{bitmapFile:t.getAsFile()})}#ts(t,e=!1){t?(this.#$e=t.bitmap,e||(this.#Ve=t.id,this.#Qe=t.isSvg),t.file&&(this.#Xe=t.file.name),this.#_e()):this.remove()}#es(){this.#Ge=null,this._uiManager.enableWaiting(!1),this.#Ye&&this.div.focus()}#ss(){var t;if(this.#Ve)this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#Ve).then((t=>this.#ts(t,!0))).finally((()=>this.#es()));else if(this.#We)t=this.#We,this.#We=null,this._uiManager.enableWaiting(!0),this.#Ge=this._uiManager.imageManager.getFromUrl(t).then((t=>this.#ts(t))).finally((()=>this.#es()));else if(this.#Ke)t=this.#Ke,this.#Ke=null,this._uiManager.enableWaiting(!0),this.#Ge=this._uiManager.imageManager.getFromFile(t).then((t=>this.#ts(t))).finally((()=>this.#es()));else{const t=document.createElement("input");t.type="file",t.accept=p.supportedTypesStr,this.#Ge=new Promise((e=>{t.addEventListener("change",(async()=>{var s;t.files&&0!==t.files.length?(this._uiManager.enableWaiting(!0),s=await this._uiManager.imageManager.getFromFile(t.files[0]),this.#ts(s)):this.remove(),e()})),t.addEventListener("cancel",(()=>{this.remove(),e()}))})).finally((()=>this.#es())),t.click()}}remove(){this.#Ve&&(this.#$e=null,this._uiManager.imageManager.deleteId(this.#Ve),this.#Ye?.remove(),this.#Ye=null,this.#fe?.disconnect(),this.#fe=null,this.#Je)&&(clearTimeout(this.#Je),this.#Je=null),super.remove()}rebuild(){this.parent?(super.rebuild(),null===this.div||(this.#Ve&&this.#ss(),this.isAttachedToDOM)||this.parent.add(this)):this.#Ve&&this.#ss()}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#Ge||this.#$e||this.#We||this.#Ke)}get isResizable(){return!0}render(){if(!this.div){let s,i;var t,e;this.width&&(s=this.x,i=this.y),super.render(),this.div.hidden=!0,this.#$e?this.#_e():this.#ss(),this.width&&([t,e]=this.parentDimensions,this.setAt(s*t,i*e,this.width*t,this.height*e))}return this.div}#_e(){var t=this.div;let{width:e,height:s}=this.#$e;var[i,r]=this.pageDimensions,[n,a]=(this.width?(e=this.width*i,s=this.height*r):(e>.75*i||s>.75*r)&&(e*=n=Math.min(.75*i/e,.75*r/s),s*=n),this.parentDimensions),n=(this.setDims(e*n/i,s*a/r),this._uiManager.enableWaiting(!1),this.#Ye=document.createElement("canvas"));t.append(n),t.hidden=!1,this.#is(e,s),this.#Ce(),this.#Ze||(this.parent.addUndoableEditor(this),this.#Ze=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton(),this.#Xe&&n.setAttribute("aria-label",this.#Xe)}#rs(t,e){var[s,i]=this.parentDimensions;this.width=t/s,this.height=e/i,this.setDims(t,e),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),(this._initialOptions=null)!==this.#Je&&clearTimeout(this.#Je),this.#Je=setTimeout((()=>{this.#Je=null,this.#is(t,e)}),200)}#ns(t,e){var{width:s,height:i}=this.#$e;let r=s,n=i,a=this.#$e;for(;r>2*t||n>2*e;){var o=r,l=n,h=(r>2*t&&(r=16384<=r?Math.floor(r/2)-1:Math.ceil(r/2)),n>2*e&&(n=16384<=n?Math.floor(n/2)-1:Math.ceil(n/2)),new OffscreenCanvas(r,n));h.getContext("2d").drawImage(a,0,0,o,l,0,0,r,n),a=h.transferToImageBitmap()}return a}#is(t,e){t=Math.ceil(t),e=Math.ceil(e);var s,i=this.#Ye;!i||i.width===t&&i.height===e||(i.width=t,i.height=e,s=this.#Qe?this.#$e:this.#ns(t,e),(i=i.getContext("2d")).filter=this._uiManager.hcmFilter,i.drawImage(s,0,0,s.width,s.height,0,0,t,e))}getImageForAltText(){return this.#Ye}#as(t){return t?this.#Qe&&(t=this._uiManager.imageManager.getSvgUrl(this.#Ve))?t:(t=document.createElement("canvas"),({width:t.width,height:t.height}=this.#$e),t.getContext("2d").drawImage(this.#$e,0,0),t.toDataURL()):this.#Qe?([t,e]=this.pageDimensions,t=Math.round(this.width*t*c.PixelsPerInch.PDF_TO_CSS_UNITS),e=Math.round(this.height*e*c.PixelsPerInch.PDF_TO_CSS_UNITS),(s=new OffscreenCanvas(t,e)).getContext("2d").drawImage(this.#$e,0,0,this.#$e.width,this.#$e.height,0,0,t,e),s.transferToImageBitmap()):structuredClone(this.#$e);var e,s}#Ce(){this.#fe=new ResizeObserver((t=>{(t=t[0].contentRect).width&&t.height&&this.#rs(t.width,t.height)})),this.#fe.observe(this.div)}static deserialize(t,e,s){var i,r,n,o;return t instanceof a.StampAnnotationElement?null:(e=super.deserialize(t,e,s),({rect:t,bitmapUrl:i,bitmapId:o,isSvg:r,accessibilityData:n}=t),[s,o]=(o&&s.imageManager.isValidId(o)?e.#Ve=o:e.#We=i,e.#Qe=r,e.pageDimensions),e.width=(t[2]-t[0])/s,e.height=(t[3]-t[1])/o,n&&(e.altTextData=n),e)}serialize(t=!1,e=null){var s,r;return this.isEmpty()?null:(s={annotationType:i.AnnotationEditorType.STAMP,bitmapId:this.#Ve,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#Qe,structTreeParentId:this._structTreeParentId},t?(s.bitmapUrl=this.#as(!0),s.accessibilityData=this.altTextData):(({decorative:t,altText:r}=this.altTextData),!t&&r&&(s.accessibilityData={type:"Figure",alt:r}),null!==e&&(e.stamps||=new Map,t=this.#Qe?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null,e.stamps.has(this.#Ve)?this.#Qe&&t>(r=e.stamps.get(this.#Ve)).area&&(r.area=t,r.serialized.bitmap.close(),r.serialized.bitmap=this.#as(!1)):(e.stamps.set(this.#Ve,{area:t,serialized:s}),s.bitmap=this.#as(!1)))),s)}}class g{#L;#os=!1;#ls=null;#hs=this.pointerup.bind(this);#ds=this.pointerUpAfterSelection.bind(this);#cs=this.pointerdown.bind(this);#us=null;#ps=this.selectionStart.bind(this);#gs=new Map;#fs=!1;#ms=!1;#vs=!1;#bs=null;#ys;static _initialized=!1;static#ws=new Map([o,u,p,d].map((t=>[t._editorType,t])));constructor({uiManager:t,pageIndex:e,div:s,accessibilityManager:i,annotationLayer:r,drawLayer:n,textLayer:a,viewport:o,l10n:l}){var h=[...g.#ws.values()];if(!g._initialized){g._initialized=!0;for(const t of h)t.initialize(l)}t.registerEditorTypes(h),this.#ys=t,this.pageIndex=e,this.div=s,this.#L=i,this.#ls=r,this.viewport=o,this.#bs=a,this.drawLayer=n,this.#ys.addLayer(this)}get isEmpty(){return 0===this.#gs.size}updateToolbar(t){this.#ys.updateToolbar(t)}updateMode(t=this.#ys.getMode()){switch(this.#xs(),t){case i.AnnotationEditorType.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;case i.AnnotationEditorType.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case i.AnnotationEditorType.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}if(t!==i.AnnotationEditorType.NONE){var e=this.div.classList;for(const s of g.#ws.values())e.toggle(s._type+"Editing",t===s._editorType);this.div.hidden=!1}}addInkEditorIfNeeded(t){if(this.#ys.getMode()===i.AnnotationEditorType.INK){if(!t)for(const t of this.#gs.values())if(t.isEmpty())return void t.setInBackground();this.#As({offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(t){this.#ys.setEditingState(t)}addCommands(t){this.#ys.addCommands(t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}enable(){this.togglePointerEvents(!0);var t,e=new Set;for(const t of this.#gs.values())t.enableEditing(),t.annotationElementId&&e.add(t.annotationElementId);if(this.#ls)for(const s of this.#ls.getEditableAnnotations())s.hide(),this.#ys.isDeletedAnnotationElement(s.data.id)||e.has(s.data.id)||(t=this.deserialize(s))&&(this.addOrRebuild(t),t.enableEditing())}disable(){this.#vs=!0,this.togglePointerEvents(!1);var t=new Set;for(const e of this.#gs.values())e.disableEditing(),e.annotationElementId&&null===e.serialize()?(this.getEditableAnnotation(e.annotationElementId)?.show(),e.remove()):t.add(e.annotationElementId);if(this.#ls)for(const s of this.#ls.getEditableAnnotations()){var e=s.data.id;t.has(e)||this.#ys.isDeletedAnnotationElement(e)||s.show()}this.#xs(),this.isEmpty&&(this.div.hidden=!0);var s=this.div.classList;for(const t of g.#ws.values())s.remove(t._type+"Editing");this.disableTextSelection(),this.#vs=!1}getEditableAnnotation(t){return this.#ls?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#ys.getActive()!==t&&this.#ys.setActiveEditor(t)}enableTextSelection(){this.#bs?.div&&document.addEventListener("selectstart",this.#ps)}disableTextSelection(){this.#bs?.div&&document.removeEventListener("selectstart",this.#ps)}enableClick(){this.div.addEventListener("pointerdown",this.#cs),this.div.addEventListener("pointerup",this.#hs)}disableClick(){this.div.removeEventListener("pointerdown",this.#cs),this.div.removeEventListener("pointerup",this.#hs)}attach(t){this.#gs.set(t.id,t);var e=t.annotationElementId;e&&this.#ys.isDeletedAnnotationElement(e)&&this.#ys.removeDeletedAnnotationElement(t)}detach(t){this.#gs.delete(t.id),this.#L?.removePointerInTextLayer(t.contentDiv),!this.#vs&&t.annotationElementId&&this.#ys.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#ys.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,this.#ms||this.addInkEditorIfNeeded(!1)}changeParent(t){t.parent!==this&&(t.annotationElementId&&(this.#ys.addDeletedAnnotationElement(t.annotationElementId),r.AnnotationEditor.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div)&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div))}add(t){var e;this.changeParent(t),this.#ys.addEditor(t),this.attach(t),t.isAttachedToDOM||(e=t.render(),this.div.append(e),t.isAttachedToDOM=!0),t.fixAndSetPosition(),t.onceAdded(),this.#ys.addToAnnotationStorage(t)}moveEditorInDOM(t){if(t.isAttachedToDOM){const e=document.activeElement;t.div.contains(e)&&!this.#us&&(t._focusEventsAllowed=!1,this.#us=setTimeout((()=>{this.#us=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",(()=>{t._focusEventsAllowed=!0}),{once:!0}),e.focus())}),0)),t._structTreeParentId=this.#L?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild()):this.add(t)}addUndoableEditor(t){this.addCommands({cmd:()=>t._uiManager.rebuild(t),undo:()=>{t.remove()},mustExec:!1})}getNextId(){return this.#ys.getId()}get#_s(){return g.#ws.get(this.#ys.getMode())}#Cs(t){var e=this.#_s;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#_s?.canCreateNewEmptyEditor()}pasteEditor(t,e){this.#ys.updateToolbar(t),this.#ys.updateMode(t);var{offsetX:t,offsetY:s}=this.#Es(),i=this.getNextId();(i=this.#Cs({parent:this,id:i,x:t,y:s,uiManager:this.#ys,isCentered:!0,...e}))&&this.add(i)}deserialize(t){return g.#ws.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#ys)||null}#As(t,e,s={}){var i=this.getNextId();return(i=this.#Cs({parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:this.#ys,isCentered:e,...s}))&&this.add(i),i}#Es(){var{x:t,y:e,width:s,height:i}=this.div.getBoundingClientRect(),r=Math.max(0,t),n=Math.max(0,e),s=(r=(r+Math.min(window.innerWidth,t+s))/2-t,(n+Math.min(window.innerHeight,e+i))/2-e),[t,n]=this.viewport.rotation%180==0?[r,s]:[s,r];return{offsetX:t,offsetY:n}}addNewEditor(){this.#As(this.#Es(),!0)}setSelected(t){this.#ys.setSelected(t)}toggleSelected(t){this.#ys.toggleSelected(t)}isSelected(t){return this.#ys.isSelected(t)}unselect(t){this.#ys.unselect(t)}selectionStart(t){this.#bs?.div.addEventListener("pointerup",this.#ds,{once:!0})}pointerUpAfterSelection(t){var e=document.getSelection();if(0!==e.rangeCount){var s=e.getRangeAt(0);if(!s.collapsed&&this.#bs?.div.contains(s.commonAncestorContainer)){const{x:l,y:h,width:d,height:c}=this.#bs.div.getBoundingClientRect();let u;switch(s=s.getClientRects(),this.viewport.rotation){case 90:u=(t,e,s,i)=>({x:(e-h)/c,y:1-(t+s-l)/d,width:i/c,height:s/d});break;case 180:u=(t,e,s,i)=>({x:1-(t+s-l)/d,y:1-(e+i-h)/c,width:s/d,height:i/c});break;case 270:u=(t,e,s,i)=>({x:1-(e+i-h)/c,y:(t-l)/d,width:i/c,height:s/d});break;default:u=(t,e,s,i)=>({x:(t-l)/d,y:(e-h)/c,width:s/d,height:i/c})}var i,r,n,a,o=[];for({x:i,y:r,width:n,height:a}of s)0!==n&&0!==a&&o.push(u(i,r,n,a));0!==o.length&&this.#As(t,!1,{boxes:o}),e.empty()}}}pointerup(t){var e=i.FeatureTest.platform.isMac;0!==t.button||t.ctrlKey&&e||t.target===this.div&&this.#fs&&(this.#fs=!1,this.#os?this.#ys.getMode()===i.AnnotationEditorType.STAMP?this.#ys.unselectAll():this.#As(t,!1):this.#os=!0)}pointerdown(t){var e;this.#ys.getMode()===i.AnnotationEditorType.HIGHLIGHT&&this.enableTextSelection(),this.#fs?this.#fs=!1:(e=i.FeatureTest.platform.isMac,0!==t.button||t.ctrlKey&&e||t.target===this.div&&(this.#fs=!0,e=this.#ys.getActive(),this.#os=!e||e.isEmpty()))}findNewParent(t,e,s){return null!==(e=this.#ys.findParent(e,s))&&e!==this&&(e.changeParent(t),!0)}destroy(){this.#ys.getActive()?.parent===this&&(this.#ys.commitOrRemove(),this.#ys.setActiveEditor(null)),this.#us&&(clearTimeout(this.#us),this.#us=null);for(const t of this.#gs.values())this.#L?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#gs.clear(),this.#ys.removeLayer(this)}#xs(){this.#ms=!0;for(const t of this.#gs.values())t.isEmpty()&&t.remove();this.#ms=!1}render({viewport:t}){this.viewport=t,(0,c.setLayerDimensions)(this.div,t);for(const t of this.#ys.getEditors(this.pageIndex))this.add(t);this.updateMode()}update({viewport:t}){this.#ys.commitOrRemove();var e=this.viewport.rotation,s=t.rotation;if(this.viewport=t,(0,c.setLayerDimensions)(this.div,{rotation:s}),e!==s)for(const t of this.#gs.values())t.rotate(s);this.updateMode()}get pageDimensions(){var{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}}},97:(t,e,s)=>{s.d(e,{ColorPicker:()=>a});var i=s(266),r=s(812),n=s(473);class a{#r=this.#n.bind(this);#ks=null;#Ss=null;#Ts;#Ps=null;#Ms=!1;#Rs=!1;#Ls;#ys=null;static get _keyboardManager(){return(0,i.shadow)(this,"_keyboardManager",new r.KeyboardManager([[["Escape","mac+Escape"],a.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],a.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],a.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],a.prototype._moveToPrevious],[["Home","mac+Home"],a.prototype._moveToBeginning],[["End","mac+End"],a.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){this.#Rs=!t,this.#ys=t?._uiManager||e,this.#Ls=this.#ys._eventBus,this.#Ts=t?.color||this.#ys?.highlightColors.values().next().value||"#FFFF98"}renderButton(){var t=this.#ks=document.createElement("button"),e=(t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0),t.addEventListener("click",this.#Is.bind(this)),this.#Ss=document.createElement("span"));return e.className="swatch",e.style.backgroundColor=this.#Ts,t.append(e),t}renderMainDropdown(){var t=this.#Ps=this.#Ds(i.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR);return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}#Ds(t){var e,s,i=document.createElement("div");for([e,s]of(i.addEventListener("contextmenu",n.noContextMenu),i.className="dropdown",i.role="listbox",i.setAttribute("aria-multiselectable",!1),i.setAttribute("aria-orientation","vertical"),i.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#ys.highlightColors)){var r=document.createElement("button"),a=(r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=e,r.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-"+e),document.createElement("span"));r.append(a),a.className="swatch",a.style.backgroundColor=s,r.setAttribute("aria-selected",s===this.#Ts),r.addEventListener("click",this.#Fs.bind(this,t,s)),i.append(r)}return i.addEventListener("keydown",this.#r),i}#Fs(t,e,s){s.stopPropagation(),this.#Ls.dispatch("switchannotationeditorparams",{source:this,type:t,value:e})}_colorSelectFromKeyboard(t){var e=t.target.getAttribute("data-color");e&&this.#Fs(e,t)}_moveToNext(t){(t.target===this.#ks?this.#Ps.firstChild:t.target.nextSibling)?.focus()}_moveToPrevious(t){t.target.previousSibling?.focus()}_moveToBeginning(){this.#Ps.firstChild?.focus()}_moveToEnd(){this.#Ps.lastChild?.focus()}#n(t){a._keyboardManager.exec(this,t)}#Is(t){this.#Ps&&!this.#Ps.classList.contains("hidden")?this.hideDropdown():(this.#ks.addEventListener("keydown",this.#r),this.#Ms=0===t.detail,this.#Ps?this.#Ps.classList.remove("hidden"):(t=this.#Ps=this.#Ds(i.AnnotationEditorParamsType.HIGHLIGHT_COLOR),this.#ks.append(t)))}hideDropdown(){this.#Ps?.classList.add("hidden")}_hideDropdownFromKeyboard(){this.#Rs||!this.#Ps||this.#Ps.classList.contains("hidden")||(this.hideDropdown(),this.#ks.removeEventListener("keydown",this.#r),this.#ks.focus({preventScroll:!0,focusVisible:this.#Ms}))}updateColor(t){if(this.#Ss&&(this.#Ss.style.backgroundColor=t),this.#Ps){var e=this.#ys.highlightColors.values();for(const s of this.#Ps.children)s.setAttribute("aria-selected",e.next().value===t)}}destroy(){this.#ks?.remove(),this.#ks=null,this.#Ss=null,this.#Ps?.remove(),this.#Ps=null}}},115:(t,e,s)=>{s.d(e,{AnnotationEditor:()=>l});var i=s(812),r=s(266),n=s(473);class a{#Os="";#Bs=!1;#Ns=null;#zs=null;#js=null;#Us=!1;#Hs=null;static _l10nPromise=null;constructor(t){this.#Hs=t}static initialize(t){a._l10nPromise||=t}async render(){const t=this.#Ns=document.createElement("button");t.className="altText";var e=await a._l10nPromise.get("pdfjs-editor-alt-text-button-label");t.textContent=e,t.setAttribute("aria-label",e),t.tabIndex="0",t.addEventListener("contextmenu",n.noContextMenu),t.addEventListener("pointerdown",(t=>t.stopPropagation()));const s=t=>{t.preventDefault(),this.#Hs._uiManager.editAltText(this.#Hs)};return t.addEventListener("click",s,{capture:!0}),t.addEventListener("keydown",(e=>{e.target===t&&"Enter"===e.key&&(this.#Us=!0,s(e))})),await this.#qs(),t}finish(){this.#Ns&&(this.#Ns.focus({focusVisible:this.#Us}),this.#Us=!1)}get data(){return{altText:this.#Os,decorative:this.#Bs}}set data({altText:t,decorative:e}){this.#Os===t&&this.#Bs===e||(this.#Os=t,this.#Bs=e,this.#qs())}toggle(t=!1){this.#Ns&&(!t&&this.#js&&(clearTimeout(this.#js),this.#js=null),this.#Ns.disabled=!t)}destroy(){this.#Ns?.remove(),this.#Ns=null,this.#zs=null}async#qs(){const t=this.#Ns;if(t)if(this.#Os||this.#Bs){t.classList.add("done"),a._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then((e=>{t.setAttribute("aria-label",e)}));let s=this.#zs;if(!s){this.#zs=s=document.createElement("span"),s.className="tooltip",s.setAttribute("role","tooltip");var e=s.id="alt-text-tooltip-"+this.#Hs.id;t.setAttribute("aria-describedby",e),t.addEventListener("mouseenter",(()=>{this.#js=setTimeout((()=>{this.#js=null,this.#zs.classList.add("show"),this.#Hs._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.#Hs.editorType,data:{action:"alt_text_tooltip"}}})}),100)})),t.addEventListener("mouseleave",(()=>{this.#js&&(clearTimeout(this.#js),this.#js=null),this.#zs?.classList.remove("show")}))}s.innerText=this.#Bs?await a._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):this.#Os,s.parentNode||t.append(s),this.#Hs.getImageForAltText()?.setAttribute("aria-describedby",s.id)}else t.classList.remove("done"),this.#zs?.remove()}}class o{#$s=null;#Vt=null;#Hs;#Vs=null;constructor(t){this.#Hs=t}render(){var t,e,s,i=this.#$s=document.createElement("div");return(s=((s=(i.className="editToolbar",i.addEventListener("contextmenu",n.noContextMenu),i.addEventListener("pointerdown",o.#Gs),this.#Vs=document.createElement("div"))).className="buttons",i.append(s),this.#Hs.toolbarPosition))&&(t=i.style,e="ltr"===this.#Hs._uiManager.direction?1-s[0]:s[0],t.insetInlineEnd=100*e+"%",t.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`),this.#Ws(),i}static#Gs(t){t.stopPropagation()}#Ks(t){this.#Hs._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()}#Xs(t){this.#Hs._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()}#Ys(t){t.addEventListener("focusin",this.#Ks.bind(this),{capture:!0}),t.addEventListener("focusout",this.#Xs.bind(this),{capture:!0}),t.addEventListener("contextmenu",n.noContextMenu)}hide(){this.#$s.classList.add("hidden"),this.#Vt?.hideDropdown()}show(){this.#$s.classList.remove("hidden")}#Ws(){var t=document.createElement("button");t.className="delete",t.tabIndex=0,t.setAttribute("data-l10n-id",`pdfjs-editor-remove-${this.#Hs.editorType}-button`),this.#Ys(t),t.addEventListener("click",(t=>{this.#Hs._uiManager.delete()})),this.#Vs.append(t)}get#Js(){var t=document.createElement("div");return t.className="divider",t}addAltTextButton(t){this.#Ys(t),this.#Vs.prepend(t,this.#Js)}addColorPicker(t){t=(this.#Vt=t).renderButton(),this.#Ys(t),this.#Vs.prepend(t,this.#Js)}remove(){this.#$s.remove(),this.#Vt?.destroy(),this.#Vt=null}}class l{#Qs=null;#Os=null;#Zs=!1;#ti=null;#ei=null;#si=this.focusin.bind(this);#ii=this.focusout.bind(this);#ri=null;#ni="";#ai=!1;#oi=!1;#li=!1;#hi=!1;#di=null;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#ci=!1;#ui=l._zIndex++;static _borderLineWidth=-1;static _colorManager=new i.ColorManager;static _zIndex=1;static get _resizerKeyboardManager(){var t=l.prototype._resizeWithKeyboard,e=i.AnnotationEditorUIManager.TRANSLATE_SMALL,s=i.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,r.shadow)(this,"_resizerKeyboardManager",new i.KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],l.prototype._stopResizingWithKeyboard]]))}constructor(t){this.constructor===l&&(0,r.unreachable)("Cannot initialize AnnotationEditor."),this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;var{rotation:e,rawDims:{pageWidth:s,pageHeight:i,pageX:n,pageY:a}}=this.parent.viewport,[e,s]=(this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,i],this.pageTranslation=[n,a],this.parentDimensions);this.x=t.x/e,this.y=t.y/s,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,r.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){var e=new h({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e=null){if(l._l10nPromise||=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map((e=>[e,t.get(e.replaceAll(/([A-Z])/g,(t=>"-"+t.toLowerCase())))]))),e?.strings)for(const s of e.strings)l._l10nPromise.set(s,t.get(s));-1===l._borderLineWidth&&(e=getComputedStyle(document.documentElement),l._borderLineWidth=parseFloat(e.getPropertyValue("--outline-width"))||0)}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){(0,r.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#ci}set _isDraggable(t){this.#ci=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){var[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(2*t),this.y+=this.width*t/(2*e);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(2*t),this.y-=this.width*t/(2*e);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#ui}setParent(t){null!==t?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#pi(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#ai?this.#ai=!1:this.parent.setSelected(this))}focusout(t){this._focusEventsAllowed&&this.isAttachedToDOM&&!t.relatedTarget?.closest("#"+this.id)&&(t.preventDefault(),!this.parent?.isMultipleSelection)&&this.commitOrRemove()}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,s,i){var[r,n]=this.parentDimensions;[s,i]=this.screenToPageTranslation(s,i),this.x=(t+s)/r,this.y=(e+i)/n,this.fixAndSetPosition()}#gi([t,e],s,i){[s,i]=this.screenToPageTranslation(s,i),this.x+=s/t,this.y+=i/e,this.fixAndSetPosition()}translate(t,e){this.#gi(this.parentDimensions,t,e)}translateInPage(t,e){this.#gi(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){var[s,i]=this.parentDimensions;if(this.x+=t/s,this.y+=e/i,this.parent&&(this.x<0||1<this.x||this.y<0||1<this.y)){const{x:t,y:e}=this.div.getBoundingClientRect();this.parent.findNewParent(this,t,e)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:n}=this;var[t,s]=this.#fi();r+=t,n+=s,this.div.style.left=(100*r).toFixed(2)+"%",this.div.style.top=(100*n).toFixed(2)+"%",this.div.scrollIntoView({block:"nearest"})}#fi(){var[t,e]=this.parentDimensions,s=l._borderLineWidth,i=s/t,r=s/e;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}fixAndSetPosition(t=this.rotation){var[e,s]=this.pageDimensions;let{x:i,y:r,width:n,height:a}=this;switch(n*=e,a*=s,i*=e,r*=s,t){case 0:i=Math.max(0,Math.min(e-n,i)),r=Math.max(0,Math.min(s-a,r));break;case 90:i=Math.max(0,Math.min(e-a,i)),r=Math.min(s,Math.max(n,r));break;case 180:i=Math.min(e,Math.max(n,i)),r=Math.min(s,Math.max(a,r));break;case 270:i=Math.min(e,Math.max(a,i)),r=Math.max(0,Math.min(s-n,r))}this.x=i/=e,this.y=r/=s;var[t,o]=this.#fi();(t=(i+=t,r+=o,this.div).style).left=(100*i).toFixed(2)+"%",t.top=(100*r).toFixed(2)+"%",this.moveInDOM()}static#mi(t,e,s){switch(s){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return l.#mi(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return l.#mi(t,e,360-this.parentRotation)}#vi(t){switch(t){case 90:var[e,s]=this.pageDimensions;return[0,-e/s,s/e,0];case 180:return[-1,0,0,-1];case 270:var[s,e]=this.pageDimensions;return[0,s/e,-e/s,0];default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){var{parentScale:t,pageDimensions:[e,s]}=this,e=e*t,s=s*t;return r.FeatureTest.isCSSRoundSupported?[Math.round(e),Math.round(s)]:[e,s]}setDims(t,e){var[s,i]=this.parentDimensions;this.div.style.width=(100*t/s).toFixed(2)+"%",this.#Zs||(this.div.style.height=(100*e/i).toFixed(2)+"%")}fixDims(){var t,e,s=this.div.style,{height:i,width:r}=s,n=r.endsWith("%"),a=!this.#Zs&&i.endsWith("%");n&&a||([t,e]=this.parentDimensions,n||(s.width=(100*parseFloat(r)/t).toFixed(2)+"%"),this.#Zs)||a||(s.height=(100*parseFloat(i)/e).toFixed(2)+"%")}getInitialTranslation(){return[0,0]}#bi(){if(!this.#ti){this.#ti=document.createElement("div"),this.#ti.classList.add("resizers");for(const e of this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"]){var t=document.createElement("div");this.#ti.append(t),t.classList.add("resizer",e),t.setAttribute("data-resizer-name",e),t.addEventListener("pointerdown",this.#yi.bind(this,e)),t.addEventListener("contextmenu",n.noContextMenu),t.tabIndex=-1}this.div.prepend(this.#ti)}}#yi(t,e){e.preventDefault();var s=r.FeatureTest.platform.isMac;if(!(0!==e.button||e.ctrlKey&&s)){this.#Os?.toggle(!1);const s=this.#wi.bind(this,t),i=this._isDraggable,r={passive:!(this._isDraggable=!1),capture:!0},n=(this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",s,r),this.x),a=this.y,o=this.width,l=this.height,h=this.parent.div.style.cursor,d=this.div.style.cursor,c=(this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor,()=>{this.parent.togglePointerEvents(!0),this.#Os?.toggle(!0),this._isDraggable=i,window.removeEventListener("pointerup",c),window.removeEventListener("blur",c),window.removeEventListener("pointermove",s,r),this.parent.div.style.cursor=h,this.div.style.cursor=d,this.#xi(n,a,o,l)});window.addEventListener("pointerup",c),window.addEventListener("blur",c)}}#xi(t,e,s,i){const r=this.x,n=this.y,a=this.width,o=this.height;r===t&&n===e&&a===s&&o===i||this.addCommands({cmd:()=>{this.width=a,this.height=o,this.x=r,this.y=n;var[t,e]=this.parentDimensions;this.setDims(t*a,e*o),this.fixAndSetPosition()},undo:()=>{this.width=s,this.height=i,this.x=t,this.y=e;var[r,n]=this.parentDimensions;this.setDims(r*s,n*i),this.fixAndSetPosition()},mustExec:!0})}#wi(t,e){var[s,i]=this.parentDimensions,r=this.x,n=this.y,a=this.width,o=this.height,h=l.MIN_SIZE/s,d=l.MIN_SIZE/i,c=t=>Math.round(1e4*t)/1e4;const u=this.#vi(this.rotation);var p=(t,e)=>[u[0]*t+u[2]*e,u[1]*t+u[3]*e];const g=this.#vi(360-this.rotation);let f,m,v=!1,b=!1;switch(t){case"topLeft":v=!0,f=(t,e)=>[0,0],m=(t,e)=>[t,e];break;case"topMiddle":f=(t,e)=>[t/2,0],m=(t,e)=>[t/2,e];break;case"topRight":v=!0,f=(t,e)=>[t,0],m=(t,e)=>[0,e];break;case"middleRight":b=!0,f=(t,e)=>[t,e/2],m=(t,e)=>[0,e/2];break;case"bottomRight":v=!0,f=(t,e)=>[t,e],m=(t,e)=>[0,0];break;case"bottomMiddle":f=(t,e)=>[t/2,e],m=(t,e)=>[t/2,0];break;case"bottomLeft":v=!0,f=(t,e)=>[0,e],m=(t,e)=>[t,0];break;case"middleLeft":b=!0,f=(t,e)=>[0,e/2],m=(t,e)=>[t,e/2]}t=f(a,o);var y=m(a,o),w=p(...y);r=c(r+w[0]),n=c(n+w[1]);let x=1,A=1;var[e,_]=this.screenToPageTranslation(e.movementX,e.movementY),C=([e,_]=(E=e/s,C=_/i,[g[0]*E+g[2]*C,g[1]*E+g[3]*C]),v?(E=Math.hypot(a,o),x=A=Math.max(Math.min(Math.hypot(y[0]-t[0]-e,y[1]-t[1]-_)/E,1/a,1/o),h/a,d/o)):b?x=Math.max(h,Math.min(1,Math.abs(y[0]-t[0]-e)))/a:A=Math.max(d,Math.min(1,Math.abs(y[1]-t[1]-_)))/o,c(a*x)),E=c(o*A);h=r-(w=p(...m(C,E)))[0],e=n-w[1];this.width=C,this.height=E,this.x=h,this.y=e,this.setDims(s*C,i*E),this.fixAndSetPosition()}altTextFinish(){this.#Os?.finish()}async addEditToolbar(){return this.#ri||this.#li||(this.#ri=new o(this),this.div.append(this.#ri.render()),this.#Os&&this.#ri.addAltTextButton(await this.#Os.render())),this.#ri}removeEditToolbar(){this.#ri&&(this.#ri.remove(),this.#ri=null,this.#Os?.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#Os||(a.initialize(l._l10nPromise),this.#Os=new a(this),await this.addEditToolbar())}get altTextData(){return this.#Os?.data}set altTextData(t){this.#Os&&(this.#Os.data=t)}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#si),this.div.addEventListener("focusout",this.#ii);var[t,e]=this.parentDimensions,[t,e]=(this.parentRotation%180!=0&&(this.div.style.maxWidth=(100*e/t).toFixed(2)+"%",this.div.style.maxHeight=(100*t/e).toFixed(2)+"%"),this.getInitialTranslation());return this.translate(t,e),(0,i.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(t){var e=r.FeatureTest.platform.isMac;0!==t.button||t.ctrlKey&&e?t.preventDefault():(this.#ai=!0,this._isDraggable?this.#Ai(t):this.#_i(t))}#_i(t){var e=r.FeatureTest.platform.isMac;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#Ai(t){const e=this._uiManager.isSelected(this);let s,i;this._uiManager.setUpDragSession(),e&&(s={passive:!0,capture:!0},i=t=>{var[t,e]=this.screenToPageTranslation(t.movementX,t.movementY);this._uiManager.dragSelectedEditors(t,e)},window.addEventListener("pointermove",i,s));const r=()=>{window.removeEventListener("pointerup",r),window.removeEventListener("blur",r),e&&window.removeEventListener("pointermove",i,s),this.#ai=!1,this._uiManager.endDragSession()||this.#_i(t)};window.addEventListener("pointerup",r),window.addEventListener("blur",r)}moveInDOM(){this.#di&&clearTimeout(this.#di),this.#di=setTimeout((()=>{this.#di=null,this.parent?.moveEditorInDOM(this)}),0)}_setParentAndPosition(t,e,s){t.changeParent(this),this.x=e,this.y=s,this.fixAndSetPosition()}getRect(t,e,s=this.rotation){var i=this.parentScale,[r,n]=this.pageDimensions,[a,o]=this.pageTranslation,l=t/i,h=e/i,d=this.x*r,c=this.y*n,u=this.width*r,p=this.height*n;switch(s){case 0:return[d+l+a,n-c-h-p+o,d+l+u+a,n-c-h+o];case 90:return[d+h+a,n-c+l+o,d+h+p+a,n-c+l+u+o];case 180:return[d-l-u+a,n-c+h+o,d-l+a,n-c+h+p+o];case 270:return[d-h-p+a,n-c-l-u+o,d-h+a,n-c-l+o];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){var[s,i,r,n]=t,a=r-s,o=n-i;switch(this.rotation){case 0:return[s,e-n,a,o];case 90:return[s,e-i,o,a];case 180:return[r,e-i,a,o];case 270:return[r,e-n,o,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#li=!0}disableEditMode(){this.#li=!1}isInEditMode(){return this.#li}shouldGetKeyboardEvents(){return this.#hi}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#si),this.div?.addEventListener("focusout",this.#ii)}rotate(t){}serialize(t=0,e){(0,r.unreachable)("An editor must be serializable")}static deserialize(t,e,s){e=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:s});var[s,i]=(e.rotation=t.rotation,e.pageDimensions),[t,r,n,a]=e.getRectInCurrentCoords(t.rect,i);return e.x=t/s,e.y=r/i,e.width=n/s,e.height=a/i,e}remove(){this.div.removeEventListener("focusin",this.#si),this.div.removeEventListener("focusout",this.#ii),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#di&&(clearTimeout(this.#di),this.#di=null),this.#pi(),this.removeEditToolbar()}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#bi(),this.#ti.classList.remove("hidden"),(0,i.bindEvents)(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(this.isResizable&&t.target===this.div&&"Enter"===t.key){this._uiManager.setSelected(this),this.#ei={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};var e=this.#ti.children;if(!this.#Qs){this.#Qs=Array.from(e);var s=this.#Ci.bind(this),i=this.#Ei.bind(this);for(const t of this.#Qs){var r=t.getAttribute("data-resizer-name");t.setAttribute("role","spinbutton"),t.addEventListener("keydown",s),t.addEventListener("blur",i),t.addEventListener("focus",this.#ki.bind(this,r)),l._l10nPromise.get("pdfjs-editor-resizer-label-"+r).then((e=>t.setAttribute("aria-label",e)))}}var n=this.#Qs[0];let h=0;for(const t of e){if(t===n)break;h++}var a=(360-this.rotation+this.parentRotation)%360/90*(this.#Qs.length/4);if(a!==h){if(a<h)for(let t=0;t<h-a;t++)this.#ti.append(this.#ti.firstChild);else if(a>h)for(let t=0;t<a-h;t++)this.#ti.firstChild.before(this.#ti.lastChild);let t=0;for(const s of e){var o=this.#Qs[t++].getAttribute("data-resizer-name");l._l10nPromise.get("pdfjs-editor-resizer-label-"+o).then((t=>s.setAttribute("aria-label",t)))}}this.#Si(0),this.#hi=!0,this.#ti.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}}#Ci(t){l._resizerKeyboardManager.exec(this,t)}#Ei(t){this.#hi&&t.relatedTarget?.parentNode!==this.#ti&&this.#pi()}#ki(t){this.#ni=this.#hi?t:""}#Si(t){if(this.#Qs)for(const e of this.#Qs)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#hi&&this.#wi(this.#ni,{movementX:t,movementY:e})}#pi(){var t,e,s,i;this.#hi=!1,this.#Si(-1),this.#ei&&(({savedX:t,savedY:e,savedWidth:s,savedHeight:i}=this.#ei),this.#xi(t,e,s,i),this.#ei=null)}_stopResizingWithKeyboard(){this.#pi(),this.div.focus()}select(){this.makeResizable(),this.div?.classList.add("selectedEditor"),this.#ri?this.#ri?.show():this.addEditToolbar().then((()=>{this.div?.classList.contains("selectedEditor")&&this.#ri?.show()}))}unselect(){this.#ti?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus(),this.#ri?.hide()}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#oi}set isEditing(t){this.#oi=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){this.#Zs=!0;var s=this.div.style;s.aspectRatio=t/e,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}}class h extends l{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},405:(t,e,s)=>{s.d(e,{Outliner:()=>i});class i{#Ti;#Pi=[];#Mi=[];constructor(t,e=0,s=0,i=!0){let r=1/0,n=-1/0,a=1/0,o=-1/0;var l,h,d,c,u=10**-4;for({x:l,y:h,width:d,height:c}of t){var p=Math.floor((l-e)/u)*u,g=Math.ceil((l+d+e)/u)*u,f=Math.floor((h-e)/u)*u,m=Math.ceil((h+c+e)/u)*u;this.#Pi.push([p,f,m,!0],[g,f,m,!1]),r=Math.min(r,p),n=Math.max(n,g),a=Math.min(a,f),o=Math.max(o,m)}var v=n-r+2*s,b=o-a+2*s,y=r-s,w=a-s;s=[(t=this.#Pi.at(i?-1:-2))[0],t[2]];for(const t of this.#Pi){var[x,A,_]=t;t[0]=(x-y)/v,t[1]=(A-w)/b,t[2]=(_-w)/b}this.#Ti={x:y,y:w,width:v,height:b,lastPoint:s}}getOutlines(){this.#Pi.sort(((t,e)=>t[0]-e[0]||t[1]-e[1]||t[2]-e[2]));var t=[];for(const e of this.#Pi)e[3]?(t.push(...this.#Ri(e)),this.#Li(e)):(this.#Ii(e),t.push(...this.#Ri(e)));return this.#Di(t)}#Di(t){var e=[],s=new Set;for(const s of t){var[i,r,n]=s;e.push([i,r,s],[i,n,s])}e.sort(((t,e)=>t[1]-e[1]||t[0]-e[0]));for(let t=0,i=e.length;t<i;t+=2){var a=e[t][2],o=e[t+1][2];a.push(o),o.push(a),s.add(a),s.add(o)}for(var l,h=[];0<s.size;){var d=s.values().next().value;let[t,e,i,r,n]=d,a=(s.delete(d),t),o=e;for(h.push(l=[t,i]);;){let h;if(s.has(r))h=r;else{if(!s.has(n))break;h=n}s.delete(h),[t,e,i,r,n]=h,a!==t&&(l.push(a,o,t,o===e?e:i),a=t),o=o===e?i:e}l.push(a,o)}return{outlines:h,box:this.#Ti}}#Fi(t){var e=this.#Mi;let s=0,i=e.length-1;for(;s<=i;){var r=s+i>>1,n=e[r][0];if(n===t)return r;n<t?s=1+r:i=r-1}return i+1}#Li([,t,e]){var s=this.#Fi(t);this.#Mi.splice(s,0,[t,e])}#Ii([,t,e]){var s=this.#Fi(t);for(let n=s;n<this.#Mi.length;n++){var[i,r]=this.#Mi[n];if(i!==t)break;if(i===t&&r===e)return void this.#Mi.splice(n,1)}for(let i=s-1;0<=i;i--){var[n,a]=this.#Mi[i];if(n!==t)break;if(n===t&&a===e)return void this.#Mi.splice(i,1)}}#Ri(t){var[e,t,s]=t,i=[[e,t,s]],r=this.#Fi(s);for(let t=0;t<r;t++){var[n,a]=this.#Mi[t];for(let t=0,s=i.length;t<s;t++){var[,o,l]=i[t];if(!(a<=o||l<=n))if(n<=o)if(a<l)i[t][1]=a;else{if(1===s)return[];i.splice(t,1),t--,s--}else i[t][2]=n,a<l&&i.push([e,a,l])}}return i}}},812:(t,e,s)=>{s.d(e,{AnnotationEditorUIManager:()=>d,ColorManager:()=>h,KeyboardManager:()=>l,bindEvents:()=>function(t,e,s){for(const i of s)e.addEventListener(i,t[i].bind(t))},opacityToHex:()=>function(t){return Math.round(Math.min(255,Math.max(1,255*t))).toString(16).padStart(2,"0")}});var i=s(266),r=s(473);class n{#mt=0;getId(){return""+i.AnnotationEditorPrefix+this.#mt++}}class a{#Oi=(0,i.getUuid)();#mt=0;#vt=null;static get _isSVGFittingCanvas(){const t=new OffscreenCanvas(1,3).getContext("2d"),e=new Image;e.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';var s=e.decode().then((()=>(t.drawImage(e,0,0,1,1,0,0,1,3),0===new Uint32Array(t.getImageData(0,0,1,1).data.buffer)[0])));return(0,i.shadow)(this,"_isSVGFittingCanvas",s)}async#Bi(t,e){this.#vt||=new Map;let s=this.#vt.get(t);if(null===s)return null;if(s?.bitmap)s.refCounter+=1;else{try{let t;if(s||={bitmap:null,id:`image_${this.#Oi}_`+this.#mt++,refCounter:0,isSvg:!1},"image/svg+xml"===(t="string"==typeof e?(s.url=e,await(0,r.fetchData)(e,"blob")):s.file=e).type){const e=a._isSVGFittingCanvas,r=new FileReader,n=new Image;var i=new Promise(((t,i)=>{n.onload=()=>{s.bitmap=n,s.isSvg=!0,t()},r.onload=async()=>{var t=s.svgUrl=r.result;n.src=await e?t+"#svgView(preserveAspectRatio(none))":t},n.onerror=r.onerror=i}));r.readAsDataURL(t),await i}else s.bitmap=await createImageBitmap(t);s.refCounter=1}catch(t){console.error(t),s=null}this.#vt.set(t,s),s&&this.#vt.set(s.id,s)}return s}async getFromFile(t){var{lastModified:e,name:s,size:i,type:r}=t;return this.#Bi(e+`_${s}_${i}_`+r,t)}async getFromUrl(t){return this.#Bi(t,t)}async getFromId(t){return this.#vt||=new Map,(t=this.#vt.get(t))?t.bitmap?(t.refCounter+=1,t):t.file?this.getFromFile(t.file):this.getFromUrl(t.url):null}getSvgUrl(t){return t=this.#vt.get(t),t?.isSvg?t.svgUrl:null}deleteId(t){this.#vt||=new Map,(t=this.#vt.get(t))&&(--t.refCounter,0===t.refCounter)&&(t.bitmap=null)}isValidId(t){return t.startsWith(`image_${this.#Oi}_`)}}class o{#Ni=[];#zi=!1;#ji;#Ui=-1;constructor(t=128){this.#ji=t}add({cmd:t,undo:e,mustExec:s,type:i=NaN,overwriteIfSameType:r=!1,keepUndo:n=!1}){s&&t(),this.#zi||(s={cmd:t,undo:e,type:i},-1===this.#Ui?(0<this.#Ni.length&&(this.#Ni.length=0),this.#Ui=0,this.#Ni.push(s)):r&&this.#Ni[this.#Ui].type===i?(n&&(s.undo=this.#Ni[this.#Ui].undo),this.#Ni[this.#Ui]=s):((t=this.#Ui+1)===this.#ji?this.#Ni.splice(0,1):(this.#Ui=t)<this.#Ni.length&&this.#Ni.splice(t),this.#Ni.push(s)))}undo(){-1!==this.#Ui&&(this.#zi=!0,this.#Ni[this.#Ui].undo(),this.#zi=!1,--this.#Ui)}redo(){this.#Ui<this.#Ni.length-1&&(this.#Ui+=1,this.#zi=!0,this.#Ni[this.#Ui].cmd(),this.#zi=!1)}hasSomethingToUndo(){return-1!==this.#Ui}hasSomethingToRedo(){return this.#Ui<this.#Ni.length-1}destroy(){this.#Ni=null}}class l{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;var e,s,r,n=i.FeatureTest.platform.isMac;for([e,s,r={}]of t)for(const t of e){var a=t.startsWith("mac+");n&&a?(this.callbacks.set(t.slice(4),{callback:s,options:r}),this.allKeys.add(t.split("+").at(-1))):n||a||(this.callbacks.set(t,{callback:s,options:r}),this.allKeys.add(t.split("+").at(-1)))}}#Hi(t){return t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key),t=this.buffer.join("+"),this.buffer.length=0,t}exec(t,e){var s,i,r,n;this.allKeys.has(e.key)&&(s=this.callbacks.get(this.#Hi(e)))&&(({callback:s,options:{bubbles:i=!1,args:r=[],checker:n=null}}=s),n&&!n(t,e)||(s.bind(t,...r,e)(),i)||(e.stopPropagation(),e.preventDefault()))}}class h{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){var t=new Map([["CanvasText",null],["Canvas",null]]);return(0,r.getColorValues)(t),(0,i.shadow)(this,"_colors",t)}convert(t){const e=(0,r.getRGB)(t);if(window.matchMedia("(forced-colors: active)").matches)for(var[s,i]of this._colors)if(i.every(((t,s)=>t===e[s])))return h._colorsMapping.get(s);return e}getHexCode(t){var e=this._colors.get(t);return e?i.Util.makeHexColor(...e):t}}class d{#qi=null;#$i=new Map;#Vi=new Map;#Gi=null;#Wi=null;#Ki=new o;#Xi=0;#Yi=new Set;#Ji=null;#ws=null;#Qi=new Set;#Zi=null;#tr=null;#er=null;#sr=new n;#ir=!1;#rr=!1;#nr=null;#ar=null;#or=i.AnnotationEditorType.NONE;#lr=new Set;#hr=null;#dr=this.blur.bind(this);#cr=this.focus.bind(this);#ur=this.copy.bind(this);#pr=this.cut.bind(this);#gr=this.paste.bind(this);#fr=this.keydown.bind(this);#mr=this.onEditingAction.bind(this);#vr=this.onPageChanging.bind(this);#br=this.onScaleChanging.bind(this);#yr=this.onRotationChanging.bind(this);#wr={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#xr=[0,0];#Ar=null;#p=null;#_r=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){var t=d.prototype,e=t=>t.#p.contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&t.hasSomethingToControl(),s=(t,{target:e})=>!(e instanceof HTMLInputElement)||"text"!==(e=e.type)&&"number"!==e,r=this.TRANSLATE_SMALL,n=this.TRANSLATE_BIG;return(0,i.shadow)(this,"_keyboardManager",new l([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(t,{target:e})=>!(e instanceof HTMLButtonElement)&&t.#p.contains(e)&&!t.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:t=>t.#p.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-n,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[n,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-n],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,n],checker:e}]]))}constructor(t,e,s,i,n,a,o){this.#p=t,this.#_r=e,this.#Gi=s,this._eventBus=i,this._eventBus._on("editingaction",this.#mr),this._eventBus._on("pagechanging",this.#vr),this._eventBus._on("scalechanging",this.#br),this._eventBus._on("rotationchanging",this.#yr),this.#Wi=n.annotationStorage,this.#Zi=n.filterFactory,this.#hr=a,this.#er=o||null,this.viewParameters={realScale:r.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#Cr(),this.#Er(),this._eventBus._off("editingaction",this.#mr),this._eventBus._off("pagechanging",this.#vr),this._eventBus._off("scalechanging",this.#br),this._eventBus._off("rotationchanging",this.#yr);for(const t of this.#Vi.values())t.destroy();this.#Vi.clear(),this.#$i.clear(),this.#Qi.clear(),this.#qi=null,this.#lr.clear(),this.#Ki.destroy(),this.#Gi?.destroy(),this.#tr&&(clearTimeout(this.#tr),this.#tr=null),this.#Ar&&(clearTimeout(this.#Ar),this.#Ar=null)}get hcmFilter(){return(0,i.shadow)(this,"hcmFilter",this.#hr?this.#Zi.addHCMFilter(this.#hr.foreground,this.#hr.background):"none")}get direction(){return(0,i.shadow)(this,"direction",getComputedStyle(this.#p).direction)}get highlightColors(){return(0,i.shadow)(this,"highlightColors",this.#er?new Map(this.#er.split(",").map((t=>t.split("=").map((t=>t.trim()))))):null)}setMainHighlightColorPicker(t){this.#ar=t}editAltText(t){this.#Gi?.editAltText(this,t)}onPageChanging({pageNumber:t}){this.#Xi=t-1}focusMainContainer(){this.#p.focus()}findParent(t,e){for(const a of this.#Vi.values()){var{x:s,y:i,width:r,height:n}=a.div.getBoundingClientRect();if(s<=t&&t<=s+r&&i<=e&&e<=i+n)return a}return null}disableUserSelect(t=!1){this.#_r.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#Qi.add(t)}removeShouldRescale(t){this.#Qi.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*r.PixelsPerInch.PDF_TO_CSS_UNITS;for(const t of this.#Qi)t.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}addToAnnotationStorage(t){t.isEmpty()||!this.#Wi||this.#Wi.has(t.id)||this.#Wi.setValue(t.id,t)}#kr(){window.addEventListener("focus",this.#cr),window.addEventListener("blur",this.#dr)}#Er(){window.removeEventListener("focus",this.#cr),window.removeEventListener("blur",this.#dr)}blur(){if(this.hasSelection){var t=document.activeElement;for(const e of this.#lr)if(e.div.contains(t)){this.#nr=[e,t],e._focusEventsAllowed=!1;break}}}focus(){if(this.#nr){const[t,e]=this.#nr;this.#nr=null,e.addEventListener("focusin",(()=>{t._focusEventsAllowed=!0}),{once:!0}),e.focus()}}#Sr(){window.addEventListener("keydown",this.#fr)}#Cr(){window.removeEventListener("keydown",this.#fr)}#Tr(){document.addEventListener("copy",this.#ur),document.addEventListener("cut",this.#pr),document.addEventListener("paste",this.#gr)}#Pr(){document.removeEventListener("copy",this.#ur),document.removeEventListener("cut",this.#pr),document.removeEventListener("paste",this.#gr)}addEditListeners(){this.#Sr(),this.#Tr()}removeEditListeners(){this.#Cr(),this.#Pr()}copy(t){if(t.preventDefault(),this.#qi?.commitOrRemove(),this.hasSelection){var e=[];for(const t of this.#lr){var s=t.serialize(!0);s&&e.push(s)}0!==e.length&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}}cut(t){this.copy(t),this.delete()}paste(t){t.preventDefault(),t=t.clipboardData;for(const e of t.items)for(const t of this.#ws)if(t.isHandlingMimeForPasting(e.type))return void t.paste(e,this.currentLayer);let e=t.getData("application/pdfjs");if(e){try{e=JSON.parse(e)}catch(t){return void(0,i.warn)(`paste: "${t.message}".`)}if(Array.isArray(e)){this.unselectAll();var s=this.currentLayer;try{const t=[];for(const i of e){var r=s.deserialize(i);if(!r)return;t.push(r)}this.addCommands({cmd:()=>{for(const e of t)this.#Mr(e);this.#Rr(t)},undo:()=>{for(const e of t)e.remove()},mustExec:!0})}catch(t){(0,i.warn)(`paste: "${t.message}".`)}}}}keydown(t){this.isEditorHandlingKeyboard||d._keyboardManager.exec(this,t)}onEditingAction(t){["undo","redo","delete","selectAll"].includes(t.name)&&this[t.name]()}#Lr(t){Object.entries(t).some((([t,e])=>this.#wr[t]!==e))&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#wr,t)})}#Ir(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#kr(),this.#Sr(),this.#Tr(),this.#Lr({isEditing:this.#or!==i.AnnotationEditorType.NONE,isEmpty:this.#Dr(),hasSomethingToUndo:this.#Ki.hasSomethingToUndo(),hasSomethingToRedo:this.#Ki.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#Er(),this.#Cr(),this.#Pr(),this.#Lr({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#ws){this.#ws=t;for(const t of this.#ws)this.#Ir(t.defaultPropertiesToUpdate)}}getId(){return this.#sr.getId()}get currentLayer(){return this.#Vi.get(this.#Xi)}getLayer(t){return this.#Vi.get(t)}get currentPageIndex(){return this.#Xi}addLayer(t){this.#Vi.set(t.pageIndex,t),this.#ir?t.enable():t.disable()}removeLayer(t){this.#Vi.delete(t.pageIndex)}updateMode(t,e=null,s=!1){if(this.#or!==t)if((this.#or=t)===i.AnnotationEditorType.NONE)this.setEditingState(!1),this.#Fr();else{this.setEditingState(!0),this.#Or(),this.unselectAll();for(const e of this.#Vi.values())e.updateMode(t);if(!e&&s)this.addNewEditorFromKeyboard();else if(e)for(const t of this.#$i.values())if(t.annotationElementId===e){this.setSelected(t),t.enterInEditMode();break}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==this.#or&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){if(this.#ws){switch(t){case i.AnnotationEditorParamsType.CREATE:return void this.currentLayer.addNewEditor();case i.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:this.#ar?.updateColor(e)}for(const s of this.#lr)s.updateParams(t,e);for(const s of this.#ws)s.updateDefaultParams(t,e)}}enableWaiting(t=!1){if(this.#rr!==t){this.#rr=t;for(const e of this.#Vi.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}#Or(){if(!this.#ir){this.#ir=!0;for(const t of this.#Vi.values())t.enable()}}#Fr(){if(this.unselectAll(),this.#ir){this.#ir=!1;for(const t of this.#Vi.values())t.disable()}}getEditors(t){var e=[];for(const s of this.#$i.values())s.pageIndex===t&&e.push(s);return e}getEditor(t){return this.#$i.get(t)}addEditor(t){this.#$i.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#tr&&clearTimeout(this.#tr),this.#tr=setTimeout((()=>{this.focusMainContainer(),this.#tr=null}),0)),this.#$i.delete(t.id),this.unselect(t),t.annotationElementId&&this.#Yi.has(t.annotationElementId)||this.#Wi?.remove(t.id)}addDeletedAnnotationElement(t){this.#Yi.add(t.annotationElementId),t.deleted=!0}isDeletedAnnotationElement(t){return this.#Yi.has(t)}removeDeletedAnnotationElement(t){this.#Yi.delete(t.annotationElementId),t.deleted=!1}#Mr(t){var e=this.#Vi.get(t.pageIndex);e?e.addOrRebuild(t):this.addEditor(t)}setActiveEditor(t){this.#qi!==t&&(this.#qi=t)&&this.#Ir(t.propertiesToUpdate)}toggleSelected(t){this.#lr.has(t)?(this.#lr.delete(t),t.unselect(),this.#Lr({hasSelectedEditor:this.hasSelection})):(this.#lr.add(t),t.select(),this.#Ir(t.propertiesToUpdate),this.#Lr({hasSelectedEditor:!0}))}setSelected(t){for(const e of this.#lr)e!==t&&e.unselect();this.#lr.clear(),this.#lr.add(t),t.select(),this.#Ir(t.propertiesToUpdate),this.#Lr({hasSelectedEditor:!0})}isSelected(t){return this.#lr.has(t)}get firstSelectedEditor(){return this.#lr.values().next().value}unselect(t){t.unselect(),this.#lr.delete(t),this.#Lr({hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==this.#lr.size}get isEnterHandled(){return 1===this.#lr.size&&this.firstSelectedEditor.isEnterHandled}undo(){this.#Ki.undo(),this.#Lr({hasSomethingToUndo:this.#Ki.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#Dr()})}redo(){this.#Ki.redo(),this.#Lr({hasSomethingToUndo:!0,hasSomethingToRedo:this.#Ki.hasSomethingToRedo(),isEmpty:this.#Dr()})}addCommands(t){this.#Ki.add(t),this.#Lr({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#Dr()})}#Dr(){if(0===this.#$i.size)return!0;if(1===this.#$i.size)for(const t of this.#$i.values())return t.isEmpty();return!1}delete(){if(this.commitOrRemove(),this.hasSelection){const t=[...this.#lr];this.addCommands({cmd:()=>{for(const e of t)e.remove()},undo:()=>{for(const e of t)this.#Mr(e)},mustExec:!0})}}commitOrRemove(){this.#qi?.commitOrRemove()}hasSomethingToControl(){return this.#qi||this.hasSelection}#Rr(t){this.#lr.clear();for(const e of t)e.isEmpty()||(this.#lr.add(e),e.select());this.#Lr({hasSelectedEditor:!0})}selectAll(){for(const t of this.#lr)t.commit();this.#Rr(this.#$i.values())}unselectAll(){if((!this.#qi||(this.#qi.commitOrRemove(),this.#or===i.AnnotationEditorType.NONE))&&this.hasSelection){for(const t of this.#lr)t.unselect();this.#lr.clear(),this.#Lr({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,s=!1){if(s||this.commitOrRemove(),this.hasSelection){this.#xr[0]+=t,this.#xr[1]+=e;const[s,i]=this.#xr,r=[...this.#lr];this.#Ar&&clearTimeout(this.#Ar),this.#Ar=setTimeout((()=>{this.#Ar=null,this.#xr[0]=this.#xr[1]=0,this.addCommands({cmd:()=>{for(const t of r)this.#$i.has(t.id)&&t.translateInPage(s,i)},undo:()=>{for(const t of r)this.#$i.has(t.id)&&t.translateInPage(-s,-i)},mustExec:!1})}),1e3);for(const s of r)s.translateInPage(t,e)}}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#Ji=new Map;for(const t of this.#lr)this.#Ji.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#Ji)return!1;this.disableUserSelect(!1);const t=this.#Ji;this.#Ji=null;let e=!1;for(var[{x:s,y:i,pageIndex:r},n]of t)n.newX=s,n.newY=i,n.newPageIndex=r,e||=s!==n.savedX||i!==n.savedY||r!==n.savedPageIndex;if(!e)return!1;const a=(t,e,s,i)=>{var r;this.#$i.has(t.id)&&((r=this.#Vi.get(i))?t._setParentAndPosition(r,e,s):(t.pageIndex=i,t.x=e,t.y=s))};return this.addCommands({cmd:()=>{for(var[e,{newX:s,newY:i,newPageIndex:r}]of t)a(e,s,i,r)},undo:()=>{for(var[e,{savedX:s,savedY:i,savedPageIndex:r}]of t)a(e,s,i,r)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#Ji)for(const s of this.#Ji.keys())s.drag(t,e)}rebuild(t){var e;null===t.parent?(e=this.getLayer(t.pageIndex))?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild()):t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||1===this.#lr.size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#qi===t}getActive(){return this.#qi}getMode(){return this.#or}get imageManager(){return(0,i.shadow)(this,"imageManager",new a)}}},171:(t,e,s)=>{s.d(e,{PDFFetchStream:()=>l});var i=s(266),r=s(253);function n(t,e,s){return{method:"GET",headers:t,signal:s.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function a(t){var e=new Headers;for(const i in t){var s=t[i];void 0!==s&&e.append(i,s)}return e}function o(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:((0,i.warn)("getArrayBuffer - unexpected data format: "+t),new Uint8Array(t).buffer)}class l{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new h(this),this._fullRequestReader}getRangeReader(t,e){return e<=this._progressiveDataLength?null:(t=new d(this,t,e),this._rangeRequestReaders.push(t),t)}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class h{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null,t=t.source,this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=new i.PromiseCapability,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._headers=a(this._stream.httpHeaders);const e=t.url;fetch(e,n(this._headers,this._withCredentials,this._abortController)).then((t=>{if(!(0,r.validateResponseStatus)(t.status))throw(0,r.createResponseStatusError)(t.status,e);this._reader=t.body.getReader(),this._headersCapability.resolve();var s=e=>t.headers.get(e),{allowRangeRequests:n,suggestedLength:a}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:s,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=n,this._contentLength=a||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(s),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new i.AbortException("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;var{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:o(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class d{constructor(t,e,s){this._stream=t,this._reader=null,this._loaded=0,t=t.source,this._withCredentials=t.withCredentials||!1,this._readCapability=new i.PromiseCapability,this._isStreamingSupported=!t.disableStream,this._abortController=new AbortController,this._headers=a(this._stream.httpHeaders),this._headers.append("Range",`bytes=${e}-`+(s-1));const o=t.url;fetch(o,n(this._headers,this._withCredentials,this._abortController)).then((t=>{if(!(0,r.validateResponseStatus)(t.status))throw(0,r.createResponseStatusError)(t.status,o);this._readCapability.resolve(),this._reader=t.body.getReader()})).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;var{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:o(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}},742:(t,e,s)=>{s.d(e,{FontFaceObject:()=>n,FontLoader:()=>r});var i=s(266);class r{#Br=new Set;constructor({ownerDocument:t=globalThis.document}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));var e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#Br.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(t&&!this.#Br.has(t.loadedName))if((0,i.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){var{loadedName:s,src:r,style:n}=t,r=new FontFace(s,r,n);this.addNativeFontFace(r);try{await r.load(),this.#Br.add(s),e?.(t)}catch{(0,i.warn)(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(r)}}else(0,i.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}async bind(t){if(!(t.attached||t.missingFile&&!t.systemFontInfo))if(t.attached=!0,t.systemFontInfo)await this.loadSystemFont(t);else if(this.isFontLoadingAPISupported){var e=t.createNativeFontFace();if(e){this.addNativeFontFace(e);try{await e.loaded}catch(s){throw(0,i.warn)(`Failed to load font '${e.family}': '${s}'.`),t.disableFontFace=!0,s}}}else(e=t.createFontFaceRule())&&(this.insertRule(e),this.isSyncFontLoadingSupported||await new Promise((e=>{e=this._queueLoadingCallback(e),this._prepareFontLoadEvent(t,e)})))}get isFontLoadingAPISupported(){var t=!!this._document?.fonts;return(0,i.shadow)(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(i.isNodeJS||"undefined"!=typeof navigator&&"string"==typeof navigator?.userAgent&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),(0,i.shadow)(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){const e=this.loadingRequests,s={done:!1,complete:function(){for((0,i.assert)(!s.done,"completeRequest() cannot be called twice."),s.done=!0;0<e.length&&e[0].done;){var t=e.shift();setTimeout(t.callback,0)}},callback:t};return e.push(s),s}get _loadTestFont(){var t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,i.shadow)(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function s(t,e){return t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|255&t.charCodeAt(e+3)}function r(t,e,s,i){return t.substring(0,e)+i+t.substring(e+s)}let n,a;var o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let h=0;var d="lt"+Date.now()+this.loadTestFontId++;let c=s(o=r(this._loadTestFont,976,d.length,d),16);for(n=0,a=d.length-3;n<a;n+=4)c=c-1482184792+s(d,n)|0;n<d.length&&(c=c-1482184792+s(d+"XXX",n)|0),o=r(o,16,4,(0,i.string32)(c)),o=`url(data:font/opentype;base64,${btoa(o)});`,this.insertRule(`@font-face {font-family:"${d}";src:${o}}`);const u=this._document.createElement("div");u.style.visibility="hidden",u.style.width=u.style.height="10px",u.style.position="absolute",u.style.top=u.style.left="0px";for(const e of[t.loadedName,d]){var p=this._document.createElement("span");p.textContent="Hi",p.style.fontFamily=e,u.append(p)}this._document.body.append(u),function t(e,s){30<++h?((0,i.warn)("Load test font never loaded."),s()):(l.font="30px "+e,l.fillText(".",0,20),0<l.getImageData(0,0,1,1).data[3]?s():setTimeout(t.bind(null,e,s)))}(d,(()=>{u.remove(),e.complete()}))}}class n{constructor(t,{isEvalSupported:e=!0,disableFontFace:s=!1,ignoreErrors:i=!1,inspectFont:r=null}){this.compiledGlyphs=Object.create(null);for(const e in t)this[e]=t[e];this.isEvalSupported=!1!==e,this.disableFontFace=!0===s,this.ignoreErrors=!0===i,this._inspectFont=r}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;var e;return t=this.cssFontInfo?(e={weight:this.cssFontInfo.fontWeight},this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),new FontFace(this.cssFontInfo.fontFamily,this.data,e)):new FontFace(this.loadedName,this.data,{}),this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;var t=(0,i.bytesToString)(this.data);t=`url(data:${this.mimetype};base64,${btoa(t)});`;let e;if(this.cssFontInfo){let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}else e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(void 0!==this.compiledGlyphs[e])return this.compiledGlyphs[e];let s;try{s=t.get(this.loadedName+"_path_"+e)}catch(t){if(this.ignoreErrors)return(0,i.warn)(`getPathGenerator - ignoring character: "${t}".`),this.compiledGlyphs[e]=function(t,e){};throw t}if(this.isEvalSupported&&i.FeatureTest.isEvalSupported){var r=[];for(const t of s){var n=void 0!==t.args?t.args.join(","):"";r.push("c.",t.cmd,"(",n,");\n")}return this.compiledGlyphs[e]=new Function("c","size",r.join(""))}return this.compiledGlyphs[e]=function(t,e){for(const i of s)"scale"===i.cmd&&(i.args=[e,-e]),t[i.cmd].apply(t,i.args)}}}},472:(t,e,s)=>{s.d(e,{Metadata:()=>r});var i=s(266);class r{#Nr;#zr;constructor({parsedData:t,rawData:e}){this.#Nr=t,this.#zr=e}getRaw(){return this.#zr}get(t){return this.#Nr.get(t)??null}getAll(){return(0,i.objectFromMap)(this.#Nr)}has(t){return this.#Nr.has(t)}}},474:(t,e,s)=>{s.d(e,{PDFNetworkStream:()=>o});var i=s(266),r=s(253);function n(t){return"string"!=typeof(t=t.response)?t:(0,i.stringToBytes)(t).buffer}class a{constructor(t,e={}){this.url=t,this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&e.httpHeaders||Object.create(null),this.withCredentials=e.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,s){var i={begin:t,end:e};for(const t in s)i[t]=s[t];return this.request(i)}requestFull(t){return this.request(t)}request(t){const e=new XMLHttpRequest;var s=this.currXhrId++,i=this.pendingRequests[s]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const t in this.httpHeaders){var r=this.httpHeaders[t];void 0!==r&&e.setRequestHeader(t,r)}return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-`+(t.end-1)),i.expectedStatus=206):i.expectedStatus=200,e.responseType="arraybuffer",t.onError&&(e.onerror=function(s){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,s),e.onprogress=this.onProgress.bind(this,s),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),s}onProgress(t,e){(t=this.pendingRequests[t])&&t.onProgress?.(e)}onStateChange(t,e){var s,i,r=this.pendingRequests[t];r&&(2<=(s=r.xhr).readyState&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),4===s.readyState)&&t in this.pendingRequests&&(delete this.pendingRequests[t],0===s.status&&this.isHttp||(200!==(t=s.status||200)||206!==r.expectedStatus)&&t!==r.expectedStatus?r.onError?.(s.status):(i=n(s),206===t?(t=s.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(t),r.onDone({begin:parseInt(t[1],10),chunk:i})):i?r.onDone({begin:0,chunk:i}):r.onError?.(s.status)))}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){var e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class o{constructor(t){this._source=t,this._manager=new a(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){0<=(t=this._rangeRequestReaders.indexOf(t))&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new l(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){return(t=new h(this._manager,t,e)).onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(t),t}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class l{constructor(t,e){this._manager=t;var s={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(s),this._headersReceivedCapability=new i.PromiseCapability,this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){var t=this._fullRequestId;const e=this._manager.getRequestXhr(t);var s=t=>e.getResponseHeader(t),{allowRangeRequests:i,suggestedLength:n}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=n||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(s),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}_onDone(t){if(t&&(0<this._requests.length?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(0<this._cachedChunks.length)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=(0,r.createResponseStatusError)(t,this._url),this._headersReceivedCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;var t;return 0<this._cachedChunks.length?{value:this._cachedChunks.shift(),done:!1}:this._done?{value:void 0,done:!0}:(t=new i.PromiseCapability,this._requests.push(t),t.promise)}cancel(t){this._done=!0,this._headersReceivedCapability.reject(t);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class h{constructor(t,e,s){this._manager=t;var i={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,s,i),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(t){t=t.chunk,0<this._requests.length?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=(0,r.createResponseStatusError)(t,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;var t;return null!==this._queuedChunk?(t=this._queuedChunk,this._queuedChunk=null,{value:t,done:!1}):this._done?{value:void 0,done:!0}:(t=new i.PromiseCapability,this._requests.push(t),t.promise)}cancel(t){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},253:(t,e,s)=>{s.d(e,{createResponseStatusError:()=>function(t,e){return 404===t||0===t&&e.startsWith("file:")?new i.MissingPDFException('Missing PDF "'+e+'".'):new i.UnexpectedResponseException(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t)},extractFilenameFromHeader:()=>function(t){if(t=t("Content-Disposition")){let e=function(t){let e=!0,s=n("filename\\*","i").exec(t);var r;if(s)return r=l(s=s[1]),o(r=d(r=h(r=unescape(r))));if(s=function(t){for(var e=[],s=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");null!==(i=s.exec(t));){var[,i,r,a]=i;if((i=parseInt(i,10))in e){if(0===i)break}else e[i]=[r,a]}var o=[];for(let t=0;t<e.length&&t in e;++t){let[s,i]=e[t];i=l(i),s&&(i=unescape(i),0===t)&&(i=h(i)),o.push(i)}return o.join("")}(t))return o(d(s));if(s=n("filename","i").exec(t))return s=s[1],o(d(l(s)));function n(t,e){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',e)}function a(t,s){if(t){if(!/^[\x00-\xFF]+$/.test(s))return s;try{var r=new TextDecoder(t,{fatal:!0}),n=(0,i.stringToBytes)(s);s=r.decode(n),e=!1}catch{}}return s}function o(t){return e&&/[\x80-\xff]/.test(t)&&(t=a("utf-8",t),e)?a("iso-8859-1",t):t}function l(t){if(t.startsWith('"')){var e=t.slice(1).split('\\"');for(let t=0;t<e.length;++t){var s=e[t].indexOf('"');-1!==s&&(e[t]=e[t].slice(0,s),e.length=t+1),e[t]=e[t].replaceAll(/\\(.)/g,"$1")}t=e.join('"')}return t}function h(t){var e=t.indexOf("'");return-1===e?t:a(t.slice(0,e),t.slice(e+1).replace(/^[^']*'/,""))}function d(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(t,e,s,i){if("q"===s||"Q"===s)return a(e,i=(i=i.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,(function(t,e){return String.fromCharCode(parseInt(e,16))})));try{i=atob(i)}catch{}return a(e,i)}))}return""}(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if((0,r.isPdfFile)(e))return e}return null},validateRangeRequestCapabilities:()=>function({getResponseHeader:t,isHttp:e,rangeChunkSize:s,disableRange:i}){var r={allowRangeRequests:!1,suggestedLength:void 0},n=parseInt(t("Content-Length"),10);return!Number.isInteger(n)||(r.suggestedLength=n)<=2*s||!i&&e&&"bytes"===t("Accept-Ranges")&&"identity"===(t("Content-Encoding")||"identity")&&(r.allowRangeRequests=!0),r},validateResponseStatus:()=>function(t){return 200===t||206===t}});var i=s(266),r=s(473)},498:(t,e,s)=>{s.a(t,(async(t,i)=>{try{s.d(e,{PDFNodeStream:()=>u});var r=s(266),n=s(253);let o,l,h,d;r.isNodeJS&&(o=await Promise.resolve().then((function(){return ur})),l=await Promise.resolve().then((function(){return ur})),h=await Promise.resolve().then((function(){return ur})),d=await Promise.resolve().then((function(){return ur})));const c=/^file:\/\/\/[a-zA-Z]:\//;class u{constructor(t){this.source=t,this.url=function(t){var e=d.parse(t);if("file:"!==e.protocol&&!e.host){if(/^[a-z]:[/\\]/i.test(t))return d.parse("file:///"+t);e.host||(e.protocol="file:")}return e}(t.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new(this.isFsUrl?v:f)(this),this._fullRequestReader}getRangeReader(t,e){return e<=this._progressiveDataLength?null:(t=new(this.isFsUrl?b:m)(this,t,e),this._rangeRequestReaders.push(t),t)}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class p{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,t=t.source,this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=new r.PromiseCapability,this._headersCapability=new r.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;var t=this._readableStream.read();return null===t?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){(this._readableStream=t).on("readable",(()=>{this._readCapability.resolve()})),t.on("end",(()=>{t.destroy(),this._done=!0,this._readCapability.resolve()})),t.on("error",(t=>{this._error(t)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new r.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class g{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new r.PromiseCapability,t=t.source,this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;var t=this._readableStream.read();return null===t?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){(this._readableStream=t).on("readable",(()=>{this._readCapability.resolve()})),t.on("end",(()=>{t.destroy(),this._done=!0,this._readCapability.resolve()})),t.on("error",(t=>{this._error(t)})),this._storedError&&this._readableStream.destroy(this._storedError)}}function a(t,e){return{protocol:t.protocol,auth:t.auth,host:t.hostname,port:t.port,path:t.path,method:"GET",headers:e}}class f extends p{constructor(t){super(t);var e=e=>{var s,i;404===e.statusCode?(s=new r.MissingPDFException(`Missing PDF "${this._url}".`),this._storedError=s,this._headersCapability.reject(s)):(this._headersCapability.resolve(),this._setReadableStream(e),({allowRangeRequests:e,suggestedLength:i}=(0,n.validateRangeRequestCapabilities)({getResponseHeader:s=t=>this._readableStream.headers[t.toLowerCase()],isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange})),this._isRangeSupported=e,this._contentLength=i||this._contentLength,this._filename=(0,n.extractFilenameFromHeader)(s))};this._request=null,"http:"===this._url.protocol?this._request=l.request(a(this._url,t.httpHeaders),e):this._request=h.request(a(this._url,t.httpHeaders),e),this._request.on("error",(t=>{this._storedError=t,this._headersCapability.reject(t)})),this._request.end()}}class m extends g{constructor(t,e,s){super(t),this._httpHeaders={};for(const e in t.httpHeaders){var i=t.httpHeaders[e];void 0!==i&&(this._httpHeaders[e]=i)}this._httpHeaders.Range=`bytes=${e}-`+(s-1),e=t=>{var e;404===t.statusCode?(e=new r.MissingPDFException(`Missing PDF "${this._url}".`),this._storedError=e):this._setReadableStream(t)},this._request=null,"http:"===this._url.protocol?this._request=l.request(a(this._url,this._httpHeaders),e):this._request=h.request(a(this._url,this._httpHeaders),e),this._request.on("error",(t=>{this._storedError=t})),this._request.end()}}class v extends p{constructor(t){super(t);let e=decodeURIComponent(this._url.path);c.test(this._url.href)&&(e=e.replace(/^\//,"")),o.lstat(e,((t,s)=>{t?("ENOENT"===t.code&&(t=new r.MissingPDFException(`Missing PDF "${e}".`)),this._storedError=t,this._headersCapability.reject(t)):(this._contentLength=s.size,this._setReadableStream(o.createReadStream(e)),this._headersCapability.resolve())}))}}class b extends g{constructor(t,e,s){super(t);let i=decodeURIComponent(this._url.path);c.test(this._url.href)&&(i=i.replace(/^\//,"")),this._setReadableStream(o.createReadStream(i,{start:e,end:s-1}))}}i()}catch(t){i(t)}}),1)},738:(t,e,s)=>{s.a(t,(async(t,i)=>{try{s.d(e,{NodeCMapReaderFactory:()=>h,NodeCanvasFactory:()=>l,NodeFilterFactory:()=>o,NodeStandardFontDataFactory:()=>d});var r=s(822);let t,n;if(s(266).isNodeJS){t=await Promise.resolve().then((function(){return ur}));try{n=await Promise.resolve().then((function(){return ur}))}catch{}try{await Promise.resolve().then((function(){return Cr}))}catch{}}const a=function(e){return new Promise(((s,i)=>{t.readFile(e,((t,e)=>{t||!e?i(new Error(t)):s(new Uint8Array(e))}))}))};class o extends r.BaseFilterFactory{}class l extends r.BaseCanvasFactory{_createCanvas(t,e){return n.createCanvas(t,e)}}class h extends r.BaseCMapReaderFactory{_fetchData(t,e){return a(t).then((t=>({cMapData:t,compressionType:e})))}}class d extends r.BaseStandardFontDataFactory{_fetchData(t){return a(t)}}i()}catch(t){i(t)}}),1)},890:(t,e,s)=>{s.d(e,{OptionalContentConfig:()=>o});var i=s(266),r=s(825);const n=Symbol("INTERNAL");class a{#jr=!0;constructor(t,e){this.name=t,this.intent=e}get visible(){return this.#jr}_setVisible(t,e){t!==n&&(0,i.unreachable)("Internal method `_setVisible` called."),this.#jr=e}}class o{#Ur=null;#Hr=new Map;#qr=null;#$r=null;constructor(t){if(this.name=null,(this.creator=null)!==t){this.name=t.name,this.creator=t.creator,this.#$r=t.order;for(const e of t.groups)this.#Hr.set(e.id,new a(e.name,e.intent));if("OFF"===t.baseState)for(const t of this.#Hr.values())t._setVisible(n,!1);for(const e of t.on)this.#Hr.get(e)._setVisible(n,!0);for(const e of t.off)this.#Hr.get(e)._setVisible(n,!1);this.#qr=this.getHash()}}#Vr(t){var e=t.length;if(e<2)return!0;var s=t[0];for(let n=1;n<e;n++){var r=t[n];let e;if(Array.isArray(r))e=this.#Vr(r);else{if(!this.#Hr.has(r))return(0,i.warn)("Optional content group not found: "+r),!0;e=this.#Hr.get(r).visible}switch(s){case"And":if(e)break;return!1;case"Or":if(e)return!0;break;case"Not":return!e;default:return!0}}return"And"===s}isVisible(t){if(0!==this.#Hr.size)if(t){if("OCG"===t.type)return this.#Hr.has(t.id)?this.#Hr.get(t.id).visible:((0,i.warn)("Optional content group not found: "+t.id),!0);if("OCMD"===t.type){if(t.expression)return this.#Vr(t.expression);if(!t.policy||"AnyOn"===t.policy){for(const e of t.ids){if(!this.#Hr.has(e))return(0,i.warn)("Optional content group not found: "+e),!0;if(this.#Hr.get(e).visible)return!0}return!1}if("AllOn"===t.policy)for(const e of t.ids){if(!this.#Hr.has(e))return(0,i.warn)("Optional content group not found: "+e),!0;if(!this.#Hr.get(e).visible)return!1}else{if("AnyOff"===t.policy){for(const e of t.ids){if(!this.#Hr.has(e))return(0,i.warn)("Optional content group not found: "+e),!0;if(!this.#Hr.get(e).visible)return!0}return!1}if("AllOff"===t.policy)for(const e of t.ids){if(!this.#Hr.has(e))return(0,i.warn)("Optional content group not found: "+e),!0;if(this.#Hr.get(e).visible)return!1}else(0,i.warn)(`Unknown optional content policy ${t.policy}.`)}}else(0,i.warn)(`Unknown group type ${t.type}.`)}else(0,i.warn)("Optional content group not defined.");return!0}setVisibility(t,e=!0){this.#Hr.has(t)?(this.#Hr.get(t)._setVisible(n,!!e),this.#Ur=null):(0,i.warn)("Optional content group not found: "+t)}get hasInitialVisibility(){return null===this.#qr||this.getHash()===this.#qr}getOrder(){return this.#Hr.size?this.#$r?this.#$r.slice():[...this.#Hr.keys()]:null}getGroups(){return 0<this.#Hr.size?(0,i.objectFromMap)(this.#Hr):null}getGroup(t){return this.#Hr.get(t)||null}getHash(){if(null!==this.#Ur)return this.#Ur;var t,e,s=new r.MurmurHash3_64;for([t,e]of this.#Hr)s.update(t+":"+e.visible);return this.#Ur=s.hexdigest()}}},739:(t,e,s)=>{s.d(e,{renderTextLayer:()=>function(t){return(t=new d(t))._render(),t},updateTextLayer:()=>function({container:t,viewport:e,textDivs:s,textDivProperties:i,isOffscreenCanvasSupported:n,mustRotate:a=!0,mustRescale:l=!0}){if(a&&(0,r.setLayerDimensions)(t,{rotation:e.rotation}),l){a=o(0,n);var d={prevFontSize:null,prevFontFamily:null,div:null,scale:e.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:a};for(const t of s)d.properties=i.get(t),d.div=t,h(d)}}});var i=s(266),r=s(473);const n=30,a=new Map;function o(t,e){return(e&&i.FeatureTest.isOffscreenCanvasSupported?new OffscreenCanvas(t,t):((e=document.createElement("canvas")).width=e.height=t,e)).getContext("2d",{alpha:!1})}function l(t,e,s){var r=document.createElement("span"),l={angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0},h=(t._textDivs.push(r),i.Util.transform(t._transform,e.transform));let d=Math.atan2(h[1],h[0]);var c=((s=s[e.fontName]).vertical&&(d+=Math.PI/2),t._fontInspectorEnabled&&s.fontSubstitution||s.fontFamily),u=Math.hypot(h[2],h[3]),p=u*function(t,e){var s;if(s=a.get(t))return s;(s=o(n,e)).font="30px "+t;let i=(e=s.measureText("")).fontBoundingBoxAscent,r=Math.abs(e.fontBoundingBoxDescent);if(i)return e=i/(i+r),a.set(t,e),s.canvas.width=s.canvas.height=0,e;s.strokeStyle="red",s.clearRect(0,0,n,n),s.strokeText("g",0,0);let l=s.getImageData(0,0,n,n).data;r=0;for(let t=l.length-1-3;0<=t;t-=4)if(0<l[t]){r=Math.ceil(t/4/n);break}s.clearRect(0,0,n,n),s.strokeText("A",0,n),l=s.getImageData(0,0,n,n).data;for(let t=i=0,e=l.length;t<e;t+=4)if(0<l[t]){i=n-Math.floor(t/4/n);break}return s.canvas.width=s.canvas.height=0,i?(e=i/(i+r),a.set(t,e),e):(a.set(t,.8),.8)}(c,t._isOffscreenCanvasSupported);let g,f;f=0===d?(g=h[4],h[5]-p):(g=h[4]+p*Math.sin(d),h[5]-p*Math.cos(d));h="calc(var(--scale-factor)*",p=r.style;t._container===t._rootContainer?(p.left=(100*g/t._pageWidth).toFixed(2)+"%",p.top=(100*f/t._pageHeight).toFixed(2)+"%"):(p.left=h+g.toFixed(2)+"px)",p.top=h+f.toFixed(2)+"px)"),p.fontSize=h+u.toFixed(2)+"px)",p.fontFamily=c,l.fontSize=u,r.setAttribute("role","presentation"),r.textContent=e.str,r.dir=e.dir,t._fontInspectorEnabled&&(r.dataset.fontName=s.fontSubstitutionLoadedName||e.fontName),0!==d&&(l.angle=d*(180/Math.PI));let m=!1;(m=1<e.str.length||" "!==e.str&&e.transform[0]!==e.transform[3]&&(h=Math.abs(e.transform[0]))!==(p=Math.abs(e.transform[3]))&&1.5<Math.max(h,p)/Math.min(h,p)||m)&&(l.canvasWidth=s.vertical?e.height:e.width),t._textDivProperties.set(r,l),t._isReadableStream&&t._layoutText(r)}function h(t){var e,s,i,{div:r,scale:n,properties:a,ctx:o,prevFontSize:l,prevFontFamily:h}=t,d=r.style;let c="";0!==a.canvasWidth&&a.hasText&&(e=d.fontFamily,({canvasWidth:s,fontSize:i}=a),0<(l=(l===i&&h===e||(o.font=i*n+"px "+e,t.prevFontSize=i,t.prevFontFamily=e),o.measureText(r.textContent)).width))&&(c=`scaleX(${s*n/l})`),0<(c=0!==a.angle?`rotate(${a.angle}deg) `+c:c).length&&(d.transform=c)}class d{constructor({textContentSource:t,container:e,viewport:s,textDivs:n,textDivProperties:a,textContentItemsStr:l,isOffscreenCanvasSupported:h}){this._textContentSource=t,this._isReadableStream=t instanceof ReadableStream,this._container=this._rootContainer=e,this._textDivs=n||[],this._textContentItemsStr=l||[],this._isOffscreenCanvasSupported=h,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=a||new WeakMap,this._canceled=!1,this._capability=new i.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:s.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:o(0,h)};var{pageWidth:t,pageHeight:n,pageX:l,pageY:a}=s.rawDims;this._transform=[1,0,0,-1,-l,a+n],this._pageWidth=t,this._pageHeight=n,(0,r.setLayerDimensions)(e,s),this._capability.promise.finally((()=>{this._layoutTextParams=null})).catch((()=>{}))}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new i.AbortException("TextLayer task cancelled.")).catch((()=>{})),this._reader=null),this._capability.reject(new i.AbortException("TextLayer task cancelled."))}_processItems(t,e){for(const i of t){var s;void 0===i.str?"beginMarkedContentProps"===i.type||"beginMarkedContent"===i.type?(s=this._container,this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==i.id&&this._container.setAttribute("id",""+i.id),s.append(this._container)):"endMarkedContent"===i.type&&(this._container=this._container.parentNode):(this._textContentItemsStr.push(i.str),l(this,i,e))}}_layoutText(t){var e=this._layoutTextParams.properties=this._textDivProperties.get(t);this._layoutTextParams.div=t,h(this._layoutTextParams),e.hasText&&this._container.append(t),e.hasEOL&&((t=document.createElement("br")).setAttribute("role","presentation"),this._container.append(t))}_render(){const t=new i.PromiseCapability;let e=Object.create(null);if(this._isReadableStream){const s=()=>{this._reader.read().then((({value:i,done:r})=>{r?t.resolve():(Object.assign(e,i.styles),this._processItems(i.items,e),s())}),t.reject)};this._reader=this._textContentSource.getReader(),s()}else{if(!this._textContentSource)throw new Error('No "textContentSource" parameter specified.');var{items:s,styles:r}=this._textContentSource;this._processItems(s,r),t.resolve()}t.promise.then((()=>{e=null,function(t){if(!t._canceled){var e=t._textDivs,s=t._capability;if(!(1e5<e.length||t._isReadableStream))for(const s of e)t._layoutText(s);s.resolve()}}(this)}),this._capability.reject)}}},92:(t,e,s)=>{s.d(e,{PDFDataTransportStream:()=>n});var i=s(266),r=s(473);class n{constructor({length:t,initialData:e,progressiveDone:s=!1,contentDispositionFilename:r=null,disableRange:n=!1,disableStream:a=!1},o){(0,i.assert)(o,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=s,this._contentDispositionFilename=r,0<e?.length&&(s=(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e:new Uint8Array(e)).buffer,this._queuedChunks.push(s)),this._pdfDataRangeTransport=o,this._isStreamingSupported=!a,this._isRangeSupported=!n,this._contentLength=t,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener(((t,e)=>{this._onReceiveData({begin:t,chunk:e})})),this._pdfDataRangeTransport.addProgressListener(((t,e)=>{this._onProgress({loaded:t,total:e})})),this._pdfDataRangeTransport.addProgressiveReadListener((t=>{this._onReceiveData({chunk:t})})),this._pdfDataRangeTransport.addProgressiveDoneListener((()=>{this._onProgressiveDone()})),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:t,chunk:e}){const s=(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e:new Uint8Array(e)).buffer;void 0===t?this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s):(e=this._rangeReaders.some((function(e){return e._begin===t&&(e._enqueue(s),!0)})),(0,i.assert)(e,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found."))}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){void 0===t.total?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){0<=(t=this._rangeReaders.indexOf(t))&&this._rangeReaders.splice(t,1)}getFullReader(){(0,i.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");var t=this._queuedChunks;return this._queuedChunks=null,new a(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){var s;return e<=this._progressiveDataLength?null:(s=new o(this,t,e),this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(s),s)}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class a{constructor(t,e,s=!1,i=null){this._stream=t,this._done=s||!1,this._filename=(0,r.isPdfFile)(i)?i:null,this._queuedChunks=e||[],this._loaded=0;for(const t of this._queuedChunks)this._loaded+=t.byteLength;this._requests=[],this._headersReady=Promise.resolve(),(t._fullRequestReader=this).onProgress=null}_enqueue(t){this._done||(0<this._requests.length?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){var t;return 0<this._queuedChunks.length?{value:this._queuedChunks.shift(),done:!1}:this._done?{value:void 0,done:!0}:(t=new i.PromiseCapability,this._requests.push(t),t.promise)}cancel(t){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class o{constructor(t,e,s){this._stream=t,this._begin=e,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){var t;return this._queuedChunk?(t=this._queuedChunk,this._queuedChunk=null,{value:t,done:!1}):this._done?{value:void 0,done:!0}:(t=new i.PromiseCapability,this._requests.push(t),t.promise)}cancel(t){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},368:(t,e,s)=>{s.d(e,{GlobalWorkerOptions:()=>i});const i=Object.create(null);i.workerPort=null,i.workerSrc=""},160:(t,e,s)=>{s.d(e,{XfaLayer:()=>r});var i=s(521);class r{static setupStorage(t,e,s,i,r){var n=i.getValue(e,{value:null});switch(s.name){case"textarea":null!==n.value&&(t.textContent=n.value),"print"!==r&&t.addEventListener("input",(t=>{i.setValue(e,{value:t.target.value})}));break;case"input":if("radio"===s.attributes.type||"checkbox"===s.attributes.type){if(n.value===s.attributes.xfaOn?t.setAttribute("checked",!0):n.value===s.attributes.xfaOff&&t.removeAttribute("checked"),"print"===r)break;t.addEventListener("change",(t=>{i.setValue(e,{value:t.target.checked?t.target.getAttribute("xfaOn"):t.target.getAttribute("xfaOff")})}))}else{if(null!==n.value&&t.setAttribute("value",n.value),"print"===r)break;t.addEventListener("input",(t=>{i.setValue(e,{value:t.target.value})}))}break;case"select":if(null!==n.value){t.setAttribute("value",n.value);for(const t of s.children)t.attributes.value===n.value?t.attributes.selected=!0:t.attributes.hasOwnProperty("selected")&&delete t.attributes.selected}t.addEventListener("input",(t=>{t=-1===(t=t.target.options).selectedIndex?"":t[t.selectedIndex].value,i.setValue(e,{value:t})}))}}static setAttributes({html:t,element:e,storage:s=null,intent:i,linkService:r}){var n,a,o=e.attributes,l=t instanceof HTMLAnchorElement;for([n,a]of("radio"===o.type&&(o.name=o.name+"-"+i),Object.entries(o)))if(null!=a)switch(n){case"class":a.length&&t.setAttribute(n,a.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",a);break;case"style":Object.assign(t.style,a);break;case"textContent":t.textContent=a;break;default:l&&("href"===n||"newWindow"===n)||t.setAttribute(n,a)}l&&r.addLinkAttributes(t,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(t,o.dataId,e,s)}static render(t){var e=t.annotationStorage,s=t.linkService,r=t.xfaHtml,n=t.intent||"display",a=document.createElement(r.name),o=(r.attributes&&this.setAttributes({html:a,element:r,intent:n,linkService:s}),"richText"!==n),l=t.div,h=(l.append(a),t.viewport&&(t=`matrix(${t.viewport.transform.join(",")})`,l.style.transform=t),o&&l.setAttribute("class","xfaLayer xfaFont"),[]);if(0===r.children.length)r.value&&(t=document.createTextNode(r.value),a.append(t),o)&&i.XfaText.shouldBuildText(r.name)&&h.push(t);else{for(var d=[[r,-1,a]];0<d.length;){var c,[u,p,g]=d.at(-1);p+1===u.children.length?d.pop():null!==(p=u.children[++d.at(-1)[1]])&&("#text"===(u=p.name)?(c=document.createTextNode(p.value),h.push(c),g.append(c)):(c=p?.attributes?.xmlns?document.createElementNS(p.attributes.xmlns,u):document.createElement(u),g.append(c),p.attributes&&this.setAttributes({html:c,element:p,storage:e,intent:n,linkService:s}),0<p.children?.length?d.push([p,-1,c]):p.value&&(g=document.createTextNode(p.value),o&&i.XfaText.shouldBuildText(u)&&h.push(g),c.append(g))))}for(const t of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))t.setAttribute("readOnly",!0)}return{textDivs:h}}static update(t){var e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}},521:(t,e,s)=>{s.d(e,{XfaText:()=>i});class i{static textContent(t){const e=[];var s={items:e,styles:Object.create(null)};return function t(s){if(s){let n=null;var r=s.name;if("#text"===r)n=s.value;else{if(!i.shouldBuildText(r))return;s?.attributes?.textContent?n=s.attributes.textContent:s.value&&(n=s.value)}if(null!==n&&e.push({str:n}),s.children)for(const e of s.children)t(e)}}(t),s}static shouldBuildText(t){return!("textarea"===t||"input"===t||"option"===t||"select"===t)}}},907:(t,e,s)=>{s.a(t,(async(t,i)=>{try{s.d(e,{AbortException:()=>r.AbortException,AnnotationEditorLayer:()=>l.AnnotationEditorLayer,AnnotationEditorParamsType:()=>r.AnnotationEditorParamsType,AnnotationEditorType:()=>r.AnnotationEditorType,AnnotationEditorUIManager:()=>h.AnnotationEditorUIManager,AnnotationLayer:()=>d.AnnotationLayer,AnnotationMode:()=>r.AnnotationMode,CMapCompressionType:()=>r.CMapCompressionType,ColorPicker:()=>c.ColorPicker,DOMSVGFactory:()=>a.DOMSVGFactory,DrawLayer:()=>u.DrawLayer,FeatureTest:()=>r.FeatureTest,GlobalWorkerOptions:()=>p.GlobalWorkerOptions,ImageKind:()=>r.ImageKind,InvalidPDFException:()=>r.InvalidPDFException,MissingPDFException:()=>r.MissingPDFException,OPS:()=>r.OPS,Outliner:()=>g.Outliner,PDFDataRangeTransport:()=>n.PDFDataRangeTransport,PDFDateString:()=>a.PDFDateString,PDFWorker:()=>n.PDFWorker,PasswordResponses:()=>r.PasswordResponses,PermissionFlag:()=>r.PermissionFlag,PixelsPerInch:()=>a.PixelsPerInch,PromiseCapability:()=>r.PromiseCapability,RenderingCancelledException:()=>a.RenderingCancelledException,UnexpectedResponseException:()=>r.UnexpectedResponseException,Util:()=>r.Util,VerbosityLevel:()=>r.VerbosityLevel,XfaLayer:()=>f.XfaLayer,build:()=>n.build,createValidAbsoluteUrl:()=>r.createValidAbsoluteUrl,fetchData:()=>a.fetchData,getDocument:()=>n.getDocument,getFilenameFromUrl:()=>a.getFilenameFromUrl,getPdfFilenameFromUrl:()=>a.getPdfFilenameFromUrl,getXfaPageViewport:()=>a.getXfaPageViewport,isDataScheme:()=>a.isDataScheme,isPdfFile:()=>a.isPdfFile,noContextMenu:()=>a.noContextMenu,normalizeUnicode:()=>r.normalizeUnicode,renderTextLayer:()=>o.renderTextLayer,setLayerDimensions:()=>a.setLayerDimensions,shadow:()=>r.shadow,updateTextLayer:()=>o.updateTextLayer,version:()=>n.version});var r=s(266),n=s(406),a=s(473),o=s(739),l=s(629),h=s(812),d=s(640),c=s(97),u=s(423),p=s(368),g=s(405),f=s(160),m=t([n]);n=(m.then?(await m)():m)[0];i()}catch(t){i(t)}}))},694:(t,e,s)=>{s.d(e,{MessageHandler:()=>f});var i=s(266);const r=1,n=2,a=1,o=2,l=3,h=4,d=5,c=6,u=7,p=8;function g(t){switch(t instanceof Error||"object"==typeof t&&null!==t||(0,i.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new i.AbortException(t.message);case"MissingPDFException":return new i.MissingPDFException(t.message);case"PasswordException":return new i.PasswordException(t.message,t.code);case"UnexpectedResponseException":return new i.UnexpectedResponseException(t.message,t.status);case"UnknownErrorException":return new i.UnknownErrorException(t.message,t.details);default:return new i.UnknownErrorException(t.message,t.toString())}}class f{constructor(t,e,s){this.sourceName=t,this.targetName=e,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=t=>{const e=t.data;if(e.targetName===this.sourceName)if(e.stream)this.#Gr(e);else if(e.callback){t=e.callbackId;var i=this.callbackCapabilities[t];if(!i)throw new Error("Cannot resolve callback "+t);if(delete this.callbackCapabilities[t],e.callback===r)i.resolve(e.data);else{if(e.callback!==n)throw new Error("Unexpected callback case");i.reject(g(e.reason))}}else{const t=this.actionHandler[e.action];if(!t)throw new Error("Unknown action from worker: "+e.action);if(e.callbackId){const i=this.sourceName,a=e.sourceName;new Promise((function(s){s(t(e.data))})).then((function(t){s.postMessage({sourceName:i,targetName:a,callback:r,callbackId:e.callbackId,data:t})}),(function(t){s.postMessage({sourceName:i,targetName:a,callback:n,callbackId:e.callbackId,reason:g(t)})}))}else e.streamId?this.#Wr(e):t(e.data)}},s.addEventListener("message",this._onComObjOnMessage)}on(t,e){var s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=e}send(t,e,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},s)}sendWithPromise(t,e,s){var r=this.callbackId++,n=new i.PromiseCapability;this.callbackCapabilities[r]=n;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:e},s)}catch(t){n.reject(t)}return n.promise}sendWithStream(t,e,s,r){const n=this.streamId++,o=this.sourceName,l=this.targetName,h=this.comObj;return new ReadableStream({start:s=>{var a=new i.PromiseCapability;return this.streamControllers[n]={controller:s,startCall:a,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:o,targetName:l,action:t,streamId:n,data:e,desiredSize:s.desiredSize},r),a.promise},pull:t=>{var e=new i.PromiseCapability;return this.streamControllers[n].pullCall=e,h.postMessage({sourceName:o,targetName:l,stream:c,streamId:n,desiredSize:t.desiredSize}),e.promise},cancel:t=>{(0,i.assert)(t instanceof Error,"cancel must have a valid reason");var e=new i.PromiseCapability;return this.streamControllers[n].cancelCall=e,this.streamControllers[n].isClosed=!0,h.postMessage({sourceName:o,targetName:l,stream:a,streamId:n,reason:g(t)}),e.promise}},s)}#Wr(t){const e=t.streamId,s=this.sourceName,r=t.sourceName,n=this.comObj,a=this,o=this.actionHandler[t.action],c={enqueue(t,a=1,o){var l;this.isCancelled||(l=this.desiredSize,this.desiredSize-=a,0<l&&this.desiredSize<=0&&(this.sinkCapability=new i.PromiseCapability,this.ready=this.sinkCapability.promise),n.postMessage({sourceName:s,targetName:r,stream:h,streamId:e,chunk:t},o))},close(){this.isCancelled||(this.isCancelled=!0,n.postMessage({sourceName:s,targetName:r,stream:l,streamId:e}),delete a.streamSinks[e])},error(t){(0,i.assert)(t instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,n.postMessage({sourceName:s,targetName:r,stream:d,streamId:e,reason:g(t)}))},sinkCapability:new i.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[e]=c,new Promise((function(e){e(o(t.data,c))})).then((function(){n.postMessage({sourceName:s,targetName:r,stream:p,streamId:e,success:!0})}),(function(t){n.postMessage({sourceName:s,targetName:r,stream:p,streamId:e,reason:g(t)})}))}#Gr(t){const e=t.streamId,s=this.sourceName,r=t.sourceName,n=this.comObj,f=this.streamControllers[e],m=this.streamSinks[e];switch(t.stream){case p:t.success?f.startCall.resolve():f.startCall.reject(g(t.reason));break;case u:t.success?f.pullCall.resolve():f.pullCall.reject(g(t.reason));break;case c:m?(m.desiredSize<=0&&0<t.desiredSize&&m.sinkCapability.resolve(),m.desiredSize=t.desiredSize,new Promise((function(t){t(m.onPull?.())})).then((function(){n.postMessage({sourceName:s,targetName:r,stream:u,streamId:e,success:!0})}),(function(t){n.postMessage({sourceName:s,targetName:r,stream:u,streamId:e,reason:g(t)})}))):n.postMessage({sourceName:s,targetName:r,stream:u,streamId:e,success:!0});break;case h:(0,i.assert)(f,"enqueue should have stream controller"),f.isClosed||f.controller.enqueue(t.chunk);break;case l:(0,i.assert)(f,"close should have stream controller"),f.isClosed||(f.isClosed=!0,f.controller.close(),this.#Kr(f,e));break;case d:(0,i.assert)(f,"error should have stream controller"),f.controller.error(g(t.reason)),this.#Kr(f,e);break;case o:t.success?f.cancelCall.resolve():f.cancelCall.reject(g(t.reason)),this.#Kr(f,e);break;case a:m&&(new Promise((function(e){e(m.onCancel?.(g(t.reason)))})).then((function(){n.postMessage({sourceName:s,targetName:r,stream:o,streamId:e,success:!0})}),(function(t){n.postMessage({sourceName:s,targetName:r,stream:o,streamId:e,reason:g(t)})})),m.sinkCapability.reject(g(t.reason)),m.isCancelled=!0,delete this.streamSinks[e]);break;default:throw new Error("Unexpected stream case")}}async#Kr(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},825:(t,e,s)=>{s.d(e,{MurmurHash3_64:()=>a});var i=s(266);const r=4294901760,n=65535;class a{constructor(t){this.h1=t?4294967295&t:3285377520,this.h2=t?4294967295&t:3285377520}update(t){let e,s;if("string"==typeof t){e=new Uint8Array(2*t.length);for(let i=s=0,r=t.length;i<r;i++){var a=t.charCodeAt(i);a<=255?e[s++]=a:(e[s++]=a>>>8,e[s++]=255&a)}}else{if(!(0,i.isArrayBuffer)(t))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");e=t.slice(),s=e.byteLength}var o=s>>2,l=s-4*o,h=new Uint32Array(e.buffer,0,o);let d,c=0,u=this.h1,p=this.h2;var g=3432918353,f=461845907;for(let t=0;t<o;t++)1&t?(c=(c=(c=(c=h[t])*g&r|11601*c&n)<<15|c>>>17)*f&r|13715*c&n,u=5*(u=(u^=c)<<13|u>>>19)+3864292196):(d=(d=(d=(d=h[t])*g&r|11601*d&n)<<15|d>>>17)*f&r|13715*d&n,p=5*(p=(p^=d)<<13|p>>>19)+3864292196);switch(c=0,l){case 3:c^=e[4*o+2]<<16;case 2:c^=e[4*o+1]<<8;case 1:c=(c=(c=(c^=e[4*o])*g&r|11601*c&n)<<15|c>>>17)*f&r|13715*c&n,1&o?u^=c:p^=c}this.h1=u,this.h2=p}hexdigest(){var t=this.h1,e=this.h2;t=3981806797*(t^=e>>>1)&r|36045*t&n;return t=444984403*(t^=(e=4283543511*e&r|(2950163797*(e<<16|t>>>16)&r)>>>16)>>>1)&r|60499*t&n,((t^=(e=3301882366*e&r|(3120437893*(e<<16|t>>>16)&r)>>>16)>>>1)>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}},266:(t,e,s)=>{s.d(e,{AbortException:()=>I,AnnotationBorderStyleType:()=>v,AnnotationEditorParamsType:()=>u,AnnotationEditorPrefix:()=>d,AnnotationEditorType:()=>c,AnnotationMode:()=>h,AnnotationPrefix:()=>U,AnnotationType:()=>m,BaseException:()=>E,CMapCompressionType:()=>y,FONT_IDENTITY_MATRIX:()=>n,FeatureTest:()=>F,FormatError:()=>L,IDENTITY_MATRIX:()=>r,ImageKind:()=>f,InvalidPDFException:()=>P,LINE_FACTOR:()=>o,MAX_IMAGE_SIZE_TO_CACHE:()=>a,MissingPDFException:()=>M,OPS:()=>w,PasswordException:()=>S,PasswordResponses:()=>x,PermissionFlag:()=>p,PromiseCapability:()=>N,RenderingIntentFlag:()=>l,TextRenderingMode:()=>g,UnexpectedResponseException:()=>R,UnknownErrorException:()=>T,Util:()=>B,VerbosityLevel:()=>b,assert:()=>function(t,e){t||_(e)},bytesToString:()=>D,createValidAbsoluteUrl:()=>function(t,e=null,s=null){if(t)try{if(s&&"string"==typeof t&&(s.addDefaultProtocol&&t.startsWith("www.")&&2<=t.match(/\./g)?.length&&(t="http://"+t),s.tryConvertEncoding))try{t=function(t){return decodeURIComponent(escape(t))}(t)}catch{}var i=e?new URL(t,e):new URL(t);if(function(t){switch(t?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return 1;default:return}}(i))return i}catch{}return null},getUuid:()=>function(){if("undefined"!=typeof crypto&&"function"==typeof crypto?.randomUUID)return crypto.randomUUID();var t=new Uint8Array(32);if("undefined"!=typeof crypto&&"function"==typeof crypto?.getRandomValues)crypto.getRandomValues(t);else for(let e=0;e<32;e++)t[e]=Math.floor(255*Math.random());return D(t)},getVerbosityLevel:()=>function(){return A},info:()=>function(t){A>=b.INFOS&&console.log("Info: "+t)},isArrayBuffer:()=>function(t){return"object"==typeof t&&void 0!==t?.byteLength},isNodeJS:()=>i,normalizeUnicode:()=>function(t){return z||(z=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,j=new Map([["ﬅ","ſt"]])),t.replaceAll(z,((t,e,s)=>e?e.normalize("NFKC"):j.get(s)))},objectFromMap:()=>function(t){var e=Object.create(null);for(var[s,i]of t)e[s]=i;return e},setVerbosityLevel:()=>function(t){Number.isInteger(t)&&(A=t)},shadow:()=>C,string32:()=>function(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)},stringToBytes:()=>function(t){"string"!=typeof t&&_("Invalid argument for stringToBytes");var e=t.length,s=new Uint8Array(e);for(let i=0;i<e;++i)s[i]=255&t.charCodeAt(i);return s},unreachable:()=>_,warn:()=>function(t){A>=b.WARNINGS&&console.log("Warning: "+t)}});const i=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type),r=[1,0,0,1,0,0],n=[.001,0,0,.001,0,0],a=1e7,o=1.35,l={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},h={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},d="pdfjs_internal_editor_",c={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},u={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32},p={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},g={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},f={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},m={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},v={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},b={ERRORS:0,WARNINGS:1,INFOS:5},y={NONE:0,BINARY:1},w={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},x={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let A=b.WARNINGS;function _(t){throw new Error(t)}function C(t,e,s,i=!1){return Object.defineProperty(t,e,{value:s,enumerable:!i,configurable:!0,writable:!1}),s}k.prototype=new Error;const E=k.constructor=k;function k(t,e){this.constructor===k&&_("Cannot initialize BaseException."),this.message=t,this.name=e}class S extends E{constructor(t,e){super(t,"PasswordException"),this.code=e}}class T extends E{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class P extends E{constructor(t){super(t,"InvalidPDFException")}}class M extends E{constructor(t){super(t,"MissingPDFException")}}class R extends E{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class L extends E{constructor(t){super(t,"FormatError")}}class I extends E{constructor(t){super(t,"AbortException")}}function D(t){"object"==typeof t&&void 0!==t?.length||_("Invalid argument for bytesToString");var e=t.length;if(e<8192)return String.fromCharCode.apply(null,t);var s=[];for(let r=0;r<e;r+=8192){var i=Math.min(r+8192,e);i=t.subarray(r,i);s.push(String.fromCharCode.apply(null,i))}return s.join("")}class F{static get isLittleEndian(){return C(this,"isLittleEndian",function(){var t;return 1===((t=new Uint8Array(4))[0]=1,t=new Uint32Array(t.buffer,0,1))[0]}())}static get isEvalSupported(){return C(this,"isEvalSupported",function(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return C(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}static get platform(){return"undefined"!=typeof navigator&&"string"==typeof navigator?.platform?C(this,"platform",{isMac:navigator.platform.includes("Mac")}):C(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){return C(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const O=[...Array(256).keys()].map((t=>t.toString(16).padStart(2,"0")));class B{static makeHexColor(t,e,s){return"#"+O[t]+O[e]+O[s]}static scaleMinMax(t,e){let s;t[0]?(t[0]<0&&(s=e[0],e[0]=e[1],e[1]=s),e[0]*=t[0],e[1]*=t[0],t[3]<0&&(s=e[2],e[2]=e[3],e[3]=s),e[2]*=t[3],e[3]*=t[3]):(s=e[0],e[0]=e[2],e[2]=s,s=e[1],e[1]=e[3],e[3]=s,t[1]<0&&(s=e[2],e[2]=e[3],e[3]=s),e[2]*=t[1],e[3]*=t[1],t[2]<0&&(s=e[0],e[0]=e[1],e[1]=s),e[0]*=t[2],e[1]*=t[2]),e[0]+=t[4],e[1]+=t[4],e[2]+=t[5],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){return[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]}static applyInverseTransform(t,e){var s=e[0]*e[3]-e[1]*e[2];return[(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/s,(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/s]}static getAxialAlignedBoundingBox(t,e){var s=this.applyTransform(t,e),i=this.applyTransform(t.slice(2,4),e),r=this.applyTransform([t[0],t[3]],e);t=this.applyTransform([t[2],t[1]],e);return[Math.min(s[0],i[0],r[0],t[0]),Math.min(s[1],i[1],r[1],t[1]),Math.max(s[0],i[0],r[0],t[0]),Math.max(s[1],i[1],r[1],t[1])]}static inverseTransform(t){var e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){var e=[t[0],t[2],t[1],t[3]],s=t[0]*e[0]+t[1]*e[2],i=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2];t=(e=(s+(t=t[2]*e[1]+t[3]*e[3]))/2)-(s=Math.sqrt((s+t)**2-4*(s*t-r*i))/2)||1;return[Math.sqrt(e+s||1),Math.sqrt(t)]}static normalizeRect(t){var e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){var s,i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));return r<i||(s=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),(t=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3])))<s)?null:[i,s,r,t]}static bezierBoundingBox(t,e,s,i,r,n,a,o){var l=[],h=[[],[]];let d,c,u,p,g,f,m,v;for(let h=0;h<2;++h)u=0===h?(c=6*t-12*s+6*r,d=-3*t+9*s-9*r+3*a,3*s-3*t):(c=6*e-12*i+6*n,d=-3*e+9*i-9*n+3*o,3*i-3*e),Math.abs(d)<1e-12?Math.abs(c)<1e-12||0<(p=-u/c)&&p<1&&l.push(p):(m=c*c-4*u*d,v=Math.sqrt(m),m<0||(0<(g=(-c+v)/(2*d))&&g<1&&l.push(g),0<(f=(-c-v)/(2*d))&&f<1&&l.push(f)));let b,y=l.length;for(var w=y;y--;)b=1-(p=l[y]),h[0][y]=b*b*b*t+3*b*b*p*s+3*b*p*p*r+p*p*p*a,h[1][y]=b*b*b*e+3*b*b*p*i+3*b*p*p*n+p*p*p*o;return h[0][w]=t,h[1][w]=e,h[0][w+1]=a,h[1][w+1]=o,h[0].length=h[1].length=w+2,[Math.min(...h[0]),Math.min(...h[1]),Math.max(...h[0]),Math.max(...h[1])]}}class N{#Xr=!1;constructor(){this.promise=new Promise(((t,e)=>{this.resolve=e=>{this.#Xr=!0,t(e)},this.reject=t=>{this.#Xr=!0,e(t)}}))}get settled(){return this.#Xr}}let z=null,j=null;const U="pdfjs_internal_id_"}},Pi={};function Mi(t){var e=Pi[t];return void 0!==e||(e=Pi[t]={exports:{}},Ti[t](e,e.exports,Mi)),e.exports}Ci="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",Ei="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",ki="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",Si=t=>{t&&t.d<1&&(t.d=1,t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},Mi.a=(t,e,s)=>{s&&((i=[]).d=-1);var i,r,n,a,o=new Set,l=t.exports,h=new Promise(((t,e)=>{a=e,n=t}));h[Ei]=l,h[Ci]=t=>(i&&t(i),o.forEach(t),h.catch((t=>{}))),t.exports=h,e((t=>{r=t.map((t=>{if(null!==t&&"object"==typeof t){if(t[Ci])return t;var e,s;if(t.then)return(e=[]).d=0,t.then((t=>{s[Ei]=t,Si(e)}),(t=>{s[ki]=t,Si(e)})),(s={})[Ci]=t=>t(e),s}var i={};return i[Ci]=t=>{},i[Ei]=t,i}));var e,s=()=>r.map((t=>{if(t[ki])throw t[ki];return t[Ei]}));return t=new Promise((t=>{(e=()=>t(s)).r=0;var n=t=>t!==i&&!o.has(t)&&(o.add(t),t)&&!t.d&&(e.r++,t.push(e));r.map((t=>t[Ci](n)))})),e.r?t:s()}),(t=>(t?a(h[ki]=t):n(l),Si(i)))),i&&i.d<0&&(i.d=0)},Mi.d=(t,e)=>{for(var s in e)Mi.o(e,s)&&!Mi.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},Mi.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Ri=Mi(907),Li=((Ri=globalThis.pdfjsLib=await(globalThis.pdfjsLibPromise=Ri)).AbortException,Ri.AnnotationEditorLayer,Ri.AnnotationEditorParamsType,Ri.AnnotationEditorType,Ri.AnnotationEditorUIManager,Ri.AnnotationLayer,Ri.AnnotationMode,Ri.CMapCompressionType,Ri.ColorPicker,Ri.DOMSVGFactory,Ri.DrawLayer,Ri.FeatureTest,Ri.GlobalWorkerOptions),Ii=(Ri.ImageKind,Ri.InvalidPDFException,Ri.MissingPDFException,Ri.OPS,Ri.Outliner,Ri.PDFDataRangeTransport,Ri.PDFDateString,Ri.PDFWorker,Ri.PasswordResponses,Ri.PermissionFlag,Ri.PixelsPerInch,Ri.PromiseCapability,Ri.RenderingCancelledException,Ri.UnexpectedResponseException,Ri.Util,Ri.VerbosityLevel,Ri.XfaLayer,Ri.build,Ri.createValidAbsoluteUrl,Ri.fetchData,Ri.getDocument);Ri.getFilenameFromUrl,Ri.getPdfFilenameFromUrl,Ri.getXfaPageViewport,Ri.isDataScheme,Ri.isPdfFile,Ri.noContextMenu,Ri.normalizeUnicode,Ri.renderTextLayer,Ri.setLayerDimensions,Ri.shadow,Ri.updateTextLayer,Ri.version;const Di=it('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M19 3H5C3.89543 3 3 3.89543 3 5V19C3 20.1046 3.89543 21 5 21H19C20.1046 21 21 20.1046 21 19V5C21 3.89543 20.1046 3 19 3Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M9 11C10.1046 11 11 10.1046 11 9C11 7.89543 10.1046 7 9 7C7.89543 7 7 7.89543 7 9C7 10.1046 7.89543 11 9 11Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M21 14.9999L17.914 11.9139C17.5389 11.539 17.0303 11.3284 16.5 11.3284C15.9697 11.3284 15.4611 11.539 15.086 11.9139L6 20.9999" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">'),Fi=()=>Di(),Oi=it('<div class="flex flex-col justify-end mb-2 items-end guest-container"><canvas class="mr-2" width="304" height="138"></canvas><span class="px-4 py-2 mr-2 whitespace-pre-wrap max-w-full chatbot-guest-bubble chatbot-file-bubble flex" data-testid="guest-bubble"> <!> '),Bi=(ve.setOptions({isNoP:!0}),t=>{let e;Li.workerSrc="https://cdn.jsdelivr.net/npm/pdfjs-dist@4.0.379/build/pdf.worker.mjs",k((async()=>{if(e.getContext){const r=e.getContext("2d");if(t.message.name.toLowerCase().includes(".pdf")){var s=await(await Ii(await t.message.file.arrayBuffer()).promise).getPage(1),i=r.canvas.width/s.getViewport({scale:1}).width;i=s.getViewport({scale:i});await s.render({viewport:i,canvasContext:r}).promise}else{const e=new Image;e.onload=function(){var t=r.canvas.width/e.width;r.drawImage(e,0,0,e.width*t,e.height*t)},e.src=t.message.source}}}));const s=C((()=>t.message.name.includes(".pdf")?H(_i,{}):H(Fi,{})));{const i=Oi(),r=i.firstChild,n=r.nextSibling,a=n.firstChild.nextSibling;a.nextSibling,i.style.setProperty("margin-left","50px");return"function"==typeof e?lt(e,r):e=r,r.style.setProperty("border-radius","5px 5px 0px 0px"),ht(n,s,a),ht(n,(()=>t.message.name),null),ht(i,H(X,{get when(){return t.showAvatar},get children(){return H(ie,{get initialAvatarSrc(){return t.avatarSrc}})}}),null),A((e=>{var s=t.backgroundColor??"#3B81F6",i=t.textColor??"#ffffff";return s!==e._v$&&(null!=(e._v$=s)?n.style.setProperty("background-color",s):n.style.removeProperty("background-color")),i!==e._v$2&&(null!=(e._v$2=i)?n.style.setProperty("color",i):n.style.removeProperty("color")),e}),{_v$:void 0,_v$2:void 0}),i}}),Ni=it('<svg width="55" height="54" viewBox="0 0 55 54" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="uiw:loading" clip-path="url(#clip0_5250_254)"><path id="Vector" fill-rule="evenodd" clip-rule="evenodd" d="M30.175 42.8C31.5939 42.8 32.9547 43.3637 33.958 44.367C34.9613 45.3703 35.525 46.7311 35.525 48.15C35.525 49.5689 34.9613 50.9297 33.958 51.933C32.9547 52.9363 31.5939 53.5 30.175 53.5C28.7561 53.5 27.3953 52.9363 26.392 51.933C25.3887 50.9297 24.825 49.5689 24.825 48.15C24.825 46.7311 25.3887 45.3703 26.392 44.367C27.3953 43.3637 28.7561 42.8 30.175 42.8ZM13.4322 34.775C15.2058 34.775 16.9068 35.4796 18.161 36.7337C19.4151 37.9879 20.1197 39.6889 20.1197 41.4625C20.1197 43.2361 19.4151 44.9371 18.161 46.1913C16.9068 47.4454 15.2058 48.15 13.4322 48.15C11.6585 48.15 9.95755 47.4454 8.7034 46.1913C7.44925 44.9371 6.74467 43.2361 6.74467 41.4625C6.74467 39.6889 7.44925 37.9879 8.7034 36.7337C9.95755 35.4796 11.6585 34.775 13.4322 34.775ZM44.4033 36.1125C45.8222 36.1125 47.183 36.6762 48.1863 37.6795C49.1897 38.6828 49.7533 40.0436 49.7533 41.4625C49.7533 42.8814 49.1897 44.2422 48.1863 45.2455C47.183 46.2488 45.8222 46.8125 44.4033 46.8125C42.9844 46.8125 41.6236 46.2488 40.6203 45.2455C39.617 44.2422 39.0533 42.8814 39.0533 41.4625C39.0533 40.0436 39.617 38.6828 40.6203 37.6795C41.6236 36.6762 42.9844 36.1125 44.4033 36.1125ZM50.2375 24.9283C51.3017 24.9283 52.3223 25.3511 53.0748 26.1036C53.8273 26.856 54.25 27.8766 54.25 28.9408C54.25 30.005 53.8273 31.0256 53.0748 31.7781C52.3223 32.5306 51.3017 32.9533 50.2375 32.9533C49.1733 32.9533 48.1527 32.5306 47.4002 31.7781C46.6477 31.0256 46.225 30.005 46.225 28.9408C46.225 27.8766 46.6477 26.856 47.4002 26.1036C48.1527 25.3511 49.1733 24.9283 50.2375 24.9283ZM7.4375 16.05C9.21113 16.05 10.9121 16.7546 12.1663 18.0087C13.4204 19.2629 14.125 20.9639 14.125 22.7375C14.125 24.5111 13.4204 26.2121 12.1663 27.4663C10.9121 28.7204 9.21113 29.425 7.4375 29.425C5.66386 29.425 3.96287 28.7204 2.70872 27.4663C1.45457 26.2121 0.75 24.5111 0.75 22.7375C0.75 20.9639 1.45457 19.2629 2.70872 18.0087C3.96287 16.7546 5.66386 16.05 7.4375 16.05ZM48.3275 13.9287C49.037 13.9287 49.7174 14.2106 50.2191 14.7122C50.7207 15.2139 51.0025 15.8943 51.0025 16.6037C51.0025 17.3132 50.7207 17.9936 50.2191 18.4952C49.7174 18.9969 49.037 19.2787 48.3275 19.2787C47.6181 19.2787 46.9377 18.9969 46.436 18.4952C45.9344 17.9936 45.6525 17.3132 45.6525 16.6037C45.6525 15.8943 45.9344 15.2139 46.436 14.7122C46.9377 14.2106 47.6181 13.9287 48.3275 13.9287ZM22.15 0C24.2784 0 26.3196 0.845489 27.8245 2.35047C29.3295 3.85545 30.175 5.89664 30.175 8.025C30.175 10.1534 29.3295 12.1946 27.8245 13.6995C26.3196 15.2045 24.2784 16.05 22.15 16.05C20.0216 16.05 17.9804 15.2045 16.4755 13.6995C14.9705 12.1946 14.125 10.1534 14.125 8.025C14.125 5.89664 14.9705 3.85545 16.4755 2.35047C17.9804 0.845489 20.0216 0 22.15 0ZM42.2125 8.025C42.5672 8.025 42.9074 8.16591 43.1583 8.41675C43.4091 8.66757 43.55 9.00777 43.55 9.3625C43.55 9.71723 43.4091 10.0574 43.1583 10.3083C42.9074 10.5591 42.5672 10.7 42.2125 10.7C41.8578 10.7 41.5176 10.5591 41.2667 10.3083C41.0159 10.0574 40.875 9.71723 40.875 9.3625C40.875 9.00777 41.0159 8.66757 41.2667 8.41675C41.5176 8.16591 41.8578 8.025 42.2125 8.025Z" fill="#2A767E"></path></g><defs><clipPath id="clip0_5250_254"><rect width="53.5" height="53.5" fill="white" transform="translate(0.75)">'),zi=()=>Ni(),ji=it('<div class="flex justify-start mb-2 items-start host-container"><span class="px-4 py-4 ml-2 whitespace-pre-wrap max-w-full chatbot-host-bubble flex flex-col gap-2 items-center justify-center text-center" data-testid="host-bubble"><div class="chatbot-loading-icon-animation"></div>Estamos quase lá! Por favor, aguarde enquanto preparamos o resumo do seu laudo médico...'),Ui=t=>{{const e=ji(),s=e.firstChild,i=s.firstChild;return e.style.setProperty("margin-right","50px"),ht(e,H(X,{get when(){return t.showAvatar},get children(){return H(ie,{get initialAvatarSrc(){return t.avatarSrc}})}}),s),s.style.setProperty("border-radius","6px"),ht(i,H(zi,{})),A((e=>{var i=t.backgroundColor??"#f7f8ff",r=t.textColor??"#303235";return i!==e._v$&&(null!=(e._v$=i)?s.style.setProperty("background-color",i):s.style.removeProperty("background-color")),r!==e._v$2&&(null!=(e._v$2=r)?s.style.setProperty("color",r):s.style.removeProperty("color")),e}),{_v$:void 0,_v$2:void 0}),e}},Hi=["png","jpg","jpeg","gif"],qi=t=>(t=t.split(".").reverse()[0],Hi.includes(t)),$i=it('<div data-modal-target="defaultModal" data-modal-toggle="defaultModal" class="flex justify-start mb-2 items-start animate-fade-in host-container hover:brightness-90 active:brightness-75"><span class="px-2 py-1 ml-1 whitespace-pre-wrap max-w-full chatbot-host-bubble" data-testid="host-bubble">'),Vi=t=>{return s=(e=$i()).firstChild,e.$$click=()=>t.onPromptClick?.(),s.style.setProperty("width","max-content"),s.style.setProperty("font-size","15px"),s.style.setProperty("border-radius","15px"),s.style.setProperty("cursor","pointer"),ht(s,(()=>t.prompt)),e;var e,s},Gi=(rt(["click"]),it('<div><div class="flex w-full h-[calc(100vh-117px)] justify-center"><div class="overflow-y-scroll min-w-full w-full min-h-[calc(100vh-117px)] px-3 pt-20 relative scrollable-container chatbot-chat-view scroll-smooth">')),Wi=it("<div>"),Ki=it('<div class="chatbot-container p-4">'),Xi=it('<button class="header-button">+ Novo Laudo médico'),Yi=it('<span class="px-3 whitespace-pre-wrap font-semibold max-w-full">'),Ji=it("<span>Clear"),Qi=it("<div><div>"),Zi=it('<div class="w-full h-32">'),tr="Hi there! How can I help?",er=t=>{const e=G({showTitle:!1},t);let s,i,r;const[n,a]=x(),[o,l]=x(!1),[h,d]=x(!1),[c,u]=x(""),[p,g]=x(!1),[f,m]=x(!1),[v,b]=x({}),[y,w]=x([{message:e.welcomeMessage??tr,type:"apiMessage"}],{equals:!1}),[S,T]=x(""),[P,M]=x(!1),[R,L]=x(Bt()),[I,D]=x([],{equals:!1}),F=(k((()=>{if(t?.observersConfig){const{observeUserInput:e,observeLoading:s,observeMessages:i}=t.observersConfig;"function"==typeof e&&C((()=>{e(c())})),"function"==typeof s&&C((()=>{s(p())})),"function"==typeof i&&C((()=>{i(y())}))}i&&setTimeout((()=>{s?.scrollTo(0,s.scrollHeight)}),50)})),()=>{setTimeout((()=>{s?.scrollTo(0,s.scrollHeight)}),50)}),O=t=>{w((e=>[...e.map(((s,i)=>i===e.length-1?{...s,message:s.message+t}:s))]))},B=t=>{w((e=>[...e.map(((s,i)=>i===e.length-1?{...s,sourceDocuments:t}:s))]))},N=async(t,s=!1)=>{if(u(t),""!==t.trim()){g(!0),F();const a=e.welcomeMessage??tr;var i,r=y().filter((t=>t.message!==a));s=(s||w((e=>[...e,{message:t,type:"userMessage"}])),{question:t,history:r,overrideConfig:{text:n()},chatId:R()});if((r=(e.chatflowConfig&&(s.overrideConfig=e.chatflowConfig),P()&&(s.socketIOClientId=S()),await Tt({chatflowid:e.chatflowid,apiHost:e.apiHost,body:s}))).data){const t=r.data;if(!P()){let e="";e=t.text||(t.json?JSON.stringify(t.json,null,2):JSON.stringify(t,null,2)),w((s=>[...s,{message:e,sourceDocuments:t?.sourceDocuments,fileAnnotations:t?.fileAnnotations,type:"apiMessage"}]))}g(!1),u(""),F()}r.error&&(r="string"==typeof(s=r.error)?s:s.response.data||s.response.status+": "+s.response.statusText,[i="Oops! There seems to be an error. Please try again."]=[r],w((t=>[...t,{message:i,type:"apiMessage"}])),g(!1),u(""),F())}},z=()=>{try{localStorage.removeItem(e.chatflowid+"_EXTERNAL"),L(Bt()),w([{message:e.welcomeMessage??tr,type:"apiMessage"}])}catch(e){var t=e.response.data||e.response.status+": "+e.response.statusText;console.error("error: "+t)}},j=(_((()=>{y()&&F()})),_((()=>{e.fontSize&&r&&(r.style.fontSize=e.fontSize+"px")})),_(function(t,e,s){const i=Array.isArray(t);let r,n=s&&s.defer;return s=>{let a;if(i){a=Array(t.length);for(let e=0;e<t.length;e++)a[e]=t[e]()}else a=t();var o;if(!n)return o=E((()=>e(a,r,s))),r=a,o;n=!1}}(n,(t=>{o()&&void 0!==t&&N("resuma este laudo médico",!0)}))),_((async()=>{var t=((t=localStorage.getItem(e.chatflowid+"_EXTERNAL"))&&(t=JSON.parse(t),L(t.chatId),t=t.chatHistory.map((t=>{var e={message:t.message,type:t.type};return t.sourceDocuments&&(e.sourceDocuments=t.sourceDocuments),t.fileAnnotations&&(e.fileAnnotations=t.fileAnnotations),e})),w([...t])),await(({chatflowid:t,apiHost:e="http://localhost:3000"})=>_t({method:"GET",url:e+"/api/v1/chatflows-streaming/"+t}))({chatflowid:e.chatflowid,apiHost:e.apiHost})).data;t&&M(t?.isStreaming??!1),t=await(({chatflowid:t,apiHost:e="http://localhost:3000"})=>_t({method:"GET",url:e+"/api/v1/public-chatbotConfig/"+t}))({chatflowid:e.chatflowid,apiHost:e.apiHost});if(t.data){const e=t.data;if(e.starterPrompts){const t=[];Object.getOwnPropertyNames(e.starterPrompts).forEach((s=>{t.push(e.starterPrompts[s].prompt)})),D(t)}}const s=si(e.apiHost);return s.on("connect",(()=>{T(s.id),$()})),s.on("start",(()=>{w((t=>[...t,{message:"",type:"apiMessage"}]))})),s.on("sourceDocuments",B),s.on("token",O),()=>{u(""),g(!1),w([{message:e.welcomeMessage??tr,type:"apiMessage"}]),s&&(s.disconnect(),T(""))}})),t=>{try{return new URL(t)}catch(t){}}),U=async t=>{l(!0),g(!0),d(!1),w([{message:e.welcomeMessage??tr,type:"apiMessage"},{message:t[0],type:"userFile"}]),t=(await(async({extractUrl:t="http://localhost:3000",body:e})=>{var s=new FormData;return s.append("files",e.files.file,e.files.name),s.append("question",""),(await fetch(t,{method:"POST",body:s})).json()})({extractUrl:qi(t[0].name)?e.fileTextExtractionUrl.image:e.fileTextExtractionUrl.default,body:{files:t[0]}})).text,t&&a(t)},q=()=>{d(!0)},$=async()=>{var t=new URLSearchParams(window.location.search).get("laudo");if(t)try{var e=t.replace(/^"|"$/g,""),s=decodeURIComponent(e),i=await fetch(s);if(!i.ok)throw new Error("Erro ao baixar o PDF");var r=i.headers.get("content-type");if(!r||!r.includes("pdf"))throw new Error("O arquivo baixado não é um PDF");var n=await i.blob();if(0===n.size)throw new Error("O Blob está vazio");var a=new File([n],"laudo.pdf",{type:"application/pdf"}),o={source:e,name:a.name,size:a.size,file:a};U([o])}catch(t){console.error("Erro ao processar o arquivo:",t)}else console.log("Não tem parâmetro 'laudo'")};return[C((()=>{const t=C((()=>!!o()));return()=>{return t()&&((e=Xi()).$$click=q,e);var e}})()),(()=>{const t=Gi(),n=t.firstChild,a=n.firstChild;var o;return"function"==typeof(o=("function"==typeof(o=r)?lt(o,t):r=t,s))?lt(o,a):s=a,a.style.setProperty("padding-bottom","100px"),a.style.setProperty("padding-top","80px"),ht(a,H(K,{get each(){return[...y()]},children:(t,s)=>[C((()=>{const s=C((()=>"userMessage"===t.type));return()=>s()&&H(we,{get message(){return t.message},get backgroundColor(){return e.userMessage?.backgroundColor},get textColor(){return e.userMessage?.textColor},get showAvatar(){return e.userMessage?.showAvatar},get avatarSrc(){return e.userMessage?.avatarSrc}})})()),C((()=>{const s=C((()=>"apiMessage"===t.type));return()=>s()&&H(Ae,{get message(){return t.message},get fileAnnotations(){return t.fileAnnotations},get apiHost(){return e.apiHost},get backgroundColor(){return e.botMessage?.backgroundColor},get textColor(){return e.botMessage?.textColor},get showAvatar(){return e.botMessage?.showAvatar},get avatarSrc(){return e.botMessage?.avatarSrc}})})()),C((()=>{const s=C((()=>"userFile"===t.type));return()=>s()&&H(Bi,{get message(){return t.message},get backgroundColor(){return e.userMessage?.backgroundColor},get textColor(){return e.userMessage?.textColor},get showAvatar(){return e.userMessage?.showAvatar},get avatarSrc(){return e.userMessage?.avatarSrc}})})()),C((()=>{const e=C((()=>!("userMessage"!==t.type||!p()||s()!==y().length-1)));return()=>e()&&H(ke,{})})()),C((()=>{const i=C((()=>!("userFile"!==t.type||!p()||s()!==y().length-1)));return()=>i()&&H(Ui,{get backgroundColor(){return e.botMessage?.backgroundColor},get textColor(){return e.botMessage?.textColor},get showAvatar(){return e.botMessage?.showAvatar},get avatarSrc(){return e.botMessage?.avatarSrc}})})()),C((()=>{const e=C((()=>!(!t.sourceDocuments||!t.sourceDocuments.length)));return()=>{return e()&&((s=Wi()).style.setProperty("display","flex"),s.style.setProperty("flex-direction","row"),s.style.setProperty("width","100%"),ht(s,H(K,{get each(){return[...(t=>{const e=[],s=[];return t.sourceDocuments.forEach((t=>{j(t.metadata.source)&&!e.includes(t.metadata.source)?(e.push(t.metadata.source),s.push(t)):j(t.metadata.source)||s.push(t)})),s})(t)]},children:t=>{const e=j(t.metadata.source);return H(Te,{get pageContent(){return e?e.pathname:t.pageContent},get metadata(){return t.metadata},onSourceClick:()=>{e?window.open(t.metadata.source,"_blank"):(b(t),m(!0))}})}})),s);var s}})())]})),ht(n,(()=>{const t=C((()=>!!e.showTitle));return()=>{if(t()){const t=Qi(),s=t.firstChild;return t.style.setProperty("display","flex"),t.style.setProperty("flex-direction","row"),t.style.setProperty("align-items","center"),t.style.setProperty("height","50px"),t.style.setProperty("position","absolute"),t.style.setProperty("top","0"),t.style.setProperty("left","0"),t.style.setProperty("width","100%"),ht(t,H(X,{get when(){return e.titleAvatarSrc},get children(){return[((t=Wi()).style.setProperty("width","15px"),t),H(ie,{get initialAvatarSrc(){return e.titleAvatarSrc}})];var t}}),s),ht(t,H(X,{get when(){return e.title},get children(){var t=Yi();return ht(t,(()=>e.title)),t}}),s),s.style.setProperty("flex","1"),ht(t,H(Xt,{get sendButtonColor(){return e.bubbleTextColor},type:"button",get isDisabled(){return 1===y().length},class:"my-2 ml-2","on:click":z,get children(){var t=Ji();return t.style.setProperty("font-family","Poppins, sans-serif"),t}}),null),A((s=>{var i=e.bubbleBackgroundColor,r=e.bubbleTextColor,n=e.isFullPage?"0px":"6px",a=e.isFullPage?"0px":"6px";return i!==s._v$&&(null!=(s._v$=i)?t.style.setProperty("background",i):t.style.removeProperty("background")),r!==s._v$2&&(null!=(s._v$2=r)?t.style.setProperty("color",r):t.style.removeProperty("color")),n!==s._v$3&&(null!=(s._v$3=n)?t.style.setProperty("border-top-left-radius",n):t.style.removeProperty("border-top-left-radius")),a!==s._v$4&&(null!=(s._v$4=a)?t.style.setProperty("border-top-right-radius",a):t.style.removeProperty("border-top-right-radius")),s}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),t}return null}})(),null),ht(n,H(sr,{ref(t){"function"==typeof i?i(t):i=t}}),null),A((()=>at(t,"relative flex w-full h-[calc(100vh-117px)] text-base overflow-hidden bg-cover bg-center flex-col items-center chatbot-container "+e.class))),t})(),(ht(V=Ki(),(()=>{const t=C((()=>!!o()));return()=>t()?H(Zt,{get disabled(){return p()},get backgroundColor(){return e.textInput?.backgroundColor},get textColor(){return e.textInput?.textColor},get placeholder(){return p()?"Gerando resposta...":e.textInput?.placeholder},get sendButtonColor(){return e.textInput?.sendButtonColor},get fontSize(){return e.fontSize},get defaultValue(){return c()},onSubmit:N}):H(li,{get backgroundColor(){return e.buttonInput?.backgroundColor},get textColor(){return e.buttonInput?.textColor},onSubmit:()=>{d(!0)},children:"Enviar Laudo Médico"})})(),null),ht(V,H(X,{get when(){return C((()=>3===y().length))()&&!p()},get children(){return H(X,{get when(){return 0<I().length},get children(){var t=Wi();return t.style.setProperty("display","flex"),t.style.setProperty("flex-direction","row"),t.style.setProperty("padding","10px"),t.style.setProperty("width","96%"),t.style.setProperty("flex-wrap","wrap"),t.style.setProperty("position","absolute"),t.style.setProperty("bottom","106px"),ht(t,H(K,{get each(){return[...I()]},children:t=>H(Vi,{prompt:t,onPromptClick:()=>{N(t)}})})),t}})}}),null),ht(V,H(De,{get badgeBackgroundColor(){return e.badgeBackgroundColor},get poweredByTextColor(){return e.poweredByTextColor},botContainer:r}),null),V),C((()=>{const t=C((()=>!!f()));return()=>t()&&H(ai,{get isOpen(){return f()},get value(){return v()},onClose:()=>m(!1)})})()),C((()=>{const t=C((()=>!!h()));return()=>t()&&H(di,{get isOpen(){return h()},onClose:()=>d(!1),get children(){return H(xi,{onSubmit:U,get buttonInput(){return e.buttonInput}})}})})())];var V},sr=t=>{return e=Zi(),"function"==typeof(s=t.ref)?lt(s,e):t.ref=e,e;var e,s},ir=(rt(["click"]),it("<style>")),rr=it('<div part="bot">'),nr=t=>{const[e]=W(t,["theme"]),[s,i]=x(!1),[r,n]=x(!1);var a;return[(ht(a=ir(),wt),a),H(St,G((()=>e.theme?.button),{toggleBot:()=>{s()?i(!1):(r()||n(!0),i(!0))},get isBotOpened(){return s()}})),(()=>{const i=rr();return i.style.setProperty("transition","transform 200ms cubic-bezier(0, 1.2, 1, 1), opacity 150ms ease-out"),i.style.setProperty("transform-origin","bottom right"),i.style.setProperty("box-shadow","rgb(0 0 0 / 16%) 0px 5px 40px"),i.style.setProperty("z-index","42424242"),ht(i,H(X,{get when(){return r()},get children(){return H(er,{get badgeBackgroundColor(){return e.theme?.chatWindow?.backgroundColor},get bubbleBackgroundColor(){return e.theme?.button?.backgroundColor??"#3B81F6"},get bubbleTextColor(){return e.theme?.button?.iconColor??"white"},get showTitle(){return e.theme?.chatWindow?.showTitle},get title(){return e.theme?.chatWindow?.title},get titleAvatarSrc(){return e.theme?.chatWindow?.titleAvatarSrc},get welcomeMessage(){return e.theme?.chatWindow?.welcomeMessage},get poweredByTextColor(){return e.theme?.chatWindow?.poweredByTextColor},get textInput(){return e.theme?.chatWindow?.textInput},get botMessage(){return e.theme?.chatWindow?.botMessage},get userMessage(){return e.theme?.chatWindow?.userMessage},get fontSize(){return e.theme?.chatWindow?.fontSize},get chatflowid(){return t.chatflowid},get chatflowConfig(){return t.chatflowConfig},get apiHost(){return t.apiHost},get observersConfig(){return t.observersConfig},get fileTextExtractionUrl(){return t.fileTextExtractionUrl}})}})),A((r=>{var n=e.theme?.chatWindow?.height?e.theme?.chatWindow?.height.toString()+"px":"calc(100% - 100px)",a=e.theme?.chatWindow?.width?e.theme?.chatWindow?.width.toString()+"px":void 0,o=s()?"scale3d(1, 1, 1)":"scale3d(0, 0, 1)",l=e.theme?.chatWindow?.backgroundColor||"#ffffff",h="fixed sm:right-5 rounded-lg w-full sm:w-[400px] max-h-[704px]"+(s()?" opacity-1":" opacity-0 pointer-events-none")+("large"===t.theme?.button?.size?" bottom-24":" bottom-20");return n!==r._v$&&(null!=(r._v$=n)?i.style.setProperty("height",n):i.style.removeProperty("height")),a!==r._v$2&&(null!=(r._v$2=a)?i.style.setProperty("width",a):i.style.removeProperty("width")),o!==r._v$3&&(null!=(r._v$3=o)?i.style.setProperty("transform",o):i.style.removeProperty("transform")),l!==r._v$4&&(null!=(r._v$4=l)?i.style.setProperty("background-color",l):i.style.removeProperty("background-color")),h!==r._v$5&&at(i,r._v$5=h),r}),{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),i})()]},ar=it("<style>"),or=it("<div>"),lr=(t,{element:e})=>{const[s,i]=x(!1),r=new IntersectionObserver((t=>{t.some((t=>t.isIntersecting))&&i(!0)}));return k((()=>{r.observe(e)})),S((()=>{r.disconnect()})),[(ht(n=ar(),wt),n),H(X,{get when(){return s()},get children(){const e=or();return e.style.setProperty("margin","0px"),ht(e,H(er,{get badgeBackgroundColor(){return t.theme?.chatWindow?.backgroundColor},get bubbleBackgroundColor(){return t.theme?.button?.backgroundColor??"#3B81F6"},get bubbleTextColor(){return t.theme?.button?.iconColor??"white"},get showTitle(){return t.theme?.chatWindow?.showTitle},get title(){return t.theme?.chatWindow?.title},get titleAvatarSrc(){return t.theme?.chatWindow?.titleAvatarSrc},get welcomeMessage(){return t.theme?.chatWindow?.welcomeMessage},get poweredByTextColor(){return t.theme?.chatWindow?.poweredByTextColor},get textInput(){return t.theme?.chatWindow?.textInput},get buttonInput(){return t.theme?.chatWindow?.buttonInput},get botMessage(){return t.theme?.chatWindow?.botMessage},get userMessage(){return t.theme?.chatWindow?.userMessage},get fontSize(){return t.theme?.chatWindow?.fontSize},get chatflowid(){return t.chatflowid},get chatflowConfig(){return t.chatflowConfig},get apiHost(){return t.apiHost},get fileTextExtractionUrl(){return t.fileTextExtractionUrl},isFullPage:!0,get observersConfig(){return t.observersConfig}})),A((s=>{var i=t.theme?.chatWindow?.backgroundColor||"#ffffff",r=t.theme?.chatWindow?.height?t.theme?.chatWindow?.height.toString()+"px":"100vh",n=t.theme?.chatWindow?.width?t.theme?.chatWindow?.width.toString()+"px":"100%";return i!==s._v$&&(null!=(s._v$=i)?e.style.setProperty("background-color",i):e.style.removeProperty("background-color")),r!==s._v$2&&(null!=(s._v$2=r)?e.style.setProperty("height",r):e.style.removeProperty("height")),n!==s._v$3&&(null!=(s._v$3=n)?e.style.setProperty("width",n):e.style.removeProperty("width")),s}),{_v$:void 0,_v$2:void 0,_v$3:void 0}),e}})];var n},hr=t=>{var e=t.id?document.getElementById(t.id):document.querySelector("flowise-fullchatbot");if(!e)throw new Error("<flowise-fullchatbot> element not found.");Object.assign(e,t)},dr=t=>{var e=document.createElement("flowise-chatbot");Object.assign(e,t),document.body.appendChild(e)},cr=("undefined"!=typeof window&&(bt("flowise-fullchatbot",yt,lr),bt("flowise-chatbot",yt,nr)),{initFull:hr,init:dr});(t=>{"undefined"!=typeof window&&(window.Chatbot={...t})})(cr);var ur=Object.freeze({__proto__:null,default:{}});function pr(t,e,s){if(s||2===arguments.length)for(var i,r=0,n=e.length;r<n;r++)!i&&r in e||((i=i||Array.prototype.slice.call(e,0,r))[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var gr={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},fr=/([astvzqmhlc])([^astvzqmhlc]*)/gi,mr=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function vr(t){var e=[];return"M"!==(t=String(t).trim())[0]&&"m"!==t[0]||t.replace(fr,(function(t,s,i){var r=function(t){return(t=t.match(mr))?t.map(Number):[]}(i),n=s.toLowerCase(),a=s;if("m"===n&&2<r.length&&(e.push(pr([a],r.splice(0,2),!0)),n="l",a="m"===a?"l":"L"),!(r.length<gr[n]))for(e.push(pr([a],r.splice(0,gr[n]),!0));r.length>=gr[n]&&r.length&&gr[n];)e.push(pr([a],r.splice(0,gr[n]),!0));return""})),e}function br(t,e){var s=t.x*Math.cos(e)-t.y*Math.sin(e);e=t.y*Math.cos(e)+t.x*Math.sin(e);t.x=s,t.y=e}function yr(t,e,s){t.x+=e,t.y+=s}function wr(t,e){t.x*=e,t.y*=e}var xr=function(){function t(e){var s;this.commands=[],e&&e instanceof t?(s=this.commands).push.apply(s,e.commands):e&&(this.commands=vr(e))}return t.prototype.addPath=function(e){var s;e&&e instanceof t&&(s=this.commands).push.apply(s,e.commands)},t.prototype.moveTo=function(t,e){this.commands.push(["M",t,e])},t.prototype.lineTo=function(t,e){this.commands.push(["L",t,e])},t.prototype.arc=function(t,e,s,i,r,n){this.commands.push(["AC",t,e,s,i,r,!!n])},t.prototype.arcTo=function(t,e,s,i,r){this.commands.push(["AT",t,e,s,i,r])},t.prototype.ellipse=function(t,e,s,i,r,n,a,o){this.commands.push(["E",t,e,s,i,r,n,a,!!o])},t.prototype.closePath=function(){this.commands.push(["Z"])},t.prototype.bezierCurveTo=function(t,e,s,i,r,n){this.commands.push(["C",t,e,s,i,r,n])},t.prototype.quadraticCurveTo=function(t,e,s,i){this.commands.push(["Q",t,e,s,i])},t.prototype.rect=function(t,e,s,i){this.commands.push(["R",t,e,s,i])},t.prototype.roundRect=function(t,e,s,i,r){void 0===r?this.commands.push(["RR",t,e,s,i,0]):this.commands.push(["RR",t,e,s,i,r])},t}();function Ar(t,e){var s,i,r,n,a,o,l,h,d,c,u,p,g,f,m,v=0,b=0,y=null,w=null,x=null,A=null,_=null,C=null;t.beginPath();for(var E=0;E<e.length;++E){"S"!==(p=e[E][0])&&"s"!==p&&"C"!==p&&"c"!==p&&(w=y=null),"T"!==p&&"t"!==p&&"Q"!==p&&"q"!==p&&(A=x=null);var k=void 0;switch(p){case"m":case"M":k=e[E],"m"===p?(v+=k[1],b+=k[2]):(v=k[1],b=k[2]),"M"!==p&&_||(_={x:v,y:b}),t.moveTo(v,b);break;case"l":v+=(k=e[E])[1],b+=k[2],t.lineTo(v,b);break;case"L":v=(k=e[E])[1],b=k[2],t.lineTo(v,b);break;case"H":v=(k=e[E])[1],t.lineTo(v,b);break;case"h":v+=(k=e[E])[1],t.lineTo(v,b);break;case"V":b=(k=e[E])[1],t.lineTo(v,b);break;case"v":b+=(k=e[E])[1],t.lineTo(v,b);break;case"a":case"A":if(k=e[E],null===C)throw new Error("This should never happen");"a"===p?(v+=k[6],b+=k[7]):(v=k[6],b=k[7]),h=k[1],d=k[2],r=k[3]*Math.PI/180,s=!!k[4],i=!!k[5],br(o={x:(C.x-(m={x:v,y:b}).x)/2,y:(C.y-m.y)/2},-r),1<(n=o.x*o.x/(h*h)+o.y*o.y/(d*d))&&(h*=n=Math.sqrt(n),d*=n),n=h*h*d*d,a=h*h*o.y*o.y+d*d*o.x*o.x,wr(g={x:h*o.y/d,y:-d*o.x/h},i!=s?Math.sqrt((n-a)/a)||0:-Math.sqrt((n-a)/a)||0),s=Math.atan2((o.y-g.y)/d,(o.x-g.x)/h),n=Math.atan2(-(o.y+g.y)/d,-(o.x+g.x)/h),br(g,r),yr(g,(m.x+C.x)/2,(m.y+C.y)/2),t.save(),t.translate(g.x,g.y),t.rotate(r),t.scale(h,d),t.arc(0,0,1,s,n,!i),t.restore();break;case"C":y=(k=e[E])[3],w=k[4],v=k[5],b=k[6],t.bezierCurveTo(k[1],k[2],y,w,v,b);break;case"c":k=e[E],t.bezierCurveTo(k[1]+v,k[2]+b,k[3]+v,k[4]+b,k[5]+v,k[6]+b),y=k[3]+v,w=k[4]+b,v+=k[5],b+=k[6];break;case"S":k=e[E],null!==y&&null!==w||(y=v,w=b),t.bezierCurveTo(2*v-y,2*b-w,k[1],k[2],k[3],k[4]),y=k[1],w=k[2],v=k[3],b=k[4];break;case"s":k=e[E],null!==y&&null!==w||(y=v,w=b),t.bezierCurveTo(2*v-y,2*b-w,k[1]+v,k[2]+b,k[3]+v,k[4]+b),y=k[1]+v,w=k[2]+b,v+=k[3],b+=k[4];break;case"Q":x=(k=e[E])[1],A=k[2],v=k[3],b=k[4],t.quadraticCurveTo(x,A,v,b);break;case"q":x=(k=e[E])[1]+v,A=k[2]+b,v+=k[3],b+=k[4],t.quadraticCurveTo(x,A,v,b);break;case"T":null!==x&&null!==A||(x=v,A=b),x=2*v-x,A=2*b-A,v=(k=e[E])[1],b=k[2],t.quadraticCurveTo(x,A,v,b);break;case"t":null!==x&&null!==A||(x=v,A=b),x=2*v-x,A=2*b-A,v+=(k=e[E])[1],b+=k[2],t.quadraticCurveTo(x,A,v,b);break;case"z":case"Z":_&&(v=_.x,b=_.y),_=null,t.closePath();break;case"AC":v=(k=e[E])[1],b=k[2],l=k[3],s=k[4],n=k[5],f=k[6],t.arc(v,b,l,s,n,f);break;case"AT":a=(k=e[E])[1],o=k[2],v=k[3],b=k[4],l=k[5],t.arcTo(a,o,v,b,l);break;case"E":v=(k=e[E])[1],b=k[2],h=k[3],d=k[4],r=k[5],s=k[6],n=k[7],f=k[8],t.save(),t.translate(v,b),t.rotate(r),t.scale(h,d),t.arc(0,0,1,s,n,f),t.restore();break;case"R":v=(k=e[E])[1],b=k[2],c=k[3],u=k[4],_={x:v,y:b},t.rect(v,b,c,u);break;case"RR":v=(k=e[E])[1],b=k[2],c=k[3],u=k[4],m=k[5],_={x:v,y:b},t.roundRect(v,b,c,u,m)}C?(C.x=v,C.y=b):C={x:v,y:b}}}function _r(t,e,s,i,r){var n=this;if("number"==typeof(r=void 0===r?0:r)&&(r=[r]),Array.isArray(r)){if(0===r.length||4<r.length)throw new RangeError("Failed to execute 'roundRect' on '".concat(this.constructor.name,"': ").concat(r.length," radii provided. Between one and four radii are necessary."));if(r.forEach((function(t){if(t<0)throw new RangeError("Failed to execute 'roundRect' on '".concat(n.constructor.name,"': Radius value ").concat(t," is negative."))})),1===r.length&&0===r[0])return this.rect(t,e,s,i);var a,o,l,h=Math.min(s,i)/2,d=a=o=l=Math.min(h,r[0]);2===r.length&&(a=l=Math.min(h,r[1])),3===r.length&&(a=l=Math.min(h,r[1]),o=Math.min(h,r[2])),4===r.length&&(a=Math.min(h,r[1]),o=Math.min(h,r[2]),l=Math.min(h,r[3])),this.moveTo(t,e+i-l),this.arcTo(t,e,t+d,e,d),this.arcTo(t+s,e,t+s,e+a,a),this.arcTo(t+s,e+i,t+s-o,e+i,o),this.arcTo(t,e+i,t,e+i-l,l),this.moveTo(t,e)}}(function(t){var e,s,i,r;t&&t.CanvasRenderingContext2D&&!t.Path2D&&(e=t.CanvasRenderingContext2D,s=e.prototype.fill,i=e.prototype.stroke,r=e.prototype.isPointInPath,e.prototype.fill=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(!(e[0]instanceof xr))return s.apply(this,[t=e[0]||"nonzero"]);t=e[1]||"nonzero",Ar(this,e[0].commands),s.apply(this,[t])},e.prototype.stroke=function(t){t&&Ar(this,t.commands),i.apply(this)},e.prototype.isPointInPath=function(){for(var t,e,s,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return i[0]instanceof xr?(t=i[1],e=i[2],s=i[3]||"nonzero",Ar(this,i[0].commands),r.apply(this,[t,e,s])):r.apply(this,i)},t.Path2D=xr)})(window),function(t){var e;t&&t.CanvasRenderingContext2D&&(e=t.CanvasRenderingContext2D,t=t.Path2D,e&&!e.prototype.roundRect&&(e.prototype.roundRect=_r),t)&&!t.prototype.roundRect&&(t.prototype.roundRect=_r)}(window);var Cr=Object.freeze({__proto__:null});export{cr as default};
